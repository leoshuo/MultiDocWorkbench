# Document Workspace 1.6.5 å°ç™½å¼éƒ¨ç½²æŒ‡å—

> ç‰ˆæœ¬: 1.6.5  
> æ›´æ–°æ—¥æœŸ: 2026-01-24  
> é€‚ç”¨å¯¹è±¡: é›¶åŸºç¡€ç”¨æˆ·

---

## ğŸ“¦ ä½ ç°åœ¨æœ‰ä»€ä¹ˆ

æ‰“åŒ…å¥½çš„ç¦»çº¿éƒ¨ç½²æ–‡ä»¶ï¼š
```
document-workspace-1.6.5-offline.zip
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤ï¼ˆå…±5æ­¥ï¼‰

### ç¬¬1æ­¥ï¼šæŠŠæ–‡ä»¶ä¼ åˆ° Linux æœåŠ¡å™¨

**æ–¹æ³•Aï¼šç”¨ U ç›˜**
1. æŠŠ `document-workspace-1.6.5-offline.zip` å¤åˆ¶åˆ° U ç›˜
2. æŠŠ U ç›˜æ’åˆ° Linux æœåŠ¡å™¨
3. åœ¨ Linux ä¸Šå¤åˆ¶æ–‡ä»¶ï¼š
```bash
# æŒ‚è½½Uç›˜ï¼ˆæ ¹æ®å®é™…æƒ…å†µä¿®æ”¹è®¾å¤‡åï¼‰
sudo mount /dev/sdb1 /mnt

# å¤åˆ¶åˆ°ç”¨æˆ·ç›®å½•
cp /mnt/document-workspace-1.6.5-offline.zip ~/

# å¸è½½Uç›˜
sudo umount /mnt
```

**æ–¹æ³•Bï¼šç”¨ WinSCPï¼ˆå¦‚æœæœ‰ä¸´æ—¶ç½‘ç»œï¼‰**
1. ä¸‹è½½å®‰è£… WinSCPï¼šhttps://winscp.net/
2. è¿æ¥åˆ° Linux æœåŠ¡å™¨ï¼ˆè¾“å…¥IPã€ç”¨æˆ·åã€å¯†ç ï¼‰
3. æŠŠ zip æ–‡ä»¶æ‹–åˆ° Linux æœåŠ¡å™¨çš„ `/home/ä½ çš„ç”¨æˆ·å/` ç›®å½•

---

### ç¬¬2æ­¥ï¼šåœ¨ Linux ä¸Šè§£å‹æ–‡ä»¶

ç™»å½•åˆ° Linux æœåŠ¡å™¨åï¼Œæ‰§è¡Œï¼š

```bash
# è¿›å…¥ç”¨æˆ·ç›®å½•
cd ~

# è§£å‹æ–‡ä»¶
unzip document-workspace-1.6.5-offline.zip

# è¿›å…¥è§£å‹åçš„ç›®å½•
cd document-workspace-1.6.5-offline
```

> ğŸ’¡ å¦‚æœæç¤º `unzip: command not found`ï¼Œå…ˆå®‰è£…ï¼š
> - CentOS: `sudo yum install unzip`
> - Ubuntu: `sudo apt install unzip`

---

### ç¬¬3æ­¥ï¼šæ£€æŸ¥ Docker æ˜¯å¦å®‰è£…ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½¿ç”¨ Docker éƒ¨ç½²ï¼š
```bash
docker --version
```

**å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆå¦‚ `Docker version 20.10.x`ï¼‰** â†’ å¯ä»¥ä½¿ç”¨ Docker éƒ¨ç½²

**å¦‚æœæ˜¾ç¤º `command not found`** â†’ ä½¿ç”¨ Node.js ç›´æ¥éƒ¨ç½²ï¼ˆè§ç¬¬4æ­¥ï¼‰

#### Docker å®‰è£…æ–¹æ³•ï¼ˆå¯é€‰ï¼‰

**CentOS 7/8ï¼š**
```bash
# å®‰è£…ä¾èµ–
sudo yum install -y yum-utils

# æ·»åŠ  Docker æº
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# å®‰è£… Docker
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# éªŒè¯å®‰è£…
docker --version
```

**Ubuntuï¼š**
```bash
# æ›´æ–°åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£… Docker
sudo apt install -y docker.io docker-compose

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker

# éªŒè¯å®‰è£…
docker --version
```

---

### ç¬¬4æ­¥ï¼šå®‰è£…å¹¶å¯åŠ¨åº”ç”¨

#### æ–¹å¼ä¸€ï¼šNode.js ç›´æ¥è¿è¡Œï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•
cd ~/document-workspace-1.6.5-offline

# å®‰è£…ä¾èµ–
npm install --production

# å¯åŠ¨æœåŠ¡
npm run server
```

> ğŸ’¡ å¦‚æœæç¤º `npm: command not found`ï¼Œéœ€è¦å…ˆå®‰è£… Node.jsï¼š
> ```bash
> # CentOS
> sudo yum install -y nodejs npm
> 
> # Ubuntu  
> sudo apt install -y nodejs npm
> ```

**å¯åŠ¨æˆåŠŸåä¼šçœ‹åˆ°ï¼š**
```
Server running on http://0.0.0.0:4300
SERVE_DIST=1, serving static files from ./dist
```

#### æ–¹å¼äºŒï¼šDocker è¿è¡Œ

```bash
# ç¡®ä¿åœ¨æ­£ç¡®ç›®å½•
cd ~/document-workspace-1.6.5-offline

# æ„å»ºé•œåƒ
docker build -t document-workspace:1.6.5 .

# å¯åŠ¨å®¹å™¨
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

---

### ç¬¬5æ­¥ï¼šè®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://ä½ çš„æœåŠ¡å™¨IP:4300
```

ä¾‹å¦‚ï¼š`http://192.168.1.100:4300`

**æŸ¥çœ‹æœåŠ¡å™¨IPçš„æ–¹æ³•ï¼š**
```bash
hostname -I
```

---

## ğŸ”¥ å¸¸è§é—®é¢˜

### Q1: ç«¯å£ 4300 æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥é˜²ç«å¢™ï¼ˆCentOSï¼‰
sudo firewall-cmd --add-port=4300/tcp --permanent
sudo firewall-cmd --reload

# æ£€æŸ¥é˜²ç«å¢™ï¼ˆUbuntuï¼‰
sudo ufw allow 4300
```

### Q2: æƒ³è®©æœåŠ¡åœ¨åå°è¿è¡Œ

```bash
# ä½¿ç”¨ nohup åå°è¿è¡Œ
nohup npm run server > app.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f app.log

# åœæ­¢æœåŠ¡
pkill -f "node server.js"
```

### Q3: æƒ³å¼€æœºè‡ªåŠ¨å¯åŠ¨

åˆ›å»º systemd æœåŠ¡ï¼š
```bash
sudo nano /etc/systemd/system/document-workspace.service
```

ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆä¿®æ”¹è·¯å¾„ä¸ºå®é™…è·¯å¾„ï¼‰ï¼š
```ini
[Unit]
Description=Document Workspace
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/home/ä½ çš„ç”¨æˆ·å/document-workspace-1.6.5-offline
ExecStart=/usr/bin/node server.js
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl enable document-workspace
sudo systemctl start document-workspace

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status document-workspace
```

### Q4: Docker å®¹å™¨ç®¡ç†

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart
```

---

## ğŸ“‹ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥è¡¨

| æ“ä½œ | Node.js æ–¹å¼ | Docker æ–¹å¼ |
|------|-------------|-------------|
| å¯åŠ¨æœåŠ¡ | `npm run server` | `docker-compose up -d` |
| åå°å¯åŠ¨ | `nohup npm run server > app.log 2>&1 &` | `docker-compose up -d` |
| æŸ¥çœ‹æ—¥å¿— | `tail -f app.log` | `docker-compose logs -f` |
| åœæ­¢æœåŠ¡ | `pkill -f "node server.js"` | `docker-compose down` |
| é‡å¯æœåŠ¡ | å…ˆåœæ­¢å†å¯åŠ¨ | `docker-compose restart` |

| é€šç”¨æ“ä½œ | å‘½ä»¤ |
|----------|------|
| æŸ¥çœ‹ç«¯å£ | `netstat -tlnp \| grep 4300` |
| æŸ¥çœ‹æœåŠ¡å™¨IP | `hostname -I` |
| æ£€æŸ¥é˜²ç«å¢™(CentOS) | `sudo firewall-cmd --list-ports` |
| å¼€æ”¾ç«¯å£(CentOS) | `sudo firewall-cmd --add-port=4300/tcp --permanent && sudo firewall-cmd --reload` |

---

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æ–‡ä»¶å·²ä¼ è¾“åˆ° Linux æœåŠ¡å™¨
- [ ] å·²è§£å‹ zip æ–‡ä»¶
- [ ] Node.js æˆ– Docker å·²å®‰è£…
- [ ] æœåŠ¡å·²å¯åŠ¨
- [ ] æµè§ˆå™¨å¯ä»¥è®¿é—® `http://IP:4300`
- [ ] èƒ½çœ‹åˆ°"å¤šæ–‡æ¡£å¤„ç†å·¥ä½œå°"é¡µé¢

---

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

```
document-workspace-1.6.5-offline/
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•ï¼ˆæ²‰æ·€è®°å½•ã€é…ç½®ç­‰ï¼‰
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ test/                  # æµ‹è¯•æ–‡æ¡£
â”œâ”€â”€ dist/                  # å‰ç«¯é™æ€æ–‡ä»¶
â”œâ”€â”€ src/                   # å‰ç«¯æºç 
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡
â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”œâ”€â”€ Dockerfile             # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Docker ç¼–æ’æ–‡ä»¶
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

---

## ğŸ¯ åŠŸèƒ½å…¥å£

| åŠŸèƒ½ | è®¿é—®æ–¹å¼ |
|------|----------|
| å¤šæ–‡æ¡£å¤„ç†å·¥ä½œå°ï¼ˆåº”ç”¨ç«¯ï¼‰ | ç›´æ¥è®¿é—® `http://IP:4300` |
| ç»éªŒæ²‰æ·€å·¥ä½œå°ï¼ˆåç®¡ç«¯ï¼‰ | ç‚¹å‡»å³ä¸Šè§’ã€Œåˆ‡æ¢åå°ç®¡ç†å·¥ä½œå°ã€ |

---

**æ­å–œï¼éƒ¨ç½²å®Œæˆï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒ `docs/OFFLINE_LINUX_DEPLOY.md` è·å–æ›´è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£ã€‚
