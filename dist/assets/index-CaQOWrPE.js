var ox=Object.defineProperty;var sx=(r,e,t)=>e in r?ox(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Vi=(r,e,t)=>sx(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ip={exports:{}},Md={},op={exports:{}},di={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0;function ax(){if(q0)return di;q0=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),S=Symbol.iterator;function b(J){return J===null||typeof J!="object"?null:(J=S&&J[S]||J["@@iterator"],typeof J=="function"?J:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function A(J,C,Z){this.props=J,this.context=C,this.refs=N,this.updater=Z||p}A.prototype.isReactComponent={},A.prototype.setState=function(J,C){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,C,"setState")},A.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function w(){}w.prototype=A.prototype;function R(J,C,Z){this.props=J,this.context=C,this.refs=N,this.updater=Z||p}var I=R.prototype=new w;I.constructor=R,j(I,A.prototype),I.isPureReactComponent=!0;var k=Array.isArray,G=Object.prototype.hasOwnProperty,re={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function ie(J,C,Z){var ne,ye={},ce=null,M=null;if(C!=null)for(ne in C.ref!==void 0&&(M=C.ref),C.key!==void 0&&(ce=""+C.key),C)G.call(C,ne)&&!Q.hasOwnProperty(ne)&&(ye[ne]=C[ne]);var z=arguments.length-2;if(z===1)ye.children=Z;else if(1<z){for(var fe=Array(z),he=0;he<z;he++)fe[he]=arguments[he+2];ye.children=fe}if(J&&J.defaultProps)for(ne in z=J.defaultProps,z)ye[ne]===void 0&&(ye[ne]=z[ne]);return{$$typeof:r,type:J,key:ce,ref:M,props:ye,_owner:re.current}}function U(J,C){return{$$typeof:r,type:J.type,key:C,ref:J.ref,props:J.props,_owner:J._owner}}function ue(J){return typeof J=="object"&&J!==null&&J.$$typeof===r}function oe(J){var C={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Z){return C[Z]})}var B=/\/+/g;function te(J,C){return typeof J=="object"&&J!==null&&J.key!=null?oe(""+J.key):C.toString(36)}function P(J,C,Z,ne,ye){var ce=typeof J;(ce==="undefined"||ce==="boolean")&&(J=null);var M=!1;if(J===null)M=!0;else switch(ce){case"string":case"number":M=!0;break;case"object":switch(J.$$typeof){case r:case e:M=!0}}if(M)return M=J,ye=ye(M),J=ne===""?"."+te(M,0):ne,k(ye)?(Z="",J!=null&&(Z=J.replace(B,"$&/")+"/"),P(ye,C,Z,"",function(he){return he})):ye!=null&&(ue(ye)&&(ye=U(ye,Z+(!ye.key||M&&M.key===ye.key?"":(""+ye.key).replace(B,"$&/")+"/")+J)),C.push(ye)),1;if(M=0,ne=ne===""?".":ne+":",k(J))for(var z=0;z<J.length;z++){ce=J[z];var fe=ne+te(ce,z);M+=P(ce,C,Z,fe,ye)}else if(fe=b(J),typeof fe=="function")for(J=fe.call(J),z=0;!(ce=J.next()).done;)ce=ce.value,fe=ne+te(ce,z++),M+=P(ce,C,Z,fe,ye);else if(ce==="object")throw C=String(J),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return M}function be(J,C,Z){if(J==null)return J;var ne=[],ye=0;return P(J,ne,"","",function(ce){return C.call(Z,ce,ye++)}),ne}function Ae(J){if(J._status===-1){var C=J._result;C=C(),C.then(function(Z){(J._status===0||J._status===-1)&&(J._status=1,J._result=Z)},function(Z){(J._status===0||J._status===-1)&&(J._status=2,J._result=Z)}),J._status===-1&&(J._status=0,J._result=C)}if(J._status===1)return J._result.default;throw J._result}var ge={current:null},xe={transition:null},ke={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:xe,ReactCurrentOwner:re};function Fe(){throw Error("act(...) is not supported in production builds of React.")}return di.Children={map:be,forEach:function(J,C,Z){be(J,function(){C.apply(this,arguments)},Z)},count:function(J){var C=0;return be(J,function(){C++}),C},toArray:function(J){return be(J,function(C){return C})||[]},only:function(J){if(!ue(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},di.Component=A,di.Fragment=t,di.Profiler=a,di.PureComponent=R,di.StrictMode=o,di.Suspense=d,di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,di.act=Fe,di.cloneElement=function(J,C,Z){if(J==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+J+".");var ne=j({},J.props),ye=J.key,ce=J.ref,M=J._owner;if(C!=null){if(C.ref!==void 0&&(ce=C.ref,M=re.current),C.key!==void 0&&(ye=""+C.key),J.type&&J.type.defaultProps)var z=J.type.defaultProps;for(fe in C)G.call(C,fe)&&!Q.hasOwnProperty(fe)&&(ne[fe]=C[fe]===void 0&&z!==void 0?z[fe]:C[fe])}var fe=arguments.length-2;if(fe===1)ne.children=Z;else if(1<fe){z=Array(fe);for(var he=0;he<fe;he++)z[he]=arguments[he+2];ne.children=z}return{$$typeof:r,type:J.type,key:ye,ref:ce,props:ne,_owner:M}},di.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},J.Provider={$$typeof:s,_context:J},J.Consumer=J},di.createElement=ie,di.createFactory=function(J){var C=ie.bind(null,J);return C.type=J,C},di.createRef=function(){return{current:null}},di.forwardRef=function(J){return{$$typeof:l,render:J}},di.isValidElement=ue,di.lazy=function(J){return{$$typeof:h,_payload:{_status:-1,_result:J},_init:Ae}},di.memo=function(J,C){return{$$typeof:f,type:J,compare:C===void 0?null:C}},di.startTransition=function(J){var C=xe.transition;xe.transition={};try{J()}finally{xe.transition=C}},di.unstable_act=Fe,di.useCallback=function(J,C){return ge.current.useCallback(J,C)},di.useContext=function(J){return ge.current.useContext(J)},di.useDebugValue=function(){},di.useDeferredValue=function(J){return ge.current.useDeferredValue(J)},di.useEffect=function(J,C){return ge.current.useEffect(J,C)},di.useId=function(){return ge.current.useId()},di.useImperativeHandle=function(J,C,Z){return ge.current.useImperativeHandle(J,C,Z)},di.useInsertionEffect=function(J,C){return ge.current.useInsertionEffect(J,C)},di.useLayoutEffect=function(J,C){return ge.current.useLayoutEffect(J,C)},di.useMemo=function(J,C){return ge.current.useMemo(J,C)},di.useReducer=function(J,C,Z){return ge.current.useReducer(J,C,Z)},di.useRef=function(J){return ge.current.useRef(J)},di.useState=function(J){return ge.current.useState(J)},di.useSyncExternalStore=function(J,C,Z){return ge.current.useSyncExternalStore(J,C,Z)},di.useTransition=function(){return ge.current.useTransition()},di.version="18.3.1",di}var W0;function U1(){return W0||(W0=1,op.exports=ax()),op.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0;function lx(){if(H0)return Md;H0=1;var r=U1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,f){var h,S={},b=null,p=null;f!==void 0&&(b=""+f),d.key!==void 0&&(b=""+d.key),d.ref!==void 0&&(p=d.ref);for(h in d)o.call(d,h)&&!s.hasOwnProperty(h)&&(S[h]=d[h]);if(l&&l.defaultProps)for(h in d=l.defaultProps,d)S[h]===void 0&&(S[h]=d[h]);return{$$typeof:e,type:l,key:b,ref:p,props:S,_owner:a.current}}return Md.Fragment=t,Md.jsx=u,Md.jsxs=u,Md}var G0;function cx(){return G0||(G0=1,ip.exports=lx()),ip.exports}var y=cx(),Qe=U1();const q1=Hv(Qe);var jf={},sp={exports:{}},_a={},ap={exports:{}},lp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function ux(){return K0||(K0=1,(function(r){function e(xe,ke){var Fe=xe.length;xe.push(ke);e:for(;0<Fe;){var J=Fe-1>>>1,C=xe[J];if(0<a(C,ke))xe[J]=ke,xe[Fe]=C,Fe=J;else break e}}function t(xe){return xe.length===0?null:xe[0]}function o(xe){if(xe.length===0)return null;var ke=xe[0],Fe=xe.pop();if(Fe!==ke){xe[0]=Fe;e:for(var J=0,C=xe.length,Z=C>>>1;J<Z;){var ne=2*(J+1)-1,ye=xe[ne],ce=ne+1,M=xe[ce];if(0>a(ye,Fe))ce<C&&0>a(M,ye)?(xe[J]=M,xe[ce]=Fe,J=ce):(xe[J]=ye,xe[ne]=Fe,J=ne);else if(ce<C&&0>a(M,Fe))xe[J]=M,xe[ce]=Fe,J=ce;else break e}}return ke}function a(xe,ke){var Fe=xe.sortIndex-ke.sortIndex;return Fe!==0?Fe:xe.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();r.unstable_now=function(){return u.now()-l}}var d=[],f=[],h=1,S=null,b=3,p=!1,j=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(xe){for(var ke=t(f);ke!==null;){if(ke.callback===null)o(f);else if(ke.startTime<=xe)o(f),ke.sortIndex=ke.expirationTime,e(d,ke);else break;ke=t(f)}}function k(xe){if(N=!1,I(xe),!j)if(t(d)!==null)j=!0,Ae(G);else{var ke=t(f);ke!==null&&ge(k,ke.startTime-xe)}}function G(xe,ke){j=!1,N&&(N=!1,w(ie),ie=-1),p=!0;var Fe=b;try{for(I(ke),S=t(d);S!==null&&(!(S.expirationTime>ke)||xe&&!oe());){var J=S.callback;if(typeof J=="function"){S.callback=null,b=S.priorityLevel;var C=J(S.expirationTime<=ke);ke=r.unstable_now(),typeof C=="function"?S.callback=C:S===t(d)&&o(d),I(ke)}else o(d);S=t(d)}if(S!==null)var Z=!0;else{var ne=t(f);ne!==null&&ge(k,ne.startTime-ke),Z=!1}return Z}finally{S=null,b=Fe,p=!1}}var re=!1,Q=null,ie=-1,U=5,ue=-1;function oe(){return!(r.unstable_now()-ue<U)}function B(){if(Q!==null){var xe=r.unstable_now();ue=xe;var ke=!0;try{ke=Q(!0,xe)}finally{ke?te():(re=!1,Q=null)}}else re=!1}var te;if(typeof R=="function")te=function(){R(B)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,be=P.port2;P.port1.onmessage=B,te=function(){be.postMessage(null)}}else te=function(){A(B,0)};function Ae(xe){Q=xe,re||(re=!0,te())}function ge(xe,ke){ie=A(function(){xe(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(xe){xe.callback=null},r.unstable_continueExecution=function(){j||p||(j=!0,Ae(G))},r.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<xe?Math.floor(1e3/xe):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(xe){switch(b){case 1:case 2:case 3:var ke=3;break;default:ke=b}var Fe=b;b=ke;try{return xe()}finally{b=Fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(xe,ke){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Fe=b;b=xe;try{return ke()}finally{b=Fe}},r.unstable_scheduleCallback=function(xe,ke,Fe){var J=r.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?J+Fe:J):Fe=J,xe){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Fe+C,xe={id:h++,callback:ke,priorityLevel:xe,startTime:Fe,expirationTime:C,sortIndex:-1},Fe>J?(xe.sortIndex=Fe,e(f,xe),t(d)===null&&xe===t(f)&&(N?(w(ie),ie=-1):N=!0,ge(k,Fe-J))):(xe.sortIndex=C,e(d,xe),j||p||(j=!0,Ae(G))),xe},r.unstable_shouldYield=oe,r.unstable_wrapCallback=function(xe){var ke=b;return function(){var Fe=b;b=ke;try{return xe.apply(this,arguments)}finally{b=Fe}}}})(lp)),lp}var V0;function dx(){return V0||(V0=1,ap.exports=ux()),ap.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function fx(){if(X0)return _a;X0=1;var r=U1(),e=dx();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function s(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(a[n]=i,n=0;n<i.length;n++)o.add(i[n])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},S={};function b(n){return d.call(S,n)?!0:d.call(h,n)?!1:f.test(n)?S[n]=!0:(h[n]=!0,!1)}function p(n,i,c,v){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return v?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,i,c,v){if(i===null||typeof i>"u"||p(n,i,c,v))return!0;if(v)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(n,i,c,v,F,V,ve){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=v,this.attributeNamespace=F,this.mustUseProperty=c,this.propertyName=n,this.type=i,this.sanitizeURL=V,this.removeEmptyString=ve}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){A[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];A[i]=new N(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){A[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){A[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){A[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){A[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){A[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){A[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){A[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(w,R);A[i]=new N(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(w,R);A[i]=new N(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(w,R);A[i]=new N(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){A[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),A.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){A[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function I(n,i,c,v){var F=A.hasOwnProperty(i)?A[i]:null;(F!==null?F.type!==0:v||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(j(i,c,F,v)&&(c=null),v||F===null?b(i)&&(c===null?n.removeAttribute(i):n.setAttribute(i,""+c)):F.mustUseProperty?n[F.propertyName]=c===null?F.type===3?!1:"":c:(i=F.attributeName,v=F.attributeNamespace,c===null?n.removeAttribute(i):(F=F.type,c=F===3||F===4&&c===!0?"":""+c,v?n.setAttributeNS(v,i,c):n.setAttribute(i,c))))}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),re=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),oe=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),xe=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=xe&&n[xe]||n["@@iterator"],typeof n=="function"?n:null)}var Fe=Object.assign,J;function C(n){if(J===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);J=i&&i[1]||""}return`
`+J+n}var Z=!1;function ne(n,i){if(!n||Z)return"";Z=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(pt){var v=pt}Reflect.construct(n,[],i)}else{try{i.call()}catch(pt){v=pt}n.call(i.prototype)}else{try{throw Error()}catch(pt){v=pt}n()}}catch(pt){if(pt&&v&&typeof pt.stack=="string"){for(var F=pt.stack.split(`
`),V=v.stack.split(`
`),ve=F.length-1,ze=V.length-1;1<=ve&&0<=ze&&F[ve]!==V[ze];)ze--;for(;1<=ve&&0<=ze;ve--,ze--)if(F[ve]!==V[ze]){if(ve!==1||ze!==1)do if(ve--,ze--,0>ze||F[ve]!==V[ze]){var Ve=`
`+F[ve].replace(" at new "," at ");return n.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",n.displayName)),Ve}while(1<=ve&&0<=ze);break}}}finally{Z=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?C(n):""}function ye(n){switch(n.tag){case 5:return C(n.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return n=ne(n.type,!1),n;case 11:return n=ne(n.type.render,!1),n;case 1:return n=ne(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case re:return"Portal";case U:return"Profiler";case ie:return"StrictMode";case te:return"Suspense";case P:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oe:return(n.displayName||"Context")+".Consumer";case ue:return(n._context.displayName||"Context")+".Provider";case B:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case be:return i=n.displayName||null,i!==null?i:ce(n.type)||"Memo";case Ae:i=n._payload,n=n._init;try{return ce(n(i))}catch{}}return null}function M(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(i);case 8:return i===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function z(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function he(n){var i=fe(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),v=""+n[i];if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var F=c.get,V=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return F.call(this)},set:function(ve){v=""+ve,V.call(this,ve)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return v},setValue:function(ve){v=""+ve},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function se(n){n._valueTracker||(n._valueTracker=he(n))}function me(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),v="";return n&&(v=fe(n)?n.checked?"true":"false":n.value),n=v,n!==c?(i.setValue(n),!0):!1}function Be(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function H(n,i){var c=i.checked;return Fe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function ee(n,i){var c=i.defaultValue==null?"":i.defaultValue,v=i.checked!=null?i.checked:i.defaultChecked;c=z(i.value!=null?i.value:c),n._wrapperState={initialChecked:v,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function X(n,i){i=i.checked,i!=null&&I(n,"checked",i,!1)}function T(n,i){X(n,i);var c=z(i.value),v=i.type;if(c!=null)v==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(v==="submit"||v==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?q(n,i.type,c):i.hasOwnProperty("defaultValue")&&q(n,i.type,z(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function L(n,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var v=i.type;if(!(v!=="submit"&&v!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,c||i===n.value||(n.value=i),n.defaultValue=i}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function q(n,i,c){(i!=="number"||Be(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var Se=Array.isArray;function Le(n,i,c,v){if(n=n.options,i){i={};for(var F=0;F<c.length;F++)i["$"+c[F]]=!0;for(c=0;c<n.length;c++)F=i.hasOwnProperty("$"+n[c].value),n[c].selected!==F&&(n[c].selected=F),F&&v&&(n[c].defaultSelected=!0)}else{for(c=""+z(c),i=null,F=0;F<n.length;F++){if(n[F].value===c){n[F].selected=!0,v&&(n[F].defaultSelected=!0);return}i!==null||n[F].disabled||(i=n[F])}i!==null&&(i.selected=!0)}}function Ee(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return Fe({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qe(n,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(Se(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}n._wrapperState={initialValue:z(c)}}function dt(n,i){var c=z(i.value),v=z(i.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),i.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),v!=null&&(n.defaultValue=""+v)}function ot(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?lt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ft,Zt=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,v,F){MSApp.execUnsafeLocalFunction(function(){return n(i,c,v,F)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ft.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Rn(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var $t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rr=["Webkit","ms","Moz","O"];Object.keys($t).forEach(function(n){Rr.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),$t[i]=$t[n]})});function An(n,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||$t.hasOwnProperty(n)&&$t[n]?(""+i).trim():i+"px"}function Zn(n,i){n=n.style;for(var c in i)if(i.hasOwnProperty(c)){var v=c.indexOf("--")===0,F=An(c,i[c],v);c==="float"&&(c="cssFloat"),v?n.setProperty(c,F):n[c]=F}}var or=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(n,i){if(i){if(or[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function dn(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fi=null;function Wn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Un=null,qr=null,yn=null;function kn(n){if(n=Gl(n)){if(typeof Un!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Bs(i),Un(n.stateNode,n.type,i))}}function li(n){qr?yn?yn.push(n):yn=[n]:qr=n}function Hs(){if(qr){var n=qr,i=yn;if(yn=qr=null,kn(n),i)for(n=0;n<i.length;n++)kn(i[n])}}function Do(n,i){return n(i)}function Zo(){}var ps=!1;function Mn(n,i,c){if(ps)return n(i,c);ps=!0;try{return Do(n,i,c)}finally{ps=!1,(qr!==null||yn!==null)&&(Zo(),Hs())}}function ms(n,i){var c=n.stateNode;if(c===null)return null;var v=Bs(c);if(v===null)return null;c=v[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(n=n.type,v=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!v;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var Is=!1;if(l)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{Is=!1}function uo(n,i,c,v,F,V,ve,ze,Ve){var pt=Array.prototype.slice.call(arguments,3);try{i.apply(c,pt)}catch(jt){this.onError(jt)}}var ni=!1,ki=null,gr=!1,gs=null,Rs={onError:function(n){ni=!0,ki=n}};function Me(n,i,c,v,F,V,ve,ze,Ve){ni=!1,ki=null,uo.apply(Rs,arguments)}function He(n,i,c,v,F,V,ve,ze,Ve){if(Me.apply(this,arguments),ni){if(ni){var pt=ki;ni=!1,ki=null}else throw Error(t(198));gr||(gr=!0,gs=pt)}}function ht(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function qt(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function hn(n){if(ht(n)!==n)throw Error(t(188))}function Xt(n){var i=n.alternate;if(!i){if(i=ht(n),i===null)throw Error(t(188));return i!==n?null:n}for(var c=n,v=i;;){var F=c.return;if(F===null)break;var V=F.alternate;if(V===null){if(v=F.return,v!==null){c=v;continue}break}if(F.child===V.child){for(V=F.child;V;){if(V===c)return hn(F),n;if(V===v)return hn(F),i;V=V.sibling}throw Error(t(188))}if(c.return!==v.return)c=F,v=V;else{for(var ve=!1,ze=F.child;ze;){if(ze===c){ve=!0,c=F,v=V;break}if(ze===v){ve=!0,v=F,c=V;break}ze=ze.sibling}if(!ve){for(ze=V.child;ze;){if(ze===c){ve=!0,c=V,v=F;break}if(ze===v){ve=!0,v=V,c=F;break}ze=ze.sibling}if(!ve)throw Error(t(189))}}if(c.alternate!==v)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?n:i}function cn(n){return n=Xt(n),n!==null?Yt(n):null}function Yt(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Yt(n);if(i!==null)return i;n=n.sibling}return null}var Xn=e.unstable_scheduleCallback,hi=e.unstable_cancelCallback,wi=e.unstable_shouldYield,So=e.unstable_requestPaint,jr=e.unstable_now,yo=e.unstable_getCurrentPriorityLevel,io=e.unstable_ImmediatePriority,Vr=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,wr=e.unstable_LowPriority,pi=e.unstable_IdlePriority,Xr=null,Yr=null;function Mi(n){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Xr,n,void 0,(n.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:kr,_i=Math.log,Ni=Math.LN2;function kr(n){return n>>>=0,n===0?32:31-(_i(n)/Ni|0)|0}var To=64,Co=4194304;function Qo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ar(n,i){var c=n.pendingLanes;if(c===0)return 0;var v=0,F=n.suspendedLanes,V=n.pingedLanes,ve=c&268435455;if(ve!==0){var ze=ve&~F;ze!==0?v=Qo(ze):(V&=ve,V!==0&&(v=Qo(V)))}else ve=c&~F,ve!==0?v=Qo(ve):V!==0&&(v=Qo(V));if(v===0)return 0;if(i!==0&&i!==v&&(i&F)===0&&(F=v&-v,V=i&-i,F>=V||F===16&&(V&4194240)!==0))return i;if((v&4)!==0&&(v|=c&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=v;0<i;)c=31-sr(i),F=1<<c,v|=n[c],i&=~F;return v}function Ji(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(n,i){for(var c=n.suspendedLanes,v=n.pingedLanes,F=n.expirationTimes,V=n.pendingLanes;0<V;){var ve=31-sr(V),ze=1<<ve,Ve=F[ve];Ve===-1?((ze&c)===0||(ze&v)!==0)&&(F[ve]=Ji(ze,i)):Ve<=i&&(n.expiredLanes|=ze),V&=~ze}}function fo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ys(){var n=To;return To<<=1,(To&4194240)===0&&(To=64),n}function ss(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function as(n,i,c){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-sr(i),n[i]=c}function ar(n,i){var c=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var v=n.eventTimes;for(n=n.expirationTimes;0<c;){var F=31-sr(c),V=1<<F;i[F]=0,v[F]=-1,n[F]=-1,c&=~V}}function Ln(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var v=31-sr(c),F=1<<v;F&i|n[v]&i&&(n[v]|=i),c&=~F}}var Wr=0;function vs(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ws,Oi,xr,ri,$r,xs=!1,Zi=[],kt=null,$i=null,vo=null,Qi=new Map,pn=new Map,Pr=[],Aa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Na(n,i){switch(n){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":Qi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pn.delete(i.pointerId)}}function rr(n,i,c,v,F,V){return n===null||n.nativeEvent!==V?(n={blockedOn:i,domEventName:c,eventSystemFlags:v,nativeEvent:V,targetContainers:[F]},i!==null&&(i=Gl(i),i!==null&&Oi(i)),n):(n.eventSystemFlags|=v,i=n.targetContainers,F!==null&&i.indexOf(F)===-1&&i.push(F),n)}function Nn(n,i,c,v,F){switch(i){case"focusin":return kt=rr(kt,n,i,c,v,F),!0;case"dragenter":return $i=rr($i,n,i,c,v,F),!0;case"mouseover":return vo=rr(vo,n,i,c,v,F),!0;case"pointerover":var V=F.pointerId;return Qi.set(V,rr(Qi.get(V)||null,n,i,c,v,F)),!0;case"gotpointercapture":return V=F.pointerId,pn.set(V,rr(pn.get(V)||null,n,i,c,v,F)),!0}return!1}function mi(n){var i=Fs(n.target);if(i!==null){var c=ht(i);if(c!==null){if(i=c.tag,i===13){if(i=qt(c),i!==null){n.blockedOn=i,$r(n.priority,function(){xr(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function na(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=lr(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var v=new c.constructor(c.type,c);fi=v,c.target.dispatchEvent(v),fi=null}else return i=Gl(c),i!==null&&Oi(i),n.blockedOn=c,!1;i.shift()}return!0}function Oo(n,i,c){na(n)&&c.delete(i)}function da(){xs=!1,kt!==null&&na(kt)&&(kt=null),$i!==null&&na($i)&&($i=null),vo!==null&&na(vo)&&(vo=null),Qi.forEach(Oo),pn.forEach(Oo)}function ls(n,i){n.blockedOn===i&&(n.blockedOn=null,xs||(xs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,da)))}function cs(n){function i(F){return ls(F,n)}if(0<Zi.length){ls(Zi[0],n);for(var c=1;c<Zi.length;c++){var v=Zi[c];v.blockedOn===n&&(v.blockedOn=null)}}for(kt!==null&&ls(kt,n),$i!==null&&ls($i,n),vo!==null&&ls(vo,n),Qi.forEach(i),pn.forEach(i),c=0;c<Pr.length;c++)v=Pr[c],v.blockedOn===n&&(v.blockedOn=null);for(;0<Pr.length&&(c=Pr[0],c.blockedOn===null);)mi(c),c.blockedOn===null&&Pr.shift()}var Tt=k.ReactCurrentBatchConfig,on=!0;function Ht(n,i,c,v){var F=Wr,V=Tt.transition;Tt.transition=null;try{Wr=1,rn(n,i,c,v)}finally{Wr=F,Tt.transition=V}}function fn(n,i,c,v){var F=Wr,V=Tt.transition;Tt.transition=null;try{Wr=4,rn(n,i,c,v)}finally{Wr=F,Tt.transition=V}}function rn(n,i,c,v){if(on){var F=lr(n,i,c,v);if(F===null)gc(n,i,v,un,c),Na(n,v);else if(Nn(F,n,i,c,v))v.stopPropagation();else if(Na(n,v),i&4&&-1<Aa.indexOf(n)){for(;F!==null;){var V=Gl(F);if(V!==null&&ws(V),V=lr(n,i,c,v),V===null&&gc(n,i,v,un,c),V===F)break;F=V}F!==null&&v.stopPropagation()}else gc(n,i,v,null,c)}}var un=null;function lr(n,i,c,v){if(un=null,n=Wn(v),n=Fs(n),n!==null)if(i=ht(n),i===null)n=null;else if(c=i.tag,c===13){if(n=qt(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return un=n,null}function Qn(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yo()){case io:return 1;case Vr:return 4;case On:case wr:return 16;case pi:return 536870912;default:return 16}default:return 16}}var Fn=null,cr=null,Bt=null;function Mt(){if(Bt)return Bt;var n,i=cr,c=i.length,v,F="value"in Fn?Fn.value:Fn.textContent,V=F.length;for(n=0;n<c&&i[n]===F[n];n++);var ve=c-n;for(v=1;v<=ve&&i[c-v]===F[V-v];v++);return Bt=F.slice(n,1<v?1-v:void 0)}function mr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Kn(){return!0}function Fr(){return!1}function er(n){function i(c,v,F,V,ve){this._reactName=c,this._targetInst=F,this.type=v,this.nativeEvent=V,this.target=ve,this.currentTarget=null;for(var ze in n)n.hasOwnProperty(ze)&&(c=n[ze],this[ze]=c?c(V):V[ze]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Kn:Fr,this.isPropagationStopped=Fr,this}return Fe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),i}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=er(xi),O=Fe({},xi,{view:0,detail:0}),le=er(O),Ce,Oe,Xe,gt=Fe({},O,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xe&&(Xe&&n.type==="mousemove"?(Ce=n.screenX-Xe.screenX,Oe=n.screenY-Xe.screenY):Oe=Ce=0,Xe=n),Ce)},movementY:function(n){return"movementY"in n?n.movementY:Oe}}),vt=er(gt),ln=Fe({},gt,{dataTransfer:0}),In=er(ln),yr=Fe({},O,{relatedTarget:0}),br=er(yr),Yn=Fe({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ui=er(Yn),eo=Fe({},xi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ci=er(eo),Lo=Fe({},xi,{data:0}),wo=er(Lo),Io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ea={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ra={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ha(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ra[n])?!!i[n]:!1}function Pl(){return Ha}var Dl=Fe({},O,{key:function(n){if(n.key){var i=Io[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=mr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ea[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(n){return n.type==="keypress"?mr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ia=er(Dl),fl=Fe({},gt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=er(fl),Ka=Fe({},O,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),Fo=er(Ka),Va=Fe({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),hl=er(Va),cc=Fe({},gt,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uc=er(cc),us=[9,13,27,32],oa=l&&"CompositionEvent"in window,fa=null;l&&"documentMode"in document&&(fa=document.documentMode);var dc=l&&"TextEvent"in window&&!fa,js=l&&(!oa||fa&&8<fa&&11>=fa),Ta=" ",Ol=!1;function Fl(n,i){switch(n){case"keyup":return us.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gs=!1;function Ps(n,i){switch(n){case"compositionend":return Ca(i);case"keypress":return i.which!==32?null:(Ol=!0,Ta);case"textInput":return n=i.data,n===Ta&&Ol?null:n;default:return null}}function es(n,i){if(Gs)return n==="compositionend"||!oa&&Fl(n,i)?(n=Mt(),Bt=cr=Fn=null,Gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return js&&i.locale!=="ko"?null:i.data;default:return null}}var La={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bs(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!La[n.type]:i==="textarea"}function ha(n,i,c,v){li(v),i=tl(i,"onChange"),0<i.length&&(c=new Ti("onChange","change",null,c,v),n.push({event:c,listeners:i}))}var Ds=null,pa=null;function ho(n){Ul(n,0)}function Xa(n){var i=il(n);if(me(i))return n}function ma(n,i){if(n==="change")return i}var sa=!1;if(l){var pl;if(l){var Ia="oninput"in document;if(!Ia){var Bl=document.createElement("div");Bl.setAttribute("oninput","return;"),Ia=typeof Bl.oninput=="function"}pl=Ia}else pl=!1;sa=pl&&(!document.documentMode||9<document.documentMode)}function ml(){Ds&&(Ds.detachEvent("onpropertychange",ga),pa=Ds=null)}function ga(n){if(n.propertyName==="value"&&Xa(pa)){var i=[];ha(i,pa,n,Wn(n)),Mn(ho,i)}}function Ra(n,i,c){n==="focusin"?(ml(),Ds=i,pa=c,Ds.attachEvent("onpropertychange",ga)):n==="focusout"&&ml()}function ja(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xa(pa)}function gl(n,i){if(n==="click")return Xa(i)}function Pa(n,i){if(n==="input"||n==="change")return Xa(i)}function Ya(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Fi=typeof Object.is=="function"?Object.is:Ya;function ds(n,i){if(Fi(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),v=Object.keys(i);if(c.length!==v.length)return!1;for(v=0;v<c.length;v++){var F=c[v];if(!d.call(i,F)||!Fi(n[F],i[F]))return!1}return!0}function gi(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Li(n,i){var c=gi(n);n=0;for(var v;c;){if(c.nodeType===3){if(v=n+c.textContent.length,n<=i&&v>=i)return{node:c,offset:i-n};n=v}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=gi(c)}}function po(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?po(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ko(){for(var n=window,i=Be();i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=Be(n.document)}return i}function Ks(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function fc(n){var i=ko(),c=n.focusedElem,v=n.selectionRange;if(i!==c&&c&&c.ownerDocument&&po(c.ownerDocument.documentElement,c)){if(v!==null&&Ks(c)){if(i=v.start,n=v.end,n===void 0&&(n=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(n,c.value.length);else if(n=(i=c.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var F=c.textContent.length,V=Math.min(v.start,F);v=v.end===void 0?V:Math.min(v.end,F),!n.extend&&V>v&&(F=v,v=V,V=F),F=Li(c,V);var ve=Li(c,v);F&&ve&&(n.rangeCount!==1||n.anchorNode!==F.node||n.anchorOffset!==F.offset||n.focusNode!==ve.node||n.focusOffset!==ve.offset)&&(i=i.createRange(),i.setStart(F.node,F.offset),n.removeAllRanges(),V>v?(n.addRange(i),n.extend(ve.node,ve.offset)):(i.setEnd(ve.node,ve.offset),n.addRange(i)))}}for(i=[],n=c;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)n=i[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ja=l&&"documentMode"in document&&11>=document.documentMode,Da=null,ya=null,yl=null,_s=!1;function hc(n,i,c){var v=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_s||Da==null||Da!==Be(v)||(v=Da,"selectionStart"in v&&Ks(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),yl&&ds(yl,v)||(yl=v,v=tl(ya,"onSelect"),0<v.length&&(i=new Ti("onSelect","select",null,i,c),n.push({event:i,listeners:v}),i.target=Da)))}function Ml(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var Za={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},Qa={},zc={};l&&(zc=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function vl(n){if(Qa[n])return Qa[n];if(!Za[n])return n;var i=Za[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in zc)return Qa[n]=i[c];return n}var $c=vl("animationend"),Uc=vl("animationiteration"),qc=vl("animationstart"),Wc=vl("transitionend"),Hc=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function aa(n,i){Hc.set(n,i),s(i,[n])}for(var wl=0;wl<Gc.length;wl++){var Bo=Gc[wl],Ss=Bo.toLowerCase(),zl=Bo[0].toUpperCase()+Bo.slice(1);aa(Ss,"on"+zl)}aa($c,"onAnimationEnd"),aa(Uc,"onAnimationIteration"),aa(qc,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(Wc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function $l(n,i,c){var v=n.type||"unknown-event";n.currentTarget=c,He(v,i,void 0,n),n.currentTarget=null}function Ul(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var v=n[c],F=v.event;v=v.listeners;e:{var V=void 0;if(i)for(var ve=v.length-1;0<=ve;ve--){var ze=v[ve],Ve=ze.instance,pt=ze.currentTarget;if(ze=ze.listener,Ve!==V&&F.isPropagationStopped())break e;$l(F,ze,pt),V=Ve}else for(ve=0;ve<v.length;ve++){if(ze=v[ve],Ve=ze.instance,pt=ze.currentTarget,ze=ze.listener,Ve!==V&&F.isPropagationStopped())break e;$l(F,ze,pt),V=Ve}}}if(gr)throw n=gs,gr=!1,gs=null,n}function Ii(n,i){var c=i[rs];c===void 0&&(c=i[rs]=new Set);var v=n+"__bubble";c.has(v)||(mc(i,n,2,!1),c.add(v))}function pc(n,i,c){var v=0;i&&(v|=4),mc(c,n,v,i)}var xl="_reactListening"+Math.random().toString(36).slice(2);function el(n){if(!n[xl]){n[xl]=!0,o.forEach(function(c){c!=="selectionchange"&&(hu.has(c)||pc(c,!1,n),pc(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[xl]||(i[xl]=!0,pc("selectionchange",!1,i))}}function mc(n,i,c,v){switch(Qn(i)){case 1:var F=Ht;break;case 4:F=fn;break;default:F=rn}c=F.bind(null,i,c,n),F=void 0,!Is||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(F=!0),v?F!==void 0?n.addEventListener(i,c,{capture:!0,passive:F}):n.addEventListener(i,c,!0):F!==void 0?n.addEventListener(i,c,{passive:F}):n.addEventListener(i,c,!1)}function gc(n,i,c,v,F){var V=v;if((i&1)===0&&(i&2)===0&&v!==null)e:for(;;){if(v===null)return;var ve=v.tag;if(ve===3||ve===4){var ze=v.stateNode.containerInfo;if(ze===F||ze.nodeType===8&&ze.parentNode===F)break;if(ve===4)for(ve=v.return;ve!==null;){var Ve=ve.tag;if((Ve===3||Ve===4)&&(Ve=ve.stateNode.containerInfo,Ve===F||Ve.nodeType===8&&Ve.parentNode===F))return;ve=ve.return}for(;ze!==null;){if(ve=Fs(ze),ve===null)return;if(Ve=ve.tag,Ve===5||Ve===6){v=V=ve;continue e}ze=ze.parentNode}}v=v.return}Mn(function(){var pt=V,jt=Wn(c),Ut=[];e:{var It=Hc.get(n);if(It!==void 0){var vn=Ti,Tn=n;switch(n){case"keypress":if(mr(c)===0)break e;case"keydown":case"keyup":vn=ia;break;case"focusin":Tn="focus",vn=br;break;case"focusout":Tn="blur",vn=br;break;case"beforeblur":case"afterblur":vn=br;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vn=vt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vn=In;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vn=Fo;break;case $c:case Uc:case qc:vn=Ui;break;case Wc:vn=hl;break;case"scroll":vn=le;break;case"wheel":vn=uc;break;case"copy":case"cut":case"paste":vn=Ci;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vn=Ga}var Dn=(i&4)!==0,Ho=!Dn&&n==="scroll",st=Dn?It!==null?It+"Capture":null:It;Dn=[];for(var Ze=pt,at;Ze!==null;){at=Ze;var Vt=at.stateNode;if(at.tag===5&&Vt!==null&&(at=Vt,st!==null&&(Vt=ms(Ze,st),Vt!=null&&Dn.push(yc(Ze,Vt,at)))),Ho)break;Ze=Ze.return}0<Dn.length&&(It=new vn(It,Tn,null,c,jt),Ut.push({event:It,listeners:Dn}))}}if((i&7)===0){e:{if(It=n==="mouseover"||n==="pointerover",vn=n==="mouseout"||n==="pointerout",It&&c!==fi&&(Tn=c.relatedTarget||c.fromElement)&&(Fs(Tn)||Tn[ns]))break e;if((vn||It)&&(It=jt.window===jt?jt:(It=jt.ownerDocument)?It.defaultView||It.parentWindow:window,vn?(Tn=c.relatedTarget||c.toElement,vn=pt,Tn=Tn?Fs(Tn):null,Tn!==null&&(Ho=ht(Tn),Tn!==Ho||Tn.tag!==5&&Tn.tag!==6)&&(Tn=null)):(vn=null,Tn=pt),vn!==Tn)){if(Dn=vt,Vt="onMouseLeave",st="onMouseEnter",Ze="mouse",(n==="pointerout"||n==="pointerover")&&(Dn=Ga,Vt="onPointerLeave",st="onPointerEnter",Ze="pointer"),Ho=vn==null?It:il(vn),at=Tn==null?It:il(Tn),It=new Dn(Vt,Ze+"leave",vn,c,jt),It.target=Ho,It.relatedTarget=at,Vt=null,Fs(jt)===pt&&(Dn=new Dn(st,Ze+"enter",Tn,c,jt),Dn.target=at,Dn.relatedTarget=Ho,Vt=Dn),Ho=Vt,vn&&Tn)t:{for(Dn=vn,st=Tn,Ze=0,at=Dn;at;at=nl(at))Ze++;for(at=0,Vt=st;Vt;Vt=nl(Vt))at++;for(;0<Ze-at;)Dn=nl(Dn),Ze--;for(;0<at-Ze;)st=nl(st),at--;for(;Ze--;){if(Dn===st||st!==null&&Dn===st.alternate)break t;Dn=nl(Dn),st=nl(st)}Dn=null}else Dn=null;vn!==null&&Kc(Ut,It,vn,Dn,!1),Tn!==null&&Ho!==null&&Kc(Ut,Ho,Tn,Dn,!0)}}e:{if(It=pt?il(pt):window,vn=It.nodeName&&It.nodeName.toLowerCase(),vn==="select"||vn==="input"&&It.type==="file")var $n=ma;else if(bs(It))if(sa)$n=Pa;else{$n=ja;var hr=Ra}else(vn=It.nodeName)&&vn.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&($n=gl);if($n&&($n=$n(n,pt))){ha(Ut,$n,c,jt);break e}hr&&hr(n,It,pt),n==="focusout"&&(hr=It._wrapperState)&&hr.controlled&&It.type==="number"&&q(It,"number",It.value)}switch(hr=pt?il(pt):window,n){case"focusin":(bs(hr)||hr.contentEditable==="true")&&(Da=hr,ya=pt,yl=null);break;case"focusout":yl=ya=Da=null;break;case"mousedown":_s=!0;break;case"contextmenu":case"mouseup":case"dragend":_s=!1,hc(Ut,c,jt);break;case"selectionchange":if(Ja)break;case"keydown":case"keyup":hc(Ut,c,jt)}var pr;if(oa)e:{switch(n){case"compositionstart":var Cr="onCompositionStart";break e;case"compositionend":Cr="onCompositionEnd";break e;case"compositionupdate":Cr="onCompositionUpdate";break e}Cr=void 0}else Gs?Fl(n,c)&&(Cr="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Cr="onCompositionStart");Cr&&(js&&c.locale!=="ko"&&(Gs||Cr!=="onCompositionStart"?Cr==="onCompositionEnd"&&Gs&&(pr=Mt()):(Fn=jt,cr="value"in Fn?Fn.value:Fn.textContent,Gs=!0)),hr=tl(pt,Cr),0<hr.length&&(Cr=new wo(Cr,n,null,c,jt),Ut.push({event:Cr,listeners:hr}),pr?Cr.data=pr:(pr=Ca(c),pr!==null&&(Cr.data=pr)))),(pr=dc?Ps(n,c):es(n,c))&&(pt=tl(pt,"onBeforeInput"),0<pt.length&&(jt=new wo("onBeforeInput","beforeinput",null,c,jt),Ut.push({event:jt,listeners:pt}),jt.data=pr))}Ul(Ut,i)})}function yc(n,i,c){return{instance:n,listener:i,currentTarget:c}}function tl(n,i){for(var c=i+"Capture",v=[];n!==null;){var F=n,V=F.stateNode;F.tag===5&&V!==null&&(F=V,V=ms(n,c),V!=null&&v.unshift(yc(n,V,F)),V=ms(n,i),V!=null&&v.push(yc(n,V,F))),n=n.return}return v}function nl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Kc(n,i,c,v,F){for(var V=i._reactName,ve=[];c!==null&&c!==v;){var ze=c,Ve=ze.alternate,pt=ze.stateNode;if(Ve!==null&&Ve===v)break;ze.tag===5&&pt!==null&&(ze=pt,F?(Ve=ms(c,V),Ve!=null&&ve.unshift(yc(c,Ve,ze))):F||(Ve=ms(c,V),Ve!=null&&ve.push(yc(c,Ve,ze)))),c=c.return}ve.length!==0&&n.push({event:i,listeners:ve})}var pu=/\r\n?/g,Nd=/\u0000|\uFFFD/g;function ql(n){return(typeof n=="string"?n:""+n).replace(pu,`
`).replace(Nd,"")}function vc(n,i,c){if(i=ql(i),ql(n)!==i&&c)throw Error(t(425))}function Wl(){}var bl=null,_l=null;function mu(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,Wu=typeof clearTimeout=="function"?clearTimeout:void 0,rl=typeof Promise=="function"?Promise:void 0,Hu=typeof queueMicrotask=="function"?queueMicrotask:typeof rl<"u"?function(n){return rl.resolve(null).then(n).catch(yu)}:gu;function yu(n){setTimeout(function(){throw n})}function vu(n,i){var c=i,v=0;do{var F=c.nextSibling;if(n.removeChild(c),F&&F.nodeType===8)if(c=F.data,c==="/$"){if(v===0){n.removeChild(F),cs(i);return}v--}else c!=="$"&&c!=="$?"&&c!=="$!"||v++;c=F}while(c);cs(i)}function ts(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Os(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return n;i--}else c==="/$"&&i++}n=n.previousSibling}return null}var ks=Math.random().toString(36).slice(2),va="__reactFiber$"+ks,Hl="__reactProps$"+ks,ns="__reactContainer$"+ks,rs="__reactEvents$"+ks,Ed="__reactListeners$"+ks,Td="__reactHandles$"+ks;function Fs(n){var i=n[va];if(i)return i;for(var c=n.parentNode;c;){if(i=c[ns]||c[va]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=Os(n);n!==null;){if(c=n[va])return c;n=Os(n)}return i}n=c,c=n.parentNode}return null}function Gl(n){return n=n[va]||n[ns],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function il(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Bs(n){return n[Hl]||null}var wc=[],la=-1;function Ms(n){return{current:n}}function Br(n){0>la||(n.current=wc[la],wc[la]=null,la--)}function vr(n,i){la++,wc[la]=n.current,n.current=i}var zs={},oo=Ms(zs),Ao=Ms(!1),ol=zs;function ca(n,i){var c=n.type.contextTypes;if(!c)return zs;var v=n.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===i)return v.__reactInternalMemoizedMaskedChildContext;var F={},V;for(V in c)F[V]=i[V];return v&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=F),F}function As(n){return n=n.childContextTypes,n!=null}function Kl(){Br(Ao),Br(oo)}function Vc(n,i,c){if(oo.current!==zs)throw Error(t(168));vr(oo,i),vr(Ao,c)}function Xc(n,i,c){var v=n.stateNode;if(i=i.childContextTypes,typeof v.getChildContext!="function")return c;v=v.getChildContext();for(var F in v)if(!(F in i))throw Error(t(108,M(n)||"Unknown",F));return Fe({},c,v)}function Vl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||zs,ol=oo.current,vr(oo,n),vr(Ao,Ao.current),!0}function Cd(n,i,c){var v=n.stateNode;if(!v)throw Error(t(169));c?(n=Xc(n,i,ol),v.__reactInternalMemoizedMergedChildContext=n,Br(Ao),Br(oo),vr(oo,n)):Br(Ao),vr(Ao,c)}var sl=null,Xl=!1,m=!1;function _(n){sl===null?sl=[n]:sl.push(n)}function W(n){Xl=!0,_(n)}function Y(){if(!m&&sl!==null){m=!0;var n=0,i=Wr;try{var c=sl;for(Wr=1;n<c.length;n++){var v=c[n];do v=v(!0);while(v!==null)}sl=null,Xl=!1}catch(F){throw sl!==null&&(sl=sl.slice(n+1)),Xn(io,Y),F}finally{Wr=i,m=!1}}return null}var pe=[],we=0,_e=null,Ne=0,Te=[],Ie=0,Ge=null,nt=1,Re="";function Je(n,i){pe[we++]=Ne,pe[we++]=_e,_e=n,Ne=i}function et(n,i,c){Te[Ie++]=nt,Te[Ie++]=Re,Te[Ie++]=Ge,Ge=n;var v=nt;n=Re;var F=32-sr(v)-1;v&=~(1<<F),c+=1;var V=32-sr(i)+F;if(30<V){var ve=F-F%5;V=(v&(1<<ve)-1).toString(32),v>>=ve,F-=ve,nt=1<<32-sr(i)+F|c<<F|v,Re=V+n}else nt=1<<V|c<<F|v,Re=n}function xt(n){n.return!==null&&(Je(n,1),et(n,1,0))}function it(n){for(;n===_e;)_e=pe[--we],pe[we]=null,Ne=pe[--we],pe[we]=null;for(;n===Ge;)Ge=Te[--Ie],Te[Ie]=null,Re=Te[--Ie],Te[Ie]=null,nt=Te[--Ie],Te[Ie]=null}var yt=null,wt=null,_t=!1,St=null;function En(n,i){var c=cl(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=n,i=n.deletions,i===null?(n.deletions=[c],n.flags|=16):i.push(c)}function mn(n,i){switch(n.tag){case 5:var c=n.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,yt=n,wt=ts(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,yt=n,wt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=Ge!==null?{id:nt,overflow:Re}:null,n.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=cl(18,null,null,0),c.stateNode=i,c.return=n,n.child=c,yt=n,wt=null,!0):!1;default:return!1}}function _r(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wn(n){if(_t){var i=wt;if(i){var c=i;if(!mn(n,i)){if(_r(n))throw Error(t(418));i=ts(c.nextSibling);var v=yt;i&&mn(n,i)?En(v,c):(n.flags=n.flags&-4097|2,_t=!1,yt=n)}}else{if(_r(n))throw Error(t(418));n.flags=n.flags&-4097|2,_t=!1,yt=n}}}function Jr(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yt=n}function so(n){if(n!==yt)return!1;if(!_t)return Jr(n),_t=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!mu(n.type,n.memoizedProps)),i&&(i=wt)){if(_r(n))throw Nr(),Error(t(418));for(;i;)En(n,i),i=ts(i.nextSibling)}if(Jr(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(i===0){wt=ts(n.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}n=n.nextSibling}wt=null}}else wt=yt?ts(n.stateNode.nextSibling):null;return!0}function Nr(){for(var n=wt;n;)n=ts(n.nextSibling)}function gn(){wt=yt=null,_t=!1}function Jt(n){St===null?St=[n]:St.push(n)}var mo=k.ReactCurrentBatchConfig;function ur(n,i,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var v=c.stateNode}if(!v)throw Error(t(147,n));var F=v,V=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===V?i.ref:(i=function(ve){var ze=F.refs;ve===null?delete ze[V]:ze[V]=ve},i._stringRef=V,i)}if(typeof n!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,n))}return n}function Hr(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Bi(n){var i=n._init;return i(n._payload)}function Ro(n){function i(st,Ze){if(n){var at=st.deletions;at===null?(st.deletions=[Ze],st.flags|=16):at.push(Ze)}}function c(st,Ze){if(!n)return null;for(;Ze!==null;)i(st,Ze),Ze=Ze.sibling;return null}function v(st,Ze){for(st=new Map;Ze!==null;)Ze.key!==null?st.set(Ze.key,Ze):st.set(Ze.index,Ze),Ze=Ze.sibling;return st}function F(st,Ze){return st=ru(st,Ze),st.index=0,st.sibling=null,st}function V(st,Ze,at){return st.index=at,n?(at=st.alternate,at!==null?(at=at.index,at<Ze?(st.flags|=2,Ze):at):(st.flags|=2,Ze)):(st.flags|=1048576,Ze)}function ve(st){return n&&st.alternate===null&&(st.flags|=2),st}function ze(st,Ze,at,Vt){return Ze===null||Ze.tag!==6?(Ze=Zh(at,st.mode,Vt),Ze.return=st,Ze):(Ze=F(Ze,at),Ze.return=st,Ze)}function Ve(st,Ze,at,Vt){var $n=at.type;return $n===Q?jt(st,Ze,at.props.children,Vt,at.key):Ze!==null&&(Ze.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Ae&&Bi($n)===Ze.type)?(Vt=F(Ze,at.props),Vt.ref=ur(st,Ze,at),Vt.return=st,Vt):(Vt=kf(at.type,at.key,at.props,null,st.mode,Vt),Vt.ref=ur(st,Ze,at),Vt.return=st,Vt)}function pt(st,Ze,at,Vt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==at.containerInfo||Ze.stateNode.implementation!==at.implementation?(Ze=Qh(at,st.mode,Vt),Ze.return=st,Ze):(Ze=F(Ze,at.children||[]),Ze.return=st,Ze)}function jt(st,Ze,at,Vt,$n){return Ze===null||Ze.tag!==7?(Ze=Eu(at,st.mode,Vt,$n),Ze.return=st,Ze):(Ze=F(Ze,at),Ze.return=st,Ze)}function Ut(st,Ze,at){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Ze=Zh(""+Ze,st.mode,at),Ze.return=st,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case G:return at=kf(Ze.type,Ze.key,Ze.props,null,st.mode,at),at.ref=ur(st,null,Ze),at.return=st,at;case re:return Ze=Qh(Ze,st.mode,at),Ze.return=st,Ze;case Ae:var Vt=Ze._init;return Ut(st,Vt(Ze._payload),at)}if(Se(Ze)||ke(Ze))return Ze=Eu(Ze,st.mode,at,null),Ze.return=st,Ze;Hr(st,Ze)}return null}function It(st,Ze,at,Vt){var $n=Ze!==null?Ze.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return $n!==null?null:ze(st,Ze,""+at,Vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case G:return at.key===$n?Ve(st,Ze,at,Vt):null;case re:return at.key===$n?pt(st,Ze,at,Vt):null;case Ae:return $n=at._init,It(st,Ze,$n(at._payload),Vt)}if(Se(at)||ke(at))return $n!==null?null:jt(st,Ze,at,Vt,null);Hr(st,at)}return null}function vn(st,Ze,at,Vt,$n){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return st=st.get(at)||null,ze(Ze,st,""+Vt,$n);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case G:return st=st.get(Vt.key===null?at:Vt.key)||null,Ve(Ze,st,Vt,$n);case re:return st=st.get(Vt.key===null?at:Vt.key)||null,pt(Ze,st,Vt,$n);case Ae:var hr=Vt._init;return vn(st,Ze,at,hr(Vt._payload),$n)}if(Se(Vt)||ke(Vt))return st=st.get(at)||null,jt(Ze,st,Vt,$n,null);Hr(Ze,Vt)}return null}function Tn(st,Ze,at,Vt){for(var $n=null,hr=null,pr=Ze,Cr=Ze=0,Cs=null;pr!==null&&Cr<at.length;Cr++){pr.index>Cr?(Cs=pr,pr=null):Cs=pr.sibling;var ji=It(st,pr,at[Cr],Vt);if(ji===null){pr===null&&(pr=Cs);break}n&&pr&&ji.alternate===null&&i(st,pr),Ze=V(ji,Ze,Cr),hr===null?$n=ji:hr.sibling=ji,hr=ji,pr=Cs}if(Cr===at.length)return c(st,pr),_t&&Je(st,Cr),$n;if(pr===null){for(;Cr<at.length;Cr++)pr=Ut(st,at[Cr],Vt),pr!==null&&(Ze=V(pr,Ze,Cr),hr===null?$n=pr:hr.sibling=pr,hr=pr);return _t&&Je(st,Cr),$n}for(pr=v(st,pr);Cr<at.length;Cr++)Cs=vn(pr,st,Cr,at[Cr],Vt),Cs!==null&&(n&&Cs.alternate!==null&&pr.delete(Cs.key===null?Cr:Cs.key),Ze=V(Cs,Ze,Cr),hr===null?$n=Cs:hr.sibling=Cs,hr=Cs);return n&&pr.forEach(function(iu){return i(st,iu)}),_t&&Je(st,Cr),$n}function Dn(st,Ze,at,Vt){var $n=ke(at);if(typeof $n!="function")throw Error(t(150));if(at=$n.call(at),at==null)throw Error(t(151));for(var hr=$n=null,pr=Ze,Cr=Ze=0,Cs=null,ji=at.next();pr!==null&&!ji.done;Cr++,ji=at.next()){pr.index>Cr?(Cs=pr,pr=null):Cs=pr.sibling;var iu=It(st,pr,ji.value,Vt);if(iu===null){pr===null&&(pr=Cs);break}n&&pr&&iu.alternate===null&&i(st,pr),Ze=V(iu,Ze,Cr),hr===null?$n=iu:hr.sibling=iu,hr=iu,pr=Cs}if(ji.done)return c(st,pr),_t&&Je(st,Cr),$n;if(pr===null){for(;!ji.done;Cr++,ji=at.next())ji=Ut(st,ji.value,Vt),ji!==null&&(Ze=V(ji,Ze,Cr),hr===null?$n=ji:hr.sibling=ji,hr=ji);return _t&&Je(st,Cr),$n}for(pr=v(st,pr);!ji.done;Cr++,ji=at.next())ji=vn(pr,st,Cr,ji.value,Vt),ji!==null&&(n&&ji.alternate!==null&&pr.delete(ji.key===null?Cr:ji.key),Ze=V(ji,Ze,Cr),hr===null?$n=ji:hr.sibling=ji,hr=ji);return n&&pr.forEach(function(ix){return i(st,ix)}),_t&&Je(st,Cr),$n}function Ho(st,Ze,at,Vt){if(typeof at=="object"&&at!==null&&at.type===Q&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case G:e:{for(var $n=at.key,hr=Ze;hr!==null;){if(hr.key===$n){if($n=at.type,$n===Q){if(hr.tag===7){c(st,hr.sibling),Ze=F(hr,at.props.children),Ze.return=st,st=Ze;break e}}else if(hr.elementType===$n||typeof $n=="object"&&$n!==null&&$n.$$typeof===Ae&&Bi($n)===hr.type){c(st,hr.sibling),Ze=F(hr,at.props),Ze.ref=ur(st,hr,at),Ze.return=st,st=Ze;break e}c(st,hr);break}else i(st,hr);hr=hr.sibling}at.type===Q?(Ze=Eu(at.props.children,st.mode,Vt,at.key),Ze.return=st,st=Ze):(Vt=kf(at.type,at.key,at.props,null,st.mode,Vt),Vt.ref=ur(st,Ze,at),Vt.return=st,st=Vt)}return ve(st);case re:e:{for(hr=at.key;Ze!==null;){if(Ze.key===hr)if(Ze.tag===4&&Ze.stateNode.containerInfo===at.containerInfo&&Ze.stateNode.implementation===at.implementation){c(st,Ze.sibling),Ze=F(Ze,at.children||[]),Ze.return=st,st=Ze;break e}else{c(st,Ze);break}else i(st,Ze);Ze=Ze.sibling}Ze=Qh(at,st.mode,Vt),Ze.return=st,st=Ze}return ve(st);case Ae:return hr=at._init,Ho(st,Ze,hr(at._payload),Vt)}if(Se(at))return Tn(st,Ze,at,Vt);if(ke(at))return Dn(st,Ze,at,Vt);Hr(st,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,Ze!==null&&Ze.tag===6?(c(st,Ze.sibling),Ze=F(Ze,at),Ze.return=st,st=Ze):(c(st,Ze),Ze=Zh(at,st.mode,Vt),Ze.return=st,st=Ze),ve(st)):c(st,Ze)}return Ho}var xo=Ro(!0),to=Ro(!1),No=Ms(null),jo=null,qi=null,Qr=null;function yi(){Qr=qi=jo=null}function Wi(n){var i=No.current;Br(No),n._currentValue=i}function vi(n,i,c){for(;n!==null;){var v=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,v!==null&&(v.childLanes|=i)):v!==null&&(v.childLanes&i)!==i&&(v.childLanes|=i),n===c)break;n=n.return}}function ao(n,i){jo=n,Qr=qi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(qn=!0),n.firstContext=null)}function lo(n){var i=n._currentValue;if(Qr!==n)if(n={context:n,memoizedValue:i,next:null},qi===null){if(jo===null)throw Error(t(308));qi=n,jo.dependencies={lanes:0,firstContext:n}}else qi=qi.next=n;return i}var Ri=null;function g(n){Ri===null?Ri=[n]:Ri.push(n)}function x(n,i,c,v){var F=i.interleaved;return F===null?(c.next=c,g(i)):(c.next=F.next,F.next=c),i.interleaved=c,K(n,v)}function K(n,i){n.lanes|=i;var c=n.alternate;for(c!==null&&(c.lanes|=i),c=n,n=n.return;n!==null;)n.childLanes|=i,c=n.alternate,c!==null&&(c.childLanes|=i),c=n,n=n.return;return c.tag===3?c.stateNode:null}var $=!1;function E(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ae(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function de(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function D(n,i,c){var v=n.updateQueue;if(v===null)return null;if(v=v.shared,(Ai&2)!==0){var F=v.pending;return F===null?i.next=i:(i.next=F.next,F.next=i),v.pending=i,K(n,c)}return F=v.interleaved,F===null?(i.next=i,g(v)):(i.next=F.next,F.next=i),v.interleaved=i,K(n,c)}function Pe(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var v=i.lanes;v&=n.pendingLanes,c|=v,i.lanes=c,Ln(n,c)}}function Ue(n,i){var c=n.updateQueue,v=n.alternate;if(v!==null&&(v=v.updateQueue,c===v)){var F=null,V=null;if(c=c.firstBaseUpdate,c!==null){do{var ve={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};V===null?F=V=ve:V=V.next=ve,c=c.next}while(c!==null);V===null?F=V=i:V=V.next=i}else F=V=i;c={baseState:v.baseState,firstBaseUpdate:F,lastBaseUpdate:V,shared:v.shared,effects:v.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}function je(n,i,c,v){var F=n.updateQueue;$=!1;var V=F.firstBaseUpdate,ve=F.lastBaseUpdate,ze=F.shared.pending;if(ze!==null){F.shared.pending=null;var Ve=ze,pt=Ve.next;Ve.next=null,ve===null?V=pt:ve.next=pt,ve=Ve;var jt=n.alternate;jt!==null&&(jt=jt.updateQueue,ze=jt.lastBaseUpdate,ze!==ve&&(ze===null?jt.firstBaseUpdate=pt:ze.next=pt,jt.lastBaseUpdate=Ve))}if(V!==null){var Ut=F.baseState;ve=0,jt=pt=Ve=null,ze=V;do{var It=ze.lane,vn=ze.eventTime;if((v&It)===It){jt!==null&&(jt=jt.next={eventTime:vn,lane:0,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null});e:{var Tn=n,Dn=ze;switch(It=i,vn=c,Dn.tag){case 1:if(Tn=Dn.payload,typeof Tn=="function"){Ut=Tn.call(vn,Ut,It);break e}Ut=Tn;break e;case 3:Tn.flags=Tn.flags&-65537|128;case 0:if(Tn=Dn.payload,It=typeof Tn=="function"?Tn.call(vn,Ut,It):Tn,It==null)break e;Ut=Fe({},Ut,It);break e;case 2:$=!0}}ze.callback!==null&&ze.lane!==0&&(n.flags|=64,It=F.effects,It===null?F.effects=[ze]:It.push(ze))}else vn={eventTime:vn,lane:It,tag:ze.tag,payload:ze.payload,callback:ze.callback,next:null},jt===null?(pt=jt=vn,Ve=Ut):jt=jt.next=vn,ve|=It;if(ze=ze.next,ze===null){if(ze=F.shared.pending,ze===null)break;It=ze,ze=It.next,It.next=null,F.lastBaseUpdate=It,F.shared.pending=null}}while(!0);if(jt===null&&(Ve=Ut),F.baseState=Ve,F.firstBaseUpdate=pt,F.lastBaseUpdate=jt,i=F.shared.interleaved,i!==null){F=i;do ve|=F.lane,F=F.next;while(F!==i)}else V===null&&(F.shared.lanes=0);Su|=ve,n.lanes=ve,n.memoizedState=Ut}}function $e(n,i,c){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var v=n[i],F=v.callback;if(F!==null){if(v.callback=null,v=c,typeof F!="function")throw Error(t(191,F));F.call(v)}}}var De={},Ye=Ms(De),ct=Ms(De),Dt=Ms(De);function mt(n){if(n===De)throw Error(t(174));return n}function tt(n,i){switch(vr(Dt,i),vr(ct,n),vr(Ye,De),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Nt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Nt(i,n)}Br(Ye),vr(Ye,i)}function ft(){Br(Ye),Br(ct),Br(Dt)}function Qt(n){mt(Dt.current);var i=mt(Ye.current),c=Nt(i,n.type);i!==c&&(vr(ct,n),vr(Ye,c))}function _n(n){ct.current===n&&(Br(Ye),Br(ct))}var ut=Ms(0);function xn(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ei=[];function ci(){for(var n=0;n<ei.length;n++)ei[n]._workInProgressVersionPrimary=null;ei.length=0}var zi=k.ReactCurrentDispatcher,Ct=k.ReactCurrentBatchConfig,tr=0,Ke=null,We=null,Et=null,sn=!1,bt=!1,Kt=0,Bn=0;function Jn(){throw Error(t(321))}function Sr(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!Fi(n[c],i[c]))return!1;return!0}function bo(n,i,c,v,F,V){if(tr=V,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,zi.current=n===null||n.memoizedState===null?ti:Zr,n=c(v,F),bt){V=0;do{if(bt=!1,Kt=0,25<=V)throw Error(t(301));V+=1,Et=We=null,i.updateQueue=null,zi.current=go,n=c(v,F)}while(bt)}if(zi.current=nr,i=We!==null&&We.next!==null,tr=0,Et=We=Ke=null,sn=!1,i)throw Error(t(300));return n}function Mo(){var n=Kt!==0;return Kt=0,n}function Po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ke.memoizedState=Et=n:Et=Et.next=n,Et}function Wo(){if(We===null){var n=Ke.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var i=Et===null?Ke.memoizedState:Et.next;if(i!==null)Et=i,We=n;else{if(n===null)throw Error(t(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Et===null?Ke.memoizedState=Et=n:Et=Et.next=n}return Et}function Fa(n,i){return typeof i=="function"?i(n):i}function xc(n){var i=Wo(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var v=We,F=v.baseQueue,V=c.pending;if(V!==null){if(F!==null){var ve=F.next;F.next=V.next,V.next=ve}v.baseQueue=F=V,c.pending=null}if(F!==null){V=F.next,v=v.baseState;var ze=ve=null,Ve=null,pt=V;do{var jt=pt.lane;if((tr&jt)===jt)Ve!==null&&(Ve=Ve.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),v=pt.hasEagerState?pt.eagerState:n(v,pt.action);else{var Ut={lane:jt,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};Ve===null?(ze=Ve=Ut,ve=v):Ve=Ve.next=Ut,Ke.lanes|=jt,Su|=jt}pt=pt.next}while(pt!==null&&pt!==V);Ve===null?ve=v:Ve.next=ze,Fi(v,i.memoizedState)||(qn=!0),i.memoizedState=v,i.baseState=ve,i.baseQueue=Ve,c.lastRenderedState=v}if(n=c.interleaved,n!==null){F=n;do V=F.lane,Ke.lanes|=V,Su|=V,F=F.next;while(F!==n)}else F===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ba(n){var i=Wo(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var v=c.dispatch,F=c.pending,V=i.memoizedState;if(F!==null){c.pending=null;var ve=F=F.next;do V=n(V,ve.action),ve=ve.next;while(ve!==F);Fi(V,i.memoizedState)||(qn=!0),i.memoizedState=V,i.baseQueue===null&&(i.baseState=V),c.lastRenderedState=V}return[V,v]}function wu(){}function Yc(n,i){var c=Ke,v=Wo(),F=i(),V=!Fi(v.memoizedState,F);if(V&&(v.memoizedState=F,qn=!0),v=v.queue,Sc(bu.bind(null,c,v,n),[n]),v.getSnapshot!==i||V||Et!==null&&Et.memoizedState.tag&1){if(c.flags|=2048,Ns(9,Jc.bind(null,c,v,F,i),void 0,null),Ts===null)throw Error(t(349));(tr&30)!==0||xu(c,i,F)}return F}function xu(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=Ke.updateQueue,i===null?(i={lastEffect:null,stores:null},Ke.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function Jc(n,i,c,v){i.value=c,i.getSnapshot=v,Sl(i)&&bc(n)}function bu(n,i,c){return c(function(){Sl(i)&&bc(n)})}function Sl(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!Fi(n,c)}catch{return!0}}function bc(n){var i=K(n,1);i!==null&&Nl(i,n,1,-1)}function Yl(n){var i=Po();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:n},i.queue=n,n=n.dispatch=Hn.bind(null,Ke,n),[i.memoizedState,n]}function Ns(n,i,c,v){return n={tag:n,create:i,destroy:c,deps:v,next:null},i=Ke.updateQueue,i===null?(i={lastEffect:null,stores:null},Ke.updateQueue=i,i.lastEffect=n.next=n):(c=i.lastEffect,c===null?i.lastEffect=n.next=n:(v=c.next,c.next=n,n.next=v,i.lastEffect=n)),n}function wa(){return Wo().memoizedState}function Vs(n,i,c,v){var F=Po();Ke.flags|=n,F.memoizedState=Ns(1|i,c,void 0,v===void 0?null:v)}function al(n,i,c,v){var F=Wo();v=v===void 0?null:v;var V=void 0;if(We!==null){var ve=We.memoizedState;if(V=ve.destroy,v!==null&&Sr(v,ve.deps)){F.memoizedState=Ns(i,c,V,v);return}}Ke.flags|=n,F.memoizedState=Ns(1|i,c,V,v)}function _c(n,i){return Vs(8390656,8,n,i)}function Sc(n,i){return al(2048,8,n,i)}function _u(n,i){return al(4,2,n,i)}function kc(n,i){return al(4,4,n,i)}function Ac(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ld(n,i,c){return c=c!=null?c.concat([n]):null,al(4,4,Ac.bind(null,i,n),c)}function Lt(){}function Wt(n,i){var c=Wo();i=i===void 0?null:i;var v=c.memoizedState;return v!==null&&i!==null&&Sr(i,v[1])?v[0]:(c.memoizedState=[n,i],n)}function en(n,i){var c=Wo();i=i===void 0?null:i;var v=c.memoizedState;return v!==null&&i!==null&&Sr(i,v[1])?v[0]:(n=n(),c.memoizedState=[n,i],n)}function zt(n,i,c){return(tr&21)===0?(n.baseState&&(n.baseState=!1,qn=!0),n.memoizedState=c):(Fi(c,i)||(c=ys(),Ke.lanes|=c,Su|=c,n.baseState=!0),i)}function dr(n,i){var c=Wr;Wr=c!==0&&4>c?c:4,n(!0);var v=Ct.transition;Ct.transition={};try{n(!1),i()}finally{Wr=c,Ct.transition=v}}function zn(){return Wo().memoizedState}function Pn(n,i,c){var v=tu(n);if(c={lane:v,action:c,hasEagerState:!1,eagerState:null,next:null},Gr(n))Er(i,c);else if(c=x(n,i,c,v),c!==null){var F=ua();Nl(c,n,v,F),Dr(c,i,v)}}function Hn(n,i,c){var v=tu(n),F={lane:v,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gr(n))Er(i,F);else{var V=n.alternate;if(n.lanes===0&&(V===null||V.lanes===0)&&(V=i.lastRenderedReducer,V!==null))try{var ve=i.lastRenderedState,ze=V(ve,c);if(F.hasEagerState=!0,F.eagerState=ze,Fi(ze,ve)){var Ve=i.interleaved;Ve===null?(F.next=F,g(i)):(F.next=Ve.next,Ve.next=F),i.interleaved=F;return}}catch{}finally{}c=x(n,i,F,v),c!==null&&(F=ua(),Nl(c,n,v,F),Dr(c,i,v))}}function Gr(n){var i=n.alternate;return n===Ke||i!==null&&i===Ke}function Er(n,i){bt=sn=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function Dr(n,i,c){if((c&4194240)!==0){var v=i.lanes;v&=n.pendingLanes,c|=v,i.lanes=c,Ln(n,c)}}var nr={readContext:lo,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},ti={readContext:lo,useCallback:function(n,i){return Po().memoizedState=[n,i===void 0?null:i],n},useContext:lo,useEffect:_c,useImperativeHandle:function(n,i,c){return c=c!=null?c.concat([n]):null,Vs(4194308,4,Ac.bind(null,i,n),c)},useLayoutEffect:function(n,i){return Vs(4194308,4,n,i)},useInsertionEffect:function(n,i){return Vs(4,2,n,i)},useMemo:function(n,i){var c=Po();return i=i===void 0?null:i,n=n(),c.memoizedState=[n,i],n},useReducer:function(n,i,c){var v=Po();return i=c!==void 0?c(i):i,v.memoizedState=v.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},v.queue=n,n=n.dispatch=Pn.bind(null,Ke,n),[v.memoizedState,n]},useRef:function(n){var i=Po();return n={current:n},i.memoizedState=n},useState:Yl,useDebugValue:Lt,useDeferredValue:function(n){return Po().memoizedState=n},useTransition:function(){var n=Yl(!1),i=n[0];return n=dr.bind(null,n[1]),Po().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,c){var v=Ke,F=Po();if(_t){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),Ts===null)throw Error(t(349));(tr&30)!==0||xu(v,i,c)}F.memoizedState=c;var V={value:c,getSnapshot:i};return F.queue=V,_c(bu.bind(null,v,V,n),[n]),v.flags|=2048,Ns(9,Jc.bind(null,v,V,c,i),void 0,null),c},useId:function(){var n=Po(),i=Ts.identifierPrefix;if(_t){var c=Re,v=nt;c=(v&~(1<<32-sr(v)-1)).toString(32)+c,i=":"+i+"R"+c,c=Kt++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=Bn++,i=":"+i+"r"+c.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Zr={readContext:lo,useCallback:Wt,useContext:lo,useEffect:Sc,useImperativeHandle:Ld,useInsertionEffect:_u,useLayoutEffect:kc,useMemo:en,useReducer:xc,useRef:wa,useState:function(){return xc(Fa)},useDebugValue:Lt,useDeferredValue:function(n){var i=Wo();return zt(i,We.memoizedState,n)},useTransition:function(){var n=xc(Fa)[0],i=Wo().memoizedState;return[n,i]},useMutableSource:wu,useSyncExternalStore:Yc,useId:zn,unstable_isNewReconciler:!1},go={readContext:lo,useCallback:Wt,useContext:lo,useEffect:Sc,useImperativeHandle:Ld,useInsertionEffect:_u,useLayoutEffect:kc,useMemo:en,useReducer:Ba,useRef:wa,useState:function(){return Ba(Fa)},useDebugValue:Lt,useDeferredValue:function(n){var i=Wo();return We===null?i.memoizedState=n:zt(i,We.memoizedState,n)},useTransition:function(){var n=Ba(Fa)[0],i=Wo().memoizedState;return[n,i]},useMutableSource:wu,useSyncExternalStore:Yc,useId:zn,unstable_isNewReconciler:!1};function Mr(n,i){if(n&&n.defaultProps){i=Fe({},i),n=n.defaultProps;for(var c in n)i[c]===void 0&&(i[c]=n[c]);return i}return i}function bn(n,i,c,v){i=n.memoizedState,c=c(v,i),c=c==null?i:Fe({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Tr={isMounted:function(n){return(n=n._reactInternals)?ht(n)===n:!1},enqueueSetState:function(n,i,c){n=n._reactInternals;var v=ua(),F=tu(n),V=de(v,F);V.payload=i,c!=null&&(V.callback=c),i=D(n,V,F),i!==null&&(Nl(i,n,F,v),Pe(i,n,F))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var v=ua(),F=tu(n),V=de(v,F);V.tag=1,V.payload=i,c!=null&&(V.callback=c),i=D(n,V,F),i!==null&&(Nl(i,n,F,v),Pe(i,n,F))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=ua(),v=tu(n),F=de(c,v);F.tag=2,i!=null&&(F.callback=i),i=D(n,F,v),i!==null&&(Nl(i,n,v,c),Pe(i,n,v))}};function Ur(n,i,c,v,F,V,ve){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(v,V,ve):i.prototype&&i.prototype.isPureReactComponent?!ds(c,v)||!ds(F,V):!0}function ii(n,i,c){var v=!1,F=zs,V=i.contextType;return typeof V=="object"&&V!==null?V=lo(V):(F=As(i)?ol:oo.current,v=i.contextTypes,V=(v=v!=null)?ca(n,F):zs),i=new i(c,V),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Tr,n.stateNode=i,i._reactInternals=n,v&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=F,n.__reactInternalMemoizedMaskedChildContext=V),i}function Vn(n,i,c,v){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,v),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,v),i.state!==n&&Tr.enqueueReplaceState(i,i.state,null)}function Hi(n,i,c,v){var F=n.stateNode;F.props=c,F.state=n.memoizedState,F.refs={},E(n);var V=i.contextType;typeof V=="object"&&V!==null?F.context=lo(V):(V=As(i)?ol:oo.current,F.context=ca(n,V)),F.state=n.memoizedState,V=i.getDerivedStateFromProps,typeof V=="function"&&(bn(n,i,V,c),F.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(i=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),i!==F.state&&Tr.enqueueReplaceState(F,F.state,null),je(n,c,F,v),F.state=n.memoizedState),typeof F.componentDidMount=="function"&&(n.flags|=4194308)}function Gi(n,i){try{var c="",v=i;do c+=ye(v),v=v.return;while(v);var F=c}catch(V){F=`
Error generating stack: `+V.message+`
`+V.stack}return{value:n,source:i,stack:F,digest:null}}function an(n,i,c){return{value:n,source:null,stack:c??null,digest:i??null}}function ir(n,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var nn=typeof WeakMap=="function"?WeakMap:Map;function ui(n,i,c){c=de(-1,c),c.tag=3,c.payload={element:null};var v=i.value;return c.callback=function(){vf||(vf=!0,Wh=v),ir(n,i)},c}function tn(n,i,c){c=de(-1,c),c.tag=3;var v=n.type.getDerivedStateFromError;if(typeof v=="function"){var F=i.value;c.payload=function(){return v(F)},c.callback=function(){ir(n,i)}}var V=n.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(c.callback=function(){ir(n,i),typeof v!="function"&&(Qc===null?Qc=new Set([this]):Qc.add(this));var ve=i.stack;this.componentDidCatch(i.value,{componentStack:ve!==null?ve:""})}),c}function Kr(n,i,c){var v=n.pingCache;if(v===null){v=n.pingCache=new nn;var F=new Set;v.set(i,F)}else F=v.get(i),F===void 0&&(F=new Set,v.set(i,F));F.has(c)||(F.add(c),n=Kw.bind(null,n,i,c),i.then(n,n))}function oi(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Xs(n,i,c,v,F){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=de(-1,1),i.tag=2,D(c,i,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=F,n)}var Ot=k.ReactCurrentOwner,qn=!1;function fr(n,i,c,v){i.child=n===null?to(i,null,c,v):xo(i,n.child,c,v)}function Ki(n,i,c,v,F){c=c.render;var V=i.ref;return ao(i,F),v=bo(n,i,c,v,V,F),c=Mo(),n!==null&&!qn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~F,Ec(n,i,F)):(_t&&c&&xt(i),i.flags|=1,fr(n,i,v,F),i.child)}function si(n,i,c,v,F){if(n===null){var V=c.type;return typeof V=="function"&&!Jh(V)&&V.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=V,$s(n,i,V,v,F)):(n=kf(c.type,null,v,i,i.mode,F),n.ref=i.ref,n.return=i,i.child=n)}if(V=n.child,(n.lanes&F)===0){var ve=V.memoizedProps;if(c=c.compare,c=c!==null?c:ds,c(ve,v)&&n.ref===i.ref)return Ec(n,i,F)}return i.flags|=1,n=ru(V,v),n.ref=i.ref,n.return=i,i.child=n}function $s(n,i,c,v,F){if(n!==null){var V=n.memoizedProps;if(ds(V,v)&&n.ref===i.ref)if(qn=!1,i.pendingProps=v=V,(n.lanes&F)!==0)(n.flags&131072)!==0&&(qn=!0);else return i.lanes=n.lanes,Ec(n,i,F)}return Ma(n,i,c,v,F)}function no(n,i,c){var v=i.pendingProps,F=v.children,V=n!==null?n.memoizedState:null;if(v.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},vr(Ku,za),za|=c;else{if((c&1073741824)===0)return n=V!==null?V.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,vr(Ku,za),za|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=V!==null?V.baseLanes:c,vr(Ku,za),za|=v}else V!==null?(v=V.baseLanes|c,i.memoizedState=null):v=c,vr(Ku,za),za|=v;return fr(n,i,F,c),i.child}function Es(n,i){var c=i.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Ma(n,i,c,v,F){var V=As(c)?ol:oo.current;return V=ca(i,V),ao(i,F),c=bo(n,i,c,v,V,F),v=Mo(),n!==null&&!qn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~F,Ec(n,i,F)):(_t&&v&&xt(i),i.flags|=1,fr(n,i,c,F),i.child)}function Us(n,i,c,v,F){if(As(c)){var V=!0;Vl(i)}else V=!1;if(ao(i,F),i.stateNode===null)hf(n,i),ii(i,c,v),Hi(i,c,v,F),v=!0;else if(n===null){var ve=i.stateNode,ze=i.memoizedProps;ve.props=ze;var Ve=ve.context,pt=c.contextType;typeof pt=="object"&&pt!==null?pt=lo(pt):(pt=As(c)?ol:oo.current,pt=ca(i,pt));var jt=c.getDerivedStateFromProps,Ut=typeof jt=="function"||typeof ve.getSnapshotBeforeUpdate=="function";Ut||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(ze!==v||Ve!==pt)&&Vn(i,ve,v,pt),$=!1;var It=i.memoizedState;ve.state=It,je(i,v,ve,F),Ve=i.memoizedState,ze!==v||It!==Ve||Ao.current||$?(typeof jt=="function"&&(bn(i,c,jt,v),Ve=i.memoizedState),(ze=$||Ur(i,c,ze,v,It,Ve,pt))?(Ut||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount()),typeof ve.componentDidMount=="function"&&(i.flags|=4194308)):(typeof ve.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=v,i.memoizedState=Ve),ve.props=v,ve.state=Ve,ve.context=pt,v=ze):(typeof ve.componentDidMount=="function"&&(i.flags|=4194308),v=!1)}else{ve=i.stateNode,ae(n,i),ze=i.memoizedProps,pt=i.type===i.elementType?ze:Mr(i.type,ze),ve.props=pt,Ut=i.pendingProps,It=ve.context,Ve=c.contextType,typeof Ve=="object"&&Ve!==null?Ve=lo(Ve):(Ve=As(c)?ol:oo.current,Ve=ca(i,Ve));var vn=c.getDerivedStateFromProps;(jt=typeof vn=="function"||typeof ve.getSnapshotBeforeUpdate=="function")||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(ze!==Ut||It!==Ve)&&Vn(i,ve,v,Ve),$=!1,It=i.memoizedState,ve.state=It,je(i,v,ve,F);var Tn=i.memoizedState;ze!==Ut||It!==Tn||Ao.current||$?(typeof vn=="function"&&(bn(i,c,vn,v),Tn=i.memoizedState),(pt=$||Ur(i,c,pt,v,It,Tn,Ve)||!1)?(jt||typeof ve.UNSAFE_componentWillUpdate!="function"&&typeof ve.componentWillUpdate!="function"||(typeof ve.componentWillUpdate=="function"&&ve.componentWillUpdate(v,Tn,Ve),typeof ve.UNSAFE_componentWillUpdate=="function"&&ve.UNSAFE_componentWillUpdate(v,Tn,Ve)),typeof ve.componentDidUpdate=="function"&&(i.flags|=4),typeof ve.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof ve.componentDidUpdate!="function"||ze===n.memoizedProps&&It===n.memoizedState||(i.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||ze===n.memoizedProps&&It===n.memoizedState||(i.flags|=1024),i.memoizedProps=v,i.memoizedState=Tn),ve.props=v,ve.state=Tn,ve.context=Ve,v=pt):(typeof ve.componentDidUpdate!="function"||ze===n.memoizedProps&&It===n.memoizedState||(i.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||ze===n.memoizedProps&&It===n.memoizedState||(i.flags|=1024),v=!1)}return Id(n,i,c,v,V,F)}function Id(n,i,c,v,F,V){Es(n,i);var ve=(i.flags&128)!==0;if(!v&&!ve)return F&&Cd(i,c,!1),Ec(n,i,V);v=i.stateNode,Ot.current=i;var ze=ve&&typeof c.getDerivedStateFromError!="function"?null:v.render();return i.flags|=1,n!==null&&ve?(i.child=xo(i,n.child,null,V),i.child=xo(i,null,ze,V)):fr(n,i,ze,V),i.memoizedState=v.state,F&&Cd(i,c,!0),i.child}function df(n){var i=n.stateNode;i.pendingContext?Vc(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Vc(n,i.context,!1),tt(n,i.containerInfo)}function Nc(n,i,c,v,F){return gn(),Jt(F),i.flags|=256,fr(n,i,c,v),i.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function jh(n){return{baseLanes:n,cachePool:null,transitions:null}}function d0(n,i,c){var v=i.pendingProps,F=ut.current,V=!1,ve=(i.flags&128)!==0,ze;if((ze=ve)||(ze=n!==null&&n.memoizedState===null?!1:(F&2)!==0),ze?(V=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(F|=1),vr(ut,F&1),n===null)return wn(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(ve=v.children,n=v.fallback,V?(v=i.mode,V=i.child,ve={mode:"hidden",children:ve},(v&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ve):V=Af(ve,v,0,null),n=Eu(n,v,c,null),V.return=i,n.return=i,V.sibling=n,i.child=V,i.child.memoizedState=jh(c),i.memoizedState=Rd,n):Ph(i,ve));if(F=n.memoizedState,F!==null&&(ze=F.dehydrated,ze!==null))return Dw(n,i,ve,v,ze,F,c);if(V){V=v.fallback,ve=i.mode,F=n.child,ze=F.sibling;var Ve={mode:"hidden",children:v.children};return(ve&1)===0&&i.child!==F?(v=i.child,v.childLanes=0,v.pendingProps=Ve,i.deletions=null):(v=ru(F,Ve),v.subtreeFlags=F.subtreeFlags&14680064),ze!==null?V=ru(ze,V):(V=Eu(V,ve,c,null),V.flags|=2),V.return=i,v.return=i,v.sibling=V,i.child=v,v=V,V=i.child,ve=n.child.memoizedState,ve=ve===null?jh(c):{baseLanes:ve.baseLanes|c,cachePool:null,transitions:ve.transitions},V.memoizedState=ve,V.childLanes=n.childLanes&~c,i.memoizedState=Rd,v}return V=n.child,n=V.sibling,v=ru(V,{mode:"visible",children:v.children}),(i.mode&1)===0&&(v.lanes=c),v.return=i,v.sibling=null,n!==null&&(c=i.deletions,c===null?(i.deletions=[n],i.flags|=16):c.push(n)),i.child=v,i.memoizedState=null,v}function Ph(n,i){return i=Af({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ff(n,i,c,v){return v!==null&&Jt(v),xo(i,n.child,null,c),n=Ph(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Dw(n,i,c,v,F,V,ve){if(c)return i.flags&256?(i.flags&=-257,v=an(Error(t(422))),ff(n,i,ve,v)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(V=v.fallback,F=i.mode,v=Af({mode:"visible",children:v.children},F,0,null),V=Eu(V,F,ve,null),V.flags|=2,v.return=i,V.return=i,v.sibling=V,i.child=v,(i.mode&1)!==0&&xo(i,n.child,null,ve),i.child.memoizedState=jh(ve),i.memoizedState=Rd,V);if((i.mode&1)===0)return ff(n,i,ve,null);if(F.data==="$!"){if(v=F.nextSibling&&F.nextSibling.dataset,v)var ze=v.dgst;return v=ze,V=Error(t(419)),v=an(V,v,void 0),ff(n,i,ve,v)}if(ze=(ve&n.childLanes)!==0,qn||ze){if(v=Ts,v!==null){switch(ve&-ve){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=(F&(v.suspendedLanes|ve))!==0?0:F,F!==0&&F!==V.retryLane&&(V.retryLane=F,K(n,F),Nl(v,n,F,-1))}return Yh(),v=an(Error(t(421))),ff(n,i,ve,v)}return F.data==="$?"?(i.flags|=128,i.child=n.child,i=Vw.bind(null,n),F._reactRetry=i,null):(n=V.treeContext,wt=ts(F.nextSibling),yt=i,_t=!0,St=null,n!==null&&(Te[Ie++]=nt,Te[Ie++]=Re,Te[Ie++]=Ge,nt=n.id,Re=n.overflow,Ge=i),i=Ph(i,v.children),i.flags|=4096,i)}function f0(n,i,c){n.lanes|=i;var v=n.alternate;v!==null&&(v.lanes|=i),vi(n.return,i,c)}function Dh(n,i,c,v,F){var V=n.memoizedState;V===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:v,tail:c,tailMode:F}:(V.isBackwards=i,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=c,V.tailMode=F)}function h0(n,i,c){var v=i.pendingProps,F=v.revealOrder,V=v.tail;if(fr(n,i,v.children,c),v=ut.current,(v&2)!==0)v=v&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&f0(n,c,i);else if(n.tag===19)f0(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}v&=1}if(vr(ut,v),(i.mode&1)===0)i.memoizedState=null;else switch(F){case"forwards":for(c=i.child,F=null;c!==null;)n=c.alternate,n!==null&&xn(n)===null&&(F=c),c=c.sibling;c=F,c===null?(F=i.child,i.child=null):(F=c.sibling,c.sibling=null),Dh(i,!1,F,c,V);break;case"backwards":for(c=null,F=i.child,i.child=null;F!==null;){if(n=F.alternate,n!==null&&xn(n)===null){i.child=F;break}n=F.sibling,F.sibling=c,c=F,F=n}Dh(i,!0,c,null,V);break;case"together":Dh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function hf(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ec(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),Su|=i.lanes,(c&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,c=ru(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=ru(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function Ow(n,i,c){switch(i.tag){case 3:df(i),gn();break;case 5:Qt(i);break;case 1:As(i.type)&&Vl(i);break;case 4:tt(i,i.stateNode.containerInfo);break;case 10:var v=i.type._context,F=i.memoizedProps.value;vr(No,v._currentValue),v._currentValue=F;break;case 13:if(v=i.memoizedState,v!==null)return v.dehydrated!==null?(vr(ut,ut.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?d0(n,i,c):(vr(ut,ut.current&1),n=Ec(n,i,c),n!==null?n.sibling:null);vr(ut,ut.current&1);break;case 19:if(v=(c&i.childLanes)!==0,(n.flags&128)!==0){if(v)return h0(n,i,c);i.flags|=128}if(F=i.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),vr(ut,ut.current),v)break;return null;case 22:case 23:return i.lanes=0,no(n,i,c)}return Ec(n,i,c)}var p0,Oh,m0,g0;p0=function(n,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Oh=function(){},m0=function(n,i,c,v){var F=n.memoizedProps;if(F!==v){n=i.stateNode,mt(Ye.current);var V=null;switch(c){case"input":F=H(n,F),v=H(n,v),V=[];break;case"select":F=Fe({},F,{value:void 0}),v=Fe({},v,{value:void 0}),V=[];break;case"textarea":F=Ee(n,F),v=Ee(n,v),V=[];break;default:typeof F.onClick!="function"&&typeof v.onClick=="function"&&(n.onclick=Wl)}jn(c,v);var ve;c=null;for(pt in F)if(!v.hasOwnProperty(pt)&&F.hasOwnProperty(pt)&&F[pt]!=null)if(pt==="style"){var ze=F[pt];for(ve in ze)ze.hasOwnProperty(ve)&&(c||(c={}),c[ve]="")}else pt!=="dangerouslySetInnerHTML"&&pt!=="children"&&pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&pt!=="autoFocus"&&(a.hasOwnProperty(pt)?V||(V=[]):(V=V||[]).push(pt,null));for(pt in v){var Ve=v[pt];if(ze=F!=null?F[pt]:void 0,v.hasOwnProperty(pt)&&Ve!==ze&&(Ve!=null||ze!=null))if(pt==="style")if(ze){for(ve in ze)!ze.hasOwnProperty(ve)||Ve&&Ve.hasOwnProperty(ve)||(c||(c={}),c[ve]="");for(ve in Ve)Ve.hasOwnProperty(ve)&&ze[ve]!==Ve[ve]&&(c||(c={}),c[ve]=Ve[ve])}else c||(V||(V=[]),V.push(pt,c)),c=Ve;else pt==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,ze=ze?ze.__html:void 0,Ve!=null&&ze!==Ve&&(V=V||[]).push(pt,Ve)):pt==="children"?typeof Ve!="string"&&typeof Ve!="number"||(V=V||[]).push(pt,""+Ve):pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&(a.hasOwnProperty(pt)?(Ve!=null&&pt==="onScroll"&&Ii("scroll",n),V||ze===Ve||(V=[])):(V=V||[]).push(pt,Ve))}c&&(V=V||[]).push("style",c);var pt=V;(i.updateQueue=pt)&&(i.flags|=4)}},g0=function(n,i,c,v){c!==v&&(i.flags|=4)};function jd(n,i){if(!_t)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:v.sibling=null}}function Ys(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,v=0;if(i)for(var F=n.child;F!==null;)c|=F.lanes|F.childLanes,v|=F.subtreeFlags&14680064,v|=F.flags&14680064,F.return=n,F=F.sibling;else for(F=n.child;F!==null;)c|=F.lanes|F.childLanes,v|=F.subtreeFlags,v|=F.flags,F.return=n,F=F.sibling;return n.subtreeFlags|=v,n.childLanes=c,i}function Fw(n,i,c){var v=i.pendingProps;switch(it(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(i),null;case 1:return As(i.type)&&Kl(),Ys(i),null;case 3:return v=i.stateNode,ft(),Br(Ao),Br(oo),ci(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(n===null||n.child===null)&&(so(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,St!==null&&(Kh(St),St=null))),Oh(n,i),Ys(i),null;case 5:_n(i);var F=mt(Dt.current);if(c=i.type,n!==null&&i.stateNode!=null)m0(n,i,c,v,F),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!v){if(i.stateNode===null)throw Error(t(166));return Ys(i),null}if(n=mt(Ye.current),so(i)){v=i.stateNode,c=i.type;var V=i.memoizedProps;switch(v[va]=i,v[Hl]=V,n=(i.mode&1)!==0,c){case"dialog":Ii("cancel",v),Ii("close",v);break;case"iframe":case"object":case"embed":Ii("load",v);break;case"video":case"audio":for(F=0;F<Oa.length;F++)Ii(Oa[F],v);break;case"source":Ii("error",v);break;case"img":case"image":case"link":Ii("error",v),Ii("load",v);break;case"details":Ii("toggle",v);break;case"input":ee(v,V),Ii("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!V.multiple},Ii("invalid",v);break;case"textarea":qe(v,V),Ii("invalid",v)}jn(c,V),F=null;for(var ve in V)if(V.hasOwnProperty(ve)){var ze=V[ve];ve==="children"?typeof ze=="string"?v.textContent!==ze&&(V.suppressHydrationWarning!==!0&&vc(v.textContent,ze,n),F=["children",ze]):typeof ze=="number"&&v.textContent!==""+ze&&(V.suppressHydrationWarning!==!0&&vc(v.textContent,ze,n),F=["children",""+ze]):a.hasOwnProperty(ve)&&ze!=null&&ve==="onScroll"&&Ii("scroll",v)}switch(c){case"input":se(v),L(v,V,!0);break;case"textarea":se(v),ot(v);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(v.onclick=Wl)}v=F,i.updateQueue=v,v!==null&&(i.flags|=4)}else{ve=F.nodeType===9?F:F.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lt(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=ve.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof v.is=="string"?n=ve.createElement(c,{is:v.is}):(n=ve.createElement(c),c==="select"&&(ve=n,v.multiple?ve.multiple=!0:v.size&&(ve.size=v.size))):n=ve.createElementNS(n,c),n[va]=i,n[Hl]=v,p0(n,i,!1,!1),i.stateNode=n;e:{switch(ve=dn(c,v),c){case"dialog":Ii("cancel",n),Ii("close",n),F=v;break;case"iframe":case"object":case"embed":Ii("load",n),F=v;break;case"video":case"audio":for(F=0;F<Oa.length;F++)Ii(Oa[F],n);F=v;break;case"source":Ii("error",n),F=v;break;case"img":case"image":case"link":Ii("error",n),Ii("load",n),F=v;break;case"details":Ii("toggle",n),F=v;break;case"input":ee(n,v),F=H(n,v),Ii("invalid",n);break;case"option":F=v;break;case"select":n._wrapperState={wasMultiple:!!v.multiple},F=Fe({},v,{value:void 0}),Ii("invalid",n);break;case"textarea":qe(n,v),F=Ee(n,v),Ii("invalid",n);break;default:F=v}jn(c,F),ze=F;for(V in ze)if(ze.hasOwnProperty(V)){var Ve=ze[V];V==="style"?Zn(n,Ve):V==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,Ve!=null&&Zt(n,Ve)):V==="children"?typeof Ve=="string"?(c!=="textarea"||Ve!=="")&&Rn(n,Ve):typeof Ve=="number"&&Rn(n,""+Ve):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(a.hasOwnProperty(V)?Ve!=null&&V==="onScroll"&&Ii("scroll",n):Ve!=null&&I(n,V,Ve,ve))}switch(c){case"input":se(n),L(n,v,!1);break;case"textarea":se(n),ot(n);break;case"option":v.value!=null&&n.setAttribute("value",""+z(v.value));break;case"select":n.multiple=!!v.multiple,V=v.value,V!=null?Le(n,!!v.multiple,V,!1):v.defaultValue!=null&&Le(n,!!v.multiple,v.defaultValue,!0);break;default:typeof F.onClick=="function"&&(n.onclick=Wl)}switch(c){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ys(i),null;case 6:if(n&&i.stateNode!=null)g0(n,i,n.memoizedProps,v);else{if(typeof v!="string"&&i.stateNode===null)throw Error(t(166));if(c=mt(Dt.current),mt(Ye.current),so(i)){if(v=i.stateNode,c=i.memoizedProps,v[va]=i,(V=v.nodeValue!==c)&&(n=yt,n!==null))switch(n.tag){case 3:vc(v.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&vc(v.nodeValue,c,(n.mode&1)!==0)}V&&(i.flags|=4)}else v=(c.nodeType===9?c:c.ownerDocument).createTextNode(v),v[va]=i,i.stateNode=v}return Ys(i),null;case 13:if(Br(ut),v=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_t&&wt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Nr(),gn(),i.flags|=98560,V=!1;else if(V=so(i),v!==null&&v.dehydrated!==null){if(n===null){if(!V)throw Error(t(318));if(V=i.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(t(317));V[va]=i}else gn(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ys(i),V=!1}else St!==null&&(Kh(St),St=null),V=!0;if(!V)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(v=v!==null,v!==(n!==null&&n.memoizedState!==null)&&v&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ut.current&1)!==0?fs===0&&(fs=3):Yh())),i.updateQueue!==null&&(i.flags|=4),Ys(i),null);case 4:return ft(),Oh(n,i),n===null&&el(i.stateNode.containerInfo),Ys(i),null;case 10:return Wi(i.type._context),Ys(i),null;case 17:return As(i.type)&&Kl(),Ys(i),null;case 19:if(Br(ut),V=i.memoizedState,V===null)return Ys(i),null;if(v=(i.flags&128)!==0,ve=V.rendering,ve===null)if(v)jd(V,!1);else{if(fs!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(ve=xn(n),ve!==null){for(i.flags|=128,jd(V,!1),v=ve.updateQueue,v!==null&&(i.updateQueue=v,i.flags|=4),i.subtreeFlags=0,v=c,c=i.child;c!==null;)V=c,n=v,V.flags&=14680066,ve=V.alternate,ve===null?(V.childLanes=0,V.lanes=n,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ve.childLanes,V.lanes=ve.lanes,V.child=ve.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ve.memoizedProps,V.memoizedState=ve.memoizedState,V.updateQueue=ve.updateQueue,V.type=ve.type,n=ve.dependencies,V.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return vr(ut,ut.current&1|2),i.child}n=n.sibling}V.tail!==null&&jr()>Vu&&(i.flags|=128,v=!0,jd(V,!1),i.lanes=4194304)}else{if(!v)if(n=xn(ve),n!==null){if(i.flags|=128,v=!0,c=n.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),jd(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ve.alternate&&!_t)return Ys(i),null}else 2*jr()-V.renderingStartTime>Vu&&c!==1073741824&&(i.flags|=128,v=!0,jd(V,!1),i.lanes=4194304);V.isBackwards?(ve.sibling=i.child,i.child=ve):(c=V.last,c!==null?c.sibling=ve:i.child=ve,V.last=ve)}return V.tail!==null?(i=V.tail,V.rendering=i,V.tail=i.sibling,V.renderingStartTime=jr(),i.sibling=null,c=ut.current,vr(ut,v?c&1|2:c&1),i):(Ys(i),null);case 22:case 23:return Xh(),v=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==v&&(i.flags|=8192),v&&(i.mode&1)!==0?(za&1073741824)!==0&&(Ys(i),i.subtreeFlags&6&&(i.flags|=8192)):Ys(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Bw(n,i){switch(it(i),i.tag){case 1:return As(i.type)&&Kl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ft(),Br(Ao),Br(oo),ci(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return _n(i),null;case 13:if(Br(ut),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));gn()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Br(ut),null;case 4:return ft(),null;case 10:return Wi(i.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var pf=!1,Js=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function Gu(n,i){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(v){zo(n,i,v)}else c.current=null}function Fh(n,i,c){try{c()}catch(v){zo(n,i,v)}}var y0=!1;function zw(n,i){if(bl=on,n=ko(),Ks(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var v=c.getSelection&&c.getSelection();if(v&&v.rangeCount!==0){c=v.anchorNode;var F=v.anchorOffset,V=v.focusNode;v=v.focusOffset;try{c.nodeType,V.nodeType}catch{c=null;break e}var ve=0,ze=-1,Ve=-1,pt=0,jt=0,Ut=n,It=null;t:for(;;){for(var vn;Ut!==c||F!==0&&Ut.nodeType!==3||(ze=ve+F),Ut!==V||v!==0&&Ut.nodeType!==3||(Ve=ve+v),Ut.nodeType===3&&(ve+=Ut.nodeValue.length),(vn=Ut.firstChild)!==null;)It=Ut,Ut=vn;for(;;){if(Ut===n)break t;if(It===c&&++pt===F&&(ze=ve),It===V&&++jt===v&&(Ve=ve),(vn=Ut.nextSibling)!==null)break;Ut=It,It=Ut.parentNode}Ut=vn}c=ze===-1||Ve===-1?null:{start:ze,end:Ve}}else c=null}c=c||{start:0,end:0}}else c=null;for(_l={focusedElem:n,selectionRange:c},on=!1,Sn=i;Sn!==null;)if(i=Sn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Sn=n;else for(;Sn!==null;){i=Sn;try{var Tn=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Tn!==null){var Dn=Tn.memoizedProps,Ho=Tn.memoizedState,st=i.stateNode,Ze=st.getSnapshotBeforeUpdate(i.elementType===i.type?Dn:Mr(i.type,Dn),Ho);st.__reactInternalSnapshotBeforeUpdate=Ze}break;case 3:var at=i.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Vt){zo(i,i.return,Vt)}if(n=i.sibling,n!==null){n.return=i.return,Sn=n;break}Sn=i.return}return Tn=y0,y0=!1,Tn}function Pd(n,i,c){var v=i.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var F=v=v.next;do{if((F.tag&n)===n){var V=F.destroy;F.destroy=void 0,V!==void 0&&Fh(i,c,V)}F=F.next}while(F!==v)}}function mf(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&n)===n){var v=c.create;c.destroy=v()}c=c.next}while(c!==i)}}function Bh(n){var i=n.ref;if(i!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof i=="function"?i(n):i.current=n}}function v0(n){var i=n.alternate;i!==null&&(n.alternate=null,v0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[va],delete i[Hl],delete i[rs],delete i[Ed],delete i[Td])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function w0(n){return n.tag===5||n.tag===3||n.tag===4}function x0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||w0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Mh(n,i,c){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(n,i):c.insertBefore(n,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(n,c)):(i=c,i.appendChild(n)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Wl));else if(v!==4&&(n=n.child,n!==null))for(Mh(n,i,c),n=n.sibling;n!==null;)Mh(n,i,c),n=n.sibling}function zh(n,i,c){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(v!==4&&(n=n.child,n!==null))for(zh(n,i,c),n=n.sibling;n!==null;)zh(n,i,c),n=n.sibling}var qs=null,kl=!1;function Zc(n,i,c){for(c=c.child;c!==null;)b0(n,i,c),c=c.sibling}function b0(n,i,c){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Xr,c)}catch{}switch(c.tag){case 5:Js||Gu(c,i);case 6:var v=qs,F=kl;qs=null,Zc(n,i,c),qs=v,kl=F,qs!==null&&(kl?(n=qs,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):qs.removeChild(c.stateNode));break;case 18:qs!==null&&(kl?(n=qs,c=c.stateNode,n.nodeType===8?vu(n.parentNode,c):n.nodeType===1&&vu(n,c),cs(n)):vu(qs,c.stateNode));break;case 4:v=qs,F=kl,qs=c.stateNode.containerInfo,kl=!0,Zc(n,i,c),qs=v,kl=F;break;case 0:case 11:case 14:case 15:if(!Js&&(v=c.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){F=v=v.next;do{var V=F,ve=V.destroy;V=V.tag,ve!==void 0&&((V&2)!==0||(V&4)!==0)&&Fh(c,i,ve),F=F.next}while(F!==v)}Zc(n,i,c);break;case 1:if(!Js&&(Gu(c,i),v=c.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=c.memoizedProps,v.state=c.memoizedState,v.componentWillUnmount()}catch(ze){zo(c,i,ze)}Zc(n,i,c);break;case 21:Zc(n,i,c);break;case 22:c.mode&1?(Js=(v=Js)||c.memoizedState!==null,Zc(n,i,c),Js=v):Zc(n,i,c);break;default:Zc(n,i,c)}}function _0(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new Mw),i.forEach(function(v){var F=Xw.bind(null,n,v);c.has(v)||(c.add(v),v.then(F,F))})}}function Al(n,i){var c=i.deletions;if(c!==null)for(var v=0;v<c.length;v++){var F=c[v];try{var V=n,ve=i,ze=ve;e:for(;ze!==null;){switch(ze.tag){case 5:qs=ze.stateNode,kl=!1;break e;case 3:qs=ze.stateNode.containerInfo,kl=!0;break e;case 4:qs=ze.stateNode.containerInfo,kl=!0;break e}ze=ze.return}if(qs===null)throw Error(t(160));b0(V,ve,F),qs=null,kl=!1;var Ve=F.alternate;Ve!==null&&(Ve.return=null),F.return=null}catch(pt){zo(F,i,pt)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)S0(i,n),i=i.sibling}function S0(n,i){var c=n.alternate,v=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Al(i,n),Jl(n),v&4){try{Pd(3,n,n.return),mf(3,n)}catch(Dn){zo(n,n.return,Dn)}try{Pd(5,n,n.return)}catch(Dn){zo(n,n.return,Dn)}}break;case 1:Al(i,n),Jl(n),v&512&&c!==null&&Gu(c,c.return);break;case 5:if(Al(i,n),Jl(n),v&512&&c!==null&&Gu(c,c.return),n.flags&32){var F=n.stateNode;try{Rn(F,"")}catch(Dn){zo(n,n.return,Dn)}}if(v&4&&(F=n.stateNode,F!=null)){var V=n.memoizedProps,ve=c!==null?c.memoizedProps:V,ze=n.type,Ve=n.updateQueue;if(n.updateQueue=null,Ve!==null)try{ze==="input"&&V.type==="radio"&&V.name!=null&&X(F,V),dn(ze,ve);var pt=dn(ze,V);for(ve=0;ve<Ve.length;ve+=2){var jt=Ve[ve],Ut=Ve[ve+1];jt==="style"?Zn(F,Ut):jt==="dangerouslySetInnerHTML"?Zt(F,Ut):jt==="children"?Rn(F,Ut):I(F,jt,Ut,pt)}switch(ze){case"input":T(F,V);break;case"textarea":dt(F,V);break;case"select":var It=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!V.multiple;var vn=V.value;vn!=null?Le(F,!!V.multiple,vn,!1):It!==!!V.multiple&&(V.defaultValue!=null?Le(F,!!V.multiple,V.defaultValue,!0):Le(F,!!V.multiple,V.multiple?[]:"",!1))}F[Hl]=V}catch(Dn){zo(n,n.return,Dn)}}break;case 6:if(Al(i,n),Jl(n),v&4){if(n.stateNode===null)throw Error(t(162));F=n.stateNode,V=n.memoizedProps;try{F.nodeValue=V}catch(Dn){zo(n,n.return,Dn)}}break;case 3:if(Al(i,n),Jl(n),v&4&&c!==null&&c.memoizedState.isDehydrated)try{cs(i.containerInfo)}catch(Dn){zo(n,n.return,Dn)}break;case 4:Al(i,n),Jl(n);break;case 13:Al(i,n),Jl(n),F=n.child,F.flags&8192&&(V=F.memoizedState!==null,F.stateNode.isHidden=V,!V||F.alternate!==null&&F.alternate.memoizedState!==null||(qh=jr())),v&4&&_0(n);break;case 22:if(jt=c!==null&&c.memoizedState!==null,n.mode&1?(Js=(pt=Js)||jt,Al(i,n),Js=pt):Al(i,n),Jl(n),v&8192){if(pt=n.memoizedState!==null,(n.stateNode.isHidden=pt)&&!jt&&(n.mode&1)!==0)for(Sn=n,jt=n.child;jt!==null;){for(Ut=Sn=jt;Sn!==null;){switch(It=Sn,vn=It.child,It.tag){case 0:case 11:case 14:case 15:Pd(4,It,It.return);break;case 1:Gu(It,It.return);var Tn=It.stateNode;if(typeof Tn.componentWillUnmount=="function"){v=It,c=It.return;try{i=v,Tn.props=i.memoizedProps,Tn.state=i.memoizedState,Tn.componentWillUnmount()}catch(Dn){zo(v,c,Dn)}}break;case 5:Gu(It,It.return);break;case 22:if(It.memoizedState!==null){N0(Ut);continue}}vn!==null?(vn.return=It,Sn=vn):N0(Ut)}jt=jt.sibling}e:for(jt=null,Ut=n;;){if(Ut.tag===5){if(jt===null){jt=Ut;try{F=Ut.stateNode,pt?(V=F.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(ze=Ut.stateNode,Ve=Ut.memoizedProps.style,ve=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null,ze.style.display=An("display",ve))}catch(Dn){zo(n,n.return,Dn)}}}else if(Ut.tag===6){if(jt===null)try{Ut.stateNode.nodeValue=pt?"":Ut.memoizedProps}catch(Dn){zo(n,n.return,Dn)}}else if((Ut.tag!==22&&Ut.tag!==23||Ut.memoizedState===null||Ut===n)&&Ut.child!==null){Ut.child.return=Ut,Ut=Ut.child;continue}if(Ut===n)break e;for(;Ut.sibling===null;){if(Ut.return===null||Ut.return===n)break e;jt===Ut&&(jt=null),Ut=Ut.return}jt===Ut&&(jt=null),Ut.sibling.return=Ut.return,Ut=Ut.sibling}}break;case 19:Al(i,n),Jl(n),v&4&&_0(n);break;case 21:break;default:Al(i,n),Jl(n)}}function Jl(n){var i=n.flags;if(i&2){try{e:{for(var c=n.return;c!==null;){if(w0(c)){var v=c;break e}c=c.return}throw Error(t(160))}switch(v.tag){case 5:var F=v.stateNode;v.flags&32&&(Rn(F,""),v.flags&=-33);var V=x0(n);zh(n,V,F);break;case 3:case 4:var ve=v.stateNode.containerInfo,ze=x0(n);Mh(n,ze,ve);break;default:throw Error(t(161))}}catch(Ve){zo(n,n.return,Ve)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function $w(n,i,c){Sn=n,k0(n)}function k0(n,i,c){for(var v=(n.mode&1)!==0;Sn!==null;){var F=Sn,V=F.child;if(F.tag===22&&v){var ve=F.memoizedState!==null||pf;if(!ve){var ze=F.alternate,Ve=ze!==null&&ze.memoizedState!==null||Js;ze=pf;var pt=Js;if(pf=ve,(Js=Ve)&&!pt)for(Sn=F;Sn!==null;)ve=Sn,Ve=ve.child,ve.tag===22&&ve.memoizedState!==null?E0(F):Ve!==null?(Ve.return=ve,Sn=Ve):E0(F);for(;V!==null;)Sn=V,k0(V),V=V.sibling;Sn=F,pf=ze,Js=pt}A0(n)}else(F.subtreeFlags&8772)!==0&&V!==null?(V.return=F,Sn=V):A0(n)}}function A0(n){for(;Sn!==null;){var i=Sn;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Js||mf(5,i);break;case 1:var v=i.stateNode;if(i.flags&4&&!Js)if(c===null)v.componentDidMount();else{var F=i.elementType===i.type?c.memoizedProps:Mr(i.type,c.memoizedProps);v.componentDidUpdate(F,c.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var V=i.updateQueue;V!==null&&$e(i,V,v);break;case 3:var ve=i.updateQueue;if(ve!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}$e(i,ve,c)}break;case 5:var ze=i.stateNode;if(c===null&&i.flags&4){c=ze;var Ve=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Ve.autoFocus&&c.focus();break;case"img":Ve.src&&(c.src=Ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var pt=i.alternate;if(pt!==null){var jt=pt.memoizedState;if(jt!==null){var Ut=jt.dehydrated;Ut!==null&&cs(Ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Js||i.flags&512&&Bh(i)}catch(It){zo(i,i.return,It)}}if(i===n){Sn=null;break}if(c=i.sibling,c!==null){c.return=i.return,Sn=c;break}Sn=i.return}}function N0(n){for(;Sn!==null;){var i=Sn;if(i===n){Sn=null;break}var c=i.sibling;if(c!==null){c.return=i.return,Sn=c;break}Sn=i.return}}function E0(n){for(;Sn!==null;){var i=Sn;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{mf(4,i)}catch(Ve){zo(i,c,Ve)}break;case 1:var v=i.stateNode;if(typeof v.componentDidMount=="function"){var F=i.return;try{v.componentDidMount()}catch(Ve){zo(i,F,Ve)}}var V=i.return;try{Bh(i)}catch(Ve){zo(i,V,Ve)}break;case 5:var ve=i.return;try{Bh(i)}catch(Ve){zo(i,ve,Ve)}}}catch(Ve){zo(i,i.return,Ve)}if(i===n){Sn=null;break}var ze=i.sibling;if(ze!==null){ze.return=i.return,Sn=ze;break}Sn=i.return}}var Uw=Math.ceil,gf=k.ReactCurrentDispatcher,$h=k.ReactCurrentOwner,ll=k.ReactCurrentBatchConfig,Ai=0,Ts=null,is=null,Ws=0,za=0,Ku=Ms(0),fs=0,Dd=null,Su=0,yf=0,Uh=0,Od=null,xa=null,qh=0,Vu=1/0,Tc=null,vf=!1,Wh=null,Qc=null,wf=!1,eu=null,xf=0,Fd=0,Hh=null,bf=-1,_f=0;function ua(){return(Ai&6)!==0?jr():bf!==-1?bf:bf=jr()}function tu(n){return(n.mode&1)===0?1:(Ai&2)!==0&&Ws!==0?Ws&-Ws:mo.transition!==null?(_f===0&&(_f=ys()),_f):(n=Wr,n!==0||(n=window.event,n=n===void 0?16:Qn(n.type)),n)}function Nl(n,i,c,v){if(50<Fd)throw Fd=0,Hh=null,Error(t(185));as(n,c,v),((Ai&2)===0||n!==Ts)&&(n===Ts&&((Ai&2)===0&&(yf|=c),fs===4&&nu(n,Ws)),ba(n,v),c===1&&Ai===0&&(i.mode&1)===0&&(Vu=jr()+500,Xl&&Y()))}function ba(n,i){var c=n.callbackNode;Ei(n,i);var v=Ar(n,n===Ts?Ws:0);if(v===0)c!==null&&hi(c),n.callbackNode=null,n.callbackPriority=0;else if(i=v&-v,n.callbackPriority!==i){if(c!=null&&hi(c),i===1)n.tag===0?W(C0.bind(null,n)):_(C0.bind(null,n)),Hu(function(){(Ai&6)===0&&Y()}),c=null;else{switch(vs(v)){case 1:c=io;break;case 4:c=Vr;break;case 16:c=On;break;case 536870912:c=pi;break;default:c=On}c=F0(c,T0.bind(null,n))}n.callbackPriority=i,n.callbackNode=c}}function T0(n,i){if(bf=-1,_f=0,(Ai&6)!==0)throw Error(t(327));var c=n.callbackNode;if(Xu()&&n.callbackNode!==c)return null;var v=Ar(n,n===Ts?Ws:0);if(v===0)return null;if((v&30)!==0||(v&n.expiredLanes)!==0||i)i=Sf(n,v);else{i=v;var F=Ai;Ai|=2;var V=I0();(Ts!==n||Ws!==i)&&(Tc=null,Vu=jr()+500,Au(n,i));do try{Hw();break}catch(ze){L0(n,ze)}while(!0);yi(),gf.current=V,Ai=F,is!==null?i=0:(Ts=null,Ws=0,i=fs)}if(i!==0){if(i===2&&(F=fo(n),F!==0&&(v=F,i=Gh(n,F))),i===1)throw c=Dd,Au(n,0),nu(n,v),ba(n,jr()),c;if(i===6)nu(n,v);else{if(F=n.current.alternate,(v&30)===0&&!qw(F)&&(i=Sf(n,v),i===2&&(V=fo(n),V!==0&&(v=V,i=Gh(n,V))),i===1))throw c=Dd,Au(n,0),nu(n,v),ba(n,jr()),c;switch(n.finishedWork=F,n.finishedLanes=v,i){case 0:case 1:throw Error(t(345));case 2:Nu(n,xa,Tc);break;case 3:if(nu(n,v),(v&130023424)===v&&(i=qh+500-jr(),10<i)){if(Ar(n,0)!==0)break;if(F=n.suspendedLanes,(F&v)!==v){ua(),n.pingedLanes|=n.suspendedLanes&F;break}n.timeoutHandle=gu(Nu.bind(null,n,xa,Tc),i);break}Nu(n,xa,Tc);break;case 4:if(nu(n,v),(v&4194240)===v)break;for(i=n.eventTimes,F=-1;0<v;){var ve=31-sr(v);V=1<<ve,ve=i[ve],ve>F&&(F=ve),v&=~V}if(v=F,v=jr()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*Uw(v/1960))-v,10<v){n.timeoutHandle=gu(Nu.bind(null,n,xa,Tc),v);break}Nu(n,xa,Tc);break;case 5:Nu(n,xa,Tc);break;default:throw Error(t(329))}}}return ba(n,jr()),n.callbackNode===c?T0.bind(null,n):null}function Gh(n,i){var c=Od;return n.current.memoizedState.isDehydrated&&(Au(n,i).flags|=256),n=Sf(n,i),n!==2&&(i=xa,xa=c,i!==null&&Kh(i)),n}function Kh(n){xa===null?xa=n:xa.push.apply(xa,n)}function qw(n){for(var i=n;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var v=0;v<c.length;v++){var F=c[v],V=F.getSnapshot;F=F.value;try{if(!Fi(V(),F))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function nu(n,i){for(i&=~Uh,i&=~yf,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var c=31-sr(i),v=1<<c;n[c]=-1,i&=~v}}function C0(n){if((Ai&6)!==0)throw Error(t(327));Xu();var i=Ar(n,0);if((i&1)===0)return ba(n,jr()),null;var c=Sf(n,i);if(n.tag!==0&&c===2){var v=fo(n);v!==0&&(i=v,c=Gh(n,v))}if(c===1)throw c=Dd,Au(n,0),nu(n,i),ba(n,jr()),c;if(c===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Nu(n,xa,Tc),ba(n,jr()),null}function Vh(n,i){var c=Ai;Ai|=1;try{return n(i)}finally{Ai=c,Ai===0&&(Vu=jr()+500,Xl&&Y())}}function ku(n){eu!==null&&eu.tag===0&&(Ai&6)===0&&Xu();var i=Ai;Ai|=1;var c=ll.transition,v=Wr;try{if(ll.transition=null,Wr=1,n)return n()}finally{Wr=v,ll.transition=c,Ai=i,(Ai&6)===0&&Y()}}function Xh(){za=Ku.current,Br(Ku)}function Au(n,i){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Wu(c)),is!==null)for(c=is.return;c!==null;){var v=c;switch(it(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Kl();break;case 3:ft(),Br(Ao),Br(oo),ci();break;case 5:_n(v);break;case 4:ft();break;case 13:Br(ut);break;case 19:Br(ut);break;case 10:Wi(v.type._context);break;case 22:case 23:Xh()}c=c.return}if(Ts=n,is=n=ru(n.current,null),Ws=za=i,fs=0,Dd=null,Uh=yf=Su=0,xa=Od=null,Ri!==null){for(i=0;i<Ri.length;i++)if(c=Ri[i],v=c.interleaved,v!==null){c.interleaved=null;var F=v.next,V=c.pending;if(V!==null){var ve=V.next;V.next=F,v.next=ve}c.pending=v}Ri=null}return n}function L0(n,i){do{var c=is;try{if(yi(),zi.current=nr,sn){for(var v=Ke.memoizedState;v!==null;){var F=v.queue;F!==null&&(F.pending=null),v=v.next}sn=!1}if(tr=0,Et=We=Ke=null,bt=!1,Kt=0,$h.current=null,c===null||c.return===null){fs=1,Dd=i,is=null;break}e:{var V=n,ve=c.return,ze=c,Ve=i;if(i=Ws,ze.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var pt=Ve,jt=ze,Ut=jt.tag;if((jt.mode&1)===0&&(Ut===0||Ut===11||Ut===15)){var It=jt.alternate;It?(jt.updateQueue=It.updateQueue,jt.memoizedState=It.memoizedState,jt.lanes=It.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var vn=oi(ve);if(vn!==null){vn.flags&=-257,Xs(vn,ve,ze,V,i),vn.mode&1&&Kr(V,pt,i),i=vn,Ve=pt;var Tn=i.updateQueue;if(Tn===null){var Dn=new Set;Dn.add(Ve),i.updateQueue=Dn}else Tn.add(Ve);break e}else{if((i&1)===0){Kr(V,pt,i),Yh();break e}Ve=Error(t(426))}}else if(_t&&ze.mode&1){var Ho=oi(ve);if(Ho!==null){(Ho.flags&65536)===0&&(Ho.flags|=256),Xs(Ho,ve,ze,V,i),Jt(Gi(Ve,ze));break e}}V=Ve=Gi(Ve,ze),fs!==4&&(fs=2),Od===null?Od=[V]:Od.push(V),V=ve;do{switch(V.tag){case 3:V.flags|=65536,i&=-i,V.lanes|=i;var st=ui(V,Ve,i);Ue(V,st);break e;case 1:ze=Ve;var Ze=V.type,at=V.stateNode;if((V.flags&128)===0&&(typeof Ze.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Qc===null||!Qc.has(at)))){V.flags|=65536,i&=-i,V.lanes|=i;var Vt=tn(V,ze,i);Ue(V,Vt);break e}}V=V.return}while(V!==null)}j0(c)}catch($n){i=$n,is===c&&c!==null&&(is=c=c.return);continue}break}while(!0)}function I0(){var n=gf.current;return gf.current=nr,n===null?nr:n}function Yh(){(fs===0||fs===3||fs===2)&&(fs=4),Ts===null||(Su&268435455)===0&&(yf&268435455)===0||nu(Ts,Ws)}function Sf(n,i){var c=Ai;Ai|=2;var v=I0();(Ts!==n||Ws!==i)&&(Tc=null,Au(n,i));do try{Ww();break}catch(F){L0(n,F)}while(!0);if(yi(),Ai=c,gf.current=v,is!==null)throw Error(t(261));return Ts=null,Ws=0,fs}function Ww(){for(;is!==null;)R0(is)}function Hw(){for(;is!==null&&!wi();)R0(is)}function R0(n){var i=O0(n.alternate,n,za);n.memoizedProps=n.pendingProps,i===null?j0(n):is=i,$h.current=null}function j0(n){var i=n;do{var c=i.alternate;if(n=i.return,(i.flags&32768)===0){if(c=Fw(c,i,za),c!==null){is=c;return}}else{if(c=Bw(c,i),c!==null){c.flags&=32767,is=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{fs=6,is=null;return}}if(i=i.sibling,i!==null){is=i;return}is=i=n}while(i!==null);fs===0&&(fs=5)}function Nu(n,i,c){var v=Wr,F=ll.transition;try{ll.transition=null,Wr=1,Gw(n,i,c,v)}finally{ll.transition=F,Wr=v}return null}function Gw(n,i,c,v){do Xu();while(eu!==null);if((Ai&6)!==0)throw Error(t(327));c=n.finishedWork;var F=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var V=c.lanes|c.childLanes;if(ar(n,V),n===Ts&&(is=Ts=null,Ws=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||wf||(wf=!0,F0(On,function(){return Xu(),null})),V=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||V){V=ll.transition,ll.transition=null;var ve=Wr;Wr=1;var ze=Ai;Ai|=4,$h.current=null,zw(n,c),S0(c,n),fc(_l),on=!!bl,_l=bl=null,n.current=c,$w(c),So(),Ai=ze,Wr=ve,ll.transition=V}else n.current=c;if(wf&&(wf=!1,eu=n,xf=F),V=n.pendingLanes,V===0&&(Qc=null),Mi(c.stateNode),ba(n,jr()),i!==null)for(v=n.onRecoverableError,c=0;c<i.length;c++)F=i[c],v(F.value,{componentStack:F.stack,digest:F.digest});if(vf)throw vf=!1,n=Wh,Wh=null,n;return(xf&1)!==0&&n.tag!==0&&Xu(),V=n.pendingLanes,(V&1)!==0?n===Hh?Fd++:(Fd=0,Hh=n):Fd=0,Y(),null}function Xu(){if(eu!==null){var n=vs(xf),i=ll.transition,c=Wr;try{if(ll.transition=null,Wr=16>n?16:n,eu===null)var v=!1;else{if(n=eu,eu=null,xf=0,(Ai&6)!==0)throw Error(t(331));var F=Ai;for(Ai|=4,Sn=n.current;Sn!==null;){var V=Sn,ve=V.child;if((Sn.flags&16)!==0){var ze=V.deletions;if(ze!==null){for(var Ve=0;Ve<ze.length;Ve++){var pt=ze[Ve];for(Sn=pt;Sn!==null;){var jt=Sn;switch(jt.tag){case 0:case 11:case 15:Pd(8,jt,V)}var Ut=jt.child;if(Ut!==null)Ut.return=jt,Sn=Ut;else for(;Sn!==null;){jt=Sn;var It=jt.sibling,vn=jt.return;if(v0(jt),jt===pt){Sn=null;break}if(It!==null){It.return=vn,Sn=It;break}Sn=vn}}}var Tn=V.alternate;if(Tn!==null){var Dn=Tn.child;if(Dn!==null){Tn.child=null;do{var Ho=Dn.sibling;Dn.sibling=null,Dn=Ho}while(Dn!==null)}}Sn=V}}if((V.subtreeFlags&2064)!==0&&ve!==null)ve.return=V,Sn=ve;else e:for(;Sn!==null;){if(V=Sn,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:Pd(9,V,V.return)}var st=V.sibling;if(st!==null){st.return=V.return,Sn=st;break e}Sn=V.return}}var Ze=n.current;for(Sn=Ze;Sn!==null;){ve=Sn;var at=ve.child;if((ve.subtreeFlags&2064)!==0&&at!==null)at.return=ve,Sn=at;else e:for(ve=Ze;Sn!==null;){if(ze=Sn,(ze.flags&2048)!==0)try{switch(ze.tag){case 0:case 11:case 15:mf(9,ze)}}catch($n){zo(ze,ze.return,$n)}if(ze===ve){Sn=null;break e}var Vt=ze.sibling;if(Vt!==null){Vt.return=ze.return,Sn=Vt;break e}Sn=ze.return}}if(Ai=F,Y(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Xr,n)}catch{}v=!0}return v}finally{Wr=c,ll.transition=i}}return!1}function P0(n,i,c){i=Gi(c,i),i=ui(n,i,1),n=D(n,i,1),i=ua(),n!==null&&(as(n,1,i),ba(n,i))}function zo(n,i,c){if(n.tag===3)P0(n,n,c);else for(;i!==null;){if(i.tag===3){P0(i,n,c);break}else if(i.tag===1){var v=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Qc===null||!Qc.has(v))){n=Gi(c,n),n=tn(i,n,1),i=D(i,n,1),n=ua(),i!==null&&(as(i,1,n),ba(i,n));break}}i=i.return}}function Kw(n,i,c){var v=n.pingCache;v!==null&&v.delete(i),i=ua(),n.pingedLanes|=n.suspendedLanes&c,Ts===n&&(Ws&c)===c&&(fs===4||fs===3&&(Ws&130023424)===Ws&&500>jr()-qh?Au(n,0):Uh|=c),ba(n,i)}function D0(n,i){i===0&&((n.mode&1)===0?i=1:(i=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var c=ua();n=K(n,i),n!==null&&(as(n,i,c),ba(n,c))}function Vw(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),D0(n,c)}function Xw(n,i){var c=0;switch(n.tag){case 13:var v=n.stateNode,F=n.memoizedState;F!==null&&(c=F.retryLane);break;case 19:v=n.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(i),D0(n,c)}var O0;O0=function(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ao.current)qn=!0;else{if((n.lanes&c)===0&&(i.flags&128)===0)return qn=!1,Ow(n,i,c);qn=(n.flags&131072)!==0}else qn=!1,_t&&(i.flags&1048576)!==0&&et(i,Ne,i.index);switch(i.lanes=0,i.tag){case 2:var v=i.type;hf(n,i),n=i.pendingProps;var F=ca(i,oo.current);ao(i,c),F=bo(null,i,v,n,F,c);var V=Mo();return i.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,As(v)?(V=!0,Vl(i)):V=!1,i.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,E(i),F.updater=Tr,i.stateNode=F,F._reactInternals=i,Hi(i,v,n,c),i=Id(null,i,v,!0,V,c)):(i.tag=0,_t&&V&&xt(i),fr(null,i,F,c),i=i.child),i;case 16:v=i.elementType;e:{switch(hf(n,i),n=i.pendingProps,F=v._init,v=F(v._payload),i.type=v,F=i.tag=Jw(v),n=Mr(v,n),F){case 0:i=Ma(null,i,v,n,c);break e;case 1:i=Us(null,i,v,n,c);break e;case 11:i=Ki(null,i,v,n,c);break e;case 14:i=si(null,i,v,Mr(v.type,n),c);break e}throw Error(t(306,v,""))}return i;case 0:return v=i.type,F=i.pendingProps,F=i.elementType===v?F:Mr(v,F),Ma(n,i,v,F,c);case 1:return v=i.type,F=i.pendingProps,F=i.elementType===v?F:Mr(v,F),Us(n,i,v,F,c);case 3:e:{if(df(i),n===null)throw Error(t(387));v=i.pendingProps,V=i.memoizedState,F=V.element,ae(n,i),je(i,v,null,c);var ve=i.memoizedState;if(v=ve.element,V.isDehydrated)if(V={element:v,isDehydrated:!1,cache:ve.cache,pendingSuspenseBoundaries:ve.pendingSuspenseBoundaries,transitions:ve.transitions},i.updateQueue.baseState=V,i.memoizedState=V,i.flags&256){F=Gi(Error(t(423)),i),i=Nc(n,i,v,c,F);break e}else if(v!==F){F=Gi(Error(t(424)),i),i=Nc(n,i,v,c,F);break e}else for(wt=ts(i.stateNode.containerInfo.firstChild),yt=i,_t=!0,St=null,c=to(i,null,v,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(gn(),v===F){i=Ec(n,i,c);break e}fr(n,i,v,c)}i=i.child}return i;case 5:return Qt(i),n===null&&wn(i),v=i.type,F=i.pendingProps,V=n!==null?n.memoizedProps:null,ve=F.children,mu(v,F)?ve=null:V!==null&&mu(v,V)&&(i.flags|=32),Es(n,i),fr(n,i,ve,c),i.child;case 6:return n===null&&wn(i),null;case 13:return d0(n,i,c);case 4:return tt(i,i.stateNode.containerInfo),v=i.pendingProps,n===null?i.child=xo(i,null,v,c):fr(n,i,v,c),i.child;case 11:return v=i.type,F=i.pendingProps,F=i.elementType===v?F:Mr(v,F),Ki(n,i,v,F,c);case 7:return fr(n,i,i.pendingProps,c),i.child;case 8:return fr(n,i,i.pendingProps.children,c),i.child;case 12:return fr(n,i,i.pendingProps.children,c),i.child;case 10:e:{if(v=i.type._context,F=i.pendingProps,V=i.memoizedProps,ve=F.value,vr(No,v._currentValue),v._currentValue=ve,V!==null)if(Fi(V.value,ve)){if(V.children===F.children&&!Ao.current){i=Ec(n,i,c);break e}}else for(V=i.child,V!==null&&(V.return=i);V!==null;){var ze=V.dependencies;if(ze!==null){ve=V.child;for(var Ve=ze.firstContext;Ve!==null;){if(Ve.context===v){if(V.tag===1){Ve=de(-1,c&-c),Ve.tag=2;var pt=V.updateQueue;if(pt!==null){pt=pt.shared;var jt=pt.pending;jt===null?Ve.next=Ve:(Ve.next=jt.next,jt.next=Ve),pt.pending=Ve}}V.lanes|=c,Ve=V.alternate,Ve!==null&&(Ve.lanes|=c),vi(V.return,c,i),ze.lanes|=c;break}Ve=Ve.next}}else if(V.tag===10)ve=V.type===i.type?null:V.child;else if(V.tag===18){if(ve=V.return,ve===null)throw Error(t(341));ve.lanes|=c,ze=ve.alternate,ze!==null&&(ze.lanes|=c),vi(ve,c,i),ve=V.sibling}else ve=V.child;if(ve!==null)ve.return=V;else for(ve=V;ve!==null;){if(ve===i){ve=null;break}if(V=ve.sibling,V!==null){V.return=ve.return,ve=V;break}ve=ve.return}V=ve}fr(n,i,F.children,c),i=i.child}return i;case 9:return F=i.type,v=i.pendingProps.children,ao(i,c),F=lo(F),v=v(F),i.flags|=1,fr(n,i,v,c),i.child;case 14:return v=i.type,F=Mr(v,i.pendingProps),F=Mr(v.type,F),si(n,i,v,F,c);case 15:return $s(n,i,i.type,i.pendingProps,c);case 17:return v=i.type,F=i.pendingProps,F=i.elementType===v?F:Mr(v,F),hf(n,i),i.tag=1,As(v)?(n=!0,Vl(i)):n=!1,ao(i,c),ii(i,v,F),Hi(i,v,F,c),Id(null,i,v,!0,n,c);case 19:return h0(n,i,c);case 22:return no(n,i,c)}throw Error(t(156,i.tag))};function F0(n,i){return Xn(n,i)}function Yw(n,i,c,v){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cl(n,i,c,v){return new Yw(n,i,c,v)}function Jh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Jw(n){if(typeof n=="function")return Jh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===B)return 11;if(n===be)return 14}return 2}function ru(n,i){var c=n.alternate;return c===null?(c=cl(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function kf(n,i,c,v,F,V){var ve=2;if(v=n,typeof n=="function")Jh(n)&&(ve=1);else if(typeof n=="string")ve=5;else e:switch(n){case Q:return Eu(c.children,F,V,i);case ie:ve=8,F|=8;break;case U:return n=cl(12,c,i,F|2),n.elementType=U,n.lanes=V,n;case te:return n=cl(13,c,i,F),n.elementType=te,n.lanes=V,n;case P:return n=cl(19,c,i,F),n.elementType=P,n.lanes=V,n;case ge:return Af(c,F,V,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:ve=10;break e;case oe:ve=9;break e;case B:ve=11;break e;case be:ve=14;break e;case Ae:ve=16,v=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=cl(ve,c,i,F),i.elementType=n,i.type=v,i.lanes=V,i}function Eu(n,i,c,v){return n=cl(7,n,v,i),n.lanes=c,n}function Af(n,i,c,v){return n=cl(22,n,v,i),n.elementType=ge,n.lanes=c,n.stateNode={isHidden:!1},n}function Zh(n,i,c){return n=cl(6,n,null,i),n.lanes=c,n}function Qh(n,i,c){return i=cl(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Zw(n,i,c,v,F){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ss(0),this.expirationTimes=ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.identifierPrefix=v,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function ep(n,i,c,v,F,V,ve,ze,Ve){return n=new Zw(n,i,c,ze,Ve),i===1?(i=1,V===!0&&(i|=8)):i=0,V=cl(3,null,null,i),n.current=V,V.stateNode=n,V.memoizedState={element:v,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},E(V),n}function Qw(n,i,c){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:v==null?null:""+v,children:n,containerInfo:i,implementation:c}}function B0(n){if(!n)return zs;n=n._reactInternals;e:{if(ht(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(As(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var c=n.type;if(As(c))return Xc(n,c,i)}return i}function M0(n,i,c,v,F,V,ve,ze,Ve){return n=ep(c,v,!0,n,F,V,ve,ze,Ve),n.context=B0(null),c=n.current,v=ua(),F=tu(c),V=de(v,F),V.callback=i??null,D(c,V,F),n.current.lanes=F,as(n,F,v),ba(n,v),n}function Nf(n,i,c,v){var F=i.current,V=ua(),ve=tu(F);return c=B0(c),i.context===null?i.context=c:i.pendingContext=c,i=de(V,ve),i.payload={element:n},v=v===void 0?null:v,v!==null&&(i.callback=v),n=D(F,i,ve),n!==null&&(Nl(n,F,ve,V),Pe(n,F,ve)),ve}function Ef(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function z0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function tp(n,i){z0(n,i),(n=n.alternate)&&z0(n,i)}function ex(){return null}var $0=typeof reportError=="function"?reportError:function(n){console.error(n)};function np(n){this._internalRoot=n}Tf.prototype.render=np.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Nf(n,i,null,null)},Tf.prototype.unmount=np.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ku(function(){Nf(null,n,null,null)}),i[ns]=null}};function Tf(n){this._internalRoot=n}Tf.prototype.unstable_scheduleHydration=function(n){if(n){var i=ri();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Pr.length&&i!==0&&i<Pr[c].priority;c++);Pr.splice(c,0,n),c===0&&mi(n)}};function rp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function U0(){}function tx(n,i,c,v,F){if(F){if(typeof v=="function"){var V=v;v=function(){var pt=Ef(ve);V.call(pt)}}var ve=M0(i,v,n,0,null,!1,!1,"",U0);return n._reactRootContainer=ve,n[ns]=ve.current,el(n.nodeType===8?n.parentNode:n),ku(),ve}for(;F=n.lastChild;)n.removeChild(F);if(typeof v=="function"){var ze=v;v=function(){var pt=Ef(Ve);ze.call(pt)}}var Ve=ep(n,0,!1,null,null,!1,!1,"",U0);return n._reactRootContainer=Ve,n[ns]=Ve.current,el(n.nodeType===8?n.parentNode:n),ku(function(){Nf(i,Ve,c,v)}),Ve}function Lf(n,i,c,v,F){var V=c._reactRootContainer;if(V){var ve=V;if(typeof F=="function"){var ze=F;F=function(){var Ve=Ef(ve);ze.call(Ve)}}Nf(i,ve,n,F)}else ve=tx(c,i,n,F,v);return Ef(ve)}ws=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var c=Qo(i.pendingLanes);c!==0&&(Ln(i,c|1),ba(i,jr()),(Ai&6)===0&&(Vu=jr()+500,Y()))}break;case 13:ku(function(){var v=K(n,1);if(v!==null){var F=ua();Nl(v,n,1,F)}}),tp(n,1)}},Oi=function(n){if(n.tag===13){var i=K(n,134217728);if(i!==null){var c=ua();Nl(i,n,134217728,c)}tp(n,134217728)}},xr=function(n){if(n.tag===13){var i=tu(n),c=K(n,i);if(c!==null){var v=ua();Nl(c,n,i,v)}tp(n,i)}},ri=function(){return Wr},$r=function(n,i){var c=Wr;try{return Wr=n,i()}finally{Wr=c}},Un=function(n,i,c){switch(i){case"input":if(T(n,c),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var v=c[i];if(v!==n&&v.form===n.form){var F=Bs(v);if(!F)throw Error(t(90));me(v),T(v,F)}}}break;case"textarea":dt(n,c);break;case"select":i=c.value,i!=null&&Le(n,!!c.multiple,i,!1)}},Do=Vh,Zo=ku;var nx={usingClientEntryPoint:!1,Events:[Gl,il,Bs,li,Hs,Vh]},Bd={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rx={bundleType:Bd.bundleType,version:Bd.version,rendererPackageName:Bd.rendererPackageName,rendererConfig:Bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=cn(n),n===null?null:n.stateNode},findFiberByHostInstance:Bd.findFiberByHostInstance||ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{Xr=If.inject(rx),Yr=If}catch{}}return _a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nx,_a.createPortal=function(n,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(i))throw Error(t(200));return Qw(n,i,null,c)},_a.createRoot=function(n,i){if(!rp(n))throw Error(t(299));var c=!1,v="",F=$0;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onRecoverableError!==void 0&&(F=i.onRecoverableError)),i=ep(n,1,!1,null,null,c,!1,v,F),n[ns]=i.current,el(n.nodeType===8?n.parentNode:n),new np(i)},_a.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=cn(i),n=n===null?null:n.stateNode,n},_a.flushSync=function(n){return ku(n)},_a.hydrate=function(n,i,c){if(!Cf(i))throw Error(t(200));return Lf(null,n,i,!0,c)},_a.hydrateRoot=function(n,i,c){if(!rp(n))throw Error(t(405));var v=c!=null&&c.hydratedSources||null,F=!1,V="",ve=$0;if(c!=null&&(c.unstable_strictMode===!0&&(F=!0),c.identifierPrefix!==void 0&&(V=c.identifierPrefix),c.onRecoverableError!==void 0&&(ve=c.onRecoverableError)),i=M0(i,null,n,1,c??null,F,!1,V,ve),n[ns]=i.current,el(n),v)for(n=0;n<v.length;n++)c=v[n],F=c._getVersion,F=F(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,F]:i.mutableSourceEagerHydrationData.push(c,F);return new Tf(i)},_a.render=function(n,i,c){if(!Cf(i))throw Error(t(200));return Lf(null,n,i,!1,c)},_a.unmountComponentAtNode=function(n){if(!Cf(n))throw Error(t(40));return n._reactRootContainer?(ku(function(){Lf(null,null,n,!1,function(){n._reactRootContainer=null,n[ns]=null})}),!0):!1},_a.unstable_batchedUpdates=Vh,_a.unstable_renderSubtreeIntoContainer=function(n,i,c,v){if(!Cf(c))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Lf(n,i,c,!1,v)},_a.version="18.3.1-next-f1338f8080-20240426",_a}var Y0;function hx(){if(Y0)return sp.exports;Y0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sp.exports=fx(),sp.exports}var J0;function px(){if(J0)return jf;J0=1;var r=hx();return jf.createRoot=r.createRoot,jf.hydrateRoot=r.hydrateRoot,jf}var mx=px();const gx=Hv(mx);function Gv(r,e,t=null){try{const o=localStorage.getItem(r);if(!o)return e;const a=JSON.parse(o);return t&&typeof t=="function"?t(a)?a:e:a}catch(o){return console.warn(`[ConfigManager]  (${r}):`,o),e}}function yx(r,e,t=null){try{return t&&typeof t=="function"&&!t(e)?(console.warn(`[ConfigManager]  (${r})`),!1):(localStorage.setItem(r,JSON.stringify(e)),!0)}catch(o){return console.error(`[ConfigManager]  (${r}):`,o),!1}}function vx(r){return e=>{try{return r(e)}catch(t){return console.error("[ConfigManager] :",t),!1}}}const _1={"input-form-panel":{id:"input-form-panel",name:"",defaultPosition:{left:20,top:20,width:600,height:180}},"document-list-panel":{id:"document-list-panel",name:"",defaultPosition:{left:20,top:216,width:600,height:180}},"preview-panel":{id:"preview-panel",name:"",defaultPosition:{left:20,top:412,width:600,height:360}},"processing-panel":{id:"processing-panel",name:"",defaultPosition:{left:636,top:20,width:550,height:376}},"operations-panel":{id:"operations-panel",name:"",defaultPosition:{left:636,top:412,width:550,height:360}}},Z0=Object.keys(_1).reduce((r,e)=>(r[e]=_1[e].defaultPosition,r),{}),wx="app-layout-config",xx=r=>!r||typeof r!="object"?!1:Object.keys(_1).every(t=>r[t]);function bx(){const r=Gv(wx,Z0,xx);return{...Z0,...r}}const Kv="app-button-config",Cc={"document-list-panel":[{id:"btn_list_delete",label:"",left:12,top:12,width:80,height:36,enabled:!0,kind:"delete_selected"},{id:"btn_list_select_all",label:"",left:104,top:12,width:80,height:36,enabled:!0,kind:"select_all"}],"preview-panel":[{id:"btn_preview_view_doc",label:"",left:12,top:12,width:100,height:36,enabled:!0,kind:"view_doc"},{id:"btn_preview_summarize",label:"",left:124,top:12,width:100,height:36,enabled:!0,kind:"fill_summary"}],"processing-panel":[{id:"btn_proc_config",label:"",left:12,top:12,width:120,height:36,enabled:!0,kind:"tab_config"},{id:"btn_proc_extract",label:"",left:144,top:12,width:100,height:36,enabled:!0,kind:"text_snippet"},{id:"btn_proc_outline",label:"",left:256,top:12,width:100,height:36,enabled:!0,kind:"outline_extract"}],"processing-tabs":[{id:"btn_tab_outline",label:"",left:12,top:6,width:96,height:32,enabled:!0,kind:"tab_outline",style:{fontSize:16,fontWeight:600}},{id:"btn_tab_records",label:"",left:128,top:6,width:96,height:32,enabled:!0,kind:"tab_records",style:{fontSize:16,fontWeight:600}},{id:"btn_tab_config",label:"",left:244,top:6,width:140,height:32,enabled:!0,kind:"tab_config",style:{fontSize:16,fontWeight:600}},{id:"btn_tab_strategy",label:"",left:404,top:6,width:110,height:32,enabled:!0,kind:"tab_strategy",style:{fontSize:16,fontWeight:600}}],"processing-records-toolbar":[{id:"btn_records_batch_replay",label:" Replay",left:12,top:8,width:100,height:28,enabled:!0,kind:"batch_replay",style:{fontSize:12}},{id:"btn_records_select_all",label:"",left:122,top:8,width:64,height:28,enabled:!0,kind:"select_all",style:{fontSize:12}},{id:"btn_records_delete_selected",label:"",left:196,top:8,width:88,height:28,enabled:!0,kind:"delete_selected",style:{fontSize:12}},{id:"btn_records_clear_selection",label:"",left:294,top:8,width:88,height:28,enabled:!0,kind:"clear_selection",style:{fontSize:12}},{id:"btn_group_new",label:"",left:392,top:8,width:100,height:28,enabled:!0,kind:"group_new",style:{fontSize:12}},{id:"btn_group_update",label:"",left:502,top:8,width:100,height:28,enabled:!0,kind:"group_update",style:{fontSize:12}},{id:"btn_group_rename",label:"",left:12,top:8,width:80,height:28,enabled:!0,kind:"group_rename",style:{fontSize:12}},{id:"btn_group_delete",label:"",left:102,top:8,width:72,height:28,enabled:!0,kind:"group_delete",style:{fontSize:12}},{id:"btn_group_replay",label:"Replay",left:184,top:8,width:80,height:28,enabled:!0,kind:"group_replay",style:{fontSize:12}}],"operations-panel":[{id:"btn_ops_clear",label:"",left:12,top:12,width:100,height:36,enabled:!0,kind:"clear_records"},{id:"btn_ops_execute",label:"",left:124,top:12,width:100,height:36,enabled:!0,kind:"dispatch"}],"input-form-panel":[]},W1=vx(r=>{if(!r||typeof r!="object")return!1;const e=["document-list-panel","preview-panel","processing-panel","operations-panel"];for(const t of e)if(!r[t]||!Array.isArray(r[t]))return!1;return!0});function cp(){return Gv(Kv,null,W1)}async function Q0(r){yx(Kv,r,W1);try{return(await fetch("/api/buttons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buttons:r})})).ok?(console.log("[ButtonManager] "),!0):(console.error("[ButtonManager] "),!1)}catch(e){return console.error("[ButtonManager] ",e),!1}}function _x(r,e){if(!r||typeof r!="object")return{activeButtons:[],deletedButtons:[]};if(r.activeButtons&&Array.isArray(r.activeButtons))return console.log("[Migration] Config is already in new format"),r;console.log("[Migration] Starting button config migration...");const t=[];let o=0;return Object.keys(r).forEach(a=>{const s=r[a];if(!Array.isArray(s))return;const u=e==null?void 0:e[a],l=(u==null?void 0:u.left)||0,d=(u==null?void 0:u.top)||0;console.log(`[Migration] Processing panel ${a}, position: (${l}, ${d})`),s.forEach(f=>{const h=l+(f.left||0),S=d+(f.top||0),b={id:f.id||`global-btn-${++o}`,label:f.label||"",x:h,y:S,width:f.width||100,height:f.height||30,style:f.style||{},onClick:f.onClick||null,enabled:f.enabled!==void 0?f.enabled:!0,zIndex:10,_migrated:{from:a,originalLeft:f.left,originalTop:f.top}};t.push(b),console.log(`[Migration] Migrated button ${b.id}: (${f.left}, ${f.top}) -> (${h}, ${S})`)})}),console.log(`[Migration] Migration complete. Total buttons: ${t.length}`),{activeButtons:t,deletedButtons:[],migratedAt:Date.now(),version:"2.0"}}function Sx(r,e="app-button-config"){try{const t=`${e}-backup-${Date.now()}`;return localStorage.setItem(t,JSON.stringify(r)),console.log(`[Backup] Config backed up to ${t}`),t}catch(t){return console.error("[Backup] Failed to backup config:",t),null}}function kx(r="app-button-config"){const e=[],t=`${r}-backup-`;for(let o=0;o<localStorage.length;o++){const a=localStorage.key(o);a&&a.startsWith(t)&&e.push(a)}return e.sort().reverse()}function Ax(r="app-button-config",e=5){const o=kx(r).slice(e);o.forEach(a=>{localStorage.removeItem(a),console.log(`[Cleanup] Removed old backup: ${a}`)}),o.length>0&&console.log(`[Cleanup] Cleaned ${o.length} old backups`)}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ex=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),eg=r=>{const e=Ex(r);return e.charAt(0).toUpperCase()+e.slice(1)},Vv=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim(),Tx=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Qe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:s,iconNode:u,...l},d)=>Qe.createElement("svg",{ref:d,...Cx,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:Vv("lucide",a),...!s&&!Tx(l)&&{"aria-hidden":"true"},...l},[...u.map(([f,h])=>Qe.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=(r,e)=>{const t=Qe.forwardRef(({className:o,...a},s)=>Qe.createElement(Lx,{ref:s,iconNode:e,className:Vv(`lucide-${Nx(eg(r))}`,`lucide-${r}`,o),...a}));return t.displayName=eg(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Rx=Di("archive",Ix);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],tg=Di("bot",jx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dx=Di("check",Px);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xv=Di("chevron-left",Ox);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Bx=Di("chevron-right",Fx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ng=Di("copy",Mx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rg=Di("download",zx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],tf=Di("file-text",$x);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],qx=Di("folder-open",Ux);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M7 2h10",key:"nczekb"}],["path",{d:"M5 6h14",key:"u2x4p"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}]],Yv=Di("gallery-vertical-end",Wx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],S1=Di("grip-vertical",Hx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ig=Di("history",Gx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],og=Di("library",Kx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Xx=Di("log-out",Vx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Jx=Di("message-square",Yx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Jv=Di("panels-top-left",Zx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Zd=Di("pen-line",Qx);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Zv=Di("pencil",eb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],nb=Di("pin",tb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],sg=Di("play",rb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qv=Di("plus",ib);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ag=Di("refresh-cw",ob);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],e5=Di("rotate-ccw",sb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],H1=Di("save",ab);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],cb=Di("send",lb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mh=Di("settings",ub);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nf=Di("sparkles",db);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yd=Di("trash-2",fb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],lg=Di("type",hb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mb=Di("upload",pb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yb=Di("user",gb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rf=Di("x",vb),Or={t1:"",t2:"",t3:"",t4:"",t5:" (px)",t6:"",t7:" ",t8:" ",t9:" ",t10:"",t11:"",t12:"",t13:" (400)",t14:" (500)",t15:" (600)",t16:" (700)",t17:" (800)",t18:"",t19:" (px)",t20:" (px)",t21:"",t22:"",t23:"",t24:":",t25:"",t26:":",t27:":",t28:"",t29:"",t30:"AI ",t31:"",t32:"",t33:"",t34:"",t35:"",t36:"",t37:"",t38:"AI  ()",t39:"AI",t40:"",t41:"",t42:"...",t43:"AI",t44:""};function od({button:r,onStyleChange:e,onDelete:t,onClose:o,onLogicChange:a}){const s={fontSize:14,color:"#1e293b",backgroundColor:"transparent",fontWeight:500,borderColor:"#e2e8f0",borderWidth:1,borderRadius:6,...r.style,label:r.label},[u,l]=Qe.useState(s),[d,f]=Qe.useState("style"),h=(b,p)=>{const j={...u,[b]:p};l(j)},S=()=>{const{label:b,...p}=u;e({style:p,label:b}),o()};return y.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",padding:"0",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",zIndex:1e4,minWidth:"320px",maxWidth:"400px",border:"1px solid #e2e8f0",display:"flex",flexDirection:"column",maxHeight:"90vh"},onClick:b=>b.stopPropagation(),children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px 16px",borderBottom:"1px solid #e2e8f0"},children:[y.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#1e293b"},children:Or.t1}),y.jsx("button",{onClick:o,style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#64748b",padding:"4px 8px"},children:""})]}),y.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #e2e8f0",padding:"0 24px"},children:[y.jsxs("button",{onClick:()=>f("style"),style:{flex:1,padding:"12px 16px",background:"transparent",border:"none",borderBottom:`2px solid ${d==="style"?"#3b82f6":"transparent"}`,cursor:"pointer",fontSize:"14px",fontWeight:d==="style"?600:400,color:d==="style"?"#3b82f6":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[y.jsx(mh,{size:16}),Or.t2]}),y.jsxs("button",{onClick:()=>f("logic"),style:{flex:1,padding:"12px 16px",background:"transparent",border:"none",borderBottom:`2px solid ${d==="logic"?"#3b82f6":"transparent"}`,cursor:"pointer",fontSize:"14px",fontWeight:d==="logic"?600:400,color:d==="logic"?"#3b82f6":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[y.jsx(nf,{size:16}),Or.t3]})]}),y.jsx("div",{style:{overflowY:"auto",flex:1},children:d==="style"?y.jsxs("div",{style:{padding:"24px"},children:[y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t4}),y.jsx("input",{type:"text",value:u.label||r.label,onChange:b=>h("label",b.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box"}})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t5}),y.jsx("input",{type:"number",value:u.fontSize,onChange:b=>h("fontSize",parseInt(b.target.value)||14),style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box"}})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t6}),y.jsxs("div",{style:{display:"flex",gap:"8px"},children:[y.jsx("button",{type:"button",onClick:()=>h("textAlign","left"),style:{flex:1,padding:"8px 12px",border:`2px solid ${u.textAlign==="left"?"#3b82f6":"#e2e8f0"}`,borderRadius:"6px",background:u.textAlign==="left"?"rgba(59, 130, 246, 0.1)":"#fff",color:u.textAlign==="left"?"#3b82f6":"#64748b",cursor:"pointer",fontSize:"13px",fontWeight:500,transition:"all 0.2s"},children:Or.t7}),y.jsx("button",{type:"button",onClick:()=>h("textAlign","center"),style:{flex:1,padding:"8px 12px",border:`2px solid ${u.textAlign==="center"?"#3b82f6":"#e2e8f0"}`,borderRadius:"6px",background:u.textAlign==="center"?"rgba(59, 130, 246, 0.1)":"#fff",color:u.textAlign==="center"?"#3b82f6":"#64748b",cursor:"pointer",fontSize:"13px",fontWeight:500,transition:"all 0.2s"},children:Or.t8}),y.jsx("button",{type:"button",onClick:()=>h("textAlign","right"),style:{flex:1,padding:"8px 12px",border:`2px solid ${u.textAlign==="right"?"#3b82f6":"#e2e8f0"}`,borderRadius:"6px",background:u.textAlign==="right"?"rgba(59, 130, 246, 0.1)":"#fff",color:u.textAlign==="right"?"#3b82f6":"#64748b",cursor:"pointer",fontSize:"13px",fontWeight:500,transition:"all 0.2s"},children:Or.t9})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t10}),y.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y.jsx("input",{type:"color",value:u.color,onChange:b=>h("color",b.target.value),style:{width:"50px",height:"36px",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer"}}),y.jsx("input",{type:"text",value:u.color,onChange:b=>h("color",b.target.value),style:{flex:1,padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px"}})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t11}),y.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y.jsx("input",{type:"color",value:u.backgroundColor==="transparent"?"#ffffff":u.backgroundColor,onChange:b=>h("backgroundColor",b.target.value),style:{width:"50px",height:"36px",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer"}}),y.jsx("input",{type:"text",value:u.backgroundColor,onChange:b=>h("backgroundColor",b.target.value),placeholder:"transparent",style:{flex:1,padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px"}})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t12}),y.jsxs("select",{value:u.fontWeight,onChange:b=>h("fontWeight",parseInt(b.target.value)),style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",cursor:"pointer",backgroundColor:"#fff"},children:[y.jsx("option",{value:"300",children:" (300)"}),y.jsx("option",{value:"400",children:Or.t13}),y.jsx("option",{value:"500",children:Or.t14}),y.jsx("option",{value:"600",children:Or.t15}),y.jsx("option",{value:"700",children:Or.t16}),y.jsx("option",{value:"800",children:Or.t17})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t18}),y.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y.jsx("input",{type:"color",value:u.borderColor==="transparent"?"#ffffff":u.borderColor,onChange:b=>h("borderColor",b.target.value),style:{width:"50px",height:"36px",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer"}}),y.jsx("input",{type:"text",value:u.borderColor,onChange:b=>h("borderColor",b.target.value),placeholder:"transparent",style:{flex:1,padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px"}})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t19}),y.jsx("input",{type:"number",value:u.borderWidth,onChange:b=>h("borderWidth",parseInt(b.target.value)||0),min:"0",style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box"}})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:500,color:"#475569"},children:Or.t20}),y.jsx("input",{type:"number",value:u.borderRadius,onChange:b=>h("borderRadius",parseInt(b.target.value)||0),min:"0",style:{width:"100%",padding:"8px 12px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"14px",boxSizing:"border-box"}})]})]}),y.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"space-between"},children:[y.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#b91c1c"},children:Or.t21}),y.jsxs("div",{style:{display:"flex",gap:"12px"},children:[y.jsx("button",{onClick:o,style:{padding:"8px 16px",background:"transparent",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#64748b"},children:Or.t22}),y.jsx("button",{onClick:S,style:{padding:"8px 16px",background:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#fff",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},children:Or.t23})]})]}),y.jsxs("div",{style:{marginTop:"20px",padding:"16px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"8px",fontWeight:500},children:Or.t24}),y.jsx("button",{style:{fontSize:`${u.fontSize}px`,color:u.color,backgroundColor:u.backgroundColor,fontWeight:u.fontWeight,border:`${u.borderWidth}px solid ${u.borderColor}`,borderRadius:`${u.borderRadius}px`,padding:"8px 16px",cursor:"pointer"},children:r.label})]})]}):y.jsx(wb,{button:r,onLogicChange:a,onClose:o})})]})}function wb({button:r,onLogicChange:e,onClose:t}){const[o,a]=Qe.useState(""),[s,u]=Qe.useState(null),[l,d]=Qe.useState(!1),[f,h]=Qe.useState(null),[S,b]=Qe.useState((r==null?void 0:r.kind)||"custom"),[p,j]=Qe.useState((r==null?void 0:r.prompt)||""),N=async()=>{if(!o.trim()){h("");return}d(!0),h(null);try{const w=await fetch("/api/multi/button-logic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buttonId:r==null?void 0:r.id,naturalLanguage:o.trim(),currentConfig:{label:r==null?void 0:r.label,kind:r==null?void 0:r.kind,prompt:r==null?void 0:r.prompt}})});if(!w.ok){const k=await w.json();throw new Error(k.error||"")}const I=(await w.json()).suggestion;u(I),I.kind&&b(I.kind),I.prompt&&j(I.prompt)}catch(w){h(w.message||"")}finally{d(!1)}},A=()=>{e({kind:S,prompt:p}),t()};return y.jsx("div",{style:{padding:"24px"},children:y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[y.jsxs("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"6px"},children:[y.jsx("h4",{style:{margin:"0 0 8px",fontSize:"13px",color:"#666"},children:Or.t25}),y.jsxs("div",{style:{fontSize:"12px",display:"grid",gap:"4px"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:Or.t26})," ",(r==null?void 0:r.kind)||Or.t41]}),(r==null?void 0:r.prompt)&&y.jsxs("div",{children:[y.jsx("strong",{children:Or.t27})," ",r.prompt.substring(0,50),r.prompt.length>50?"...":""]})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:500},children:Or.t28}),y.jsx("textarea",{rows:3,value:o,onChange:w=>a(w.target.value),placeholder:Or.t29,style:{width:"100%",fontSize:"13px",resize:"vertical",padding:"8px",borderRadius:"6px",border:"1px solid #e2e8f0"}}),y.jsxs("button",{className:"primary small",onClick:N,disabled:l||!o.trim(),style:{marginTop:"8px",display:"flex",alignItems:"center",gap:"4px"},children:[y.jsx(nf,{size:14}),l?Or.t42:Or.t43]}),f&&y.jsx("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"8px"},children:f})]}),s&&y.jsxs("div",{style:{background:"#e0f2fe",padding:"12px",borderRadius:"6px",border:"1px solid #7dd3fc"},children:[y.jsx("h4",{style:{margin:"0 0 8px",fontSize:"13px",color:"#0369a1"},children:Or.t30}),y.jsx("div",{style:{fontSize:"12px",color:"#0c4a6e"},children:s.explanation||Or.t44})]}),y.jsxs("div",{style:{borderTop:"1px solid #eee",paddingTop:"16px"},children:[y.jsx("h4",{style:{margin:"0 0 12px",fontSize:"13px",fontWeight:500},children:Or.t31}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px"},children:Or.t32}),y.jsxs("select",{value:S,onChange:w=>b(w.target.value),style:{width:"100%",fontSize:"13px",padding:"8px",borderRadius:"6px",border:"1px solid #e2e8f0",background:"white"},children:[y.jsx("option",{value:"outline_extract",children:Or.t33}),y.jsx("option",{value:"dispatch",children:Or.t34}),y.jsx("option",{value:"final_generate",children:Or.t35}),y.jsx("option",{value:"upload_file",children:Or.t36}),y.jsx("option",{value:"custom",children:Or.t37})]})]}),y.jsxs("div",{children:[y.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px"},children:Or.t38}),y.jsx("textarea",{rows:3,value:p,onChange:w=>j(w.target.value),placeholder:Or.t39,style:{width:"100%",fontSize:"13px",resize:"vertical",padding:"8px",borderRadius:"6px",border:"1px solid #e2e8f0"}})]}),y.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px",justifyContent:"flex-end"},children:[y.jsx("button",{onClick:t,style:{padding:"8px 16px",background:"transparent",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#64748b"},children:Or.t22}),y.jsx("button",{className:"primary",onClick:A,style:{padding:"8px 16px",background:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500,color:"#fff",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},children:Or.t40})]})]})]})]})})}function cg({onClose:r}){return y.jsx("div",{onClick:r,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:9999,backdropFilter:"blur(4px)"}})}const xb={t1:""};function Iu({button:r,isEditing:e,panelId:t,onMouseDown:o,onStyleEdit:a,onClick:s,children:u}){const d={...{fontSize:14,color:"#1e293b",backgroundColor:"transparent",fontWeight:500,borderColor:"#e2e8f0",borderWidth:1,borderRadius:12},...r.style||{}},f=r.enabled===!1,h=!!r.disabled,S=b=>{const p=["final_generate","fill_summary","dispatch"],j=["outline_extract","text_snippet"],N=["tab_config","view_doc"],A=["batch_replay","select_all","deselect_all","clear_selection"],w=["group_new","group_update","group_replay"],R=["delete_selected","group_delete"],I=["clear","upload","clear_records","group_rename"];return p.includes(b)?{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#ffffff",border:"none",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)",fontWeight:600}:j.includes(b)?{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#ffffff",border:"none",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)",fontWeight:600}:N.includes(b)?{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"#ffffff",border:"none",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.3)",fontWeight:600}:A.includes(b)?{background:"#f8fafc",color:"#475569",border:"1px solid #e2e8f0",boxShadow:"none",fontWeight:500}:w.includes(b)?{background:"#eff6ff",color:"#2563eb",border:"1px solid #93c5fd",boxShadow:"none",fontWeight:600}:R.includes(b)?{background:"#fef2f2",color:"#dc2626",border:"1px solid #fca5a5",boxShadow:"none",fontWeight:500}:I.includes(b)?{background:"#ffffff",color:"#374151",border:"1px solid #d1d5db",boxShadow:"none",fontWeight:500}:null};if(!e){const b=A=>A==="left"?"flex-start":A==="right"?"flex-end":"center",p=t==="processing-records-toolbar",N=d.background||d.backgroundColor!=="transparent"?{}:S(r.kind)||{};return y.jsx("button",{onClick:()=>s==null?void 0:s(r),style:{position:p?"relative":"absolute",left:p?"auto":`${r.left}px`,top:p?"auto":`${r.top}px`,width:p?"auto":`${r.width}px`,height:`${r.height}px`,boxSizing:"border-box",minWidth:"auto",minHeight:"24px",display:f?"none":"inline-flex",alignItems:"center",justifyContent:b(d.textAlign),zIndex:10,fontSize:`${d.fontSize}px`,color:d.color||N.color,background:d.background||N.background||d.backgroundColor,fontWeight:d.fontWeight||N.fontWeight,border:d.border||N.border||`${d.borderWidth}px solid ${d.borderColor}`,borderRadius:d.borderRadius?`${d.borderRadius}px`:"12px",boxShadow:d.boxShadow||N.boxShadow||"none",transform:d.transform||"none",cursor:h?"not-allowed":"pointer",transition:"all 0.2s",padding:"0 12px",pointerEvents:"auto",textAlign:d.textAlign||"center",opacity:h?.5:1,whiteSpace:"nowrap",flexShrink:0},className:"ghost",disabled:h,children:r.label||u})}return y.jsxs("div",{style:{position:"absolute",left:`${r.left}px`,top:`${r.top}px`,width:`${r.width}px`,height:`${r.height}px`,border:"2px solid #3b82f6",borderRadius:"4px",background:r.enabled?"rgba(59, 130, 246, 0.05)":"rgba(156, 163, 175, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"default",zIndex:100,pointerEvents:"auto",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.2)",transition:r.enabled?"box-shadow 0.2s":"none",boxSizing:"border-box",overflow:"visible"},onMouseDown:b=>{b.stopPropagation(),o(b,t,r.id,"move")},onMouseEnter:b=>{b.currentTarget&&(b.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.35)")},onMouseLeave:b=>{b.currentTarget&&(b.currentTarget.style.boxShadow="0 2px 8px rgba(59, 130, 246, 0.2)")},children:[a&&y.jsx("button",{className:"style-edit-handle",onClick:b=>{b.stopPropagation(),a(t,r.id)},style:{position:"absolute",top:"-8px",right:"-8px",transform:"none",width:"10px",height:"10px",borderRadius:"0",background:"transparent",color:"#3b82f6",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:0,fontWeight:600,boxShadow:"none",zIndex:150,padding:0},title:xb.t1,children:y.jsxs("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[y.jsx("path",{d:"M12 20h9"}),y.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),y.jsx("div",{style:{flex:1,fontSize:`${d.fontSize}px`,color:r.enabled?d.color:"#9ca3af",fontWeight:d.fontWeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pointerEvents:"none",padding:"0 8px",display:"flex",alignItems:"center",justifyContent:d.textAlign==="left"?"flex-start":d.textAlign==="right"?"flex-end":"center",textAlign:d.textAlign||"center"},children:r.label||u}),y.jsx("div",{style:{position:"absolute",right:-4,top:0,width:"8px",height:"100%",cursor:"ew-resize",background:"linear-gradient(90deg, transparent, #3b82f6)",opacity:0,transition:"opacity 0.2s",zIndex:110},onMouseDown:b=>{b.stopPropagation(),o(b,t,r.id,"resize-e")},onMouseEnter:b=>{b.currentTarget&&(b.currentTarget.style.opacity="0.8")},onMouseLeave:b=>{b.currentTarget&&(b.currentTarget.style.opacity="0")}}),y.jsx("div",{style:{position:"absolute",bottom:-4,left:0,height:"8px",width:"100%",cursor:"ns-resize",background:"linear-gradient(180deg, transparent, #3b82f6)",opacity:0,transition:"opacity 0.2s",zIndex:110},onMouseDown:b=>{b.stopPropagation(),o(b,t,r.id,"resize-s")},onMouseEnter:b=>{b.currentTarget&&(b.currentTarget.style.opacity="0.8")},onMouseLeave:b=>{b.currentTarget&&(b.currentTarget.style.opacity="0")}}),y.jsx("div",{style:{position:"absolute",right:-4,bottom:-4,width:"12px",height:"12px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 50%, #3b82f6 50%)",borderRadius:"0 0 4px 0",opacity:0,transition:"opacity 0.2s",zIndex:120},onMouseDown:b=>{b.stopPropagation(),o(b,t,r.id,"resize-se")},onMouseEnter:b=>{b.currentTarget&&(b.currentTarget.style.opacity="1")},onMouseLeave:b=>{b.currentTarget&&(b.currentTarget.style.opacity="0")}})]})}function bb({panelId:r,buttons:e,isEditing:t,onButtonMouseDown:o,onStyleEdit:a,onClick:s,style:u={}}){const l={position:"relative",width:"100%",height:"40px",marginBottom:"8px",background:t?"rgba(59, 130, 246, 0.02)":"transparent",borderRadius:t?"4px":"0",border:t?"1px dashed #3b82f6":"none",padding:t?"4px":"0"};return y.jsx("div",{style:{...l,...u},children:e&&e.map(d=>y.jsx(Iu,{button:d,isEditing:t,panelId:r,onMouseDown:o,onStyleEdit:a,onClick:s,children:d.label},d.id))})}const Pc={t1:" ",t2:' "',t3:'" ',t4:"",t5:"",t6:"",t7:"",t8:"  - ",t9:""};function Cl({panelId:r,panelName:e,isEditing:t,position:o,onPositionChange:a,children:s,className:u="",style:l={},hidePanelHeader:d=!1,dragHandleSelector:f="h2",onTitleEdit:h,titleStyle:S={},headerActions:b,editHeaderActions:p,bounds:j}){const N=Qe.useRef(null),[A,w]=Qe.useState(!1),[R,I]=Qe.useState(null),[k,G]=Qe.useState(null),re=200,Q=150,ie=(ue,oe="move")=>{if(t){if(oe==="move"){const B=ue.target,te=B.tagName.toLowerCase();if(te!=="h2"&&!B.closest(f)&&(["input","textarea","button","select","label","a","option"].includes(te)||B.isContentEditable||B.closest("button")||B.closest("a")||B.closest(".no-drag")))return}ue.preventDefault(),w(!0),I(oe),G({x:ue.clientX,y:ue.clientY,startPos:o})}};if(Qe.useEffect(()=>{if(!A||!k)return;const ue=j&&Number.isFinite(j.width)&&Number.isFinite(j.height)?{width:j.width,height:j.height}:null,oe=te=>{const P=te.clientX-k.x,be=te.clientY-k.y;if(R==="move"){const Ae=k.startPos.left+P,ge=k.startPos.top+be,xe=(ue?ue.width:window.innerWidth)-100,ke=(ue?ue.height:window.innerHeight)-100;a({...o,left:Math.max(0,Math.min(Ae,Math.max(0,xe))),top:Math.max(0,Math.min(ge,Math.max(0,ke)))})}else if(R&&R.startsWith("resize")){let{left:Ae,top:ge,width:xe,height:ke}=k.startPos;if(R.includes("e"))xe=Math.max(re,xe+P);else if(R.includes("w")){const Fe=Math.max(re,xe-P);Ae+=xe-Fe,xe=Fe}if(R.includes("s"))ke=Math.max(Q,ke+be);else if(R.includes("n")){const Fe=Math.max(Q,ke-be);ge+=ke-Fe,ke=Fe}ue&&(Ae=Math.max(0,Math.min(Ae,ue.width-re)),ge=Math.max(0,Math.min(ge,ue.height-Q)),xe=Math.min(xe,Math.max(re,ue.width-Ae)),ke=Math.min(ke,Math.max(Q,ue.height-ge))),a({left:Ae,top:ge,width:xe,height:ke})}},B=()=>{w(!1),I(null),G(null)};return document.addEventListener("mousemove",oe),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",B)}},[A,k,R,o,a,t]),!t)return y.jsxs("div",{className:`editable-panel-view ${u}`,style:{...l,position:o?"absolute":"relative",left:o?`${o.left}px`:void 0,top:o?`${o.top}px`:void 0,width:o?`${o.width}px`:"100%",height:o?`${o.height}px`:"100%",background:"white",border:"1px solid #dadce0",borderRadius:"12px",boxShadow:"0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15)",padding:"12px",display:"flex",flexDirection:"column",overflow:"auto",zIndex:l.zIndex||1},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0 0 12px 0",paddingBottom:"8px",borderBottom:"2px solid #e5e7eb"},children:[y.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#1f2937",...S},children:e}),b&&y.jsx("div",{className:"panel-header-actions",style:{display:"flex",alignItems:"center",gap:"8px",zIndex:10,position:"relative",pointerEvents:"auto"},children:b})]}),s]});if(!o||o.left===void 0||o.top===void 0||o.width===void 0||o.height===void 0)return console.warn(`[EditableLayoutPanel] Panel "${e}" (${r}) has invalid position:`,o),y.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",padding:"20px",background:"#fff3cd",border:"2px dashed #ff6b6b",borderRadius:"8px",textAlign:"center",zIndex:9999},children:[y.jsx("h3",{style:{margin:"0 0 8px 0",color:"#856404"},children:Pc.t1}),y.jsxs("p",{style:{margin:0},children:[Pc.t2,e,Pc.t3]}),y.jsx("p",{style:{fontSize:"12px",margin:"8px 0 0 0",color:"#666"},children:Pc.t4})]});const U={...l,position:"absolute",left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,border:"2px solid #3b82f6",background:"white",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"12px",display:"flex",flexDirection:"column",zIndex:A?1e3:10,cursor:A?"grabbing":"grab",overflow:"visible"};return y.jsxs("div",{ref:N,className:`editable-panel ${u}`,style:U,onMouseDown:ue=>{(t||f&&ue.target.closest(f))&&ie(ue,"move")},children:[!d&&y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"0 0 8px 0",paddingBottom:"6px",borderBottom:"2px solid #e5e7eb",position:"relative",zIndex:10},children:[y.jsx("h2",{style:{margin:0,cursor:t?"pointer":"grab",userSelect:"none",fontSize:"14px",fontWeight:600,...S},onMouseDown:ue=>!t&&ie(ue,"move"),children:y.jsxs("span",{onClick:ue=>{t&&h&&(ue.stopPropagation(),h(r))},onMouseDown:ue=>t&&ue.stopPropagation(),style:{cursor:t?"pointer":"inherit",display:"inline-block",border:t?"1px dashed #cbd5e1":"none",borderRadius:"4px",padding:t?"2px 6px":"0",margin:t?"-2px -6px":"0",transition:"all 0.2s",backgroundColor:t?"rgba(255, 255, 255, 0.5)":"transparent"},title:t?Pc.t9:"",children:[e,t&&y.jsx("span",{style:{marginLeft:"4px",fontSize:"14px",color:"#3b82f6"},children:""})]})}),p&&y.jsx("div",{className:"panel-header-actions",style:{display:"flex",alignItems:"center",gap:"8px",zIndex:11,pointerEvents:"auto"},onMouseDown:ue=>ue.stopPropagation(),children:p})]}),y.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0,position:"relative",zIndex:1},children:s}),t&&y.jsx("div",{style:{position:"absolute",left:0,right:0,top:-6,height:"12px",cursor:"ns-resize",zIndex:100,background:"rgba(59, 130, 246, 0.3)"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-n")}}),t&&y.jsx("div",{style:{position:"absolute",left:-6,top:0,bottom:0,width:"12px",cursor:"ew-resize",zIndex:100,background:"rgba(59, 130, 246, 0.3)"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-w")}}),t&&y.jsx("div",{style:{position:"absolute",left:-6,top:-6,width:"16px",height:"16px",cursor:"nwse-resize",zIndex:101,background:"rgba(59, 130, 246, 0.5)",borderRadius:"4px"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-nw")}}),t&&y.jsx("div",{style:{position:"absolute",right:-6,top:-6,width:"16px",height:"16px",cursor:"nesw-resize",zIndex:101,background:"rgba(59, 130, 246, 0.5)",borderRadius:"4px"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-ne")}}),t&&y.jsx("div",{style:{position:"absolute",left:-6,bottom:-6,width:"16px",height:"16px",cursor:"nesw-resize",zIndex:101,background:"rgba(59, 130, 246, 0.5)",borderRadius:"4px"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-sw")}}),t&&y.jsx("div",{style:{position:"absolute",right:-6,top:0,bottom:0,width:"12px",cursor:"ew-resize",zIndex:100,background:"rgba(59, 130, 246, 0.4)",opacity:.7,transition:"opacity 0.2s"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-e")},onMouseEnter:ue=>ue.target.style.opacity="1",onMouseLeave:ue=>ue.target.style.opacity="0.7",title:Pc.t5}),t&&y.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:-6,height:"12px",cursor:"ns-resize",zIndex:100,background:"rgba(59, 130, 246, 0.4)",opacity:.7,transition:"opacity 0.2s"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-s")},onMouseEnter:ue=>ue.target.style.opacity="1",onMouseLeave:ue=>ue.target.style.opacity="0.7",title:Pc.t6}),t&&y.jsx("div",{style:{position:"absolute",right:-6,bottom:-6,width:"24px",height:"24px",cursor:"nwse-resize",zIndex:101,background:"#3b82f6",borderRadius:"4px",opacity:.8,transition:"opacity 0.2s"},onMouseDown:ue=>{ue.stopPropagation(),ie(ue,"resize-se")},onMouseEnter:ue=>ue.target.style.opacity="1",onMouseLeave:ue=>ue.target.style.opacity="0.8",title:Pc.t7})]})}function t5({isEditing:r,children:e,style:t={},size:o,onSizeChange:a,minWidth:s=400,minHeight:u=300}){const l=Qe.useRef(null),d=Qe.useRef(null);Qe.useEffect(()=>{if(!r||!a)return;const b=j=>{const N=d.current;if(!N)return;const A=j.clientX-N.startX,w=j.clientY-N.startY,R={width:N.startWidth,height:N.startHeight};(N.type==="e"||N.type==="se")&&(R.width=Math.max(s,N.startWidth+A)),(N.type==="s"||N.type==="se")&&(R.height=Math.max(u,N.startHeight+w)),a(R)},p=()=>{d.current=null};return document.addEventListener("mousemove",b),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",p)}},[r,a,s,u]);const f=(b,p)=>{if(!r||!a||!l.current)return;const j=l.current.getBoundingClientRect();d.current={type:p,startX:b.clientX,startY:b.clientY,startWidth:j.width,startHeight:j.height},b.preventDefault()},h=o||{};if(!r)return y.jsx("div",{className:"layout-static-container",style:{...t,position:"relative",width:h.width?`${h.width}px`:"100%",height:h.height?`${h.height}px`:"100%",overflow:"hidden"},children:e});const S={...t,position:"relative",width:h.width?`${h.width}px`:"100%",height:h.height?`${h.height}px`:"auto",background:"rgba(59, 130, 246, 0.02)",border:"2px dashed #3b82f6",borderRadius:"8px",padding:"20px",marginBottom:"30px",overflow:"visible"};return y.jsxs("div",{ref:l,className:"layout-edit-container",style:S,children:[y.jsx("div",{style:{position:"absolute",top:"10px",left:"10px",background:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:600,zIndex:999},children:Pc.t8}),y.jsx("div",{style:{position:"absolute",right:-6,top:0,bottom:0,width:"16px",cursor:"ew-resize",zIndex:1e3,background:"rgba(59, 130, 246, 0.4)"},onMouseDown:b=>f(b,"e")}),y.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:-6,height:"16px",cursor:"ns-resize",zIndex:1e3,background:"rgba(59, 130, 246, 0.4)"},onMouseDown:b=>f(b,"s")}),y.jsx("div",{style:{position:"absolute",right:-6,bottom:-6,width:"28px",height:"28px",cursor:"nwse-resize",background:"#3b82f6",borderRadius:"4px",zIndex:1001},onMouseDown:b=>f(b,"se")}),e]})}const up={t1:"",t2:"",t3:""};function ug({buttons:r,isEditing:e,onMouseDown:t,onStyleEdit:o,onClick:a,onDelete:s}){return!r||r.length===0?null:y.jsx(y.Fragment,{children:r.map(u=>y.jsx(_b,{button:u,isEditing:e,onMouseDown:t,onStyleEdit:o,onClick:a,onDelete:s},u.id))})}function _b({button:r,isEditing:e,onMouseDown:t,onStyleEdit:o,onClick:a,onDelete:s}){const l={...{fontSize:14,color:"#1e293b",backgroundColor:"transparent",fontWeight:500,borderColor:"#e2e8f0",borderWidth:1,borderRadius:6},...r.style||{}},d=f=>f==="left"?"flex-start":f==="right"?"flex-end":"center";if(!e){const f=h=>{if(console.log("[GlobalButton handleClick] Event triggered for:",r.label),console.log("[GlobalButton handleClick] button:",r),console.log("[GlobalButton handleClick] onClick typeof:",typeof a),console.log("[GlobalButton handleClick] onClick exists:",!!a),a){console.log("[GlobalButton handleClick] Calling onClick with button:",r);try{a(r),console.log("[GlobalButton handleClick] onClick call completed")}catch(S){console.error("[GlobalButton handleClick] onClick threw error:",S)}}else console.warn("[GlobalButton] No onClick handler provided")};return y.jsx("button",{onClick:f,style:{position:"absolute",left:`${r.x}px`,top:`${r.y}px`,width:`${r.width}px`,height:`${r.height}px`,minWidth:"auto",minHeight:"24px",display:r.enabled?"inline-flex":"none",alignItems:"center",justifyContent:d(l.textAlign),zIndex:r.zIndex||9e3,fontSize:`${l.fontSize}px`,color:l.color,backgroundColor:l.backgroundColor,fontWeight:l.fontWeight,border:`${l.borderWidth}px solid ${l.borderColor}`,borderRadius:`${l.borderRadius}px`,cursor:"pointer",transition:"all 0.2s",padding:"0 8px",pointerEvents:"auto",textAlign:l.textAlign||"center"},className:"ghost",disabled:!r.enabled,children:r.label})}return y.jsxs("div",{style:{position:"absolute",left:`${r.x}px`,top:`${r.y}px`,width:`${r.width}px`,height:`${r.height}px`,border:"2px solid #3b82f6",borderRadius:"4px",background:r.enabled?"rgba(59, 130, 246, 0.05)":"rgba(156, 163, 175, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"default",zIndex:r.zIndex||9100,pointerEvents:"auto",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.2)",transition:r.enabled?"box-shadow 0.2s":"none"},onMouseDown:f=>{f.stopPropagation(),t(f,r.id,"move")},onMouseEnter:f=>{f.currentTarget&&(f.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.35)")},onMouseLeave:f=>{f.currentTarget&&(f.currentTarget.style.boxShadow="0 2px 8px rgba(59, 130, 246, 0.2)")},children:[o&&y.jsx("button",{onClick:f=>{f.stopPropagation(),o(r.id)},style:{position:"absolute",top:"-12px",right:"-12px",width:"24px",height:"24px",borderRadius:"50%",background:"#3b82f6",color:"#fff",border:"2px solid #fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(59, 130, 246, 0.4)",zIndex:150,padding:0},title:up.t1,children:""}),y.jsx("div",{style:{flex:1,fontSize:`${l.fontSize}px`,color:r.enabled?l.color:"#9ca3af",fontWeight:l.fontWeight,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pointerEvents:"none",padding:"0 8px",display:"flex",alignItems:"center",justifyContent:d(l.textAlign),textAlign:l.textAlign||"center"},children:r.label}),y.jsx("div",{onMouseDown:f=>{f.stopPropagation(),t(f,r.id,"resize")},style:{position:"absolute",right:"-6px",bottom:"-6px",width:"16px",height:"16px",background:"#3b82f6",border:"2px solid #fff",borderRadius:"50%",cursor:"nwse-resize",zIndex:120,boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"}}),s&&y.jsx("button",{onClick:f=>{f.stopPropagation(),confirm(up.t3)&&s(r.id)},style:{position:"absolute",top:"-12px",left:"-12px",width:"24px",height:"24px",borderRadius:"50%",background:"#ef4444",color:"#fff",border:"2px solid #fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 6px rgba(239, 68, 68, 0.4)",zIndex:150,padding:0},title:up.t2,children:""})]})}const $a={t1:"",t2:"",t3:"",t4:"",t5:"",t6:"",t7:"",t8:" (",t9:"",t10:"",t11:"",t12:""};function Sb({deletedButtons:r,deletedBlocks:e=[],onRestore:t,onPermanentDelete:o,onRestoreBlock:a,onPermanentDeleteBlock:s,onClearAll:u,onClose:l,onSave:d,onCancel:f,onReset:h}){const S={"input-form-panel":"","document-list-panel":"","preview-textarea":"","preview-toolbar":"","processing-panel":"","operations-panel":""};return y.jsxs("div",{style:{position:"fixed",top:0,right:0,width:"300px",height:"100vh",backgroundColor:"#fff",boxShadow:"-4px 0 12px rgba(0, 0, 0, 0.1)",zIndex:1e4,display:"flex",flexDirection:"column",borderLeft:"1px solid #e2e8f0",transition:"transform 0.3s ease-in-out"},children:[y.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid #e2e8f0",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f8fafc"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#1e293b"},children:$a.t1}),y.jsx("span",{style:{backgroundColor:"#e2e8f0",padding:"2px 6px",borderRadius:"99px",fontSize:"12px",color:"#64748b",fontWeight:600},children:r.length+e.length})]}),y.jsx("button",{onClick:l,className:"ghost small",style:{padding:"4px"},title:$a.t2,children:y.jsx(rf,{size:20})})]}),y.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #e2e8f0",display:"flex",gap:"8px",flexDirection:"column"},children:y.jsxs("div",{style:{display:"flex",gap:"8px"},children:[y.jsxs("button",{onClick:f,className:"secondary",style:{flex:1,justifyContent:"center",gap:"8px"},children:[y.jsx(Xx,{size:16}),$a.t3]}),y.jsxs("button",{onClick:h,className:"ghost danger-text",style:{flex:1,justifyContent:"center",gap:"8px",border:"1px solid #fee2e2"},children:[y.jsx(e5,{size:16}),$a.t4]})]})}),y.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[r.length===0&&e.length===0?y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",gap:"12px"},children:[y.jsx(Rx,{size:48,strokeWidth:1}),y.jsx("p",{children:$a.t5})]}):r.map(b=>y.jsxs("div",{style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#fff",display:"flex",flexDirection:"column",gap:"8px",transition:"all 0.2s"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsx("span",{style:{fontWeight:500,color:"#334155",fontSize:"14px"},children:b.label||$a.t10}),y.jsx("span",{style:{fontSize:"11px",color:"#94a3b8"},children:new Date(b.deletedAt||Date.now()).toLocaleTimeString()})]}),y.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[y.jsxs("button",{onClick:()=>t(b.id),className:"secondary small",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[y.jsx(ag,{size:14}),$a.t6]}),y.jsxs("button",{onClick:()=>{confirm($a.t11)&&o(b.id)},className:"danger small",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[y.jsx(yd,{size:14}),$a.t7]})]})]},b.id)),e.length>0&&y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginTop:r.length>0?"8px":"0"},children:[y.jsxs("div",{style:{fontSize:"12px",fontWeight:600,color:"#94a3b8",textTransform:"uppercase",letterSpacing:"0.05em"},children:[$a.t8,e.length,")"]}),e.map(b=>y.jsxs("div",{style:{padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#fff",display:"flex",flexDirection:"column",gap:"8px"},children:[y.jsx("div",{style:{fontWeight:500,color:"#334155",fontSize:"14px"},children:S[b]||b}),y.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:y.jsxs("button",{onClick:()=>a(b),className:"secondary small",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[y.jsx(ag,{size:14}),$a.t6]})})]},b))]})]}),r.length>0&&y.jsx("div",{style:{padding:"16px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:y.jsxs("button",{onClick:()=>{confirm($a.t12)&&u()},className:"danger full-width",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[y.jsx(yd,{size:16}),$a.t9]})})]})}const dg={t4:"",t5:""};function fg({docs:r,setDocs:e,selectedDocId:t,setSelectedDocId:o,deleteDoc:a,uploadInputRef:s,handleFilePick:u,replayDirConfig:l,setReplayDirConfig:d,saveReplayDirConfig:f,replayDirConfigSaving:h}){const[S,b]=Qe.useState(null),[p,j]=Qe.useState(null),[N,A]=Qe.useState(!1),w=(Q,ie)=>{b(ie),A(!0),Q.dataTransfer.effectAllowed="move",Q.dataTransfer.setData("text/plain",ie),Q.target&&Q.dataTransfer.setDragImage(Q.target,20,20)},R=(Q,ie)=>{Q.preventDefault(),Q.stopPropagation(),Q.dataTransfer.dropEffect="move",ie!==S&&j(ie)},I=Q=>{Q.preventDefault(),j(null)},k=(Q,ie)=>{if(Q.preventDefault(),Q.stopPropagation(),!S||S===ie){b(null),j(null),A(!1);return}e&&e(U=>{const ue=[...U],oe=ue.findIndex(P=>P.id===S),B=ue.findIndex(P=>P.id===ie);if(oe===-1||B===-1)return U;const[te]=ue.splice(oe,1);return ue.splice(B,0,te),ue}),b(null),j(null),A(!1)},G=()=>{b(null),j(null),A(!1)},re=Q=>{N||o(Q)};return y.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[y.jsxs("div",{className:"list",style:{flex:1,overflowY:"auto"},children:[r.length===0&&y.jsxs("div",{className:"hint",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"8px"},children:[y.jsx(tf,{size:32,opacity:.2}),y.jsx("span",{children:dg.t4})]}),r.map(Q=>y.jsxs("div",{className:`list-item ${t===Q.id?"active":""} ${S===Q.id?"dragging":""} ${p===Q.id?"drag-over":""}`,onClick:()=>re(Q.id),draggable:"true",onDragStart:ie=>w(ie,Q.id),onDragOver:ie=>R(ie,Q.id),onDragLeave:I,onDrop:ie=>k(ie,Q.id),onDragEnd:G,style:{cursor:"grab",opacity:S===Q.id?.5:1,borderTop:p===Q.id?"2px solid #3b82f6":"none",background:p===Q.id?"#f0f9ff":void 0,transition:"border-top 0.15s ease, background 0.15s ease"},children:[y.jsx("div",{className:"drag-handle",style:{cursor:"grab",marginRight:"8px",color:"#9ca3af",display:"flex",alignItems:"center"},children:y.jsx(S1,{size:14})}),y.jsx("div",{style:{fontWeight:500,flex:1,cursor:"pointer"},children:Q.name}),y.jsx("div",{className:"section-actions",style:{justifyContent:"flex-end"},children:y.jsx("button",{type:"button",className:"ghost icon-btn",title:dg.t5,onClick:ie=>{ie.stopPropagation(),a(Q.id)},style:{width:"24px",height:"24px",padding:"4px"},children:y.jsx(yd,{size:14})})})]},Q.id))]}),y.jsxs("div",{style:{padding:"8px 10px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderRadius:"0 0 6px 6px",flexShrink:0},children:[y.jsxs("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[y.jsx(qx,{size:12}),y.jsx("span",{children:""}),y.jsx("span",{style:{fontSize:"10px",color:"#94a3b8"},children:"/"})]}),y.jsxs("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[y.jsx("input",{type:"text",value:(l==null?void 0:l.dirPath)||"",onChange:Q=>d&&d(ie=>({...ie,dirPath:Q.target.value})),placeholder:" C:\\docs  /home/docs",style:{flex:1,padding:"5px 8px",border:"1px solid #e2e8f0",borderRadius:"4px",fontSize:"12px",background:"#fff"}}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:f,disabled:h,style:{padding:"4px 10px",fontSize:"11px",whiteSpace:"nowrap"},children:h?"...":""})]})]}),y.jsx("input",{type:"file",accept:".txt,.md,.pdf,.docx",multiple:!0,ref:s,style:{display:"none"},onChange:Q=>void u(Q)})]})}const kb={t1:""};function Ua({blockId:r,panelId:e,isEditing:t,position:o,onPositionChange:a,onDelete:s,hidden:u,children:l,allowChildPointerEvents:d=!1,minWidth:f=50,minHeight:h=30}){const[S,b]=Qe.useState(!1),[p,j]=Qe.useState(null),[N,A]=Qe.useState(null),w=(I,k="move")=>{t&&(I.stopPropagation(),I.preventDefault(),b(!0),j(k),A({x:I.clientX,y:I.clientY,startPos:o}))};if(Qe.useEffect(()=>{if(!S||!N)return;const I=G=>{const re=G.clientX-N.x,Q=G.clientY-N.y;if(p==="move"){const ie=N.startPos.left+re,U=N.startPos.top+Q;a({...o,left:Math.max(0,ie),top:Math.max(0,U)})}else if(p&&p.startsWith("resize")){let{left:ie,top:U,width:ue,height:oe}=N.startPos;if(p.includes("e"))ue=Math.max(f,ue+re);else if(p.includes("w")){const B=Math.max(f,ue-re);ie+=ue-B,ue=B}if(p.includes("s"))oe=Math.max(h,oe+Q);else if(p.includes("n")){const B=Math.max(h,oe-Q);U+=oe-B,oe=B}a({left:ie,top:U,width:ue,height:oe})}},k=()=>{b(!1),j(null),A(null)};return document.addEventListener("mousemove",I),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",k)}},[S,N,p,o,a,f,h]),u)return null;if(!t)return y.jsx("div",{style:{position:"absolute",left:`${(o==null?void 0:o.left)||0}px`,top:`${(o==null?void 0:o.top)||0}px`,width:`${(o==null?void 0:o.width)||"100%"}px`,height:`${(o==null?void 0:o.height)||"100%"}px`,overflow:"auto"},children:l});const R={position:"absolute",left:`${o.left}px`,top:`${o.top}px`,width:`${o.width}px`,height:`${o.height}px`,border:"2px dashed #10b981",background:"rgba(16, 185, 129, 0.05)",borderRadius:"6px",zIndex:S?100:5,cursor:S?"grabbing":"grab",overflow:"auto"};return y.jsxs("div",{style:R,onMouseDown:I=>w(I,"move"),children:[y.jsx("div",{style:{width:"100%",height:"100%",pointerEvents:d?"auto":"none"},children:l}),["e","s","se","w","n","nw","ne","sw"].map(I=>{I.length>1;const k={position:"absolute",zIndex:10,cursor:I.includes("n")||I.includes("s")?I.includes("e")||I.includes("w")?`${I.includes("n")?"ne":"se"}sw-resize`:"ns-resize":"ew-resize"};return I==="e"?Object.assign(k,{right:0,top:0,bottom:0,width:"10px"}):I==="s"?Object.assign(k,{bottom:0,left:0,right:0,height:"10px"}):I==="w"?Object.assign(k,{left:0,top:0,bottom:0,width:"10px"}):I==="n"?Object.assign(k,{top:0,left:0,right:0,height:"10px"}):I==="se"?Object.assign(k,{right:0,bottom:0,width:"20px",height:"20px",background:"#10b981",borderRadius:"0 0 6px 0"}):I==="sw"?Object.assign(k,{left:0,bottom:0,width:"20px",height:"20px",background:"#10b981",borderRadius:"0 0 0 6px"}):I==="ne"?Object.assign(k,{right:0,top:0,width:"20px",height:"20px",background:"#10b981",borderRadius:"0 6px 0 0"}):I==="nw"&&Object.assign(k,{left:0,top:0,width:"20px",height:"20px",background:"#10b981",borderRadius:"6px 0 0 0"}),y.jsx("div",{style:k,onMouseDown:G=>{G.stopPropagation(),w(G,`resize-${I}`)}},I)}),s&&y.jsx("div",{style:{position:"absolute",top:-10,right:-10,width:20,height:20,background:"#ef4444",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:101,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",fontSize:"14px",fontWeight:"bold"},onMouseDown:I=>{I.stopPropagation(),I.preventDefault()},onClick:I=>{I.stopPropagation(),s()},title:kb.t1,children:""})]})}const Ab="modulepreload",Nb=function(r){return"/"+r},hg={},cd=function(e,t,o){let a=Promise.resolve();if(t&&t.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=u(t.map(f=>{if(f=Nb(f),f in hg)return;hg[f]=!0;const h=f.endsWith(".css"),S=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${S}`))return;const b=document.createElement("link");if(b.rel=h?"stylesheet":Ab,h||(b.as="script"),b.crossOrigin="",b.href=f,d&&b.setAttribute("nonce",d),document.head.appendChild(b),h)return new Promise((p,j)=>{b.addEventListener("load",p),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(u){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u}return a.then(u=>{for(const l of u||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Eb=Object.defineProperty,Tb=Object.defineProperties,Cb=Object.getOwnPropertyDescriptors,pg=Object.getOwnPropertySymbols,Lb=Object.prototype.hasOwnProperty,Ib=Object.prototype.propertyIsEnumerable,k1=(r,e,t)=>e in r?Eb(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Si=(r,e)=>{for(var t in e||(e={}))Lb.call(e,t)&&k1(r,t,e[t]);if(pg)for(var t of pg(e))Ib.call(e,t)&&k1(r,t,e[t]);return r},vd=(r,e)=>Tb(r,Cb(e)),At=(r,e,t)=>k1(r,typeof e!="symbol"?e+"":e,t),Rb=(r,e,t)=>new Promise((o,a)=>{var s=d=>{try{l(t.next(d))}catch(f){a(f)}},u=d=>{try{l(t.throw(d))}catch(f){a(f)}},l=d=>d.done?o(d.value):Promise.resolve(d.value).then(s,u);l((t=t.apply(r,e)).next())});class gh{constructor(e){At(this,"rootKey"),this.rootKey=e}}const jb=Object.seal({});class Rt extends gh{constructor(e){super(e),At(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);const o=this.root.map(a=>a instanceof gh?a.prepForXml(e):a).filter(a=>a!==void 0);return e.stack.pop(),{[this.rootKey]:o.length?o.length===1&&((t=o[0])!=null&&t._attr)?o[0]:o:jb}}addChildElement(e){return this.root.push(e),this}}class _h extends Rt{prepForXml(e){const t=super.prepForXml(e);if(t&&(typeof t[this.rootKey]!="object"||Object.keys(t[this.rootKey]).length))return t}}class Ir extends gh{constructor(e){super("_attr"),At(this,"xmlKeys"),this.root=e}prepForXml(e){const t={};return Object.entries(this.root).forEach(([o,a])=>{if(a!==void 0){const s=this.xmlKeys&&this.xmlKeys[o]||o;t[s]=a}}),{_attr:t}}}class Sh extends gh{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:o})=>o!==void 0).reduce((o,{key:a,value:s})=>vd(Si({},o),{[a]:s}),{})}}}class Yo extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n5(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var dp={},Pf={exports:{}},mg;function G1(){if(mg)return Pf.exports;mg=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(G,re,Q){return Function.prototype.apply.call(G,re,Q)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:t=function(G){return Object.getOwnPropertyNames(G)};function o(k){console&&console.warn&&console.warn(k)}var a=Number.isNaN||function(G){return G!==G};function s(){s.init.call(this)}Pf.exports=s,Pf.exports.once=w,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");u=k}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(G){if(typeof G!="number"||G<0||a(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this};function d(k){return k._maxListeners===void 0?s.defaultMaxListeners:k._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(G){for(var re=[],Q=1;Q<arguments.length;Q++)re.push(arguments[Q]);var ie=G==="error",U=this._events;if(U!==void 0)ie=ie&&U.error===void 0;else if(!ie)return!1;if(ie){var ue;if(re.length>0&&(ue=re[0]),ue instanceof Error)throw ue;var oe=new Error("Unhandled error."+(ue?" ("+ue.message+")":""));throw oe.context=ue,oe}var B=U[G];if(B===void 0)return!1;if(typeof B=="function")e(B,this,re);else for(var te=B.length,P=j(B,te),Q=0;Q<te;++Q)e(P[Q],this,re);return!0};function f(k,G,re,Q){var ie,U,ue;if(l(re),U=k._events,U===void 0?(U=k._events=Object.create(null),k._eventsCount=0):(U.newListener!==void 0&&(k.emit("newListener",G,re.listener?re.listener:re),U=k._events),ue=U[G]),ue===void 0)ue=U[G]=re,++k._eventsCount;else if(typeof ue=="function"?ue=U[G]=Q?[re,ue]:[ue,re]:Q?ue.unshift(re):ue.push(re),ie=d(k),ie>0&&ue.length>ie&&!ue.warned){ue.warned=!0;var oe=new Error("Possible EventEmitter memory leak detected. "+ue.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");oe.name="MaxListenersExceededWarning",oe.emitter=k,oe.type=G,oe.count=ue.length,o(oe)}return k}s.prototype.addListener=function(G,re){return f(this,G,re,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(G,re){return f(this,G,re,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(k,G,re){var Q={fired:!1,wrapFn:void 0,target:k,type:G,listener:re},ie=h.bind(Q);return ie.listener=re,Q.wrapFn=ie,ie}s.prototype.once=function(G,re){return l(re),this.on(G,S(this,G,re)),this},s.prototype.prependOnceListener=function(G,re){return l(re),this.prependListener(G,S(this,G,re)),this},s.prototype.removeListener=function(G,re){var Q,ie,U,ue,oe;if(l(re),ie=this._events,ie===void 0)return this;if(Q=ie[G],Q===void 0)return this;if(Q===re||Q.listener===re)--this._eventsCount===0?this._events=Object.create(null):(delete ie[G],ie.removeListener&&this.emit("removeListener",G,Q.listener||re));else if(typeof Q!="function"){for(U=-1,ue=Q.length-1;ue>=0;ue--)if(Q[ue]===re||Q[ue].listener===re){oe=Q[ue].listener,U=ue;break}if(U<0)return this;U===0?Q.shift():N(Q,U),Q.length===1&&(ie[G]=Q[0]),ie.removeListener!==void 0&&this.emit("removeListener",G,oe||re)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(G){var re,Q,ie;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[G]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[G]),this;if(arguments.length===0){var U=Object.keys(Q),ue;for(ie=0;ie<U.length;++ie)ue=U[ie],ue!=="removeListener"&&this.removeAllListeners(ue);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(re=Q[G],typeof re=="function")this.removeListener(G,re);else if(re!==void 0)for(ie=re.length-1;ie>=0;ie--)this.removeListener(G,re[ie]);return this};function b(k,G,re){var Q=k._events;if(Q===void 0)return[];var ie=Q[G];return ie===void 0?[]:typeof ie=="function"?re?[ie.listener||ie]:[ie]:re?A(ie):j(ie,ie.length)}s.prototype.listeners=function(G){return b(this,G,!0)},s.prototype.rawListeners=function(G){return b(this,G,!1)},s.listenerCount=function(k,G){return typeof k.listenerCount=="function"?k.listenerCount(G):p.call(k,G)},s.prototype.listenerCount=p;function p(k){var G=this._events;if(G!==void 0){var re=G[k];if(typeof re=="function")return 1;if(re!==void 0)return re.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function j(k,G){for(var re=new Array(G),Q=0;Q<G;++Q)re[Q]=k[Q];return re}function N(k,G){for(;G+1<k.length;G++)k[G]=k[G+1];k.pop()}function A(k){for(var G=new Array(k.length),re=0;re<G.length;++re)G[re]=k[re].listener||k[re];return G}function w(k,G){return new Promise(function(re,Q){function ie(ue){k.removeListener(G,U),Q(ue)}function U(){typeof k.removeListener=="function"&&k.removeListener("error",ie),re([].slice.call(arguments))}I(k,G,U,{once:!0}),G!=="error"&&R(k,ie,{once:!0})})}function R(k,G,re){typeof k.on=="function"&&I(k,"error",G,re)}function I(k,G,re,Q){if(typeof k.on=="function")Q.once?k.once(G,re):k.on(G,re);else if(typeof k.addEventListener=="function")k.addEventListener(G,function ie(U){Q.once&&k.removeEventListener(G,ie),re(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return Pf.exports}var Df={exports:{}},gg;function du(){return gg||(gg=1,typeof Object.create=="function"?Df.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Df.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}}),Df.exports}function Pb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var r5={exports:{}},Jo=r5.exports={},nc,rc;function A1(){throw new Error("setTimeout has not been defined")}function N1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?nc=setTimeout:nc=A1}catch{nc=A1}try{typeof clearTimeout=="function"?rc=clearTimeout:rc=N1}catch{rc=N1}})();function i5(r){if(nc===setTimeout)return setTimeout(r,0);if((nc===A1||!nc)&&setTimeout)return nc=setTimeout,setTimeout(r,0);try{return nc(r,0)}catch{try{return nc.call(null,r,0)}catch{return nc.call(this,r,0)}}}function Db(r){if(rc===clearTimeout)return clearTimeout(r);if((rc===N1||!rc)&&clearTimeout)return rc=clearTimeout,clearTimeout(r);try{return rc(r)}catch{try{return rc.call(null,r)}catch{return rc.call(this,r)}}}var Bc=[],ud=!1,Du,ah=-1;function Ob(){!ud||!Du||(ud=!1,Du.length?Bc=Du.concat(Bc):ah=-1,Bc.length&&o5())}function o5(){if(!ud){var r=i5(Ob);ud=!0;for(var e=Bc.length;e;){for(Du=Bc,Bc=[];++ah<e;)Du&&Du[ah].run();ah=-1,e=Bc.length}Du=null,ud=!1,Db(r)}}Jo.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Bc.push(new s5(r,e)),Bc.length===1&&!ud&&i5(o5)};function s5(r,e){this.fun=r,this.array=e}s5.prototype.run=function(){this.fun.apply(null,this.array)};Jo.title="browser";Jo.browser=!0;Jo.env={};Jo.argv=[];Jo.version="";Jo.versions={};function Mc(){}Jo.on=Mc;Jo.addListener=Mc;Jo.once=Mc;Jo.off=Mc;Jo.removeListener=Mc;Jo.removeAllListeners=Mc;Jo.emit=Mc;Jo.prependListener=Mc;Jo.prependOnceListener=Mc;Jo.listeners=function(r){return[]};Jo.binding=function(r){throw new Error("process.binding is not supported")};Jo.cwd=function(){return"/"};Jo.chdir=function(r){throw new Error("process.chdir is not supported")};Jo.umask=function(){return 0};var Fb=r5.exports;const ai=Pb(Fb);var fp,yg;function a5(){return yg||(yg=1,fp=G1().EventEmitter),fp}var hp={},zd={},vg;function Bb(){if(vg)return zd;vg=1,zd.byteLength=l,zd.toByteArray=f,zd.fromByteArray=b;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],e[o.charCodeAt(a)]=a;e[45]=62,e[95]=63;function u(p){var j=p.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var N=p.indexOf("=");N===-1&&(N=j);var A=N===j?0:4-N%4;return[N,A]}function l(p){var j=u(p),N=j[0],A=j[1];return(N+A)*3/4-A}function d(p,j,N){return(j+N)*3/4-N}function f(p){var j,N=u(p),A=N[0],w=N[1],R=new t(d(p,A,w)),I=0,k=w>0?A-4:A,G;for(G=0;G<k;G+=4)j=e[p.charCodeAt(G)]<<18|e[p.charCodeAt(G+1)]<<12|e[p.charCodeAt(G+2)]<<6|e[p.charCodeAt(G+3)],R[I++]=j>>16&255,R[I++]=j>>8&255,R[I++]=j&255;return w===2&&(j=e[p.charCodeAt(G)]<<2|e[p.charCodeAt(G+1)]>>4,R[I++]=j&255),w===1&&(j=e[p.charCodeAt(G)]<<10|e[p.charCodeAt(G+1)]<<4|e[p.charCodeAt(G+2)]>>2,R[I++]=j>>8&255,R[I++]=j&255),R}function h(p){return r[p>>18&63]+r[p>>12&63]+r[p>>6&63]+r[p&63]}function S(p,j,N){for(var A,w=[],R=j;R<N;R+=3)A=(p[R]<<16&16711680)+(p[R+1]<<8&65280)+(p[R+2]&255),w.push(h(A));return w.join("")}function b(p){for(var j,N=p.length,A=N%3,w=[],R=16383,I=0,k=N-A;I<k;I+=R)w.push(S(p,I,I+R>k?k:I+R));return A===1?(j=p[N-1],w.push(r[j>>2]+r[j<<4&63]+"==")):A===2&&(j=(p[N-2]<<8)+p[N-1],w.push(r[j>>10]+r[j>>4&63]+r[j<<2&63]+"=")),w.join("")}return zd}var Of={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var wg;function Mb(){return wg||(wg=1,Of.read=function(r,e,t,o,a){var s,u,l=a*8-o-1,d=(1<<l)-1,f=d>>1,h=-7,S=t?a-1:0,b=t?-1:1,p=r[e+S];for(S+=b,s=p&(1<<-h)-1,p>>=-h,h+=l;h>0;s=s*256+r[e+S],S+=b,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=o;h>0;u=u*256+r[e+S],S+=b,h-=8);if(s===0)s=1-f;else{if(s===d)return u?NaN:(p?-1:1)*(1/0);u=u+Math.pow(2,o),s=s-f}return(p?-1:1)*u*Math.pow(2,s-o)},Of.write=function(r,e,t,o,a,s){var u,l,d,f=s*8-a-1,h=(1<<f)-1,S=h>>1,b=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:s-1,j=o?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,u=h):(u=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+S>=1?e+=b/d:e+=b*Math.pow(2,1-S),e*d>=2&&(u++,d/=2),u+S>=h?(l=0,u=h):u+S>=1?(l=(e*d-1)*Math.pow(2,a),u=u+S):(l=e*Math.pow(2,S-1)*Math.pow(2,a),u=0));a>=8;r[t+p]=l&255,p+=j,l/=256,a-=8);for(u=u<<a|l,f+=a;f>0;r[t+p]=u&255,p+=j,u/=256,f-=8);r[t+p-j]|=N*128}),Of}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xg;function kh(){return xg||(xg=1,(function(r){var e=Bb(),t=Mb(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=R,r.INSPECT_MAX_BYTES=50;var a=2147483647;r.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var X=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(X,T),X.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(X){if(X>a)throw new RangeError('The value "'+X+'" is invalid for option "size"');var T=new Uint8Array(X);return Object.setPrototypeOf(T,l.prototype),T}function l(X,T,L){if(typeof X=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(X)}return d(X,T,L)}l.poolSize=8192;function d(X,T,L){if(typeof X=="string")return b(X,T);if(ArrayBuffer.isView(X))return j(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(Be(X,ArrayBuffer)||X&&Be(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Be(X,SharedArrayBuffer)||X&&Be(X.buffer,SharedArrayBuffer)))return N(X,T,L);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var q=X.valueOf&&X.valueOf();if(q!=null&&q!==X)return l.from(q,T,L);var Se=A(X);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return l.from(X[Symbol.toPrimitive]("string"),T,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}l.from=function(X,T,L){return d(X,T,L)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function h(X,T,L){return f(X),X<=0?u(X):T!==void 0?typeof L=="string"?u(X).fill(T,L):u(X).fill(T):u(X)}l.alloc=function(X,T,L){return h(X,T,L)};function S(X){return f(X),u(X<0?0:w(X)|0)}l.allocUnsafe=function(X){return S(X)},l.allocUnsafeSlow=function(X){return S(X)};function b(X,T){if((typeof T!="string"||T==="")&&(T="utf8"),!l.isEncoding(T))throw new TypeError("Unknown encoding: "+T);var L=I(X,T)|0,q=u(L),Se=q.write(X,T);return Se!==L&&(q=q.slice(0,Se)),q}function p(X){for(var T=X.length<0?0:w(X.length)|0,L=u(T),q=0;q<T;q+=1)L[q]=X[q]&255;return L}function j(X){if(Be(X,Uint8Array)){var T=new Uint8Array(X);return N(T.buffer,T.byteOffset,T.byteLength)}return p(X)}function N(X,T,L){if(T<0||X.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<T+(L||0))throw new RangeError('"length" is outside of buffer bounds');var q;return T===void 0&&L===void 0?q=new Uint8Array(X):L===void 0?q=new Uint8Array(X,T):q=new Uint8Array(X,T,L),Object.setPrototypeOf(q,l.prototype),q}function A(X){if(l.isBuffer(X)){var T=w(X.length)|0,L=u(T);return L.length===0||X.copy(L,0,0,T),L}if(X.length!==void 0)return typeof X.length!="number"||H(X.length)?u(0):p(X);if(X.type==="Buffer"&&Array.isArray(X.data))return p(X.data)}function w(X){if(X>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return X|0}function R(X){return+X!=X&&(X=0),l.alloc(+X)}l.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==l.prototype},l.compare=function(T,L){if(Be(T,Uint8Array)&&(T=l.from(T,T.offset,T.byteLength)),Be(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(T)||!l.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===L)return 0;for(var q=T.length,Se=L.length,Le=0,Ee=Math.min(q,Se);Le<Ee;++Le)if(T[Le]!==L[Le]){q=T[Le],Se=L[Le];break}return q<Se?-1:Se<q?1:0},l.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(T,L){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return l.alloc(0);var q;if(L===void 0)for(L=0,q=0;q<T.length;++q)L+=T[q].length;var Se=l.allocUnsafe(L),Le=0;for(q=0;q<T.length;++q){var Ee=T[q];if(Be(Ee,Uint8Array))Le+Ee.length>Se.length?l.from(Ee).copy(Se,Le):Uint8Array.prototype.set.call(Se,Ee,Le);else if(l.isBuffer(Ee))Ee.copy(Se,Le);else throw new TypeError('"list" argument must be an Array of Buffers');Le+=Ee.length}return Se};function I(X,T){if(l.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||Be(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var L=X.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&L===0)return 0;for(var Se=!1;;)switch(T){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return z(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return se(X).length;default:if(Se)return q?-1:z(X).length;T=(""+T).toLowerCase(),Se=!0}}l.byteLength=I;function k(X,T,L){var q=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,T>>>=0,L<=T))return"";for(X||(X="utf8");;)switch(X){case"hex":return ke(this,T,L);case"utf8":case"utf-8":return P(this,T,L);case"ascii":return ge(this,T,L);case"latin1":case"binary":return xe(this,T,L);case"base64":return te(this,T,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,T,L);default:if(q)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),q=!0}}l.prototype._isBuffer=!0;function G(X,T,L){var q=X[T];X[T]=X[L],X[L]=q}l.prototype.swap16=function(){var T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<T;L+=2)G(this,L,L+1);return this},l.prototype.swap32=function(){var T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<T;L+=4)G(this,L,L+3),G(this,L+1,L+2);return this},l.prototype.swap64=function(){var T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<T;L+=8)G(this,L,L+7),G(this,L+1,L+6),G(this,L+2,L+5),G(this,L+3,L+4);return this},l.prototype.toString=function(){var T=this.length;return T===0?"":arguments.length===0?P(this,0,T):k.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(T){if(!l.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:l.compare(this,T)===0},l.prototype.inspect=function(){var T="",L=r.INSPECT_MAX_BYTES;return T=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(T+=" ... "),"<Buffer "+T+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(T,L,q,Se,Le){if(Be(T,Uint8Array)&&(T=l.from(T,T.offset,T.byteLength)),!l.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(L===void 0&&(L=0),q===void 0&&(q=T?T.length:0),Se===void 0&&(Se=0),Le===void 0&&(Le=this.length),L<0||q>T.length||Se<0||Le>this.length)throw new RangeError("out of range index");if(Se>=Le&&L>=q)return 0;if(Se>=Le)return-1;if(L>=q)return 1;if(L>>>=0,q>>>=0,Se>>>=0,Le>>>=0,this===T)return 0;for(var Ee=Le-Se,qe=q-L,dt=Math.min(Ee,qe),ot=this.slice(Se,Le),lt=T.slice(L,q),Nt=0;Nt<dt;++Nt)if(ot[Nt]!==lt[Nt]){Ee=ot[Nt],qe=lt[Nt];break}return Ee<qe?-1:qe<Ee?1:0};function re(X,T,L,q,Se){if(X.length===0)return-1;if(typeof L=="string"?(q=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,H(L)&&(L=Se?0:X.length-1),L<0&&(L=X.length+L),L>=X.length){if(Se)return-1;L=X.length-1}else if(L<0)if(Se)L=0;else return-1;if(typeof T=="string"&&(T=l.from(T,q)),l.isBuffer(T))return T.length===0?-1:Q(X,T,L,q,Se);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?Se?Uint8Array.prototype.indexOf.call(X,T,L):Uint8Array.prototype.lastIndexOf.call(X,T,L):Q(X,[T],L,q,Se);throw new TypeError("val must be string, number or Buffer")}function Q(X,T,L,q,Se){var Le=1,Ee=X.length,qe=T.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(X.length<2||T.length<2)return-1;Le=2,Ee/=2,qe/=2,L/=2}function dt(Zt,Rn){return Le===1?Zt[Rn]:Zt.readUInt16BE(Rn*Le)}var ot;if(Se){var lt=-1;for(ot=L;ot<Ee;ot++)if(dt(X,ot)===dt(T,lt===-1?0:ot-lt)){if(lt===-1&&(lt=ot),ot-lt+1===qe)return lt*Le}else lt!==-1&&(ot-=ot-lt),lt=-1}else for(L+qe>Ee&&(L=Ee-qe),ot=L;ot>=0;ot--){for(var Nt=!0,Ft=0;Ft<qe;Ft++)if(dt(X,ot+Ft)!==dt(T,Ft)){Nt=!1;break}if(Nt)return ot}return-1}l.prototype.includes=function(T,L,q){return this.indexOf(T,L,q)!==-1},l.prototype.indexOf=function(T,L,q){return re(this,T,L,q,!0)},l.prototype.lastIndexOf=function(T,L,q){return re(this,T,L,q,!1)};function ie(X,T,L,q){L=Number(L)||0;var Se=X.length-L;q?(q=Number(q),q>Se&&(q=Se)):q=Se;var Le=T.length;q>Le/2&&(q=Le/2);for(var Ee=0;Ee<q;++Ee){var qe=parseInt(T.substr(Ee*2,2),16);if(H(qe))return Ee;X[L+Ee]=qe}return Ee}function U(X,T,L,q){return me(z(T,X.length-L),X,L,q)}function ue(X,T,L,q){return me(fe(T),X,L,q)}function oe(X,T,L,q){return me(se(T),X,L,q)}function B(X,T,L,q){return me(he(T,X.length-L),X,L,q)}l.prototype.write=function(T,L,q,Se){if(L===void 0)Se="utf8",q=this.length,L=0;else if(q===void 0&&typeof L=="string")Se=L,q=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(q)?(q=q>>>0,Se===void 0&&(Se="utf8")):(Se=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Le=this.length-L;if((q===void 0||q>Le)&&(q=Le),T.length>0&&(q<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var Ee=!1;;)switch(Se){case"hex":return ie(this,T,L,q);case"utf8":case"utf-8":return U(this,T,L,q);case"ascii":case"latin1":case"binary":return ue(this,T,L,q);case"base64":return oe(this,T,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,T,L,q);default:if(Ee)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Ee=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function te(X,T,L){return T===0&&L===X.length?e.fromByteArray(X):e.fromByteArray(X.slice(T,L))}function P(X,T,L){L=Math.min(X.length,L);for(var q=[],Se=T;Se<L;){var Le=X[Se],Ee=null,qe=Le>239?4:Le>223?3:Le>191?2:1;if(Se+qe<=L){var dt,ot,lt,Nt;switch(qe){case 1:Le<128&&(Ee=Le);break;case 2:dt=X[Se+1],(dt&192)===128&&(Nt=(Le&31)<<6|dt&63,Nt>127&&(Ee=Nt));break;case 3:dt=X[Se+1],ot=X[Se+2],(dt&192)===128&&(ot&192)===128&&(Nt=(Le&15)<<12|(dt&63)<<6|ot&63,Nt>2047&&(Nt<55296||Nt>57343)&&(Ee=Nt));break;case 4:dt=X[Se+1],ot=X[Se+2],lt=X[Se+3],(dt&192)===128&&(ot&192)===128&&(lt&192)===128&&(Nt=(Le&15)<<18|(dt&63)<<12|(ot&63)<<6|lt&63,Nt>65535&&Nt<1114112&&(Ee=Nt))}}Ee===null?(Ee=65533,qe=1):Ee>65535&&(Ee-=65536,q.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),q.push(Ee),Se+=qe}return Ae(q)}var be=4096;function Ae(X){var T=X.length;if(T<=be)return String.fromCharCode.apply(String,X);for(var L="",q=0;q<T;)L+=String.fromCharCode.apply(String,X.slice(q,q+=be));return L}function ge(X,T,L){var q="";L=Math.min(X.length,L);for(var Se=T;Se<L;++Se)q+=String.fromCharCode(X[Se]&127);return q}function xe(X,T,L){var q="";L=Math.min(X.length,L);for(var Se=T;Se<L;++Se)q+=String.fromCharCode(X[Se]);return q}function ke(X,T,L){var q=X.length;(!T||T<0)&&(T=0),(!L||L<0||L>q)&&(L=q);for(var Se="",Le=T;Le<L;++Le)Se+=ee[X[Le]];return Se}function Fe(X,T,L){for(var q=X.slice(T,L),Se="",Le=0;Le<q.length-1;Le+=2)Se+=String.fromCharCode(q[Le]+q[Le+1]*256);return Se}l.prototype.slice=function(T,L){var q=this.length;T=~~T,L=L===void 0?q:~~L,T<0?(T+=q,T<0&&(T=0)):T>q&&(T=q),L<0?(L+=q,L<0&&(L=0)):L>q&&(L=q),L<T&&(L=T);var Se=this.subarray(T,L);return Object.setPrototypeOf(Se,l.prototype),Se};function J(X,T,L){if(X%1!==0||X<0)throw new RangeError("offset is not uint");if(X+T>L)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(T,L,q){T=T>>>0,L=L>>>0,q||J(T,L,this.length);for(var Se=this[T],Le=1,Ee=0;++Ee<L&&(Le*=256);)Se+=this[T+Ee]*Le;return Se},l.prototype.readUintBE=l.prototype.readUIntBE=function(T,L,q){T=T>>>0,L=L>>>0,q||J(T,L,this.length);for(var Se=this[T+--L],Le=1;L>0&&(Le*=256);)Se+=this[T+--L]*Le;return Se},l.prototype.readUint8=l.prototype.readUInt8=function(T,L){return T=T>>>0,L||J(T,1,this.length),this[T]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(T,L){return T=T>>>0,L||J(T,2,this.length),this[T]|this[T+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(T,L){return T=T>>>0,L||J(T,2,this.length),this[T]<<8|this[T+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(T,L){return T=T>>>0,L||J(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(T,L){return T=T>>>0,L||J(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},l.prototype.readIntLE=function(T,L,q){T=T>>>0,L=L>>>0,q||J(T,L,this.length);for(var Se=this[T],Le=1,Ee=0;++Ee<L&&(Le*=256);)Se+=this[T+Ee]*Le;return Le*=128,Se>=Le&&(Se-=Math.pow(2,8*L)),Se},l.prototype.readIntBE=function(T,L,q){T=T>>>0,L=L>>>0,q||J(T,L,this.length);for(var Se=L,Le=1,Ee=this[T+--Se];Se>0&&(Le*=256);)Ee+=this[T+--Se]*Le;return Le*=128,Ee>=Le&&(Ee-=Math.pow(2,8*L)),Ee},l.prototype.readInt8=function(T,L){return T=T>>>0,L||J(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},l.prototype.readInt16LE=function(T,L){T=T>>>0,L||J(T,2,this.length);var q=this[T]|this[T+1]<<8;return q&32768?q|4294901760:q},l.prototype.readInt16BE=function(T,L){T=T>>>0,L||J(T,2,this.length);var q=this[T+1]|this[T]<<8;return q&32768?q|4294901760:q},l.prototype.readInt32LE=function(T,L){return T=T>>>0,L||J(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},l.prototype.readInt32BE=function(T,L){return T=T>>>0,L||J(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},l.prototype.readFloatLE=function(T,L){return T=T>>>0,L||J(T,4,this.length),t.read(this,T,!0,23,4)},l.prototype.readFloatBE=function(T,L){return T=T>>>0,L||J(T,4,this.length),t.read(this,T,!1,23,4)},l.prototype.readDoubleLE=function(T,L){return T=T>>>0,L||J(T,8,this.length),t.read(this,T,!0,52,8)},l.prototype.readDoubleBE=function(T,L){return T=T>>>0,L||J(T,8,this.length),t.read(this,T,!1,52,8)};function C(X,T,L,q,Se,Le){if(!l.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>Se||T<Le)throw new RangeError('"value" argument is out of bounds');if(L+q>X.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(T,L,q,Se){if(T=+T,L=L>>>0,q=q>>>0,!Se){var Le=Math.pow(2,8*q)-1;C(this,T,L,q,Le,0)}var Ee=1,qe=0;for(this[L]=T&255;++qe<q&&(Ee*=256);)this[L+qe]=T/Ee&255;return L+q},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(T,L,q,Se){if(T=+T,L=L>>>0,q=q>>>0,!Se){var Le=Math.pow(2,8*q)-1;C(this,T,L,q,Le,0)}var Ee=q-1,qe=1;for(this[L+Ee]=T&255;--Ee>=0&&(qe*=256);)this[L+Ee]=T/qe&255;return L+q},l.prototype.writeUint8=l.prototype.writeUInt8=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,1,255,0),this[L]=T&255,L+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,2,65535,0),this[L]=T&255,this[L+1]=T>>>8,L+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,2,65535,0),this[L]=T>>>8,this[L+1]=T&255,L+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,4,4294967295,0),this[L+3]=T>>>24,this[L+2]=T>>>16,this[L+1]=T>>>8,this[L]=T&255,L+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,4,4294967295,0),this[L]=T>>>24,this[L+1]=T>>>16,this[L+2]=T>>>8,this[L+3]=T&255,L+4},l.prototype.writeIntLE=function(T,L,q,Se){if(T=+T,L=L>>>0,!Se){var Le=Math.pow(2,8*q-1);C(this,T,L,q,Le-1,-Le)}var Ee=0,qe=1,dt=0;for(this[L]=T&255;++Ee<q&&(qe*=256);)T<0&&dt===0&&this[L+Ee-1]!==0&&(dt=1),this[L+Ee]=(T/qe>>0)-dt&255;return L+q},l.prototype.writeIntBE=function(T,L,q,Se){if(T=+T,L=L>>>0,!Se){var Le=Math.pow(2,8*q-1);C(this,T,L,q,Le-1,-Le)}var Ee=q-1,qe=1,dt=0;for(this[L+Ee]=T&255;--Ee>=0&&(qe*=256);)T<0&&dt===0&&this[L+Ee+1]!==0&&(dt=1),this[L+Ee]=(T/qe>>0)-dt&255;return L+q},l.prototype.writeInt8=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,1,127,-128),T<0&&(T=255+T+1),this[L]=T&255,L+1},l.prototype.writeInt16LE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,2,32767,-32768),this[L]=T&255,this[L+1]=T>>>8,L+2},l.prototype.writeInt16BE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,2,32767,-32768),this[L]=T>>>8,this[L+1]=T&255,L+2},l.prototype.writeInt32LE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,4,2147483647,-2147483648),this[L]=T&255,this[L+1]=T>>>8,this[L+2]=T>>>16,this[L+3]=T>>>24,L+4},l.prototype.writeInt32BE=function(T,L,q){return T=+T,L=L>>>0,q||C(this,T,L,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[L]=T>>>24,this[L+1]=T>>>16,this[L+2]=T>>>8,this[L+3]=T&255,L+4};function Z(X,T,L,q,Se,Le){if(L+q>X.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function ne(X,T,L,q,Se){return T=+T,L=L>>>0,Se||Z(X,T,L,4),t.write(X,T,L,q,23,4),L+4}l.prototype.writeFloatLE=function(T,L,q){return ne(this,T,L,!0,q)},l.prototype.writeFloatBE=function(T,L,q){return ne(this,T,L,!1,q)};function ye(X,T,L,q,Se){return T=+T,L=L>>>0,Se||Z(X,T,L,8),t.write(X,T,L,q,52,8),L+8}l.prototype.writeDoubleLE=function(T,L,q){return ye(this,T,L,!0,q)},l.prototype.writeDoubleBE=function(T,L,q){return ye(this,T,L,!1,q)},l.prototype.copy=function(T,L,q,Se){if(!l.isBuffer(T))throw new TypeError("argument should be a Buffer");if(q||(q=0),!Se&&Se!==0&&(Se=this.length),L>=T.length&&(L=T.length),L||(L=0),Se>0&&Se<q&&(Se=q),Se===q||T.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),T.length-L<Se-q&&(Se=T.length-L+q);var Le=Se-q;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,q,Se):Uint8Array.prototype.set.call(T,this.subarray(q,Se),L),Le},l.prototype.fill=function(T,L,q,Se){if(typeof T=="string"){if(typeof L=="string"?(Se=L,L=0,q=this.length):typeof q=="string"&&(Se=q,q=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!l.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(T.length===1){var Le=T.charCodeAt(0);(Se==="utf8"&&Le<128||Se==="latin1")&&(T=Le)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(L<0||this.length<L||this.length<q)throw new RangeError("Out of range index");if(q<=L)return this;L=L>>>0,q=q===void 0?this.length:q>>>0,T||(T=0);var Ee;if(typeof T=="number")for(Ee=L;Ee<q;++Ee)this[Ee]=T;else{var qe=l.isBuffer(T)?T:l.from(T,Se),dt=qe.length;if(dt===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(Ee=0;Ee<q-L;++Ee)this[Ee+L]=qe[Ee%dt]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function M(X){if(X=X.split("=")[0],X=X.trim().replace(ce,""),X.length<2)return"";for(;X.length%4!==0;)X=X+"=";return X}function z(X,T){T=T||1/0;for(var L,q=X.length,Se=null,Le=[],Ee=0;Ee<q;++Ee){if(L=X.charCodeAt(Ee),L>55295&&L<57344){if(!Se){if(L>56319){(T-=3)>-1&&Le.push(239,191,189);continue}else if(Ee+1===q){(T-=3)>-1&&Le.push(239,191,189);continue}Se=L;continue}if(L<56320){(T-=3)>-1&&Le.push(239,191,189),Se=L;continue}L=(Se-55296<<10|L-56320)+65536}else Se&&(T-=3)>-1&&Le.push(239,191,189);if(Se=null,L<128){if((T-=1)<0)break;Le.push(L)}else if(L<2048){if((T-=2)<0)break;Le.push(L>>6|192,L&63|128)}else if(L<65536){if((T-=3)<0)break;Le.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((T-=4)<0)break;Le.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return Le}function fe(X){for(var T=[],L=0;L<X.length;++L)T.push(X.charCodeAt(L)&255);return T}function he(X,T){for(var L,q,Se,Le=[],Ee=0;Ee<X.length&&!((T-=2)<0);++Ee)L=X.charCodeAt(Ee),q=L>>8,Se=L%256,Le.push(Se),Le.push(q);return Le}function se(X){return e.toByteArray(M(X))}function me(X,T,L,q){for(var Se=0;Se<q&&!(Se+L>=T.length||Se>=X.length);++Se)T[Se+L]=X[Se];return Se}function Be(X,T){return X instanceof T||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===T.name}function H(X){return X!==X}var ee=(function(){for(var X="0123456789abcdef",T=new Array(256),L=0;L<16;++L)for(var q=L*16,Se=0;Se<16;++Se)T[q+Se]=X[L]+X[Se];return T})()})(hp)),hp}var pp={},mp={},gp,bg;function l5(){return bg||(bg=1,gp=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),o=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var a=42;e[t]=a;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var u=Object.getOwnPropertySymbols(e);if(u.length!==1||u[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==a||l.enumerable!==!0)return!1}return!0}),gp}var yp,_g;function K1(){if(_g)return yp;_g=1;var r=l5();return yp=function(){return r()&&!!Symbol.toStringTag},yp}var vp,Sg;function c5(){return Sg||(Sg=1,vp=Object),vp}var wp,kg;function zb(){return kg||(kg=1,wp=Error),wp}var xp,Ag;function $b(){return Ag||(Ag=1,xp=EvalError),xp}var bp,Ng;function Ub(){return Ng||(Ng=1,bp=RangeError),bp}var _p,Eg;function qb(){return Eg||(Eg=1,_p=ReferenceError),_p}var Sp,Tg;function u5(){return Tg||(Tg=1,Sp=SyntaxError),Sp}var kp,Cg;function of(){return Cg||(Cg=1,kp=TypeError),kp}var Ap,Lg;function Wb(){return Lg||(Lg=1,Ap=URIError),Ap}var Np,Ig;function Hb(){return Ig||(Ig=1,Np=Math.abs),Np}var Ep,Rg;function Gb(){return Rg||(Rg=1,Ep=Math.floor),Ep}var Tp,jg;function Kb(){return jg||(jg=1,Tp=Math.max),Tp}var Cp,Pg;function Vb(){return Pg||(Pg=1,Cp=Math.min),Cp}var Lp,Dg;function Xb(){return Dg||(Dg=1,Lp=Math.pow),Lp}var Ip,Og;function Yb(){return Og||(Og=1,Ip=Math.round),Ip}var Rp,Fg;function Jb(){return Fg||(Fg=1,Rp=Number.isNaN||function(e){return e!==e}),Rp}var jp,Bg;function Zb(){if(Bg)return jp;Bg=1;var r=Jb();return jp=function(t){return r(t)||t===0?t:t<0?-1:1},jp}var Pp,Mg;function Qb(){return Mg||(Mg=1,Pp=Object.getOwnPropertyDescriptor),Pp}var Dp,zg;function sf(){if(zg)return Dp;zg=1;var r=Qb();if(r)try{r([],"length")}catch{r=null}return Dp=r,Dp}var Op,$g;function Ah(){if($g)return Op;$g=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return Op=r,Op}var Fp,Ug;function e4(){if(Ug)return Fp;Ug=1;var r=typeof Symbol<"u"&&Symbol,e=l5();return Fp=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Fp}var Bp,qg;function d5(){return qg||(qg=1,Bp=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Bp}var Mp,Wg;function f5(){if(Wg)return Mp;Wg=1;var r=c5();return Mp=r.getPrototypeOf||null,Mp}var zp,Hg;function t4(){if(Hg)return zp;Hg=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,o="[object Function]",a=function(d,f){for(var h=[],S=0;S<d.length;S+=1)h[S]=d[S];for(var b=0;b<f.length;b+=1)h[b+d.length]=f[b];return h},s=function(d,f){for(var h=[],S=f,b=0;S<d.length;S+=1,b+=1)h[b]=d[S];return h},u=function(l,d){for(var f="",h=0;h<l.length;h+=1)f+=l[h],h+1<l.length&&(f+=d);return f};return zp=function(d){var f=this;if(typeof f!="function"||e.apply(f)!==o)throw new TypeError(r+f);for(var h=s(arguments,1),S,b=function(){if(this instanceof S){var w=f.apply(this,a(h,arguments));return Object(w)===w?w:this}return f.apply(d,a(h,arguments))},p=t(0,f.length-h.length),j=[],N=0;N<p;N++)j[N]="$"+N;if(S=Function("binder","return function ("+u(j,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var A=function(){};A.prototype=f.prototype,S.prototype=new A,A.prototype=null}return S},zp}var $p,Gg;function af(){if(Gg)return $p;Gg=1;var r=t4();return $p=Function.prototype.bind||r,$p}var Up,Kg;function V1(){return Kg||(Kg=1,Up=Function.prototype.call),Up}var qp,Vg;function h5(){return Vg||(Vg=1,qp=Function.prototype.apply),qp}var Wp,Xg;function n4(){return Xg||(Xg=1,Wp=typeof Reflect<"u"&&Reflect&&Reflect.apply),Wp}var Hp,Yg;function r4(){if(Yg)return Hp;Yg=1;var r=af(),e=h5(),t=V1(),o=n4();return Hp=o||r.call(t,e),Hp}var Gp,Jg;function i4(){if(Jg)return Gp;Jg=1;var r=af(),e=of(),t=V1(),o=r4();return Gp=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return o(r,t,s)},Gp}var Kp,Zg;function o4(){if(Zg)return Kp;Zg=1;var r=i4(),e=sf(),t;try{t=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var o=!!t&&e&&e(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return Kp=o&&typeof o.get=="function"?r([o.get]):typeof s=="function"?(function(l){return s(l==null?l:a(l))}):!1,Kp}var Vp,Qg;function s4(){if(Qg)return Vp;Qg=1;var r=d5(),e=f5(),t=o4();return Vp=r?function(a){return r(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:t?function(a){return t(a)}:null,Vp}var Xp,ey;function a4(){if(ey)return Xp;ey=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=af();return Xp=t.call(r,e),Xp}var Yp,ty;function X1(){if(ty)return Yp;ty=1;var r,e=c5(),t=zb(),o=$b(),a=Ub(),s=qb(),u=u5(),l=of(),d=Wb(),f=Hb(),h=Gb(),S=Kb(),b=Vb(),p=Xb(),j=Yb(),N=Zb(),A=Function,w=function(fe){try{return A('"use strict"; return ('+fe+").constructor;")()}catch{}},R=sf(),I=Ah(),k=function(){throw new l},G=R?(function(){try{return arguments.callee,k}catch{try{return R(arguments,"callee").get}catch{return k}}})():k,re=e4()(),Q=s4(),ie=f5(),U=d5(),ue=h5(),oe=V1(),B={},te=typeof Uint8Array>"u"||!Q?r:Q(Uint8Array),P={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":re&&Q?Q([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":B,"%AsyncGenerator%":B,"%AsyncGeneratorFunction%":B,"%AsyncIteratorPrototype%":B,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":o,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":A,"%GeneratorFunction%":B,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":re&&Q?Q(Q([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!re||!Q?r:Q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":R,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!re||!Q?r:Q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":re&&Q?Q(""[Symbol.iterator]()):r,"%Symbol%":re?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":G,"%TypedArray%":te,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":oe,"%Function.prototype.apply%":ue,"%Object.defineProperty%":I,"%Object.getPrototypeOf%":ie,"%Math.abs%":f,"%Math.floor%":h,"%Math.max%":S,"%Math.min%":b,"%Math.pow%":p,"%Math.round%":j,"%Math.sign%":N,"%Reflect.getPrototypeOf%":U};if(Q)try{null.error}catch(fe){var be=Q(Q(fe));P["%Error.prototype%"]=be}var Ae=function fe(he){var se;if(he==="%AsyncFunction%")se=w("async function () {}");else if(he==="%GeneratorFunction%")se=w("function* () {}");else if(he==="%AsyncGeneratorFunction%")se=w("async function* () {}");else if(he==="%AsyncGenerator%"){var me=fe("%AsyncGeneratorFunction%");me&&(se=me.prototype)}else if(he==="%AsyncIteratorPrototype%"){var Be=fe("%AsyncGenerator%");Be&&Q&&(se=Q(Be.prototype))}return P[he]=se,se},ge={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xe=af(),ke=a4(),Fe=xe.call(oe,Array.prototype.concat),J=xe.call(ue,Array.prototype.splice),C=xe.call(oe,String.prototype.replace),Z=xe.call(oe,String.prototype.slice),ne=xe.call(oe,RegExp.prototype.exec),ye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ce=/\\(\\)?/g,M=function(he){var se=Z(he,0,1),me=Z(he,-1);if(se==="%"&&me!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(me==="%"&&se!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var Be=[];return C(he,ye,function(H,ee,X,T){Be[Be.length]=X?C(T,ce,"$1"):ee||H}),Be},z=function(he,se){var me=he,Be;if(ke(ge,me)&&(Be=ge[me],me="%"+Be[0]+"%"),ke(P,me)){var H=P[me];if(H===B&&(H=Ae(me)),typeof H>"u"&&!se)throw new l("intrinsic "+he+" exists, but is not available. Please file an issue!");return{alias:Be,name:me,value:H}}throw new u("intrinsic "+he+" does not exist!")};return Yp=function(he,se){if(typeof he!="string"||he.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof se!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ne(/^%?[^%]*%?$/,he)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var me=M(he),Be=me.length>0?me[0]:"",H=z("%"+Be+"%",se),ee=H.name,X=H.value,T=!1,L=H.alias;L&&(Be=L[0],J(me,Fe([0,1],L)));for(var q=1,Se=!0;q<me.length;q+=1){var Le=me[q],Ee=Z(Le,0,1),qe=Z(Le,-1);if((Ee==='"'||Ee==="'"||Ee==="`"||qe==='"'||qe==="'"||qe==="`")&&Ee!==qe)throw new u("property names with quotes must have matching quotes");if((Le==="constructor"||!Se)&&(T=!0),Be+="."+Le,ee="%"+Be+"%",ke(P,ee))X=P[ee];else if(X!=null){if(!(Le in X)){if(!se)throw new l("base intrinsic for "+he+" exists, but the property is not available.");return}if(R&&q+1>=me.length){var dt=R(X,Le);Se=!!dt,Se&&"get"in dt&&!("originalValue"in dt.get)?X=dt.get:X=X[Le]}else Se=ke(X,Le),X=X[Le];Se&&!T&&(P[ee]=X)}}return X},Yp}var Jp={exports:{}},Zp,ny;function l4(){if(ny)return Zp;ny=1;var r=Ah(),e=u5(),t=of(),o=sf();return Zp=function(s,u,l){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var d=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,S=arguments.length>6?arguments[6]:!1,b=!!o&&o(s,u);if(r)r(s,u,{configurable:h===null&&b?b.configurable:!h,enumerable:d===null&&b?b.enumerable:!d,value:l,writable:f===null&&b?b.writable:!f});else if(S||!d&&!f&&!h)s[u]=l;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Zp}var Qp,ry;function c4(){if(ry)return Qp;ry=1;var r=Ah(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Qp=e,Qp}var em,iy;function u4(){if(iy)return em;iy=1;var r=X1(),e=l4(),t=c4()(),o=sf(),a=of(),s=r("%Math.floor%");return em=function(l,d){if(typeof l!="function")throw new a("`fn` is not a function");if(typeof d!="number"||d<0||d>4294967295||s(d)!==d)throw new a("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],h=!0,S=!0;if("length"in l&&o){var b=o(l,"length");b&&!b.configurable&&(h=!1),b&&!b.writable&&(S=!1)}return(h||S||!f)&&(t?e(l,"length",d,!0,!0):e(l,"length",d)),l},em}var oy;function p5(){return oy||(oy=1,(function(r){var e=af(),t=X1(),o=u4(),a=of(),s=t("%Function.prototype.apply%"),u=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(u,s),d=Ah(),f=t("%Math.max%");r.exports=function(b){if(typeof b!="function")throw new a("a function is required");var p=l(e,u,arguments);return o(p,1+f(0,b.length-(arguments.length-1)),!0)};var h=function(){return l(e,s,arguments)};d?d(r.exports,"apply",{value:h}):r.exports.apply=h})(Jp)),Jp.exports}var tm,sy;function m5(){if(sy)return tm;sy=1;var r=X1(),e=p5(),t=e(r("String.prototype.indexOf"));return tm=function(a,s){var u=r(a,!!s);return typeof u=="function"&&t(a,".prototype.")>-1?e(u):u},tm}var nm,ay;function d4(){if(ay)return nm;ay=1;var r=K1()(),e=m5(),t=e("Object.prototype.toString"),o=function(l){return r&&l&&typeof l=="object"&&Symbol.toStringTag in l?!1:t(l)==="[object Arguments]"},a=function(l){return o(l)?!0:l!==null&&typeof l=="object"&&typeof l.length=="number"&&l.length>=0&&t(l)!=="[object Array]"&&t(l.callee)==="[object Function]"},s=(function(){return o(arguments)})();return o.isLegacyArguments=a,nm=s?o:a,nm}var rm,ly;function f4(){if(ly)return rm;ly=1;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,o=K1()(),a=Object.getPrototypeOf,s=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch{}},u;return rm=function(d){if(typeof d!="function")return!1;if(t.test(e.call(d)))return!0;if(!o){var f=r.call(d);return f==="[object GeneratorFunction]"}if(!a)return!1;if(typeof u>"u"){var h=s();u=h?a(h):!1}return a(d)===u},rm}var im,cy;function h4(){if(cy)return im;cy=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,o;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw o}}),o={},e(function(){throw 42},null,t)}catch(R){R!==o&&(e=null)}else e=null;var a=/^\s*class\b/,s=function(I){try{var k=r.call(I);return a.test(k)}catch{return!1}},u=function(I){try{return s(I)?!1:(r.call(I),!0)}catch{return!1}},l=Object.prototype.toString,d="[object Object]",f="[object Function]",h="[object GeneratorFunction]",S="[object HTMLAllCollection]",b="[object HTML document.all class]",p="[object HTMLCollection]",j=typeof Symbol=="function"&&!!Symbol.toStringTag,N=!(0 in[,]),A=function(){return!1};if(typeof document=="object"){var w=document.all;l.call(w)===l.call(document.all)&&(A=function(I){if((N||!I)&&(typeof I>"u"||typeof I=="object"))try{var k=l.call(I);return(k===S||k===b||k===p||k===d)&&I("")==null}catch{}return!1})}return im=e?function(I){if(A(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;try{e(I,null,t)}catch(k){if(k!==o)return!1}return!s(I)&&u(I)}:function(I){if(A(I))return!0;if(!I||typeof I!="function"&&typeof I!="object")return!1;if(j)return u(I);if(s(I))return!1;var k=l.call(I);return k!==f&&k!==h&&!/^\[object HTML/.test(k)?!1:u(I)},im}var om,uy;function p4(){if(uy)return om;uy=1;var r=h4(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,o=function(d,f,h){for(var S=0,b=d.length;S<b;S++)t.call(d,S)&&(h==null?f(d[S],S,d):f.call(h,d[S],S,d))},a=function(d,f,h){for(var S=0,b=d.length;S<b;S++)h==null?f(d.charAt(S),S,d):f.call(h,d.charAt(S),S,d)},s=function(d,f,h){for(var S in d)t.call(d,S)&&(h==null?f(d[S],S,d):f.call(h,d[S],S,d))},u=function(d,f,h){if(!r(f))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=h),e.call(d)==="[object Array]"?o(d,f,S):typeof d=="string"?a(d,f,S):s(d,f,S)};return om=u,om}var sm,dy;function m4(){return dy||(dy=1,sm=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),sm}var am,fy;function g4(){if(fy)return am;fy=1;var r=m4(),e=typeof globalThis>"u"?ic:globalThis;return am=function(){for(var o=[],a=0;a<r.length;a++)typeof e[r[a]]=="function"&&(o[o.length]=r[a]);return o},am}var lm,hy;function g5(){if(hy)return lm;hy=1;var r=p4(),e=g4(),t=p5(),o=m5(),a=sf(),s=o("Object.prototype.toString"),u=K1()(),l=typeof globalThis>"u"?ic:globalThis,d=e(),f=o("String.prototype.slice"),h=Object.getPrototypeOf,S=o("Array.prototype.indexOf",!0)||function(A,w){for(var R=0;R<A.length;R+=1)if(A[R]===w)return R;return-1},b={__proto__:null};u&&a&&h?r(d,function(N){var A=new l[N];if(Symbol.toStringTag in A){var w=h(A),R=a(w,Symbol.toStringTag);if(!R){var I=h(w);R=a(I,Symbol.toStringTag)}b["$"+N]=t(R.get)}}):r(d,function(N){var A=new l[N],w=A.slice||A.set;w&&(b["$"+N]=t(w))});var p=function(A){var w=!1;return r(b,function(R,I){if(!w)try{"$"+R(A)===I&&(w=f(I,1))}catch{}}),w},j=function(A){var w=!1;return r(b,function(R,I){if(!w)try{R(A),w=f(I,1)}catch{}}),w};return lm=function(A){if(!A||typeof A!="object")return!1;if(!u){var w=f(s(A),8,-1);return S(d,w)>-1?w:w!=="Object"?!1:j(A)}return a?p(A):null},lm}var cm,py;function y4(){if(py)return cm;py=1;var r=g5();return cm=function(t){return!!r(t)},cm}var my;function v4(){return my||(my=1,(function(r){var e=d4(),t=f4(),o=g5(),a=y4();function s(q){return q.call.bind(q)}var u=typeof BigInt<"u",l=typeof Symbol<"u",d=s(Object.prototype.toString),f=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),S=s(Boolean.prototype.valueOf);if(u)var b=s(BigInt.prototype.valueOf);if(l)var p=s(Symbol.prototype.valueOf);function j(q,Se){if(typeof q!="object")return!1;try{return Se(q),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=a;function N(q){return typeof Promise<"u"&&q instanceof Promise||q!==null&&typeof q=="object"&&typeof q.then=="function"&&typeof q.catch=="function"}r.isPromise=N;function A(q){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(q):a(q)||Z(q)}r.isArrayBufferView=A;function w(q){return o(q)==="Uint8Array"}r.isUint8Array=w;function R(q){return o(q)==="Uint8ClampedArray"}r.isUint8ClampedArray=R;function I(q){return o(q)==="Uint16Array"}r.isUint16Array=I;function k(q){return o(q)==="Uint32Array"}r.isUint32Array=k;function G(q){return o(q)==="Int8Array"}r.isInt8Array=G;function re(q){return o(q)==="Int16Array"}r.isInt16Array=re;function Q(q){return o(q)==="Int32Array"}r.isInt32Array=Q;function ie(q){return o(q)==="Float32Array"}r.isFloat32Array=ie;function U(q){return o(q)==="Float64Array"}r.isFloat64Array=U;function ue(q){return o(q)==="BigInt64Array"}r.isBigInt64Array=ue;function oe(q){return o(q)==="BigUint64Array"}r.isBigUint64Array=oe;function B(q){return d(q)==="[object Map]"}B.working=typeof Map<"u"&&B(new Map);function te(q){return typeof Map>"u"?!1:B.working?B(q):q instanceof Map}r.isMap=te;function P(q){return d(q)==="[object Set]"}P.working=typeof Set<"u"&&P(new Set);function be(q){return typeof Set>"u"?!1:P.working?P(q):q instanceof Set}r.isSet=be;function Ae(q){return d(q)==="[object WeakMap]"}Ae.working=typeof WeakMap<"u"&&Ae(new WeakMap);function ge(q){return typeof WeakMap>"u"?!1:Ae.working?Ae(q):q instanceof WeakMap}r.isWeakMap=ge;function xe(q){return d(q)==="[object WeakSet]"}xe.working=typeof WeakSet<"u"&&xe(new WeakSet);function ke(q){return xe(q)}r.isWeakSet=ke;function Fe(q){return d(q)==="[object ArrayBuffer]"}Fe.working=typeof ArrayBuffer<"u"&&Fe(new ArrayBuffer);function J(q){return typeof ArrayBuffer>"u"?!1:Fe.working?Fe(q):q instanceof ArrayBuffer}r.isArrayBuffer=J;function C(q){return d(q)==="[object DataView]"}C.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&C(new DataView(new ArrayBuffer(1),0,1));function Z(q){return typeof DataView>"u"?!1:C.working?C(q):q instanceof DataView}r.isDataView=Z;var ne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ye(q){return d(q)==="[object SharedArrayBuffer]"}function ce(q){return typeof ne>"u"?!1:(typeof ye.working>"u"&&(ye.working=ye(new ne)),ye.working?ye(q):q instanceof ne)}r.isSharedArrayBuffer=ce;function M(q){return d(q)==="[object AsyncFunction]"}r.isAsyncFunction=M;function z(q){return d(q)==="[object Map Iterator]"}r.isMapIterator=z;function fe(q){return d(q)==="[object Set Iterator]"}r.isSetIterator=fe;function he(q){return d(q)==="[object Generator]"}r.isGeneratorObject=he;function se(q){return d(q)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=se;function me(q){return j(q,f)}r.isNumberObject=me;function Be(q){return j(q,h)}r.isStringObject=Be;function H(q){return j(q,S)}r.isBooleanObject=H;function ee(q){return u&&j(q,b)}r.isBigIntObject=ee;function X(q){return l&&j(q,p)}r.isSymbolObject=X;function T(q){return me(q)||Be(q)||H(q)||ee(q)||X(q)}r.isBoxedPrimitive=T;function L(q){return typeof Uint8Array<"u"&&(J(q)||ce(q))}r.isAnyArrayBuffer=L,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(q){Object.defineProperty(r,q,{enumerable:!1,value:function(){throw new Error(q+" is not supported in userland")}})})})(mp)),mp}var um,gy;function w4(){return gy||(gy=1,um=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),um}var yy;function y5(){return yy||(yy=1,(function(r){var e=Object.getOwnPropertyDescriptors||function(Z){for(var ne=Object.keys(Z),ye={},ce=0;ce<ne.length;ce++)ye[ne[ce]]=Object.getOwnPropertyDescriptor(Z,ne[ce]);return ye},t=/%[sdj%]/g;r.format=function(C){if(!G(C)){for(var Z=[],ne=0;ne<arguments.length;ne++)Z.push(u(arguments[ne]));return Z.join(" ")}for(var ne=1,ye=arguments,ce=ye.length,M=String(C).replace(t,function(fe){if(fe==="%%")return"%";if(ne>=ce)return fe;switch(fe){case"%s":return String(ye[ne++]);case"%d":return Number(ye[ne++]);case"%j":try{return JSON.stringify(ye[ne++])}catch{return"[Circular]"}default:return fe}}),z=ye[ne];ne<ce;z=ye[++ne])R(z)||!U(z)?M+=" "+z:M+=" "+u(z);return M},r.deprecate=function(C,Z){if(typeof ai<"u"&&ai.noDeprecation===!0)return C;if(typeof ai>"u")return function(){return r.deprecate(C,Z).apply(this,arguments)};var ne=!1;function ye(){if(!ne){if(ai.throwDeprecation)throw new Error(Z);ai.traceDeprecation?console.trace(Z):console.error(Z),ne=!0}return C.apply(this,arguments)}return ye};var o={},a=/^$/;if(ai.env.NODE_DEBUG){var s=ai.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}r.debuglog=function(C){if(C=C.toUpperCase(),!o[C])if(a.test(C)){var Z=ai.pid;o[C]=function(){var ne=r.format.apply(r,arguments);console.error("%s %d: %s",C,Z,ne)}}else o[C]=function(){};return o[C]};function u(C,Z){var ne={seen:[],stylize:d};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),w(Z)?ne.showHidden=Z:Z&&r._extend(ne,Z),Q(ne.showHidden)&&(ne.showHidden=!1),Q(ne.depth)&&(ne.depth=2),Q(ne.colors)&&(ne.colors=!1),Q(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=l),h(ne,C,ne.depth)}r.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(C,Z){var ne=u.styles[Z];return ne?"\x1B["+u.colors[ne][0]+"m"+C+"\x1B["+u.colors[ne][1]+"m":C}function d(C,Z){return C}function f(C){var Z={};return C.forEach(function(ne,ye){Z[ne]=!0}),Z}function h(C,Z,ne){if(C.customInspect&&Z&&B(Z.inspect)&&Z.inspect!==r.inspect&&!(Z.constructor&&Z.constructor.prototype===Z)){var ye=Z.inspect(ne,C);return G(ye)||(ye=h(C,ye,ne)),ye}var ce=S(C,Z);if(ce)return ce;var M=Object.keys(Z),z=f(M);if(C.showHidden&&(M=Object.getOwnPropertyNames(Z)),oe(Z)&&(M.indexOf("message")>=0||M.indexOf("description")>=0))return b(Z);if(M.length===0){if(B(Z)){var fe=Z.name?": "+Z.name:"";return C.stylize("[Function"+fe+"]","special")}if(ie(Z))return C.stylize(RegExp.prototype.toString.call(Z),"regexp");if(ue(Z))return C.stylize(Date.prototype.toString.call(Z),"date");if(oe(Z))return b(Z)}var he="",se=!1,me=["{","}"];if(A(Z)&&(se=!0,me=["[","]"]),B(Z)){var Be=Z.name?": "+Z.name:"";he=" [Function"+Be+"]"}if(ie(Z)&&(he=" "+RegExp.prototype.toString.call(Z)),ue(Z)&&(he=" "+Date.prototype.toUTCString.call(Z)),oe(Z)&&(he=" "+b(Z)),M.length===0&&(!se||Z.length==0))return me[0]+he+me[1];if(ne<0)return ie(Z)?C.stylize(RegExp.prototype.toString.call(Z),"regexp"):C.stylize("[Object]","special");C.seen.push(Z);var H;return se?H=p(C,Z,ne,z,M):H=M.map(function(ee){return j(C,Z,ne,z,ee,se)}),C.seen.pop(),N(H,he,me)}function S(C,Z){if(Q(Z))return C.stylize("undefined","undefined");if(G(Z)){var ne="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return C.stylize(ne,"string")}if(k(Z))return C.stylize(""+Z,"number");if(w(Z))return C.stylize(""+Z,"boolean");if(R(Z))return C.stylize("null","null")}function b(C){return"["+Error.prototype.toString.call(C)+"]"}function p(C,Z,ne,ye,ce){for(var M=[],z=0,fe=Z.length;z<fe;++z)xe(Z,String(z))?M.push(j(C,Z,ne,ye,String(z),!0)):M.push("");return ce.forEach(function(he){he.match(/^\d+$/)||M.push(j(C,Z,ne,ye,he,!0))}),M}function j(C,Z,ne,ye,ce,M){var z,fe,he;if(he=Object.getOwnPropertyDescriptor(Z,ce)||{value:Z[ce]},he.get?he.set?fe=C.stylize("[Getter/Setter]","special"):fe=C.stylize("[Getter]","special"):he.set&&(fe=C.stylize("[Setter]","special")),xe(ye,ce)||(z="["+ce+"]"),fe||(C.seen.indexOf(he.value)<0?(R(ne)?fe=h(C,he.value,null):fe=h(C,he.value,ne-1),fe.indexOf(`
`)>-1&&(M?fe=fe.split(`
`).map(function(se){return"  "+se}).join(`
`).slice(2):fe=`
`+fe.split(`
`).map(function(se){return"   "+se}).join(`
`))):fe=C.stylize("[Circular]","special")),Q(z)){if(M&&ce.match(/^\d+$/))return fe;z=JSON.stringify(""+ce),z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=C.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=C.stylize(z,"string"))}return z+": "+fe}function N(C,Z,ne){var ye=C.reduce(function(ce,M){return M.indexOf(`
`)>=0,ce+M.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ye>60?ne[0]+(Z===""?"":Z+`
 `)+" "+C.join(`,
  `)+" "+ne[1]:ne[0]+Z+" "+C.join(", ")+" "+ne[1]}r.types=v4();function A(C){return Array.isArray(C)}r.isArray=A;function w(C){return typeof C=="boolean"}r.isBoolean=w;function R(C){return C===null}r.isNull=R;function I(C){return C==null}r.isNullOrUndefined=I;function k(C){return typeof C=="number"}r.isNumber=k;function G(C){return typeof C=="string"}r.isString=G;function re(C){return typeof C=="symbol"}r.isSymbol=re;function Q(C){return C===void 0}r.isUndefined=Q;function ie(C){return U(C)&&P(C)==="[object RegExp]"}r.isRegExp=ie,r.types.isRegExp=ie;function U(C){return typeof C=="object"&&C!==null}r.isObject=U;function ue(C){return U(C)&&P(C)==="[object Date]"}r.isDate=ue,r.types.isDate=ue;function oe(C){return U(C)&&(P(C)==="[object Error]"||C instanceof Error)}r.isError=oe,r.types.isNativeError=oe;function B(C){return typeof C=="function"}r.isFunction=B;function te(C){return C===null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||typeof C=="symbol"||typeof C>"u"}r.isPrimitive=te,r.isBuffer=w4();function P(C){return Object.prototype.toString.call(C)}function be(C){return C<10?"0"+C.toString(10):C.toString(10)}var Ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ge(){var C=new Date,Z=[be(C.getHours()),be(C.getMinutes()),be(C.getSeconds())].join(":");return[C.getDate(),Ae[C.getMonth()],Z].join(" ")}r.log=function(){console.log("%s - %s",ge(),r.format.apply(r,arguments))},r.inherits=du(),r._extend=function(C,Z){if(!Z||!U(Z))return C;for(var ne=Object.keys(Z),ye=ne.length;ye--;)C[ne[ye]]=Z[ne[ye]];return C};function xe(C,Z){return Object.prototype.hasOwnProperty.call(C,Z)}var ke=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(Z){if(typeof Z!="function")throw new TypeError('The "original" argument must be of type Function');if(ke&&Z[ke]){var ne=Z[ke];if(typeof ne!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ne,ke,{value:ne,enumerable:!1,writable:!1,configurable:!0}),ne}function ne(){for(var ye,ce,M=new Promise(function(he,se){ye=he,ce=se}),z=[],fe=0;fe<arguments.length;fe++)z.push(arguments[fe]);z.push(function(he,se){he?ce(he):ye(se)});try{Z.apply(this,z)}catch(he){ce(he)}return M}return Object.setPrototypeOf(ne,Object.getPrototypeOf(Z)),ke&&Object.defineProperty(ne,ke,{value:ne,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ne,e(Z))},r.promisify.custom=ke;function Fe(C,Z){if(!C){var ne=new Error("Promise was rejected with a falsy value");ne.reason=C,C=ne}return Z(C)}function J(C){if(typeof C!="function")throw new TypeError('The "original" argument must be of type Function');function Z(){for(var ne=[],ye=0;ye<arguments.length;ye++)ne.push(arguments[ye]);var ce=ne.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var M=this,z=function(){return ce.apply(M,arguments)};C.apply(this,ne).then(function(fe){ai.nextTick(z.bind(null,null,fe))},function(fe){ai.nextTick(Fe.bind(null,fe,z))})}return Object.setPrototypeOf(Z,Object.getPrototypeOf(C)),Object.defineProperties(Z,e(C)),Z}r.callbackify=J})(pp)),pp}var dm,vy;function x4(){if(vy)return dm;vy=1;function r(b,p){var j=Object.keys(b);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(b);p&&(N=N.filter(function(A){return Object.getOwnPropertyDescriptor(b,A).enumerable})),j.push.apply(j,N)}return j}function e(b){for(var p=1;p<arguments.length;p++){var j=arguments[p]!=null?arguments[p]:{};p%2?r(Object(j),!0).forEach(function(N){t(b,N,j[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(j)):r(Object(j)).forEach(function(N){Object.defineProperty(b,N,Object.getOwnPropertyDescriptor(j,N))})}return b}function t(b,p,j){return p in b?Object.defineProperty(b,p,{value:j,enumerable:!0,configurable:!0,writable:!0}):b[p]=j,b}function o(b,p){if(!(b instanceof p))throw new TypeError("Cannot call a class as a function")}function a(b,p){for(var j=0;j<p.length;j++){var N=p[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}function s(b,p,j){return p&&a(b.prototype,p),b}var u=kh(),l=u.Buffer,d=y5(),f=d.inspect,h=f&&f.custom||"inspect";function S(b,p,j){l.prototype.copy.call(b,p,j)}return dm=(function(){function b(){o(this,b),this.head=null,this.tail=null,this.length=0}return s(b,[{key:"push",value:function(j){var N={data:j,next:null};this.length>0?this.tail.next=N:this.head=N,this.tail=N,++this.length}},{key:"unshift",value:function(j){var N={data:j,next:this.head};this.length===0&&(this.tail=N),this.head=N,++this.length}},{key:"shift",value:function(){if(this.length!==0){var j=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,j}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(j){if(this.length===0)return"";for(var N=this.head,A=""+N.data;N=N.next;)A+=j+N.data;return A}},{key:"concat",value:function(j){if(this.length===0)return l.alloc(0);for(var N=l.allocUnsafe(j>>>0),A=this.head,w=0;A;)S(A.data,N,w),w+=A.data.length,A=A.next;return N}},{key:"consume",value:function(j,N){var A;return j<this.head.data.length?(A=this.head.data.slice(0,j),this.head.data=this.head.data.slice(j)):j===this.head.data.length?A=this.shift():A=N?this._getString(j):this._getBuffer(j),A}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(j){var N=this.head,A=1,w=N.data;for(j-=w.length;N=N.next;){var R=N.data,I=j>R.length?R.length:j;if(I===R.length?w+=R:w+=R.slice(0,j),j-=I,j===0){I===R.length?(++A,N.next?this.head=N.next:this.head=this.tail=null):(this.head=N,N.data=R.slice(I));break}++A}return this.length-=A,w}},{key:"_getBuffer",value:function(j){var N=l.allocUnsafe(j),A=this.head,w=1;for(A.data.copy(N),j-=A.data.length;A=A.next;){var R=A.data,I=j>R.length?R.length:j;if(R.copy(N,N.length-j,0,I),j-=I,j===0){I===R.length?(++w,A.next?this.head=A.next:this.head=this.tail=null):(this.head=A,A.data=R.slice(I));break}++w}return this.length-=w,N}},{key:h,value:function(j,N){return f(this,e({},N,{depth:0,customInspect:!1}))}}]),b})(),dm}var fm,wy;function v5(){if(wy)return fm;wy=1;function r(u,l){var d=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(l?l(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ai.nextTick(a,this,u)):ai.nextTick(a,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(S){!l&&S?d._writableState?d._writableState.errorEmitted?ai.nextTick(t,d):(d._writableState.errorEmitted=!0,ai.nextTick(e,d,S)):ai.nextTick(e,d,S):l?(ai.nextTick(t,d),l(S)):ai.nextTick(t,d)}),this)}function e(u,l){a(u,l),t(u)}function t(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(u,l){u.emit("error",l)}function s(u,l){var d=u._readableState,f=u._writableState;d&&d.autoDestroy||f&&f.autoDestroy?u.destroy(l):u.emit("error",l)}return fm={destroy:r,undestroy:o,errorOrDestroy:s},fm}var hm={},xy;function kd(){if(xy)return hm;xy=1;function r(l,d){l.prototype=Object.create(d.prototype),l.prototype.constructor=l,l.__proto__=d}var e={};function t(l,d,f){f||(f=Error);function h(b,p,j){return typeof d=="string"?d:d(b,p,j)}var S=(function(b){r(p,b);function p(j,N,A){return b.call(this,h(j,N,A))||this}return p})(f);S.prototype.name=f.name,S.prototype.code=l,e[l]=S}function o(l,d){if(Array.isArray(l)){var f=l.length;return l=l.map(function(h){return String(h)}),f>2?"one of ".concat(d," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:f===2?"one of ".concat(d," ").concat(l[0]," or ").concat(l[1]):"of ".concat(d," ").concat(l[0])}else return"of ".concat(d," ").concat(String(l))}function a(l,d,f){return l.substr(0,d.length)===d}function s(l,d,f){return(f===void 0||f>l.length)&&(f=l.length),l.substring(f-d.length,f)===d}function u(l,d,f){return typeof f!="number"&&(f=0),f+d.length>l.length?!1:l.indexOf(d,f)!==-1}return t("ERR_INVALID_OPT_VALUE",function(l,d){return'The value "'+d+'" is invalid for option "'+l+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(l,d,f){var h;typeof d=="string"&&a(d,"not ")?(h="must not be",d=d.replace(/^not /,"")):h="must be";var S;if(s(l," argument"))S="The ".concat(l," ").concat(h," ").concat(o(d,"type"));else{var b=u(l,".")?"property":"argument";S='The "'.concat(l,'" ').concat(b," ").concat(h," ").concat(o(d,"type"))}return S+=". Received type ".concat(typeof f),S},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),hm.codes=e,hm}var pm,by;function w5(){if(by)return pm;by=1;var r=kd().codes.ERR_INVALID_OPT_VALUE;function e(o,a,s){return o.highWaterMark!=null?o.highWaterMark:a?o[s]:null}function t(o,a,s,u){var l=e(a,u,s);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var d=u?s:"highWaterMark";throw new r(d,l)}return Math.floor(l)}return o.objectMode?16:16*1024}return pm={getHighWaterMark:t},pm}var mm,_y;function b4(){if(_y)return mm;_y=1,mm=r;function r(t,o){if(e("noDeprecation"))return t;var a=!1;function s(){if(!a){if(e("throwDeprecation"))throw new Error(o);e("traceDeprecation")?console.trace(o):console.warn(o),a=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!ic.localStorage)return!1}catch{return!1}var o=ic.localStorage[t];return o==null?!1:String(o).toLowerCase()==="true"}return mm}var gm,Sy;function x5(){if(Sy)return gm;Sy=1,gm=ie;function r(ce){var M=this;this.next=null,this.entry=null,this.finish=function(){ye(M,ce)}}var e;ie.WritableState=re;var t={deprecate:b4()},o=a5(),a=kh().Buffer,s=ic.Uint8Array||function(){};function u(ce){return a.from(ce)}function l(ce){return a.isBuffer(ce)||ce instanceof s}var d=v5(),f=w5(),h=f.getHighWaterMark,S=kd().codes,b=S.ERR_INVALID_ARG_TYPE,p=S.ERR_METHOD_NOT_IMPLEMENTED,j=S.ERR_MULTIPLE_CALLBACK,N=S.ERR_STREAM_CANNOT_PIPE,A=S.ERR_STREAM_DESTROYED,w=S.ERR_STREAM_NULL_VALUES,R=S.ERR_STREAM_WRITE_AFTER_END,I=S.ERR_UNKNOWN_ENCODING,k=d.errorOrDestroy;du()(ie,o);function G(){}function re(ce,M,z){e=e||wd(),ce=ce||{},typeof z!="boolean"&&(z=M instanceof e),this.objectMode=!!ce.objectMode,z&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=h(this,ce,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var fe=ce.decodeStrings===!1;this.decodeStrings=!fe,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(he){Ae(M,he)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}re.prototype.getBuffer=function(){for(var M=this.bufferedRequest,z=[];M;)z.push(M),M=M.next;return z},(function(){try{Object.defineProperty(re.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Q=Function.prototype[Symbol.hasInstance],Object.defineProperty(ie,Symbol.hasInstance,{value:function(M){return Q.call(this,M)?!0:this!==ie?!1:M&&M._writableState instanceof re}})):Q=function(M){return M instanceof this};function ie(ce){e=e||wd();var M=this instanceof e;if(!M&&!Q.call(ie,this))return new ie(ce);this._writableState=new re(ce,this,M),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),o.call(this)}ie.prototype.pipe=function(){k(this,new N)};function U(ce,M){var z=new R;k(ce,z),ai.nextTick(M,z)}function ue(ce,M,z,fe){var he;return z===null?he=new w:typeof z!="string"&&!M.objectMode&&(he=new b("chunk",["string","Buffer"],z)),he?(k(ce,he),ai.nextTick(fe,he),!1):!0}ie.prototype.write=function(ce,M,z){var fe=this._writableState,he=!1,se=!fe.objectMode&&l(ce);return se&&!a.isBuffer(ce)&&(ce=u(ce)),typeof M=="function"&&(z=M,M=null),se?M="buffer":M||(M=fe.defaultEncoding),typeof z!="function"&&(z=G),fe.ending?U(this,z):(se||ue(this,fe,ce,z))&&(fe.pendingcb++,he=B(this,fe,se,ce,M,z)),he},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&ke(this,ce))},ie.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new I(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function oe(ce,M,z){return!ce.objectMode&&ce.decodeStrings!==!1&&typeof M=="string"&&(M=a.from(M,z)),M}Object.defineProperty(ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function B(ce,M,z,fe,he,se){if(!z){var me=oe(M,fe,he);fe!==me&&(z=!0,he="buffer",fe=me)}var Be=M.objectMode?1:fe.length;M.length+=Be;var H=M.length<M.highWaterMark;if(H||(M.needDrain=!0),M.writing||M.corked){var ee=M.lastBufferedRequest;M.lastBufferedRequest={chunk:fe,encoding:he,isBuf:z,callback:se,next:null},ee?ee.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else te(ce,M,!1,Be,fe,he,se);return H}function te(ce,M,z,fe,he,se,me){M.writelen=fe,M.writecb=me,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new A("write")):z?ce._writev(he,M.onwrite):ce._write(he,se,M.onwrite),M.sync=!1}function P(ce,M,z,fe,he){--M.pendingcb,z?(ai.nextTick(he,fe),ai.nextTick(Z,ce,M),ce._writableState.errorEmitted=!0,k(ce,fe)):(he(fe),ce._writableState.errorEmitted=!0,k(ce,fe),Z(ce,M))}function be(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}function Ae(ce,M){var z=ce._writableState,fe=z.sync,he=z.writecb;if(typeof he!="function")throw new j;if(be(z),M)P(ce,z,fe,M,he);else{var se=Fe(z)||ce.destroyed;!se&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&ke(ce,z),fe?ai.nextTick(ge,ce,z,se,he):ge(ce,z,se,he)}}function ge(ce,M,z,fe){z||xe(ce,M),M.pendingcb--,fe(),Z(ce,M)}function xe(ce,M){M.length===0&&M.needDrain&&(M.needDrain=!1,ce.emit("drain"))}function ke(ce,M){M.bufferProcessing=!0;var z=M.bufferedRequest;if(ce._writev&&z&&z.next){var fe=M.bufferedRequestCount,he=new Array(fe),se=M.corkedRequestsFree;se.entry=z;for(var me=0,Be=!0;z;)he[me]=z,z.isBuf||(Be=!1),z=z.next,me+=1;he.allBuffers=Be,te(ce,M,!0,M.length,he,"",se.finish),M.pendingcb++,M.lastBufferedRequest=null,se.next?(M.corkedRequestsFree=se.next,se.next=null):M.corkedRequestsFree=new r(M),M.bufferedRequestCount=0}else{for(;z;){var H=z.chunk,ee=z.encoding,X=z.callback,T=M.objectMode?1:H.length;if(te(ce,M,!1,T,H,ee,X),z=z.next,M.bufferedRequestCount--,M.writing)break}z===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=z,M.bufferProcessing=!1}ie.prototype._write=function(ce,M,z){z(new p("_write()"))},ie.prototype._writev=null,ie.prototype.end=function(ce,M,z){var fe=this._writableState;return typeof ce=="function"?(z=ce,ce=null,M=null):typeof M=="function"&&(z=M,M=null),ce!=null&&this.write(ce,M),fe.corked&&(fe.corked=1,this.uncork()),fe.ending||ne(this,fe,z),this},Object.defineProperty(ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Fe(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function J(ce,M){ce._final(function(z){M.pendingcb--,z&&k(ce,z),M.prefinished=!0,ce.emit("prefinish"),Z(ce,M)})}function C(ce,M){!M.prefinished&&!M.finalCalled&&(typeof ce._final=="function"&&!M.destroyed?(M.pendingcb++,M.finalCalled=!0,ai.nextTick(J,ce,M)):(M.prefinished=!0,ce.emit("prefinish")))}function Z(ce,M){var z=Fe(M);if(z&&(C(ce,M),M.pendingcb===0&&(M.finished=!0,ce.emit("finish"),M.autoDestroy))){var fe=ce._readableState;(!fe||fe.autoDestroy&&fe.endEmitted)&&ce.destroy()}return z}function ne(ce,M,z){M.ending=!0,Z(ce,M),z&&(M.finished?ai.nextTick(z):ce.once("finish",z)),M.ended=!0,ce.writable=!1}function ye(ce,M,z){var fe=ce.entry;for(ce.entry=null;fe;){var he=fe.callback;M.pendingcb--,he(z),fe=fe.next}M.corkedRequestsFree.next=ce}return Object.defineProperty(ie.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),ie.prototype.destroy=d.destroy,ie.prototype._undestroy=d.undestroy,ie.prototype._destroy=function(ce,M){M(ce)},gm}var ym,ky;function wd(){if(ky)return ym;ky=1;var r=Object.keys||function(f){var h=[];for(var S in f)h.push(S);return h};ym=u;var e=b5(),t=x5();du()(u,e);for(var o=r(t.prototype),a=0;a<o.length;a++){var s=o[a];u.prototype[s]||(u.prototype[s]=t.prototype[s])}function u(f){if(!(this instanceof u))return new u(f);e.call(this,f),t.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||ai.nextTick(d,this)}function d(f){f.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),ym}var vm={},Ff={exports:{}},Ay;function _4(){return Ay||(Ay=1,(function(r,e){var t=kh(),o=t.Buffer;function a(u,l){for(var d in u)l[d]=u[d]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=t:(a(t,e),e.Buffer=s);function s(u,l,d){return o(u,l,d)}a(o,s),s.from=function(u,l,d){if(typeof u=="number")throw new TypeError("Argument must not be a number");return o(u,l,d)},s.alloc=function(u,l,d){if(typeof u!="number")throw new TypeError("Argument must be a number");var f=o(u);return l!==void 0?typeof d=="string"?f.fill(l,d):f.fill(l):f.fill(0),f},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return o(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(u)}})(Ff,Ff.exports)),Ff.exports}var Ny;function E1(){if(Ny)return vm;Ny=1;var r=_4().Buffer,e=r.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(w){if(!w)return"utf8";for(var R;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(R)return;w=(""+w).toLowerCase(),R=!0}}function o(w){var R=t(w);if(typeof R!="string"&&(r.isEncoding===e||!e(w)))throw new Error("Unknown encoding: "+w);return R||w}vm.StringDecoder=a;function a(w){this.encoding=o(w);var R;switch(this.encoding){case"utf16le":this.text=S,this.end=b,R=4;break;case"utf8":this.fillLast=d,R=4;break;case"base64":this.text=p,this.end=j,R=3;break;default:this.write=N,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(R)}a.prototype.write=function(w){if(w.length===0)return"";var R,I;if(this.lastNeed){if(R=this.fillLast(w),R===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<w.length?R?R+this.text(w,I):this.text(w,I):R||""},a.prototype.end=h,a.prototype.text=f,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function s(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function u(w,R,I){var k=R.length-1;if(k<I)return 0;var G=s(R[k]);return G>=0?(G>0&&(w.lastNeed=G-1),G):--k<I||G===-2?0:(G=s(R[k]),G>=0?(G>0&&(w.lastNeed=G-2),G):--k<I||G===-2?0:(G=s(R[k]),G>=0?(G>0&&(G===2?G=0:w.lastNeed=G-3),G):0))}function l(w,R,I){if((R[0]&192)!==128)return w.lastNeed=0,"";if(w.lastNeed>1&&R.length>1){if((R[1]&192)!==128)return w.lastNeed=1,"";if(w.lastNeed>2&&R.length>2&&(R[2]&192)!==128)return w.lastNeed=2,""}}function d(w){var R=this.lastTotal-this.lastNeed,I=l(this,w);if(I!==void 0)return I;if(this.lastNeed<=w.length)return w.copy(this.lastChar,R,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,R,0,w.length),this.lastNeed-=w.length}function f(w,R){var I=u(this,w,R);if(!this.lastNeed)return w.toString("utf8",R);this.lastTotal=I;var k=w.length-(I-this.lastNeed);return w.copy(this.lastChar,0,k),w.toString("utf8",R,k)}function h(w){var R=w&&w.length?this.write(w):"";return this.lastNeed?R+"":R}function S(w,R){if((w.length-R)%2===0){var I=w.toString("utf16le",R);if(I){var k=I.charCodeAt(I.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",R,w.length-1)}function b(w){var R=w&&w.length?this.write(w):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return R+this.lastChar.toString("utf16le",0,I)}return R}function p(w,R){var I=(w.length-R)%3;return I===0?w.toString("base64",R):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",R,w.length-I))}function j(w){var R=w&&w.length?this.write(w):"";return this.lastNeed?R+this.lastChar.toString("base64",0,3-this.lastNeed):R}function N(w){return w.toString(this.encoding)}function A(w){return w&&w.length?this.write(w):""}return vm}var wm,Ey;function Y1(){if(Ey)return wm;Ey=1;var r=kd().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var u=!1;return function(){if(!u){u=!0;for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];s.apply(this,d)}}}function t(){}function o(s){return s.setHeader&&typeof s.abort=="function"}function a(s,u,l){if(typeof u=="function")return a(s,null,u);u||(u={}),l=e(l||t);var d=u.readable||u.readable!==!1&&s.readable,f=u.writable||u.writable!==!1&&s.writable,h=function(){s.writable||b()},S=s._writableState&&s._writableState.finished,b=function(){f=!1,S=!0,d||l.call(s)},p=s._readableState&&s._readableState.endEmitted,j=function(){d=!1,p=!0,f||l.call(s)},N=function(I){l.call(s,I)},A=function(){var I;if(d&&!p)return(!s._readableState||!s._readableState.ended)&&(I=new r),l.call(s,I);if(f&&!S)return(!s._writableState||!s._writableState.ended)&&(I=new r),l.call(s,I)},w=function(){s.req.on("finish",b)};return o(s)?(s.on("complete",b),s.on("abort",A),s.req?w():s.on("request",w)):f&&!s._writableState&&(s.on("end",h),s.on("close",h)),s.on("end",j),s.on("finish",b),u.error!==!1&&s.on("error",N),s.on("close",A),function(){s.removeListener("complete",b),s.removeListener("abort",A),s.removeListener("request",w),s.req&&s.req.removeListener("finish",b),s.removeListener("end",h),s.removeListener("close",h),s.removeListener("finish",b),s.removeListener("end",j),s.removeListener("error",N),s.removeListener("close",A)}}return wm=a,wm}var xm,Ty;function S4(){if(Ty)return xm;Ty=1;var r;function e(w,R,I){return R in w?Object.defineProperty(w,R,{value:I,enumerable:!0,configurable:!0,writable:!0}):w[R]=I,w}var t=Y1(),o=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function h(w,R){return{value:w,done:R}}function S(w){var R=w[o];if(R!==null){var I=w[f].read();I!==null&&(w[l]=null,w[o]=null,w[a]=null,R(h(I,!1)))}}function b(w){ai.nextTick(S,w)}function p(w,R){return function(I,k){w.then(function(){if(R[u]){I(h(void 0,!0));return}R[d](I,k)},k)}}var j=Object.getPrototypeOf(function(){}),N=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var R=this,I=this[s];if(I!==null)return Promise.reject(I);if(this[u])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(Q,ie){ai.nextTick(function(){R[s]?ie(R[s]):Q(h(void 0,!0))})});var k=this[l],G;if(k)G=new Promise(p(k,this));else{var re=this[f].read();if(re!==null)return Promise.resolve(h(re,!1));G=new Promise(this[d])}return this[l]=G,G}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var R=this;return new Promise(function(I,k){R[f].destroy(null,function(G){if(G){k(G);return}I(h(void 0,!0))})})}),r),j),A=function(R){var I,k=Object.create(N,(I={},e(I,f,{value:R,writable:!0}),e(I,o,{value:null,writable:!0}),e(I,a,{value:null,writable:!0}),e(I,s,{value:null,writable:!0}),e(I,u,{value:R._readableState.endEmitted,writable:!0}),e(I,d,{value:function(re,Q){var ie=k[f].read();ie?(k[l]=null,k[o]=null,k[a]=null,re(h(ie,!1))):(k[o]=re,k[a]=Q)},writable:!0}),I));return k[l]=null,t(R,function(G){if(G&&G.code!=="ERR_STREAM_PREMATURE_CLOSE"){var re=k[a];re!==null&&(k[l]=null,k[o]=null,k[a]=null,re(G)),k[s]=G;return}var Q=k[o];Q!==null&&(k[l]=null,k[o]=null,k[a]=null,Q(h(void 0,!0))),k[u]=!0}),R.on("readable",b.bind(null,k)),k};return xm=A,xm}var bm,Cy;function k4(){return Cy||(Cy=1,bm=function(){throw new Error("Readable.from is not available in the browser")}),bm}var _m,Ly;function b5(){if(Ly)return _m;Ly=1,_m=U;var r;U.ReadableState=ie,G1().EventEmitter;var e=function(me,Be){return me.listeners(Be).length},t=a5(),o=kh().Buffer,a=ic.Uint8Array||function(){};function s(se){return o.from(se)}function u(se){return o.isBuffer(se)||se instanceof a}var l=y5(),d;l&&l.debuglog?d=l.debuglog("stream"):d=function(){};var f=x4(),h=v5(),S=w5(),b=S.getHighWaterMark,p=kd().codes,j=p.ERR_INVALID_ARG_TYPE,N=p.ERR_STREAM_PUSH_AFTER_EOF,A=p.ERR_METHOD_NOT_IMPLEMENTED,w=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,I,k;du()(U,t);var G=h.errorOrDestroy,re=["error","close","destroy","pause","resume"];function Q(se,me,Be){if(typeof se.prependListener=="function")return se.prependListener(me,Be);!se._events||!se._events[me]?se.on(me,Be):Array.isArray(se._events[me])?se._events[me].unshift(Be):se._events[me]=[Be,se._events[me]]}function ie(se,me,Be){r=r||wd(),se=se||{},typeof Be!="boolean"&&(Be=me instanceof r),this.objectMode=!!se.objectMode,Be&&(this.objectMode=this.objectMode||!!se.readableObjectMode),this.highWaterMark=b(this,se,"readableHighWaterMark",Be),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=se.emitClose!==!1,this.autoDestroy=!!se.autoDestroy,this.destroyed=!1,this.defaultEncoding=se.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,se.encoding&&(R||(R=E1().StringDecoder),this.decoder=new R(se.encoding),this.encoding=se.encoding)}function U(se){if(r=r||wd(),!(this instanceof U))return new U(se);var me=this instanceof r;this._readableState=new ie(se,this,me),this.readable=!0,se&&(typeof se.read=="function"&&(this._read=se.read),typeof se.destroy=="function"&&(this._destroy=se.destroy)),t.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(me){this._readableState&&(this._readableState.destroyed=me)}}),U.prototype.destroy=h.destroy,U.prototype._undestroy=h.undestroy,U.prototype._destroy=function(se,me){me(se)},U.prototype.push=function(se,me){var Be=this._readableState,H;return Be.objectMode?H=!0:typeof se=="string"&&(me=me||Be.defaultEncoding,me!==Be.encoding&&(se=o.from(se,me),me=""),H=!0),ue(this,se,me,!1,H)},U.prototype.unshift=function(se){return ue(this,se,null,!0,!1)};function ue(se,me,Be,H,ee){d("readableAddChunk",me);var X=se._readableState;if(me===null)X.reading=!1,Ae(se,X);else{var T;if(ee||(T=B(X,me)),T)G(se,T);else if(X.objectMode||me&&me.length>0)if(typeof me!="string"&&!X.objectMode&&Object.getPrototypeOf(me)!==o.prototype&&(me=s(me)),H)X.endEmitted?G(se,new w):oe(se,X,me,!0);else if(X.ended)G(se,new N);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Be?(me=X.decoder.write(me),X.objectMode||me.length!==0?oe(se,X,me,!1):ke(se,X)):oe(se,X,me,!1)}else H||(X.reading=!1,ke(se,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function oe(se,me,Be,H){me.flowing&&me.length===0&&!me.sync?(me.awaitDrain=0,se.emit("data",Be)):(me.length+=me.objectMode?1:Be.length,H?me.buffer.unshift(Be):me.buffer.push(Be),me.needReadable&&ge(se)),ke(se,me)}function B(se,me){var Be;return!u(me)&&typeof me!="string"&&me!==void 0&&!se.objectMode&&(Be=new j("chunk",["string","Buffer","Uint8Array"],me)),Be}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(se){R||(R=E1().StringDecoder);var me=new R(se);this._readableState.decoder=me,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,H="";Be!==null;)H+=me.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),H!==""&&this._readableState.buffer.push(H),this._readableState.length=H.length,this};var te=1073741824;function P(se){return se>=te?se=te:(se--,se|=se>>>1,se|=se>>>2,se|=se>>>4,se|=se>>>8,se|=se>>>16,se++),se}function be(se,me){return se<=0||me.length===0&&me.ended?0:me.objectMode?1:se!==se?me.flowing&&me.length?me.buffer.head.data.length:me.length:(se>me.highWaterMark&&(me.highWaterMark=P(se)),se<=me.length?se:me.ended?me.length:(me.needReadable=!0,0))}U.prototype.read=function(se){d("read",se),se=parseInt(se,10);var me=this._readableState,Be=se;if(se!==0&&(me.emittedReadable=!1),se===0&&me.needReadable&&((me.highWaterMark!==0?me.length>=me.highWaterMark:me.length>0)||me.ended))return d("read: emitReadable",me.length,me.ended),me.length===0&&me.ended?z(this):ge(this),null;if(se=be(se,me),se===0&&me.ended)return me.length===0&&z(this),null;var H=me.needReadable;d("need readable",H),(me.length===0||me.length-se<me.highWaterMark)&&(H=!0,d("length less than watermark",H)),me.ended||me.reading?(H=!1,d("reading or ended",H)):H&&(d("do read"),me.reading=!0,me.sync=!0,me.length===0&&(me.needReadable=!0),this._read(me.highWaterMark),me.sync=!1,me.reading||(se=be(Be,me)));var ee;return se>0?ee=M(se,me):ee=null,ee===null?(me.needReadable=me.length<=me.highWaterMark,se=0):(me.length-=se,me.awaitDrain=0),me.length===0&&(me.ended||(me.needReadable=!0),Be!==se&&me.ended&&z(this)),ee!==null&&this.emit("data",ee),ee};function Ae(se,me){if(d("onEofChunk"),!me.ended){if(me.decoder){var Be=me.decoder.end();Be&&Be.length&&(me.buffer.push(Be),me.length+=me.objectMode?1:Be.length)}me.ended=!0,me.sync?ge(se):(me.needReadable=!1,me.emittedReadable||(me.emittedReadable=!0,xe(se)))}}function ge(se){var me=se._readableState;d("emitReadable",me.needReadable,me.emittedReadable),me.needReadable=!1,me.emittedReadable||(d("emitReadable",me.flowing),me.emittedReadable=!0,ai.nextTick(xe,se))}function xe(se){var me=se._readableState;d("emitReadable_",me.destroyed,me.length,me.ended),!me.destroyed&&(me.length||me.ended)&&(se.emit("readable"),me.emittedReadable=!1),me.needReadable=!me.flowing&&!me.ended&&me.length<=me.highWaterMark,ce(se)}function ke(se,me){me.readingMore||(me.readingMore=!0,ai.nextTick(Fe,se,me))}function Fe(se,me){for(;!me.reading&&!me.ended&&(me.length<me.highWaterMark||me.flowing&&me.length===0);){var Be=me.length;if(d("maybeReadMore read 0"),se.read(0),Be===me.length)break}me.readingMore=!1}U.prototype._read=function(se){G(this,new A("_read()"))},U.prototype.pipe=function(se,me){var Be=this,H=this._readableState;switch(H.pipesCount){case 0:H.pipes=se;break;case 1:H.pipes=[H.pipes,se];break;default:H.pipes.push(se);break}H.pipesCount+=1,d("pipe count=%d opts=%j",H.pipesCount,me);var ee=(!me||me.end!==!1)&&se!==ai.stdout&&se!==ai.stderr,X=ee?L:lt;H.endEmitted?ai.nextTick(X):Be.once("end",X),se.on("unpipe",T);function T(Nt,Ft){d("onunpipe"),Nt===Be&&Ft&&Ft.hasUnpiped===!1&&(Ft.hasUnpiped=!0,Le())}function L(){d("onend"),se.end()}var q=J(Be);se.on("drain",q);var Se=!1;function Le(){d("cleanup"),se.removeListener("close",dt),se.removeListener("finish",ot),se.removeListener("drain",q),se.removeListener("error",qe),se.removeListener("unpipe",T),Be.removeListener("end",L),Be.removeListener("end",lt),Be.removeListener("data",Ee),Se=!0,H.awaitDrain&&(!se._writableState||se._writableState.needDrain)&&q()}Be.on("data",Ee);function Ee(Nt){d("ondata");var Ft=se.write(Nt);d("dest.write",Ft),Ft===!1&&((H.pipesCount===1&&H.pipes===se||H.pipesCount>1&&he(H.pipes,se)!==-1)&&!Se&&(d("false write response, pause",H.awaitDrain),H.awaitDrain++),Be.pause())}function qe(Nt){d("onerror",Nt),lt(),se.removeListener("error",qe),e(se,"error")===0&&G(se,Nt)}Q(se,"error",qe);function dt(){se.removeListener("finish",ot),lt()}se.once("close",dt);function ot(){d("onfinish"),se.removeListener("close",dt),lt()}se.once("finish",ot);function lt(){d("unpipe"),Be.unpipe(se)}return se.emit("pipe",Be),H.flowing||(d("pipe resume"),Be.resume()),se};function J(se){return function(){var Be=se._readableState;d("pipeOnDrain",Be.awaitDrain),Be.awaitDrain&&Be.awaitDrain--,Be.awaitDrain===0&&e(se,"data")&&(Be.flowing=!0,ce(se))}}U.prototype.unpipe=function(se){var me=this._readableState,Be={hasUnpiped:!1};if(me.pipesCount===0)return this;if(me.pipesCount===1)return se&&se!==me.pipes?this:(se||(se=me.pipes),me.pipes=null,me.pipesCount=0,me.flowing=!1,se&&se.emit("unpipe",this,Be),this);if(!se){var H=me.pipes,ee=me.pipesCount;me.pipes=null,me.pipesCount=0,me.flowing=!1;for(var X=0;X<ee;X++)H[X].emit("unpipe",this,{hasUnpiped:!1});return this}var T=he(me.pipes,se);return T===-1?this:(me.pipes.splice(T,1),me.pipesCount-=1,me.pipesCount===1&&(me.pipes=me.pipes[0]),se.emit("unpipe",this,Be),this)},U.prototype.on=function(se,me){var Be=t.prototype.on.call(this,se,me),H=this._readableState;return se==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):se==="readable"&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,d("on readable",H.length,H.reading),H.length?ge(this):H.reading||ai.nextTick(Z,this)),Be},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(se,me){var Be=t.prototype.removeListener.call(this,se,me);return se==="readable"&&ai.nextTick(C,this),Be},U.prototype.removeAllListeners=function(se){var me=t.prototype.removeAllListeners.apply(this,arguments);return(se==="readable"||se===void 0)&&ai.nextTick(C,this),me};function C(se){var me=se._readableState;me.readableListening=se.listenerCount("readable")>0,me.resumeScheduled&&!me.paused?me.flowing=!0:se.listenerCount("data")>0&&se.resume()}function Z(se){d("readable nexttick read 0"),se.read(0)}U.prototype.resume=function(){var se=this._readableState;return se.flowing||(d("resume"),se.flowing=!se.readableListening,ne(this,se)),se.paused=!1,this};function ne(se,me){me.resumeScheduled||(me.resumeScheduled=!0,ai.nextTick(ye,se,me))}function ye(se,me){d("resume",me.reading),me.reading||se.read(0),me.resumeScheduled=!1,se.emit("resume"),ce(se),me.flowing&&!me.reading&&se.read(0)}U.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ce(se){var me=se._readableState;for(d("flow",me.flowing);me.flowing&&se.read()!==null;);}U.prototype.wrap=function(se){var me=this,Be=this._readableState,H=!1;se.on("end",function(){if(d("wrapped end"),Be.decoder&&!Be.ended){var T=Be.decoder.end();T&&T.length&&me.push(T)}me.push(null)}),se.on("data",function(T){if(d("wrapped data"),Be.decoder&&(T=Be.decoder.write(T)),!(Be.objectMode&&T==null)&&!(!Be.objectMode&&(!T||!T.length))){var L=me.push(T);L||(H=!0,se.pause())}});for(var ee in se)this[ee]===void 0&&typeof se[ee]=="function"&&(this[ee]=(function(L){return function(){return se[L].apply(se,arguments)}})(ee));for(var X=0;X<re.length;X++)se.on(re[X],this.emit.bind(this,re[X]));return this._read=function(T){d("wrapped _read",T),H&&(H=!1,se.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return I===void 0&&(I=S4()),I(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}}),U._fromList=M,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M(se,me){if(me.length===0)return null;var Be;return me.objectMode?Be=me.buffer.shift():!se||se>=me.length?(me.decoder?Be=me.buffer.join(""):me.buffer.length===1?Be=me.buffer.first():Be=me.buffer.concat(me.length),me.buffer.clear()):Be=me.buffer.consume(se,me.decoder),Be}function z(se){var me=se._readableState;d("endReadable",me.endEmitted),me.endEmitted||(me.ended=!0,ai.nextTick(fe,me,se))}function fe(se,me){if(d("endReadableNT",se.endEmitted,se.length),!se.endEmitted&&se.length===0&&(se.endEmitted=!0,me.readable=!1,me.emit("end"),se.autoDestroy)){var Be=me._writableState;(!Be||Be.autoDestroy&&Be.finished)&&me.destroy()}}typeof Symbol=="function"&&(U.from=function(se,me){return k===void 0&&(k=k4()),k(U,se,me)});function he(se,me){for(var Be=0,H=se.length;Be<H;Be++)if(se[Be]===me)return Be;return-1}return _m}var Sm,Iy;function _5(){if(Iy)return Sm;Iy=1,Sm=l;var r=kd().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,s=wd();du()(l,s);function u(h,S){var b=this._transformState;b.transforming=!1;var p=b.writecb;if(p===null)return this.emit("error",new t);b.writechunk=null,b.writecb=null,S!=null&&this.push(S),p(h);var j=this._readableState;j.reading=!1,(j.needReadable||j.length<j.highWaterMark)&&this._read(j.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);s.call(this,h),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",d)}function d(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,b){f(h,S,b)}):f(this,null,null)}l.prototype.push=function(h,S){return this._transformState.needTransform=!1,s.prototype.push.call(this,h,S)},l.prototype._transform=function(h,S,b){b(new e("_transform()"))},l.prototype._write=function(h,S,b){var p=this._transformState;if(p.writecb=b,p.writechunk=h,p.writeencoding=S,!p.transforming){var j=this._readableState;(p.needTransform||j.needReadable||j.length<j.highWaterMark)&&this._read(j.highWaterMark)}},l.prototype._read=function(h){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},l.prototype._destroy=function(h,S){s.prototype._destroy.call(this,h,function(b){S(b)})};function f(h,S,b){if(S)return h.emit("error",S);if(b!=null&&h.push(b),h._writableState.length)throw new a;if(h._transformState.transforming)throw new o;return h.push(null)}return Sm}var km,Ry;function A4(){if(Ry)return km;Ry=1,km=e;var r=_5();du()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,o,a){a(null,t)},km}var Am,jy;function N4(){if(jy)return Am;jy=1;var r;function e(b){var p=!1;return function(){p||(p=!0,b.apply(void 0,arguments))}}var t=kd().codes,o=t.ERR_MISSING_ARGS,a=t.ERR_STREAM_DESTROYED;function s(b){if(b)throw b}function u(b){return b.setHeader&&typeof b.abort=="function"}function l(b,p,j,N){N=e(N);var A=!1;b.on("close",function(){A=!0}),r===void 0&&(r=Y1()),r(b,{readable:p,writable:j},function(R){if(R)return N(R);A=!0,N()});var w=!1;return function(R){if(!A&&!w){if(w=!0,u(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();N(R||new a("pipe"))}}}function d(b){b()}function f(b,p){return b.pipe(p)}function h(b){return!b.length||typeof b[b.length-1]!="function"?s:b.pop()}function S(){for(var b=arguments.length,p=new Array(b),j=0;j<b;j++)p[j]=arguments[j];var N=h(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new o("streams");var A,w=p.map(function(R,I){var k=I<p.length-1,G=I>0;return l(R,k,G,function(re){A||(A=re),re&&w.forEach(d),!k&&(w.forEach(d),N(A))})});return p.reduce(f)}return Am=S,Am}var Nm,Py;function J1(){if(Py)return Nm;Py=1,Nm=t;var r=G1().EventEmitter,e=du();e(t,r),t.Readable=b5(),t.Writable=x5(),t.Duplex=wd(),t.Transform=_5(),t.PassThrough=A4(),t.finished=Y1(),t.pipeline=N4(),t.Stream=t;function t(){r.call(this)}return t.prototype.pipe=function(o,a){var s=this;function u(p){o.writable&&o.write(p)===!1&&s.pause&&s.pause()}s.on("data",u);function l(){s.readable&&s.resume&&s.resume()}o.on("drain",l),!o._isStdio&&(!a||a.end!==!1)&&(s.on("end",f),s.on("close",h));var d=!1;function f(){d||(d=!0,o.end())}function h(){d||(d=!0,typeof o.destroy=="function"&&o.destroy())}function S(p){if(b(),r.listenerCount(this,"error")===0)throw p}s.on("error",S),o.on("error",S);function b(){s.removeListener("data",u),o.removeListener("drain",l),s.removeListener("end",f),s.removeListener("close",h),s.removeListener("error",S),o.removeListener("error",S),s.removeListener("end",b),s.removeListener("close",b),o.removeListener("close",b)}return s.on("end",b),s.on("close",b),o.on("close",b),o.emit("pipe",s),o},Nm}var Dy;function E4(){return Dy||(Dy=1,(function(r){(function(e){e.parser=function(M,z){return new o(M,z)},e.SAXParser=o,e.SAXStream=h,e.createStream=f,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function o(M,z){if(!(this instanceof o))return new o(M,z);var fe=this;s(fe),fe.q=fe.c="",fe.bufferCheckPosition=e.MAX_BUFFER_LENGTH,fe.opt=z||{},fe.opt.lowercase=fe.opt.lowercase||fe.opt.lowercasetags,fe.looseCase=fe.opt.lowercase?"toLowerCase":"toUpperCase",fe.tags=[],fe.closed=fe.closedRoot=fe.sawRoot=!1,fe.tag=fe.error=null,fe.strict=!!M,fe.noscript=!!(M||fe.opt.noscript),fe.state=U.BEGIN,fe.strictEntities=fe.opt.strictEntities,fe.ENTITIES=fe.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),fe.attribList=[],fe.opt.xmlns&&(fe.ns=Object.create(N)),fe.trackPosition=fe.opt.position!==!1,fe.trackPosition&&(fe.position=fe.line=fe.column=0),oe(fe,"onready")}Object.create||(Object.create=function(M){function z(){}z.prototype=M;var fe=new z;return fe}),Object.keys||(Object.keys=function(M){var z=[];for(var fe in M)M.hasOwnProperty(fe)&&z.push(fe);return z});function a(M){for(var z=Math.max(e.MAX_BUFFER_LENGTH,10),fe=0,he=0,se=t.length;he<se;he++){var me=M[t[he]].length;if(me>z)switch(t[he]){case"textNode":te(M);break;case"cdata":B(M,"oncdata",M.cdata),M.cdata="";break;case"script":B(M,"onscript",M.script),M.script="";break;default:be(M,"Max buffer length exceeded: "+t[he])}fe=Math.max(fe,me)}var Be=e.MAX_BUFFER_LENGTH-fe;M.bufferCheckPosition=Be+M.position}function s(M){for(var z=0,fe=t.length;z<fe;z++)M[t[z]]=""}function u(M){te(M),M.cdata!==""&&(B(M,"oncdata",M.cdata),M.cdata=""),M.script!==""&&(B(M,"onscript",M.script),M.script="")}o.prototype={end:function(){Ae(this)},write:ce,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};var l;try{l=J1().Stream}catch{l=function(){}}var d=e.EVENTS.filter(function(M){return M!=="error"&&M!=="end"});function f(M,z){return new h(M,z)}function h(M,z){if(!(this instanceof h))return new h(M,z);l.apply(this),this._parser=new o(M,z),this.writable=!0,this.readable=!0;var fe=this;this._parser.onend=function(){fe.emit("end")},this._parser.onerror=function(he){fe.emit("error",he),fe._parser.error=null},this._decoder=null,d.forEach(function(he){Object.defineProperty(fe,"on"+he,{get:function(){return fe._parser["on"+he]},set:function(se){if(!se)return fe.removeAllListeners(he),fe._parser["on"+he]=se,se;fe.on(he,se)},enumerable:!0,configurable:!1})})}h.prototype=Object.create(l.prototype,{constructor:{value:h}}),h.prototype.write=function(M){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(M)){if(!this._decoder){var z=E1().StringDecoder;this._decoder=new z("utf8")}M=this._decoder.write(M)}return this._parser.write(M.toString()),this.emit("data",M),!0},h.prototype.end=function(M){return M&&M.length&&this.write(M),this._parser.end(),!0},h.prototype.on=function(M,z){var fe=this;return!fe._parser["on"+M]&&d.indexOf(M)!==-1&&(fe._parser["on"+M]=function(){var he=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);he.splice(0,0,M),fe.emit.apply(fe,he)}),l.prototype.on.call(fe,M,z)};var S="[CDATA[",b="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",N={xml:p,xmlns:j},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function k(M){return M===" "||M===`
`||M==="\r"||M==="	"}function G(M){return M==='"'||M==="'"}function re(M){return M===">"||k(M)}function Q(M,z){return M.test(z)}function ie(M,z){return!Q(M,z)}var U=0;e.STATE={BEGIN:U++,BEGIN_WHITESPACE:U++,TEXT:U++,TEXT_ENTITY:U++,OPEN_WAKA:U++,SGML_DECL:U++,SGML_DECL_QUOTED:U++,DOCTYPE:U++,DOCTYPE_QUOTED:U++,DOCTYPE_DTD:U++,DOCTYPE_DTD_QUOTED:U++,COMMENT_STARTING:U++,COMMENT:U++,COMMENT_ENDING:U++,COMMENT_ENDED:U++,CDATA:U++,CDATA_ENDING:U++,CDATA_ENDING_2:U++,PROC_INST:U++,PROC_INST_BODY:U++,PROC_INST_ENDING:U++,OPEN_TAG:U++,OPEN_TAG_SLASH:U++,ATTRIB:U++,ATTRIB_NAME:U++,ATTRIB_NAME_SAW_WHITE:U++,ATTRIB_VALUE:U++,ATTRIB_VALUE_QUOTED:U++,ATTRIB_VALUE_CLOSED:U++,ATTRIB_VALUE_UNQUOTED:U++,ATTRIB_VALUE_ENTITY_Q:U++,ATTRIB_VALUE_ENTITY_U:U++,CLOSE_TAG:U++,CLOSE_TAG_SAW_WHITE:U++,SCRIPT:U++,SCRIPT_ENDING:U++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(M){var z=e.ENTITIES[M],fe=typeof z=="number"?String.fromCharCode(z):z;e.ENTITIES[M]=fe});for(var ue in e.STATE)e.STATE[e.STATE[ue]]=ue;U=e.STATE;function oe(M,z,fe){M[z]&&M[z](fe)}function B(M,z,fe){M.textNode&&te(M),oe(M,z,fe)}function te(M){M.textNode=P(M.opt,M.textNode),M.textNode&&oe(M,"ontext",M.textNode),M.textNode=""}function P(M,z){return M.trim&&(z=z.trim()),M.normalize&&(z=z.replace(/\s+/g," ")),z}function be(M,z){return te(M),M.trackPosition&&(z+=`
Line: `+M.line+`
Column: `+M.column+`
Char: `+M.c),z=new Error(z),M.error=z,oe(M,"onerror",z),M}function Ae(M){return M.sawRoot&&!M.closedRoot&&ge(M,"Unclosed root tag"),M.state!==U.BEGIN&&M.state!==U.BEGIN_WHITESPACE&&M.state!==U.TEXT&&be(M,"Unexpected end"),te(M),M.c="",M.closed=!0,oe(M,"onend"),o.call(M,M.strict,M.opt),M}function ge(M,z){if(typeof M!="object"||!(M instanceof o))throw new Error("bad call to strictFail");M.strict&&be(M,z)}function xe(M){M.strict||(M.tagName=M.tagName[M.looseCase]());var z=M.tags[M.tags.length-1]||M,fe=M.tag={name:M.tagName,attributes:{}};M.opt.xmlns&&(fe.ns=z.ns),M.attribList.length=0,B(M,"onopentagstart",fe)}function ke(M,z){var fe=M.indexOf(":"),he=fe<0?["",M]:M.split(":"),se=he[0],me=he[1];return z&&M==="xmlns"&&(se="xmlns",me=""),{prefix:se,local:me}}function Fe(M){if(M.strict||(M.attribName=M.attribName[M.looseCase]()),M.attribList.indexOf(M.attribName)!==-1||M.tag.attributes.hasOwnProperty(M.attribName)){M.attribName=M.attribValue="";return}if(M.opt.xmlns){var z=ke(M.attribName,!0),fe=z.prefix,he=z.local;if(fe==="xmlns")if(he==="xml"&&M.attribValue!==p)ge(M,"xml: prefix must be bound to "+p+`
Actual: `+M.attribValue);else if(he==="xmlns"&&M.attribValue!==j)ge(M,"xmlns: prefix must be bound to "+j+`
Actual: `+M.attribValue);else{var se=M.tag,me=M.tags[M.tags.length-1]||M;se.ns===me.ns&&(se.ns=Object.create(me.ns)),se.ns[he]=M.attribValue}M.attribList.push([M.attribName,M.attribValue])}else M.tag.attributes[M.attribName]=M.attribValue,B(M,"onattribute",{name:M.attribName,value:M.attribValue});M.attribName=M.attribValue=""}function J(M,z){if(M.opt.xmlns){var fe=M.tag,he=ke(M.tagName);fe.prefix=he.prefix,fe.local=he.local,fe.uri=fe.ns[he.prefix]||"",fe.prefix&&!fe.uri&&(ge(M,"Unbound namespace prefix: "+JSON.stringify(M.tagName)),fe.uri=he.prefix);var se=M.tags[M.tags.length-1]||M;fe.ns&&se.ns!==fe.ns&&Object.keys(fe.ns).forEach(function(Ee){B(M,"onopennamespace",{prefix:Ee,uri:fe.ns[Ee]})});for(var me=0,Be=M.attribList.length;me<Be;me++){var H=M.attribList[me],ee=H[0],X=H[1],T=ke(ee,!0),L=T.prefix,q=T.local,Se=L===""?"":fe.ns[L]||"",Le={name:ee,value:X,prefix:L,local:q,uri:Se};L&&L!=="xmlns"&&!Se&&(ge(M,"Unbound namespace prefix: "+JSON.stringify(L)),Le.uri=L),M.tag.attributes[ee]=Le,B(M,"onattribute",Le)}M.attribList.length=0}M.tag.isSelfClosing=!!z,M.sawRoot=!0,M.tags.push(M.tag),B(M,"onopentag",M.tag),z||(!M.noscript&&M.tagName.toLowerCase()==="script"?M.state=U.SCRIPT:M.state=U.TEXT,M.tag=null,M.tagName=""),M.attribName=M.attribValue="",M.attribList.length=0}function C(M){if(!M.tagName){ge(M,"Weird empty close tag."),M.textNode+="</>",M.state=U.TEXT;return}if(M.script){if(M.tagName!=="script"){M.script+="</"+M.tagName+">",M.tagName="",M.state=U.SCRIPT;return}B(M,"onscript",M.script),M.script=""}var z=M.tags.length,fe=M.tagName;M.strict||(fe=fe[M.looseCase]());for(var he=fe;z--;){var se=M.tags[z];if(se.name!==he)ge(M,"Unexpected close tag");else break}if(z<0){ge(M,"Unmatched closing tag: "+M.tagName),M.textNode+="</"+M.tagName+">",M.state=U.TEXT;return}M.tagName=fe;for(var me=M.tags.length;me-- >z;){var Be=M.tag=M.tags.pop();M.tagName=M.tag.name,B(M,"onclosetag",M.tagName);var H={};for(var ee in Be.ns)H[ee]=Be.ns[ee];var X=M.tags[M.tags.length-1]||M;M.opt.xmlns&&Be.ns!==X.ns&&Object.keys(Be.ns).forEach(function(T){var L=Be.ns[T];B(M,"onclosenamespace",{prefix:T,uri:L})})}z===0&&(M.closedRoot=!0),M.tagName=M.attribValue=M.attribName="",M.attribList.length=0,M.state=U.TEXT}function Z(M){var z=M.entity,fe=z.toLowerCase(),he,se="";return M.ENTITIES[z]?M.ENTITIES[z]:M.ENTITIES[fe]?M.ENTITIES[fe]:(z=fe,z.charAt(0)==="#"&&(z.charAt(1)==="x"?(z=z.slice(2),he=parseInt(z,16),se=he.toString(16)):(z=z.slice(1),he=parseInt(z,10),se=he.toString(10))),z=z.replace(/^0+/,""),isNaN(he)||se.toLowerCase()!==z?(ge(M,"Invalid character entity"),"&"+M.entity+";"):String.fromCodePoint(he))}function ne(M,z){z==="<"?(M.state=U.OPEN_WAKA,M.startTagPosition=M.position):k(z)||(ge(M,"Non-whitespace before first tag."),M.textNode=z,M.state=U.TEXT)}function ye(M,z){var fe="";return z<M.length&&(fe=M.charAt(z)),fe}function ce(M){var z=this;if(this.error)throw this.error;if(z.closed)return be(z,"Cannot write after close. Assign an onready handler.");if(M===null)return Ae(z);typeof M=="object"&&(M=M.toString());for(var fe=0,he="";he=ye(M,fe++),z.c=he,!!he;)switch(z.trackPosition&&(z.position++,he===`
`?(z.line++,z.column=0):z.column++),z.state){case U.BEGIN:if(z.state=U.BEGIN_WHITESPACE,he==="\uFEFF")continue;ne(z,he);continue;case U.BEGIN_WHITESPACE:ne(z,he);continue;case U.TEXT:if(z.sawRoot&&!z.closedRoot){for(var se=fe-1;he&&he!=="<"&&he!=="&";)he=ye(M,fe++),he&&z.trackPosition&&(z.position++,he===`
`?(z.line++,z.column=0):z.column++);z.textNode+=M.substring(se,fe-1)}he==="<"&&!(z.sawRoot&&z.closedRoot&&!z.strict)?(z.state=U.OPEN_WAKA,z.startTagPosition=z.position):(!k(he)&&(!z.sawRoot||z.closedRoot)&&ge(z,"Text data outside of root node."),he==="&"?z.state=U.TEXT_ENTITY:z.textNode+=he);continue;case U.SCRIPT:he==="<"?z.state=U.SCRIPT_ENDING:z.script+=he;continue;case U.SCRIPT_ENDING:he==="/"?z.state=U.CLOSE_TAG:(z.script+="<"+he,z.state=U.SCRIPT);continue;case U.OPEN_WAKA:if(he==="!")z.state=U.SGML_DECL,z.sgmlDecl="";else if(!k(he))if(Q(A,he))z.state=U.OPEN_TAG,z.tagName=he;else if(he==="/")z.state=U.CLOSE_TAG,z.tagName="";else if(he==="?")z.state=U.PROC_INST,z.procInstName=z.procInstBody="";else{if(ge(z,"Unencoded <"),z.startTagPosition+1<z.position){var me=z.position-z.startTagPosition;he=new Array(me).join(" ")+he}z.textNode+="<"+he,z.state=U.TEXT}continue;case U.SGML_DECL:(z.sgmlDecl+he).toUpperCase()===S?(B(z,"onopencdata"),z.state=U.CDATA,z.sgmlDecl="",z.cdata=""):z.sgmlDecl+he==="--"?(z.state=U.COMMENT,z.comment="",z.sgmlDecl=""):(z.sgmlDecl+he).toUpperCase()===b?(z.state=U.DOCTYPE,(z.doctype||z.sawRoot)&&ge(z,"Inappropriately located doctype declaration"),z.doctype="",z.sgmlDecl=""):he===">"?(B(z,"onsgmldeclaration",z.sgmlDecl),z.sgmlDecl="",z.state=U.TEXT):(G(he)&&(z.state=U.SGML_DECL_QUOTED),z.sgmlDecl+=he);continue;case U.SGML_DECL_QUOTED:he===z.q&&(z.state=U.SGML_DECL,z.q=""),z.sgmlDecl+=he;continue;case U.DOCTYPE:he===">"?(z.state=U.TEXT,B(z,"ondoctype",z.doctype),z.doctype=!0):(z.doctype+=he,he==="["?z.state=U.DOCTYPE_DTD:G(he)&&(z.state=U.DOCTYPE_QUOTED,z.q=he));continue;case U.DOCTYPE_QUOTED:z.doctype+=he,he===z.q&&(z.q="",z.state=U.DOCTYPE);continue;case U.DOCTYPE_DTD:z.doctype+=he,he==="]"?z.state=U.DOCTYPE:G(he)&&(z.state=U.DOCTYPE_DTD_QUOTED,z.q=he);continue;case U.DOCTYPE_DTD_QUOTED:z.doctype+=he,he===z.q&&(z.state=U.DOCTYPE_DTD,z.q="");continue;case U.COMMENT:he==="-"?z.state=U.COMMENT_ENDING:z.comment+=he;continue;case U.COMMENT_ENDING:he==="-"?(z.state=U.COMMENT_ENDED,z.comment=P(z.opt,z.comment),z.comment&&B(z,"oncomment",z.comment),z.comment=""):(z.comment+="-"+he,z.state=U.COMMENT);continue;case U.COMMENT_ENDED:he!==">"?(ge(z,"Malformed comment"),z.comment+="--"+he,z.state=U.COMMENT):z.state=U.TEXT;continue;case U.CDATA:he==="]"?z.state=U.CDATA_ENDING:z.cdata+=he;continue;case U.CDATA_ENDING:he==="]"?z.state=U.CDATA_ENDING_2:(z.cdata+="]"+he,z.state=U.CDATA);continue;case U.CDATA_ENDING_2:he===">"?(z.cdata&&B(z,"oncdata",z.cdata),B(z,"onclosecdata"),z.cdata="",z.state=U.TEXT):he==="]"?z.cdata+="]":(z.cdata+="]]"+he,z.state=U.CDATA);continue;case U.PROC_INST:he==="?"?z.state=U.PROC_INST_ENDING:k(he)?z.state=U.PROC_INST_BODY:z.procInstName+=he;continue;case U.PROC_INST_BODY:if(!z.procInstBody&&k(he))continue;he==="?"?z.state=U.PROC_INST_ENDING:z.procInstBody+=he;continue;case U.PROC_INST_ENDING:he===">"?(B(z,"onprocessinginstruction",{name:z.procInstName,body:z.procInstBody}),z.procInstName=z.procInstBody="",z.state=U.TEXT):(z.procInstBody+="?"+he,z.state=U.PROC_INST_BODY);continue;case U.OPEN_TAG:Q(w,he)?z.tagName+=he:(xe(z),he===">"?J(z):he==="/"?z.state=U.OPEN_TAG_SLASH:(k(he)||ge(z,"Invalid character in tag name"),z.state=U.ATTRIB));continue;case U.OPEN_TAG_SLASH:he===">"?(J(z,!0),C(z)):(ge(z,"Forward-slash in opening tag not followed by >"),z.state=U.ATTRIB);continue;case U.ATTRIB:if(k(he))continue;he===">"?J(z):he==="/"?z.state=U.OPEN_TAG_SLASH:Q(A,he)?(z.attribName=he,z.attribValue="",z.state=U.ATTRIB_NAME):ge(z,"Invalid attribute name");continue;case U.ATTRIB_NAME:he==="="?z.state=U.ATTRIB_VALUE:he===">"?(ge(z,"Attribute without value"),z.attribValue=z.attribName,Fe(z),J(z)):k(he)?z.state=U.ATTRIB_NAME_SAW_WHITE:Q(w,he)?z.attribName+=he:ge(z,"Invalid attribute name");continue;case U.ATTRIB_NAME_SAW_WHITE:if(he==="=")z.state=U.ATTRIB_VALUE;else{if(k(he))continue;ge(z,"Attribute without value"),z.tag.attributes[z.attribName]="",z.attribValue="",B(z,"onattribute",{name:z.attribName,value:""}),z.attribName="",he===">"?J(z):Q(A,he)?(z.attribName=he,z.state=U.ATTRIB_NAME):(ge(z,"Invalid attribute name"),z.state=U.ATTRIB)}continue;case U.ATTRIB_VALUE:if(k(he))continue;G(he)?(z.q=he,z.state=U.ATTRIB_VALUE_QUOTED):(ge(z,"Unquoted attribute value"),z.state=U.ATTRIB_VALUE_UNQUOTED,z.attribValue=he);continue;case U.ATTRIB_VALUE_QUOTED:if(he!==z.q){he==="&"?z.state=U.ATTRIB_VALUE_ENTITY_Q:z.attribValue+=he;continue}Fe(z),z.q="",z.state=U.ATTRIB_VALUE_CLOSED;continue;case U.ATTRIB_VALUE_CLOSED:k(he)?z.state=U.ATTRIB:he===">"?J(z):he==="/"?z.state=U.OPEN_TAG_SLASH:Q(A,he)?(ge(z,"No whitespace between attributes"),z.attribName=he,z.attribValue="",z.state=U.ATTRIB_NAME):ge(z,"Invalid attribute name");continue;case U.ATTRIB_VALUE_UNQUOTED:if(!re(he)){he==="&"?z.state=U.ATTRIB_VALUE_ENTITY_U:z.attribValue+=he;continue}Fe(z),he===">"?J(z):z.state=U.ATTRIB;continue;case U.CLOSE_TAG:if(z.tagName)he===">"?C(z):Q(w,he)?z.tagName+=he:z.script?(z.script+="</"+z.tagName,z.tagName="",z.state=U.SCRIPT):(k(he)||ge(z,"Invalid tagname in closing tag"),z.state=U.CLOSE_TAG_SAW_WHITE);else{if(k(he))continue;ie(A,he)?z.script?(z.script+="</"+he,z.state=U.SCRIPT):ge(z,"Invalid tagname in closing tag."):z.tagName=he}continue;case U.CLOSE_TAG_SAW_WHITE:if(k(he))continue;he===">"?C(z):ge(z,"Invalid characters in closing tag");continue;case U.TEXT_ENTITY:case U.ATTRIB_VALUE_ENTITY_Q:case U.ATTRIB_VALUE_ENTITY_U:var Be,H;switch(z.state){case U.TEXT_ENTITY:Be=U.TEXT,H="textNode";break;case U.ATTRIB_VALUE_ENTITY_Q:Be=U.ATTRIB_VALUE_QUOTED,H="attribValue";break;case U.ATTRIB_VALUE_ENTITY_U:Be=U.ATTRIB_VALUE_UNQUOTED,H="attribValue";break}he===";"?(z[H]+=Z(z),z.entity="",z.state=Be):Q(z.entity.length?I:R,he)?z.entity+=he:(ge(z,"Invalid character in entity name"),z[H]+="&"+z.entity+he,z.entity="",z.state=Be);continue;default:throw new Error(z,"Unknown state: "+z.state)}return z.position>=z.bufferCheckPosition&&a(z),z}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var M=String.fromCharCode,z=Math.floor,fe=function(){var he=16384,se=[],me,Be,H=-1,ee=arguments.length;if(!ee)return"";for(var X="";++H<ee;){var T=Number(arguments[H]);if(!isFinite(T)||T<0||T>1114111||z(T)!==T)throw RangeError("Invalid code point: "+T);T<=65535?se.push(T):(T-=65536,me=(T>>10)+55296,Be=T%1024+56320,se.push(me,Be)),(H+1===ee||se.length>he)&&(X+=M.apply(null,se),se.length=0)}return X};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:fe,configurable:!0,writable:!0}):String.fromCodePoint=fe})()})(r)})(dp)),dp}var Em,Oy;function Z1(){return Oy||(Oy=1,Em={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}),Em}var Tm,Fy;function Q1(){if(Fy)return Tm;Fy=1;var r=Z1().isArray;return Tm={copyOptions:function(e){var t,o={};for(t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!r(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},Tm}var Cm,By;function S5(){if(By)return Cm;By=1;var r=E4(),e=Q1(),t=Z1().isArray,o,a;function s(w){return o=e.copyOptions(w),e.ensureFlagExists("ignoreDeclaration",o),e.ensureFlagExists("ignoreInstruction",o),e.ensureFlagExists("ignoreAttributes",o),e.ensureFlagExists("ignoreText",o),e.ensureFlagExists("ignoreComment",o),e.ensureFlagExists("ignoreCdata",o),e.ensureFlagExists("ignoreDoctype",o),e.ensureFlagExists("compact",o),e.ensureFlagExists("alwaysChildren",o),e.ensureFlagExists("addParent",o),e.ensureFlagExists("trim",o),e.ensureFlagExists("nativeType",o),e.ensureFlagExists("nativeTypeAttributes",o),e.ensureFlagExists("sanitize",o),e.ensureFlagExists("instructionHasAttributes",o),e.ensureFlagExists("captureSpacesBetweenElements",o),e.ensureAlwaysArrayExists(o),e.ensureKeyExists("declaration",o),e.ensureKeyExists("instruction",o),e.ensureKeyExists("attributes",o),e.ensureKeyExists("text",o),e.ensureKeyExists("comment",o),e.ensureKeyExists("cdata",o),e.ensureKeyExists("doctype",o),e.ensureKeyExists("type",o),e.ensureKeyExists("name",o),e.ensureKeyExists("elements",o),e.ensureKeyExists("parent",o),e.checkFnExists("doctype",o),e.checkFnExists("instruction",o),e.checkFnExists("cdata",o),e.checkFnExists("comment",o),e.checkFnExists("text",o),e.checkFnExists("instructionName",o),e.checkFnExists("elementName",o),e.checkFnExists("attributeName",o),e.checkFnExists("attributeValue",o),e.checkFnExists("attributes",o),o}function u(w){var R=Number(w);if(!isNaN(R))return R;var I=w.toLowerCase();return I==="true"?!0:I==="false"?!1:w}function l(w,R){var I;if(o.compact){if(!a[o[w+"Key"]]&&(t(o.alwaysArray)?o.alwaysArray.indexOf(o[w+"Key"])!==-1:o.alwaysArray)&&(a[o[w+"Key"]]=[]),a[o[w+"Key"]]&&!t(a[o[w+"Key"]])&&(a[o[w+"Key"]]=[a[o[w+"Key"]]]),w+"Fn"in o&&typeof R=="string"&&(R=o[w+"Fn"](R,a)),w==="instruction"&&("instructionFn"in o||"instructionNameFn"in o)){for(I in R)if(R.hasOwnProperty(I))if("instructionFn"in o)R[I]=o.instructionFn(R[I],I,a);else{var k=R[I];delete R[I],R[o.instructionNameFn(I,k,a)]=k}}t(a[o[w+"Key"]])?a[o[w+"Key"]].push(R):a[o[w+"Key"]]=R}else{a[o.elementsKey]||(a[o.elementsKey]=[]);var G={};if(G[o.typeKey]=w,w==="instruction"){for(I in R)if(R.hasOwnProperty(I))break;G[o.nameKey]="instructionNameFn"in o?o.instructionNameFn(I,R,a):I,o.instructionHasAttributes?(G[o.attributesKey]=R[I][o.attributesKey],"instructionFn"in o&&(G[o.attributesKey]=o.instructionFn(G[o.attributesKey],I,a))):("instructionFn"in o&&(R[I]=o.instructionFn(R[I],I,a)),G[o.instructionKey]=R[I])}else w+"Fn"in o&&(R=o[w+"Fn"](R,a)),G[o[w+"Key"]]=R;o.addParent&&(G[o.parentKey]=a),a[o.elementsKey].push(G)}}function d(w){if("attributesFn"in o&&w&&(w=o.attributesFn(w,a)),(o.trim||"attributeValueFn"in o||"attributeNameFn"in o||o.nativeTypeAttributes)&&w){var R;for(R in w)if(w.hasOwnProperty(R)&&(o.trim&&(w[R]=w[R].trim()),o.nativeTypeAttributes&&(w[R]=u(w[R])),"attributeValueFn"in o&&(w[R]=o.attributeValueFn(w[R],R,a)),"attributeNameFn"in o)){var I=w[R];delete w[R],w[o.attributeNameFn(R,w[R],a)]=I}}return w}function f(w){var R={};if(w.body&&(w.name.toLowerCase()==="xml"||o.instructionHasAttributes)){for(var I=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,k;(k=I.exec(w.body))!==null;)R[k[1]]=k[2]||k[3]||k[4];R=d(R)}if(w.name.toLowerCase()==="xml"){if(o.ignoreDeclaration)return;a[o.declarationKey]={},Object.keys(R).length&&(a[o.declarationKey][o.attributesKey]=R),o.addParent&&(a[o.declarationKey][o.parentKey]=a)}else{if(o.ignoreInstruction)return;o.trim&&(w.body=w.body.trim());var G={};o.instructionHasAttributes&&Object.keys(R).length?(G[w.name]={},G[w.name][o.attributesKey]=R):G[w.name]=w.body,l("instruction",G)}}function h(w,R){var I;if(typeof w=="object"&&(R=w.attributes,w=w.name),R=d(R),"elementNameFn"in o&&(w=o.elementNameFn(w,a)),o.compact){if(I={},!o.ignoreAttributes&&R&&Object.keys(R).length){I[o.attributesKey]={};var k;for(k in R)R.hasOwnProperty(k)&&(I[o.attributesKey][k]=R[k])}!(w in a)&&(t(o.alwaysArray)?o.alwaysArray.indexOf(w)!==-1:o.alwaysArray)&&(a[w]=[]),a[w]&&!t(a[w])&&(a[w]=[a[w]]),t(a[w])?a[w].push(I):a[w]=I}else a[o.elementsKey]||(a[o.elementsKey]=[]),I={},I[o.typeKey]="element",I[o.nameKey]=w,!o.ignoreAttributes&&R&&Object.keys(R).length&&(I[o.attributesKey]=R),o.alwaysChildren&&(I[o.elementsKey]=[]),a[o.elementsKey].push(I);I[o.parentKey]=a,a=I}function S(w){o.ignoreText||!w.trim()&&!o.captureSpacesBetweenElements||(o.trim&&(w=w.trim()),o.nativeType&&(w=u(w)),o.sanitize&&(w=w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l("text",w))}function b(w){o.ignoreComment||(o.trim&&(w=w.trim()),l("comment",w))}function p(w){var R=a[o.parentKey];o.addParent||delete a[o.parentKey],a=R}function j(w){o.ignoreCdata||(o.trim&&(w=w.trim()),l("cdata",w))}function N(w){o.ignoreDoctype||(w=w.replace(/^ /,""),o.trim&&(w=w.trim()),l("doctype",w))}function A(w){w.note=w}return Cm=function(w,R){var I=r.parser(!0,{}),k={};if(a=k,o=s(R),I.opt={strictEntities:!0},I.onopentag=h,I.ontext=S,I.oncomment=b,I.onclosetag=p,I.onerror=A,I.oncdata=j,I.ondoctype=N,I.onprocessinginstruction=f,I.write(w).close(),k[o.elementsKey]){var G=k[o.elementsKey];delete k[o.elementsKey],k[o.elementsKey]=G,delete k.text}return k},Cm}var Lm,My;function T4(){if(My)return Lm;My=1;var r=Q1(),e=S5();function t(o){var a=r.copyOptions(o);return r.ensureSpacesExists(a),a}return Lm=function(o,a){var s,u,l,d;return s=t(a),u=e(o,s),d="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?l=JSON.stringify(u,function(f,h){return f===d?"_":h},s.spaces):l=JSON.stringify(u,null,s.spaces),l.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},Lm}var Im,zy;function k5(){if(zy)return Im;zy=1;var r=Q1(),e=Z1().isArray,t,o;function a(I){var k=r.copyOptions(I);return r.ensureFlagExists("ignoreDeclaration",k),r.ensureFlagExists("ignoreInstruction",k),r.ensureFlagExists("ignoreAttributes",k),r.ensureFlagExists("ignoreText",k),r.ensureFlagExists("ignoreComment",k),r.ensureFlagExists("ignoreCdata",k),r.ensureFlagExists("ignoreDoctype",k),r.ensureFlagExists("compact",k),r.ensureFlagExists("indentText",k),r.ensureFlagExists("indentCdata",k),r.ensureFlagExists("indentAttributes",k),r.ensureFlagExists("indentInstruction",k),r.ensureFlagExists("fullTagEmptyElement",k),r.ensureFlagExists("noQuotesForNativeAttributes",k),r.ensureSpacesExists(k),typeof k.spaces=="number"&&(k.spaces=Array(k.spaces+1).join(" ")),r.ensureKeyExists("declaration",k),r.ensureKeyExists("instruction",k),r.ensureKeyExists("attributes",k),r.ensureKeyExists("text",k),r.ensureKeyExists("comment",k),r.ensureKeyExists("cdata",k),r.ensureKeyExists("doctype",k),r.ensureKeyExists("type",k),r.ensureKeyExists("name",k),r.ensureKeyExists("elements",k),r.checkFnExists("doctype",k),r.checkFnExists("instruction",k),r.checkFnExists("cdata",k),r.checkFnExists("comment",k),r.checkFnExists("text",k),r.checkFnExists("instructionName",k),r.checkFnExists("elementName",k),r.checkFnExists("attributeName",k),r.checkFnExists("attributeValue",k),r.checkFnExists("attributes",k),r.checkFnExists("fullTagEmptyElement",k),k}function s(I,k,G){return(!G&&I.spaces?`
`:"")+Array(k+1).join(I.spaces)}function u(I,k,G){if(k.ignoreAttributes)return"";"attributesFn"in k&&(I=k.attributesFn(I,o,t));var re,Q,ie,U,ue=[];for(re in I)I.hasOwnProperty(re)&&I[re]!==null&&I[re]!==void 0&&(U=k.noQuotesForNativeAttributes&&typeof I[re]!="string"?"":'"',Q=""+I[re],Q=Q.replace(/"/g,"&quot;"),ie="attributeNameFn"in k?k.attributeNameFn(re,Q,o,t):re,ue.push(k.spaces&&k.indentAttributes?s(k,G+1,!1):" "),ue.push(ie+"="+U+("attributeValueFn"in k?k.attributeValueFn(Q,re,o,t):Q)+U));return I&&Object.keys(I).length&&k.spaces&&k.indentAttributes&&ue.push(s(k,G,!1)),ue.join("")}function l(I,k,G){return t=I,o="xml",k.ignoreDeclaration?"":"<?xml"+u(I[k.attributesKey],k,G)+"?>"}function d(I,k,G){if(k.ignoreInstruction)return"";var re;for(re in I)if(I.hasOwnProperty(re))break;var Q="instructionNameFn"in k?k.instructionNameFn(re,I[re],o,t):re;if(typeof I[re]=="object")return t=I,o=Q,"<?"+Q+u(I[re][k.attributesKey],k,G)+"?>";var ie=I[re]?I[re]:"";return"instructionFn"in k&&(ie=k.instructionFn(ie,re,o,t)),"<?"+Q+(ie?" "+ie:"")+"?>"}function f(I,k){return k.ignoreComment?"":"<!--"+("commentFn"in k?k.commentFn(I,o,t):I)+"-->"}function h(I,k){return k.ignoreCdata?"":"<![CDATA["+("cdataFn"in k?k.cdataFn(I,o,t):I.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function S(I,k){return k.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in k?k.doctypeFn(I,o,t):I)+">"}function b(I,k){return k.ignoreText?"":(I=""+I,I=I.replace(/&amp;/g,"&"),I=I.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in k?k.textFn(I,o,t):I)}function p(I,k){var G;if(I.elements&&I.elements.length)for(G=0;G<I.elements.length;++G)switch(I.elements[G][k.typeKey]){case"text":if(k.indentText)return!0;break;case"cdata":if(k.indentCdata)return!0;break;case"instruction":if(k.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function j(I,k,G){t=I,o=I.name;var re=[],Q="elementNameFn"in k?k.elementNameFn(I.name,I):I.name;re.push("<"+Q),I[k.attributesKey]&&re.push(u(I[k.attributesKey],k,G));var ie=I[k.elementsKey]&&I[k.elementsKey].length||I[k.attributesKey]&&I[k.attributesKey]["xml:space"]==="preserve";return ie||("fullTagEmptyElementFn"in k?ie=k.fullTagEmptyElementFn(I.name,I):ie=k.fullTagEmptyElement),ie?(re.push(">"),I[k.elementsKey]&&I[k.elementsKey].length&&(re.push(N(I[k.elementsKey],k,G+1)),t=I,o=I.name),re.push(k.spaces&&p(I,k)?`
`+Array(G+1).join(k.spaces):""),re.push("</"+Q+">")):re.push("/>"),re.join("")}function N(I,k,G,re){return I.reduce(function(Q,ie){var U=s(k,G,re&&!Q);switch(ie.type){case"element":return Q+U+j(ie,k,G);case"comment":return Q+U+f(ie[k.commentKey],k);case"doctype":return Q+U+S(ie[k.doctypeKey],k);case"cdata":return Q+(k.indentCdata?U:"")+h(ie[k.cdataKey],k);case"text":return Q+(k.indentText?U:"")+b(ie[k.textKey],k);case"instruction":var ue={};return ue[ie[k.nameKey]]=ie[k.attributesKey]?ie:ie[k.instructionKey],Q+(k.indentInstruction?U:"")+d(ue,k,G)}},"")}function A(I,k,G){var re;for(re in I)if(I.hasOwnProperty(re))switch(re){case k.parentKey:case k.attributesKey:break;case k.textKey:if(k.indentText||G)return!0;break;case k.cdataKey:if(k.indentCdata||G)return!0;break;case k.instructionKey:if(k.indentInstruction||G)return!0;break;case k.doctypeKey:case k.commentKey:return!0;default:return!0}return!1}function w(I,k,G,re,Q){t=I,o=k;var ie="elementNameFn"in G?G.elementNameFn(k,I):k;if(typeof I>"u"||I===null||I==="")return"fullTagEmptyElementFn"in G&&G.fullTagEmptyElementFn(k,I)||G.fullTagEmptyElement?"<"+ie+"></"+ie+">":"<"+ie+"/>";var U=[];if(k){if(U.push("<"+ie),typeof I!="object")return U.push(">"+b(I,G)+"</"+ie+">"),U.join("");I[G.attributesKey]&&U.push(u(I[G.attributesKey],G,re));var ue=A(I,G,!0)||I[G.attributesKey]&&I[G.attributesKey]["xml:space"]==="preserve";if(ue||("fullTagEmptyElementFn"in G?ue=G.fullTagEmptyElementFn(k,I):ue=G.fullTagEmptyElement),ue)U.push(">");else return U.push("/>"),U.join("")}return U.push(R(I,G,re+1,!1)),t=I,o=k,k&&U.push((Q?s(G,re,!1):"")+"</"+ie+">"),U.join("")}function R(I,k,G,re){var Q,ie,U,ue=[];for(ie in I)if(I.hasOwnProperty(ie))for(U=e(I[ie])?I[ie]:[I[ie]],Q=0;Q<U.length;++Q){switch(ie){case k.declarationKey:ue.push(l(U[Q],k,G));break;case k.instructionKey:ue.push((k.indentInstruction?s(k,G,re):"")+d(U[Q],k,G));break;case k.attributesKey:case k.parentKey:break;case k.textKey:ue.push((k.indentText?s(k,G,re):"")+b(U[Q],k));break;case k.cdataKey:ue.push((k.indentCdata?s(k,G,re):"")+h(U[Q],k));break;case k.doctypeKey:ue.push(s(k,G,re)+S(U[Q],k));break;case k.commentKey:ue.push(s(k,G,re)+f(U[Q],k));break;default:ue.push(s(k,G,re)+w(U[Q],ie,k,G,A(U[Q],k)))}re=re&&!ue.length}return ue.join("")}return Im=function(I,k){k=a(k);var G=[];return t=I,o="_root_",k.compact?G.push(R(I,k,0,!0)):(I[k.declarationKey]&&G.push(l(I[k.declarationKey],k,0)),I[k.elementsKey]&&I[k.elementsKey].length&&G.push(N(I[k.elementsKey],k,0,!G.length))),G.join("")},Im}var Rm,$y;function C4(){if($y)return Rm;$y=1;var r=k5();return Rm=function(e,t){e instanceof Buffer&&(e=e.toString());var o=null;if(typeof e=="string")try{o=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else o=e;return r(o,t)},Rm}var jm,Uy;function L4(){if(Uy)return jm;Uy=1;var r=S5(),e=T4(),t=k5(),o=C4();return jm={xml2js:r,xml2json:e,js2xml:t,json2xml:o},jm}var A5=L4();const e0=r=>{switch(r.type){case void 0:case"element":const e=new R4(r.name,r.attributes),t=r.elements||[];for(const o of t){const a=e0(o);a!==void 0&&e.push(a)}return e;case"text":return r.text;default:return}};class I4 extends Ir{}class R4 extends Rt{static fromXmlString(e){const t=A5.xml2js(e,{compact:!1});return e0(t)}constructor(e,t){super(e),t&&this.root.push(new I4(t))}push(e){this.root.push(e)}}class j4 extends Rt{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class N5 extends Rt{constructor(e,t){super(e),t&&(this.root=t.root)}}const Sa=r=>{if(isNaN(r))throw new Error(`Invalid value '${r}' specified. Must be an integer.`);return Math.floor(r)},Nh=r=>{const e=Sa(r);if(e<0)throw new Error(`Invalid value '${r}' specified. Must be a positive integer.`);return e},E5=(r,e)=>{const t=e*2;if(r.length!==t||isNaN(+`0x${r}`))throw new Error(`Invalid hex value '${r}'. Expected ${t} digit hex value`);return r},qy=r=>E5(r,1),T5=r=>{const e=r.slice(-2),t=r.substring(0,r.length-2);return`${Number(t)}${e}`},C5=r=>{const e=T5(r);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},xd=r=>{if(r==="auto")return r;const e=r.charAt(0)==="#"?r.substring(1):r;return E5(e,3)},Ou=r=>typeof r=="string"?T5(r):Sa(r),P4=r=>typeof r=="string"?C5(r):Nh(r),Ll=r=>typeof r=="string"?C5(r):Nh(r),D4=Nh,O4=Nh,F4=r=>r.toISOString();class Pt extends Rt{constructor(e,t=!0){super(e),t!==!0&&this.root.push(new Yo({val:t}))}}class Pm extends Rt{constructor(e,t){super(e),this.root.push(new Yo({val:P4(t)}))}}class dd extends Rt{constructor(e,t){super(e),this.root.push(new Yo({val:t}))}}const $d=(r,e)=>new sc({name:r,attributes:{value:{key:"w:val",value:e}}});class Vd extends Rt{constructor(e,t){super(e),this.root.push(new Yo({val:t}))}}class Tu extends Rt{constructor(e,t){super(e),this.root.push(t)}}class sc extends Rt{constructor({name:e,attributes:t,children:o}){super(e),t&&this.root.push(new Sh(t)),o&&this.root.push(...o)}}const ec={START:"start",LEFT:"left"};class B4 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class M4 extends Rt{constructor(e){super("w:jc"),this.root.push(new B4({val:e}))}}class Uo extends Rt{constructor(e,{color:t,size:o,space:a,style:s}){super(e),this.root.push(new z4({style:s,color:t===void 0?void 0:xd(t),size:o===void 0?void 0:D4(o),space:a===void 0?void 0:O4(a)}))}}class z4 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const t0={SINGLE:"single",NONE:"none"};class $4 extends _h{constructor(e){super("w:pBdr"),e.top&&this.root.push(new Uo("w:top",e.top)),e.bottom&&this.root.push(new Uo("w:bottom",e.bottom)),e.left&&this.root.push(new Uo("w:left",e.left)),e.right&&this.root.push(new Uo("w:right",e.right))}}class U4 extends Rt{constructor(){super("w:pBdr");const e=new Uo("w:bottom",{color:"auto",space:1,style:t0.SINGLE,size:6});this.root.push(e)}}class q4 extends Rt{constructor({start:e,end:t,left:o,right:a,hanging:s,firstLine:u}){super("w:ind"),this.root.push(new Sh({start:{key:"w:start",value:e===void 0?void 0:Ou(e)},end:{key:"w:end",value:t===void 0?void 0:Ou(t)},left:{key:"w:left",value:o===void 0?void 0:Ou(o)},right:{key:"w:right",value:a===void 0?void 0:Ou(a)},hanging:{key:"w:hanging",value:s===void 0?void 0:Ll(s)},firstLine:{key:"w:firstLine",value:u===void 0?void 0:Ll(u)}}))}}let W4=class extends Rt{constructor(){super("w:br")}};const n0={BEGIN:"begin",END:"end",SEPARATE:"separate"};class r0 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Bf extends Rt{constructor(e){super("w:fldChar"),this.root.push(new r0({type:n0.BEGIN,dirty:e}))}}class Mf extends Rt{constructor(e){super("w:fldChar"),this.root.push(new r0({type:n0.SEPARATE,dirty:e}))}}class zf extends Rt{constructor(e){super("w:fldChar"),this.root.push(new r0({type:n0.END,dirty:e}))}}const bd={DEFAULT:"default",PRESERVE:"preserve"};class _d extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{space:"xml:space"})}}class H4 extends Rt{constructor(){super("w:instrText"),this.root.push(new _d({space:bd.PRESERVE})),this.root.push("PAGE")}}class G4 extends Rt{constructor(){super("w:instrText"),this.root.push(new _d({space:bd.PRESERVE})),this.root.push("NUMPAGES")}}class K4 extends Rt{constructor(){super("w:instrText"),this.root.push(new _d({space:bd.PRESERVE})),this.root.push("SECTIONPAGES")}}class V4 extends Rt{constructor(){super("w:instrText"),this.root.push(new _d({space:bd.PRESERVE})),this.root.push("SECTION")}}class X4 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class L5 extends Rt{constructor({fill:e,color:t,type:o}){super("w:shd"),this.root.push(new X4({fill:e===void 0?void 0:xd(e),color:t===void 0?void 0:xd(t),type:o}))}}class Y4 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const J4={DOT:"dot"};class Z4 extends Rt{constructor(e){super("w:em"),this.root.push(new Yo({val:e}))}}class Q4 extends Z4{constructor(e=J4.DOT){super(e)}}class e_ extends Rt{constructor(e){super("w:spacing"),this.root.push(new Yo({val:Ou(e)}))}}class t_ extends Rt{constructor(e){super("w:color"),this.root.push(new Yo({val:xd(e)}))}}class n_ extends Rt{constructor(e){super("w:highlight"),this.root.push(new Yo({val:e}))}}class r_ extends Rt{constructor(e){super("w:highlightCs"),this.root.push(new Yo({val:e}))}}const i_=r=>new sc({name:"w:lang",attributes:{value:{key:"w:val",value:r.value},eastAsia:{key:"w:eastAsia",value:r.eastAsia},bidirectional:{key:"w:bidi",value:r.bidirectional}}});class Wy extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class Dm extends Rt{constructor(e,t){if(super("w:rFonts"),typeof e=="string"){const o=e;this.root.push(new Wy({ascii:o,cs:o,eastAsia:o,hAnsi:o,hint:t}))}else{const o=e;this.root.push(new Wy(o))}}}let I5=class extends Rt{constructor(e){super("w:vertAlign"),this.root.push(new Yo({val:e}))}};class o_ extends I5{constructor(){super("superscript")}}class s_ extends I5{constructor(){super("subscript")}}const R5={SINGLE:"single"};class a_ extends Rt{constructor(e=R5.SINGLE,t){super("w:u"),this.root.push(new Yo({val:e,color:t===void 0?void 0:xd(t)}))}}class zu extends _h{constructor(e){var t,o;if(super("w:rPr"),!e)return;e.style&&this.push(new dd("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new Dm(e.font)):"name"in e.font?this.push(new Dm(e.font.name,e.font.hint)):this.push(new Dm(e.font))),e.bold!==void 0&&this.push(new Pt("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new Pt("w:bCs",(t=e.boldComplexScript)!=null?t:e.bold)),e.italics!==void 0&&this.push(new Pt("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new Pt("w:iCs",(o=e.italicsComplexScript)!=null?o:e.italics)),e.smallCaps!==void 0?this.push(new Pt("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new Pt("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new Pt("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new Pt("w:dstrike",e.doubleStrike)),e.emboss!==void 0&&this.push(new Pt("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new Pt("w:imprint",e.imprint)),e.noProof!==void 0&&this.push(new Pt("w:noProof",e.noProof)),e.snapToGrid!==void 0&&this.push(new Pt("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new Pt("w:vanish",e.vanish)),e.color&&this.push(new t_(e.color)),e.characterSpacing&&this.push(new e_(e.characterSpacing)),e.scale!==void 0&&this.push(new Vd("w:w",e.scale)),e.kern&&this.push(new Pm("w:kern",e.kern)),e.position&&this.push(new dd("w:position",e.position)),e.size!==void 0&&this.push(new Pm("w:sz",e.size));const a=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;a&&this.push(new Pm("w:szCs",a)),e.highlight&&this.push(new n_(e.highlight));const s=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;s&&this.push(new r_(s)),e.underline&&this.push(new a_(e.underline.type,e.underline.color)),e.effect&&this.push(new dd("w:effect",e.effect)),e.border&&this.push(new Uo("w:bdr",e.border)),e.shading&&this.push(new L5(e.shading)),e.subScript&&this.push(new s_),e.superScript&&this.push(new o_),e.rightToLeft!==void 0&&this.push(new Pt("w:rtl",e.rightToLeft)),e.emphasisMark&&this.push(new Q4(e.emphasisMark.type)),e.language&&this.push(i_(e.language)),e.specVanish&&this.push(new Pt("w:specVanish",e.vanish)),e.math&&this.push(new Pt("w:oMath",e.math)),e.revision&&this.push(new l_(e.revision))}push(e){this.root.push(e)}}class l_ extends Rt{constructor(e){super("w:rPrChange"),this.root.push(new Y4({id:e.id,author:e.author,date:e.date})),this.addChildElement(new zu(e))}}class Hy extends Rt{constructor(e){var t;super("w:t"),typeof e=="string"?(this.root.push(new _d({space:bd.PRESERVE})),this.root.push(e)):(this.root.push(new _d({space:(t=e.space)!=null?t:bd.DEFAULT})),this.root.push(e.text))}}const $f={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Eh extends Rt{constructor(e){if(super("w:r"),At(this,"properties"),this.properties=new zu(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new W4);if(e.children)for(const t of e.children){if(typeof t=="string"){switch(t){case $f.CURRENT:this.root.push(new Bf),this.root.push(new H4),this.root.push(new Mf),this.root.push(new zf);break;case $f.TOTAL_PAGES:this.root.push(new Bf),this.root.push(new G4),this.root.push(new Mf),this.root.push(new zf);break;case $f.TOTAL_PAGES_IN_SECTION:this.root.push(new Bf),this.root.push(new K4),this.root.push(new Mf),this.root.push(new zf);break;case $f.CURRENT_SECTION:this.root.push(new Bf),this.root.push(new V4),this.root.push(new Mf),this.root.push(new zf);break;default:this.root.push(new Hy(t));break}continue}this.root.push(t)}else e.text!==void 0&&this.root.push(new Hy(e.text))}}class yh extends Eh{constructor(e){super(typeof e=="string"?{text:e}:e)}}var Om={},ro={},Fm,Gy;function lf(){if(Gy)return Fm;Gy=1,Fm=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,o,a){if(t!=o)throw new Error(a||"Assertion failed: "+t+" != "+o)},Fm}var Ky;function ac(){if(Ky)return ro;Ky=1;var r=lf(),e=du();ro.inherits=e;function t(B,te){return(B.charCodeAt(te)&64512)!==55296||te<0||te+1>=B.length?!1:(B.charCodeAt(te+1)&64512)===56320}function o(B,te){if(Array.isArray(B))return B.slice();if(!B)return[];var P=[];if(typeof B=="string")if(te){if(te==="hex")for(B=B.replace(/[^a-z0-9]+/ig,""),B.length%2!==0&&(B="0"+B),Ae=0;Ae<B.length;Ae+=2)P.push(parseInt(B[Ae]+B[Ae+1],16))}else for(var be=0,Ae=0;Ae<B.length;Ae++){var ge=B.charCodeAt(Ae);ge<128?P[be++]=ge:ge<2048?(P[be++]=ge>>6|192,P[be++]=ge&63|128):t(B,Ae)?(ge=65536+((ge&1023)<<10)+(B.charCodeAt(++Ae)&1023),P[be++]=ge>>18|240,P[be++]=ge>>12&63|128,P[be++]=ge>>6&63|128,P[be++]=ge&63|128):(P[be++]=ge>>12|224,P[be++]=ge>>6&63|128,P[be++]=ge&63|128)}else for(Ae=0;Ae<B.length;Ae++)P[Ae]=B[Ae]|0;return P}ro.toArray=o;function a(B){for(var te="",P=0;P<B.length;P++)te+=l(B[P].toString(16));return te}ro.toHex=a;function s(B){var te=B>>>24|B>>>8&65280|B<<8&16711680|(B&255)<<24;return te>>>0}ro.htonl=s;function u(B,te){for(var P="",be=0;be<B.length;be++){var Ae=B[be];te==="little"&&(Ae=s(Ae)),P+=d(Ae.toString(16))}return P}ro.toHex32=u;function l(B){return B.length===1?"0"+B:B}ro.zero2=l;function d(B){return B.length===7?"0"+B:B.length===6?"00"+B:B.length===5?"000"+B:B.length===4?"0000"+B:B.length===3?"00000"+B:B.length===2?"000000"+B:B.length===1?"0000000"+B:B}ro.zero8=d;function f(B,te,P,be){var Ae=P-te;r(Ae%4===0);for(var ge=new Array(Ae/4),xe=0,ke=te;xe<ge.length;xe++,ke+=4){var Fe;be==="big"?Fe=B[ke]<<24|B[ke+1]<<16|B[ke+2]<<8|B[ke+3]:Fe=B[ke+3]<<24|B[ke+2]<<16|B[ke+1]<<8|B[ke],ge[xe]=Fe>>>0}return ge}ro.join32=f;function h(B,te){for(var P=new Array(B.length*4),be=0,Ae=0;be<B.length;be++,Ae+=4){var ge=B[be];te==="big"?(P[Ae]=ge>>>24,P[Ae+1]=ge>>>16&255,P[Ae+2]=ge>>>8&255,P[Ae+3]=ge&255):(P[Ae+3]=ge>>>24,P[Ae+2]=ge>>>16&255,P[Ae+1]=ge>>>8&255,P[Ae]=ge&255)}return P}ro.split32=h;function S(B,te){return B>>>te|B<<32-te}ro.rotr32=S;function b(B,te){return B<<te|B>>>32-te}ro.rotl32=b;function p(B,te){return B+te>>>0}ro.sum32=p;function j(B,te,P){return B+te+P>>>0}ro.sum32_3=j;function N(B,te,P,be){return B+te+P+be>>>0}ro.sum32_4=N;function A(B,te,P,be,Ae){return B+te+P+be+Ae>>>0}ro.sum32_5=A;function w(B,te,P,be){var Ae=B[te],ge=B[te+1],xe=be+ge>>>0,ke=(xe<be?1:0)+P+Ae;B[te]=ke>>>0,B[te+1]=xe}ro.sum64=w;function R(B,te,P,be){var Ae=te+be>>>0,ge=(Ae<te?1:0)+B+P;return ge>>>0}ro.sum64_hi=R;function I(B,te,P,be){var Ae=te+be;return Ae>>>0}ro.sum64_lo=I;function k(B,te,P,be,Ae,ge,xe,ke){var Fe=0,J=te;J=J+be>>>0,Fe+=J<te?1:0,J=J+ge>>>0,Fe+=J<ge?1:0,J=J+ke>>>0,Fe+=J<ke?1:0;var C=B+P+Ae+xe+Fe;return C>>>0}ro.sum64_4_hi=k;function G(B,te,P,be,Ae,ge,xe,ke){var Fe=te+be+ge+ke;return Fe>>>0}ro.sum64_4_lo=G;function re(B,te,P,be,Ae,ge,xe,ke,Fe,J){var C=0,Z=te;Z=Z+be>>>0,C+=Z<te?1:0,Z=Z+ge>>>0,C+=Z<ge?1:0,Z=Z+ke>>>0,C+=Z<ke?1:0,Z=Z+J>>>0,C+=Z<J?1:0;var ne=B+P+Ae+xe+Fe+C;return ne>>>0}ro.sum64_5_hi=re;function Q(B,te,P,be,Ae,ge,xe,ke,Fe,J){var C=te+be+ge+ke+J;return C>>>0}ro.sum64_5_lo=Q;function ie(B,te,P){var be=te<<32-P|B>>>P;return be>>>0}ro.rotr64_hi=ie;function U(B,te,P){var be=B<<32-P|te>>>P;return be>>>0}ro.rotr64_lo=U;function ue(B,te,P){return B>>>P}ro.shr64_hi=ue;function oe(B,te,P){var be=B<<32-P|te>>>P;return be>>>0}return ro.shr64_lo=oe,ro}var Bm={},Vy;function cf(){if(Vy)return Bm;Vy=1;var r=ac(),e=lf();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Bm.BlockHash=t,t.prototype.update=function(a,s){if(a=r.toArray(a,s),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var u=a.length%this._delta8;this.pending=a.slice(a.length-u,a.length),this.pending.length===0&&(this.pending=null),a=r.join32(a,0,a.length-u,this.endian);for(var l=0;l<a.length;l+=this._delta32)this._update(a,l,l+this._delta32)}return this},t.prototype.digest=function(a){return this.update(this._pad()),e(this.pending===null),this._digest(a)},t.prototype._pad=function(){var a=this.pendingTotal,s=this._delta8,u=s-(a+this.padLength)%s,l=new Array(u+this.padLength);l[0]=128;for(var d=1;d<u;d++)l[d]=0;if(a<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)l[d++]=0;l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=a>>>24&255,l[d++]=a>>>16&255,l[d++]=a>>>8&255,l[d++]=a&255}else for(l[d++]=a&255,l[d++]=a>>>8&255,l[d++]=a>>>16&255,l[d++]=a>>>24&255,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,f=8;f<this.padLength;f++)l[d++]=0;return l},Bm}var Cu={},Zl={},Xy;function j5(){if(Xy)return Zl;Xy=1;var r=ac(),e=r.rotr32;function t(h,S,b,p){if(h===0)return o(S,b,p);if(h===1||h===3)return s(S,b,p);if(h===2)return a(S,b,p)}Zl.ft_1=t;function o(h,S,b){return h&S^~h&b}Zl.ch32=o;function a(h,S,b){return h&S^h&b^S&b}Zl.maj32=a;function s(h,S,b){return h^S^b}Zl.p32=s;function u(h){return e(h,2)^e(h,13)^e(h,22)}Zl.s0_256=u;function l(h){return e(h,6)^e(h,11)^e(h,25)}Zl.s1_256=l;function d(h){return e(h,7)^e(h,18)^h>>>3}Zl.g0_256=d;function f(h){return e(h,17)^e(h,19)^h>>>10}return Zl.g1_256=f,Zl}var Mm,Yy;function c_(){if(Yy)return Mm;Yy=1;var r=ac(),e=cf(),t=j5(),o=r.rotl32,a=r.sum32,s=r.sum32_5,u=t.ft_1,l=e.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(f,l),Mm=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(S,b){for(var p=this.W,j=0;j<16;j++)p[j]=S[b+j];for(;j<p.length;j++)p[j]=o(p[j-3]^p[j-8]^p[j-14]^p[j-16],1);var N=this.h[0],A=this.h[1],w=this.h[2],R=this.h[3],I=this.h[4];for(j=0;j<p.length;j++){var k=~~(j/20),G=s(o(N,5),u(k,A,w,R),I,p[j],d[k]);I=R,R=w,w=o(A,30),A=N,N=G}this.h[0]=a(this.h[0],N),this.h[1]=a(this.h[1],A),this.h[2]=a(this.h[2],w),this.h[3]=a(this.h[3],R),this.h[4]=a(this.h[4],I)},f.prototype._digest=function(S){return S==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Mm}var zm,Jy;function P5(){if(Jy)return zm;Jy=1;var r=ac(),e=cf(),t=j5(),o=lf(),a=r.sum32,s=r.sum32_4,u=r.sum32_5,l=t.ch32,d=t.maj32,f=t.s0_256,h=t.s1_256,S=t.g0_256,b=t.g1_256,p=e.BlockHash,j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function N(){if(!(this instanceof N))return new N;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=j,this.W=new Array(64)}return r.inherits(N,p),zm=N,N.blockSize=512,N.outSize=256,N.hmacStrength=192,N.padLength=64,N.prototype._update=function(w,R){for(var I=this.W,k=0;k<16;k++)I[k]=w[R+k];for(;k<I.length;k++)I[k]=s(b(I[k-2]),I[k-7],S(I[k-15]),I[k-16]);var G=this.h[0],re=this.h[1],Q=this.h[2],ie=this.h[3],U=this.h[4],ue=this.h[5],oe=this.h[6],B=this.h[7];for(o(this.k.length===I.length),k=0;k<I.length;k++){var te=u(B,h(U),l(U,ue,oe),this.k[k],I[k]),P=a(f(G),d(G,re,Q));B=oe,oe=ue,ue=U,U=a(ie,te),ie=Q,Q=re,re=G,G=a(te,P)}this.h[0]=a(this.h[0],G),this.h[1]=a(this.h[1],re),this.h[2]=a(this.h[2],Q),this.h[3]=a(this.h[3],ie),this.h[4]=a(this.h[4],U),this.h[5]=a(this.h[5],ue),this.h[6]=a(this.h[6],oe),this.h[7]=a(this.h[7],B)},N.prototype._digest=function(w){return w==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},zm}var $m,Zy;function u_(){if(Zy)return $m;Zy=1;var r=ac(),e=P5();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),$m=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(a){return a==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},$m}var Um,Qy;function D5(){if(Qy)return Um;Qy=1;var r=ac(),e=cf(),t=lf(),o=r.rotr64_hi,a=r.rotr64_lo,s=r.shr64_hi,u=r.shr64_lo,l=r.sum64,d=r.sum64_hi,f=r.sum64_lo,h=r.sum64_4_hi,S=r.sum64_4_lo,b=r.sum64_5_hi,p=r.sum64_5_lo,j=e.BlockHash,N=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function A(){if(!(this instanceof A))return new A;j.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=N,this.W=new Array(160)}r.inherits(A,j),Um=A,A.blockSize=1024,A.outSize=512,A.hmacStrength=192,A.padLength=128,A.prototype._prepareBlock=function(P,be){for(var Ae=this.W,ge=0;ge<32;ge++)Ae[ge]=P[be+ge];for(;ge<Ae.length;ge+=2){var xe=oe(Ae[ge-4],Ae[ge-3]),ke=B(Ae[ge-4],Ae[ge-3]),Fe=Ae[ge-14],J=Ae[ge-13],C=U(Ae[ge-30],Ae[ge-29]),Z=ue(Ae[ge-30],Ae[ge-29]),ne=Ae[ge-32],ye=Ae[ge-31];Ae[ge]=h(xe,ke,Fe,J,C,Z,ne,ye),Ae[ge+1]=S(xe,ke,Fe,J,C,Z,ne,ye)}},A.prototype._update=function(P,be){this._prepareBlock(P,be);var Ae=this.W,ge=this.h[0],xe=this.h[1],ke=this.h[2],Fe=this.h[3],J=this.h[4],C=this.h[5],Z=this.h[6],ne=this.h[7],ye=this.h[8],ce=this.h[9],M=this.h[10],z=this.h[11],fe=this.h[12],he=this.h[13],se=this.h[14],me=this.h[15];t(this.k.length===Ae.length);for(var Be=0;Be<Ae.length;Be+=2){var H=se,ee=me,X=Q(ye,ce),T=ie(ye,ce),L=w(ye,ce,M,z,fe),q=R(ye,ce,M,z,fe,he),Se=this.k[Be],Le=this.k[Be+1],Ee=Ae[Be],qe=Ae[Be+1],dt=b(H,ee,X,T,L,q,Se,Le,Ee,qe),ot=p(H,ee,X,T,L,q,Se,Le,Ee,qe);H=G(ge,xe),ee=re(ge,xe),X=I(ge,xe,ke,Fe,J),T=k(ge,xe,ke,Fe,J,C);var lt=d(H,ee,X,T),Nt=f(H,ee,X,T);se=fe,me=he,fe=M,he=z,M=ye,z=ce,ye=d(Z,ne,dt,ot),ce=f(ne,ne,dt,ot),Z=J,ne=C,J=ke,C=Fe,ke=ge,Fe=xe,ge=d(dt,ot,lt,Nt),xe=f(dt,ot,lt,Nt)}l(this.h,0,ge,xe),l(this.h,2,ke,Fe),l(this.h,4,J,C),l(this.h,6,Z,ne),l(this.h,8,ye,ce),l(this.h,10,M,z),l(this.h,12,fe,he),l(this.h,14,se,me)},A.prototype._digest=function(P){return P==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function w(te,P,be,Ae,ge){var xe=te&be^~te&ge;return xe<0&&(xe+=4294967296),xe}function R(te,P,be,Ae,ge,xe){var ke=P&Ae^~P&xe;return ke<0&&(ke+=4294967296),ke}function I(te,P,be,Ae,ge){var xe=te&be^te&ge^be&ge;return xe<0&&(xe+=4294967296),xe}function k(te,P,be,Ae,ge,xe){var ke=P&Ae^P&xe^Ae&xe;return ke<0&&(ke+=4294967296),ke}function G(te,P){var be=o(te,P,28),Ae=o(P,te,2),ge=o(P,te,7),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function re(te,P){var be=a(te,P,28),Ae=a(P,te,2),ge=a(P,te,7),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function Q(te,P){var be=o(te,P,14),Ae=o(te,P,18),ge=o(P,te,9),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function ie(te,P){var be=a(te,P,14),Ae=a(te,P,18),ge=a(P,te,9),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function U(te,P){var be=o(te,P,1),Ae=o(te,P,8),ge=s(te,P,7),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function ue(te,P){var be=a(te,P,1),Ae=a(te,P,8),ge=u(te,P,7),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function oe(te,P){var be=o(te,P,19),Ae=o(P,te,29),ge=s(te,P,6),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}function B(te,P){var be=a(te,P,19),Ae=a(P,te,29),ge=u(te,P,6),xe=be^Ae^ge;return xe<0&&(xe+=4294967296),xe}return Um}var qm,e2;function d_(){if(e2)return qm;e2=1;var r=ac(),e=D5();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),qm=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(a){return a==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},qm}var t2;function f_(){return t2||(t2=1,Cu.sha1=c_(),Cu.sha224=u_(),Cu.sha256=P5(),Cu.sha384=d_(),Cu.sha512=D5()),Cu}var Wm={},n2;function h_(){if(n2)return Wm;n2=1;var r=ac(),e=cf(),t=r.rotl32,o=r.sum32,a=r.sum32_3,s=r.sum32_4,u=e.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(l,u),Wm.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(A,w){for(var R=this.h[0],I=this.h[1],k=this.h[2],G=this.h[3],re=this.h[4],Q=R,ie=I,U=k,ue=G,oe=re,B=0;B<80;B++){var te=o(t(s(R,d(B,I,k,G),A[S[B]+w],f(B)),p[B]),re);R=re,re=G,G=t(k,10),k=I,I=te,te=o(t(s(Q,d(79-B,ie,U,ue),A[b[B]+w],h(B)),j[B]),oe),Q=oe,oe=ue,ue=t(U,10),U=ie,ie=te}te=a(this.h[1],k,ue),this.h[1]=a(this.h[2],G,oe),this.h[2]=a(this.h[3],re,Q),this.h[3]=a(this.h[4],R,ie),this.h[4]=a(this.h[0],I,U),this.h[0]=te},l.prototype._digest=function(A){return A==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function d(N,A,w,R){return N<=15?A^w^R:N<=31?A&w|~A&R:N<=47?(A|~w)^R:N<=63?A&R|w&~R:A^(w|~R)}function f(N){return N<=15?0:N<=31?1518500249:N<=47?1859775393:N<=63?2400959708:2840853838}function h(N){return N<=15?1352829926:N<=31?1548603684:N<=47?1836072691:N<=63?2053994217:0}var S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],j=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Wm}var Hm,r2;function p_(){if(r2)return Hm;r2=1;var r=ac(),e=lf();function t(o,a,s){if(!(this instanceof t))return new t(o,a,s);this.Hash=o,this.blockSize=o.blockSize/8,this.outSize=o.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(a,s))}return Hm=t,t.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),e(a.length<=this.blockSize);for(var s=a.length;s<this.blockSize;s++)a.push(0);for(s=0;s<a.length;s++)a[s]^=54;for(this.inner=new this.Hash().update(a),s=0;s<a.length;s++)a[s]^=106;this.outer=new this.Hash().update(a)},t.prototype.update=function(a,s){return this.inner.update(a,s),this},t.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)},Hm}var i2;function m_(){return i2||(i2=1,(function(r){var e=r;e.utils=ac(),e.common=cf(),e.sha=f_(),e.ripemd=h_(),e.hmac=p_(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Om)),Om}m_();let g_="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",y_=(r,e=21)=>(t=e)=>{let o="",a=t|0;for(;a--;)o+=r[Math.random()*r.length|0];return o},v_=(r=21)=>{let e="",t=r|0;for(;t--;)e+=g_[Math.random()*64|0];return e};const El=r=>Math.floor(r*72*20),i0=(r=0)=>{let e=r;return()=>++e},w_=()=>i0(),x_=()=>i0(1),b_=()=>i0(),__=()=>v_().toLowerCase(),Ud=r=>y_("1234567890abcdef",r)(),S_=()=>`${Ud(8)}-${Ud(4)}-${Ud(4)}-${Ud(4)}-${Ud(12)}`;class k_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{xmlns:"xmlns"})}}class A_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const N_={EXTERNAL:"External"};class E_ extends Rt{constructor(e,t,o,a){super("Relationship"),this.root.push(new A_({id:e,type:t,target:o,targetMode:a}))}}class $u extends Rt{constructor(){super("Relationships"),this.root.push(new k_({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,o,a){const s=new E_(`rId${e}`,t,o,a);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class T_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class C_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class L_ extends Rt{constructor({id:e,initials:t,author:o,date:a=new Date,children:s}){super("w:comment"),this.root.push(new T_({id:e,initials:t,author:o,date:a.toISOString()}));for(const u of s)this.root.push(u)}}class I_ extends Rt{constructor({children:e}){super("w:comments"),At(this,"relationships"),this.root.push(new C_({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const t of e)this.root.push(new L_(t));this.relationships=new $u}get Relationships(){return this.relationships}}class R_ extends Rt{constructor(){super("w:pageBreakBefore")}}const T1={AUTO:"auto"};class j_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class P_ extends Rt{constructor(e){super("w:spacing"),this.root.push(new j_(e))}}const Kd={HEADING_1:"Heading1",HEADING_2:"Heading2",HEADING_3:"Heading3",HEADING_4:"Heading4",HEADING_5:"Heading5",HEADING_6:"Heading6",TITLE:"Title"};let Uf=class extends Rt{constructor(e){super("w:pStyle"),this.root.push(new Yo({val:e}))}};class D_ extends Rt{constructor(e){super("w:tabs");for(const t of e)this.root.push(new F_(t))}}const o2={LEFT:"left",RIGHT:"right"};class O_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class F_ extends Rt{constructor({type:e,position:t,leader:o}){super("w:tab"),this.root.push(new O_({val:e,pos:t,leader:o}))}}class Gm extends Rt{constructor(e,t){super("w:numPr"),this.root.push(new B_(t)),this.root.push(new M_(e))}}class B_ extends Rt{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Yo({val:e}))}}class M_ extends Rt{constructor(e){super("w:numId"),this.root.push(new Yo({val:typeof e=="string"?`{${e}}`:e}))}}class z_ extends Rt{constructor(){super(...arguments),At(this,"fileChild",Symbol())}}class $_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class U_ extends Rt{constructor(e,t,o){super("w:hyperlink"),At(this,"linkId"),this.linkId=t;const a={history:1,anchor:o||void 0,id:o?void 0:`rId${this.linkId}`},s=new $_(a);this.root.push(s),e.forEach(u=>{this.root.push(u)})}}class q_ extends Rt{constructor(e){super("w:externalHyperlink"),this.options=e}}class W_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class H_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{id:"w:id"})}}class G_{constructor(e){At(this,"bookmarkUniqueNumericId",b_()),At(this,"start"),At(this,"children"),At(this,"end");const t=this.bookmarkUniqueNumericId();this.start=new K_(e.id,t),this.children=e.children,this.end=new V_(t)}}class K_ extends Rt{constructor(e,t){super("w:bookmarkStart");const o=new W_({name:e,id:t});this.root.push(o)}}class V_ extends Rt{constructor(e){super("w:bookmarkEnd");const t=new H_({id:e});this.root.push(t)}}class X_ extends Rt{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new Yo({val:e}))}}const Y_={TOP:"top",CENTER:"center",BOTTOM:"bottom"};vd(Si({},Y_),{BOTH:"both"});class J_ extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{verticalAlign:"w:val"})}}class Z_ extends Rt{constructor(e){super("w:vAlign"),this.root.push(new J_({verticalAlign:e}))}}class Q_ extends Rt{constructor({space:e,count:t,separate:o,equalWidth:a,children:s}){super("w:cols"),this.root.push(new Sh({space:{key:"w:space",value:e===void 0?void 0:Ll(e)},count:{key:"w:num",value:t===void 0?void 0:Sa(t)},separate:{key:"w:sep",value:o},equalWidth:{key:"w:equalWidth",value:a}})),!a&&s&&s.forEach(u=>this.addChildElement(u))}}const e3=({type:r,linePitch:e,charSpace:t})=>new sc({name:"w:docGrid",attributes:{type:{key:"w:type",value:r},linePitch:{key:"w:linePitch",value:Sa(e)},charSpace:{key:"w:charSpace",value:t?Sa(t):void 0}}}),fd={DEFAULT:"default",FIRST:"first",EVEN:"even"};class t3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const s2={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class Km extends Rt{constructor(e,t){super(e),this.root.push(new t3({type:t.type||fd.DEFAULT,id:`rId${t.id}`}))}}const n3=({countBy:r,start:e,restart:t,distance:o})=>new sc({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:r===void 0?void 0:Sa(r)},start:{key:"w:start",value:e===void 0?void 0:Sa(e)},restart:{key:"w:restart",value:t},distance:{key:"w:distance",value:o===void 0?void 0:Ll(o)}}});class a2 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class r3 extends _h{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new a2({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new a2({})),e.pageBorderTop&&this.root.push(new Uo("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new Uo("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new Uo("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new Uo("w:right",e.pageBorderRight))}}class i3 extends Rt{constructor(e,t,o,a,s,u,l){super("w:pgMar"),this.root.push(new Sh({top:{key:"w:top",value:Ou(e)},right:{key:"w:right",value:Ll(t)},bottom:{key:"w:bottom",value:Ou(o)},left:{key:"w:left",value:Ll(a)},header:{key:"w:header",value:Ll(s)},footer:{key:"w:footer",value:Ll(u)},gutter:{key:"w:gutter",value:Ll(l)}}))}}class o3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class s3 extends Rt{constructor({start:e,formatType:t,separator:o}){super("w:pgNumType"),this.root.push(new o3({start:e===void 0?void 0:Sa(e),formatType:t,separator:o}))}}const C1={PORTRAIT:"portrait",LANDSCAPE:"landscape"},a3=({width:r,height:e,orientation:t,code:o})=>{const a=Ll(r),s=Ll(e);return new sc({name:"w:pgSz",attributes:{width:{key:"w:w",value:t===C1.LANDSCAPE?s:a},height:{key:"w:h",value:t===C1.LANDSCAPE?a:s},orientation:{key:"w:orient",value:t},code:{key:"w:code",value:o}}})};class l3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class c3 extends Rt{constructor(e){super("w:textDirection"),this.root.push(new l3({val:e}))}}class u3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class d3 extends Rt{constructor(e){super("w:type"),this.root.push(new u3({val:e}))}}const Lu={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},Vm={WIDTH:11906,HEIGHT:16838,ORIENTATION:C1.PORTRAIT};class f3 extends Rt{constructor({page:{size:{width:e=Vm.WIDTH,height:t=Vm.HEIGHT,orientation:o=Vm.ORIENTATION}={},margin:{top:a=Lu.TOP,right:s=Lu.RIGHT,bottom:u=Lu.BOTTOM,left:l=Lu.LEFT,header:d=Lu.HEADER,footer:f=Lu.FOOTER,gutter:h=Lu.GUTTER}={},pageNumbers:S={},borders:b,textDirection:p}={},grid:{linePitch:j=360,charSpace:N,type:A}={},headerWrapperGroup:w={},footerWrapperGroup:R={},lineNumbers:I,titlePage:k,verticalAlign:G,column:re,type:Q}={}){super("w:sectPr"),this.addHeaderFooterGroup(s2.HEADER,w),this.addHeaderFooterGroup(s2.FOOTER,R),Q&&this.root.push(new d3(Q)),this.root.push(a3({width:e,height:t,orientation:o})),this.root.push(new i3(a,s,u,l,d,f,h)),b&&this.root.push(new r3(b)),I&&this.root.push(n3(I)),this.root.push(new s3(S)),re&&this.root.push(new Q_(re)),G&&this.root.push(new Z_(G)),k!==void 0&&this.root.push(new Pt("w:titlePg",k)),p&&this.root.push(new c3(p)),this.root.push(e3({linePitch:j,charSpace:N,type:A}))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new Km(e,{type:fd.DEFAULT,id:t.default.View.ReferenceId})),t.first&&this.root.push(new Km(e,{type:fd.FIRST,id:t.first.View.ReferenceId})),t.even&&this.root.push(new Km(e,{type:fd.EVEN,id:t.even.View.ReferenceId}))}}class h3 extends Rt{constructor(){super("w:body"),At(this,"sections",[])}addSection(e){const t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new f3(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const t=new au({}),o=new Sd({});return o.push(e),t.addChildElement(o),t}}const l2={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class Th extends Ir{constructor(e,t){super(Si({Ignorable:t},Object.fromEntries(e.map(o=>[o,l2[o]])))),At(this,"xmlKeys",Si({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(l2).map(o=>[o,`xmlns:${o}`]))))}}class p3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class m3 extends Rt{constructor(e){super("w:background"),this.root.push(new p3({color:e.color===void 0?void 0:xd(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:qy(e.themeShade),themeTint:e.themeTint===void 0?void 0:qy(e.themeTint)}))}}class g3 extends Rt{constructor(e){super("w:document"),At(this,"body"),this.root.push(new Th(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new h3,e.background&&this.root.push(new m3(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class O5{constructor(e){At(this,"document"),At(this,"relationships"),this.document=new g3(e),this.relationships=new $u}get View(){return this.document}get Relationships(){return this.relationships}}class y3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class v3 extends Rt{constructor(){super("w:wordWrap"),this.root.push(new y3({val:0}))}}const w3=r=>{var e,t;return new sc({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:r.anchorLock},dropCap:{key:"w:dropCap",value:r.dropCap},width:{key:"w:w",value:r.width},height:{key:"w:h",value:r.height},x:{key:"w:x",value:r.position?r.position.x:void 0},y:{key:"w:y",value:r.position?r.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:r.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:r.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=r.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(t=r.space)==null?void 0:t.vertical},rule:{key:"w:hRule",value:r.rule},alignmentX:{key:"w:xAlign",value:r.alignment?r.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:r.alignment?r.alignment.y:void 0},lines:{key:"w:lines",value:r.lines},wrap:{key:"w:wrap",value:r.wrap}}})};class Sd extends _h{constructor(e){var t,o;if(super("w:pPr"),At(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new Uf(e.heading)),e.bullet&&this.push(new Uf("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new Uf("ListParagraph"))),e.style&&this.push(new Uf(e.style)),e.keepNext!==void 0&&this.push(new Pt("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new Pt("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new R_),e.frame&&this.push(w3(e.frame)),e.widowControl!==void 0&&this.push(new Pt("w:widowControl",e.widowControl)),e.bullet&&this.push(new Gm(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(t=e.numbering.instance)!=null?t:0}),this.push(new Gm(`${e.numbering.reference}-${(o=e.numbering.instance)!=null?o:0}`,e.numbering.level))):e.numbering===!1&&this.push(new Gm(0,0)),e.border&&this.push(new $4(e.border)),e.thematicBreak&&this.push(new U4),e.shading&&this.push(new L5(e.shading)),e.wordWrap&&this.push(new v3),e.overflowPunctuation&&this.push(new Pt("w:overflowPunct",e.overflowPunctuation));const a=[...e.rightTabStop!==void 0?[{type:o2.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:o2.LEFT,position:e.leftTabStop}]:[]];a.length>0&&this.push(new D_(a)),e.bidirectional!==void 0&&this.push(new Pt("w:bidi",e.bidirectional)),e.spacing&&this.push(new P_(e.spacing)),e.indent&&this.push(new q4(e.indent)),e.contextualSpacing!==void 0&&this.push(new Pt("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new M4(e.alignment)),e.outlineLevel!==void 0&&this.push(new X_(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new Pt("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new Pt("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new zu(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof O5)for(const t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}}class au extends z_{constructor(e){if(super("w:p"),At(this,"properties"),typeof e=="string")return this.properties=new Sd({}),this.root.push(this.properties),this.root.push(new yh(e)),this;if(this.properties=new Sd(e),this.root.push(this.properties),e.text&&this.root.push(new yh(e.text)),e.children)for(const t of e.children){if(t instanceof G_){this.root.push(t.start);for(const o of t.children)this.root.push(o);this.root.push(t.end);continue}this.root.push(t)}}prepForXml(e){for(const t of this.root)if(t instanceof q_){const o=this.root.indexOf(t),a=new U_(t.options.children,__());e.viewWrapper.Relationships.createRelationship(a.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,N_.EXTERNAL),this.root[o]=a}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}const Yu={style:t0.NONE,size:0,color:"auto"},Ju={style:t0.SINGLE,size:4,color:"auto"};class x3 extends Rt{constructor(e){super("w:tblBorders"),e.top?this.root.push(new Uo("w:top",e.top)):this.root.push(new Uo("w:top",Ju)),e.left?this.root.push(new Uo("w:left",e.left)):this.root.push(new Uo("w:left",Ju)),e.bottom?this.root.push(new Uo("w:bottom",e.bottom)):this.root.push(new Uo("w:bottom",Ju)),e.right?this.root.push(new Uo("w:right",e.right)):this.root.push(new Uo("w:right",Ju)),e.insideHorizontal?this.root.push(new Uo("w:insideH",e.insideHorizontal)):this.root.push(new Uo("w:insideH",Ju)),e.insideVertical?this.root.push(new Uo("w:insideV",e.insideVertical)):this.root.push(new Uo("w:insideV",Ju))}}At(x3,"NONE",{top:Yu,bottom:Yu,left:Yu,right:Yu,insideHorizontal:Yu,insideVertical:Yu});class b3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class _3 extends Rt{constructor(){super("Properties"),this.root.push(new b3({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class S3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{xmlns:"xmlns"})}}class k3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Lc extends Rt{constructor(e,t){super("Default"),this.root.push(new k3({contentType:e,extension:t}))}}class A3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class ul extends Rt{constructor(e,t){super("Override"),this.root.push(new A3({contentType:e,partName:t}))}}class N3 extends Rt{constructor(){super("Types"),this.root.push(new S3({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Lc("image/png","png")),this.root.push(new Lc("image/jpeg","jpeg")),this.root.push(new Lc("image/jpeg","jpg")),this.root.push(new Lc("image/bmp","bmp")),this.root.push(new Lc("image/gif","gif")),this.root.push(new Lc("image/svg+xml","svg")),this.root.push(new Lc("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Lc("application/xml","xml")),this.root.push(new Lc("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new ul("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new ul("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class E3 extends Rt{constructor(e){super("cp:coreProperties"),this.root.push(new Th(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new Tu("dc:title",e.title)),e.subject&&this.root.push(new Tu("dc:subject",e.subject)),e.creator&&this.root.push(new Tu("dc:creator",e.creator)),e.keywords&&this.root.push(new Tu("cp:keywords",e.keywords)),e.description&&this.root.push(new Tu("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new Tu("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new Tu("cp:revision",String(e.revision))),this.root.push(new c2("dcterms:created")),this.root.push(new c2("dcterms:modified"))}}class T3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{type:"xsi:type"})}}class c2 extends Rt{constructor(e){super(e),this.root.push(new T3({type:"dcterms:W3CDTF"})),this.root.push(F4(new Date))}}class C3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class L3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class I3 extends Rt{constructor(e,t){super("property"),this.root.push(new L3({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new R3(t.value))}}class R3 extends Rt{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class j3 extends Rt{constructor(e){super("Properties"),At(this,"nextId"),At(this,"properties",[]),this.root.push(new C3({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new I3(this.nextId++,e))}}const qf=({id:r,fontKey:e,subsetted:t},o)=>new sc({name:o,attributes:Si({id:{key:"r:id",value:r}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...t?[new Pt("w:subsetted",t)]:[]]}),P3=({name:r,altName:e,panose1:t,charset:o,family:a,notTrueType:s,pitch:u,sig:l,embedRegular:d,embedBold:f,embedItalic:h,embedBoldItalic:S})=>new sc({name:"w:font",attributes:{name:{key:"w:name",value:r}},children:[...e?[$d("w:altName",e)]:[],...t?[$d("w:panose1",t)]:[],...o?[$d("w:charset",o)]:[],$d("w:family",a),...s?[new Pt("w:notTrueType",s)]:[],$d("w:pitch",u),...l?[new sc({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:l.usb0},usb1:{key:"w:usb1",value:l.usb1},usb2:{key:"w:usb2",value:l.usb2},usb3:{key:"w:usb3",value:l.usb3},csb0:{key:"w:csb0",value:l.csb0},csb1:{key:"w:csb1",value:l.csb1}}})]:[],...d?[qf(d,"w:embedRegular")]:[],...f?[qf(f,"w:embedBold")]:[],...h?[qf(h,"w:embedItalic")]:[],...S?[qf(S,"w:embedBoldItalic")]:[]]}),D3=({name:r,index:e,fontKey:t,characterSet:o})=>P3({name:r,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:o,family:"auto",pitch:"variable",embedRegular:{fontKey:t,id:`rId${e}`}}),O3=r=>new sc({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:r.map((e,t)=>D3({name:e.name,index:t+1,fontKey:e.fontKey}))});class F3{constructor(e){At(this,"fontTable"),At(this,"relationships"),At(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(t=>vd(Si({},t),{fontKey:S_()})),this.fontTable=O3(this.fontOptionsWithKey),this.relationships=new $u;for(let t=0;t<e.length;t++)this.relationships.createRelationship(t+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[t].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class B3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let M3=class extends N5{constructor(e,t){super("w:ftr",t),At(this,"refId"),this.refId=e,t||this.root.push(new B3({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class z3{constructor(e,t,o){At(this,"footer"),At(this,"relationships"),this.media=e,this.footer=new M3(t,o),this.relationships=new $u}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class $3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class U3 extends Rt{constructor(){super("w:footnoteRef")}}class q3 extends Eh{constructor(){super({style:"FootnoteReference"}),this.root.push(new U3)}}const u2={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Xm extends Rt{constructor(e){super("w:footnote"),this.root.push(new $3({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){const o=e.children[t];t===0&&o.addRunToFront(new q3),this.root.push(o)}}}class W3 extends Rt{constructor(){super("w:continuationSeparator")}}class H3 extends Eh{constructor(){super({}),this.root.push(new W3)}}class G3 extends Rt{constructor(){super("w:separator")}}class K3 extends Eh{constructor(){super({}),this.root.push(new G3)}}class V3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class X3 extends Rt{constructor(){super("w:footnotes"),this.root.push(new V3({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new Xm({id:-1,type:u2.SEPERATOR,children:[new au({spacing:{after:0,line:240,lineRule:T1.AUTO},children:[new K3]})]});this.root.push(e);const t=new Xm({id:0,type:u2.CONTINUATION_SEPERATOR,children:[new au({spacing:{after:0,line:240,lineRule:T1.AUTO},children:[new H3]})]});this.root.push(t)}createFootNote(e,t){const o=new Xm({id:e,children:t});this.root.push(o)}}class Y3{constructor(){At(this,"footnotess"),At(this,"relationships"),this.footnotess=new X3,this.relationships=new $u}get View(){return this.footnotess}get Relationships(){return this.relationships}}class J3 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let Z3=class extends N5{constructor(e,t){super("w:hdr",t),At(this,"refId"),this.refId=e,t||this.root.push(new J3({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class Q3{constructor(e,t,o){At(this,"header"),At(this,"relationships"),this.media=e,this.header=new Z3(t,o),this.relationships=new $u}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class e6{constructor(){At(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}}const Ic={BULLET:"bullet"};class t6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class n6 extends Rt{constructor(e){super("w:numFmt"),this.root.push(new Yo({val:e}))}}class r6 extends Rt{constructor(e){super("w:lvlText"),this.root.push(new Yo({val:e}))}}class i6 extends Rt{constructor(e){super("w:lvlJc"),this.root.push(new Yo({val:e}))}}class o6 extends Rt{constructor(e){super("w:suff"),this.root.push(new Yo({val:e}))}}class s6 extends Rt{constructor(){super("w:isLgl")}}class a6 extends Rt{constructor({level:e,format:t,text:o,alignment:a=ec.START,start:s=1,style:u,suffix:l,isLegalNumberingStyle:d}){if(super("w:lvl"),At(this,"paragraphProperties"),At(this,"runProperties"),this.root.push(new Vd("w:start",Sa(s))),t&&this.root.push(new n6(t)),l&&this.root.push(new o6(l)),d&&this.root.push(new s6),o&&this.root.push(new r6(o)),this.root.push(new i6(a)),this.paragraphProperties=new Sd(u&&u.paragraph),this.runProperties=new zu(u&&u.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new t6({ilvl:Sa(e),tentative:1}))}}class l6 extends a6{}class c6 extends Rt{constructor(e){super("w:multiLevelType"),this.root.push(new Yo({val:e}))}}class u6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class d2 extends Rt{constructor(e,t){super("w:abstractNum"),At(this,"id"),this.root.push(new u6({abstractNumId:Sa(e),restartNumberingAfterBreak:0})),this.root.push(new c6("hybridMultilevel")),this.id=e;for(const o of t)this.root.push(new l6(o))}}class d6 extends Rt{constructor(e){super("w:abstractNumId"),this.root.push(new Yo({val:e}))}}class f6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{numId:"w:numId"})}}class f2 extends Rt{constructor(e){if(super("w:num"),At(this,"numId"),At(this,"reference"),At(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new f6({numId:Sa(e.numId)})),this.root.push(new d6(Sa(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const t of e.overrideLevels)this.root.push(new p6(t.num,t.start))}}class h6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{ilvl:"w:ilvl"})}}class p6 extends Rt{constructor(e,t){super("w:lvlOverride"),this.root.push(new h6({ilvl:e})),t!==void 0&&this.root.push(new g6(t))}}class m6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class g6 extends Rt{constructor(e){super("w:startOverride"),this.root.push(new m6({val:e}))}}class y6 extends Rt{constructor(e){super("w:numbering"),At(this,"abstractNumberingMap",new Map),At(this,"concreteNumberingMap",new Map),At(this,"referenceConfigMap",new Map),At(this,"abstractNumUniqueNumericId",w_()),At(this,"concreteNumUniqueNumericId",x_()),this.root.push(new Th(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const t=new d2(this.abstractNumUniqueNumericId(),[{level:0,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:El(.5),hanging:El(.25)}}}},{level:1,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:El(1),hanging:El(.25)}}}},{level:2,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:2160,hanging:El(.25)}}}},{level:3,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:2880,hanging:El(.25)}}}},{level:4,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:3600,hanging:El(.25)}}}},{level:5,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:4320,hanging:El(.25)}}}},{level:6,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:5040,hanging:El(.25)}}}},{level:7,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:5760,hanging:El(.25)}}}},{level:8,format:Ic.BULLET,text:"",alignment:ec.LEFT,style:{paragraph:{indent:{left:6480,hanging:El(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new f2({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(const o of e.config)this.abstractNumberingMap.set(o.reference,new d2(this.abstractNumUniqueNumericId(),o.levels)),this.referenceConfigMap.set(o.reference,o.levels)}prepForXml(e){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){const o=this.abstractNumberingMap.get(e);if(!o)return;const a=`${e}-${t}`;if(this.concreteNumberingMap.has(a))return;const s=this.referenceConfigMap.get(e),u=s&&s[0].start,l={numId:this.concreteNumUniqueNumericId(),abstractNumId:o.id,reference:e,instance:t,overrideLevels:[u&&Number.isInteger(u)?{num:0,start:u}:{num:0,start:1}]};this.concreteNumberingMap.set(a,new f2(l))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class v6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class w6 extends Rt{constructor(e){super("w:compatSetting"),this.root.push(new v6({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class x6 extends Rt{constructor(e){super("w:compat"),e.version&&this.root.push(new w6(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new Pt("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new Pt("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new Pt("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new Pt("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new Pt("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new Pt("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new Pt("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new Pt("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new Pt("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new Pt("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new Pt("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new Pt("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new Pt("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new Pt("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new Pt("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new Pt("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new Pt("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new Pt("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new Pt("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new Pt("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new Pt("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new Pt("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new Pt("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new Pt("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new Pt("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new Pt("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new Pt("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new Pt("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new Pt("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new Pt("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new Pt("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new Pt("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new Pt("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new Pt("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new Pt("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new Pt("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new Pt("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new Pt("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new Pt("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new Pt("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new Pt("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new Pt("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new Pt("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new Pt("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new Pt("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new Pt("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new Pt("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new Pt("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new Pt("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new Pt("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new Pt("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new Pt("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new Pt("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new Pt("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new Pt("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new Pt("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new Pt("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new Pt("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new Pt("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new Pt("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new Pt("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new Pt("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new Pt("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new Pt("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new Pt("w:cachedColBalance",e.cachedColumnBalance))}}class b6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class _6 extends Rt{constructor(e){var t,o,a,s,u,l,d,f;super("w:settings"),this.root.push(new b6({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new Pt("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new Pt("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new Pt("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new Pt("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new Vd("w:defaultTabStop",e.defaultTabStop)),((t=e.hyphenation)==null?void 0:t.autoHyphenation)!==void 0&&this.root.push(new Pt("w:autoHyphenation",e.hyphenation.autoHyphenation)),((o=e.hyphenation)==null?void 0:o.hyphenationZone)!==void 0&&this.root.push(new Vd("w:hyphenationZone",e.hyphenation.hyphenationZone)),((a=e.hyphenation)==null?void 0:a.consecutiveHyphenLimit)!==void 0&&this.root.push(new Vd("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((s=e.hyphenation)==null?void 0:s.doNotHyphenateCaps)!==void 0&&this.root.push(new Pt("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new x6(vd(Si({},(u=e.compatibility)!=null?u:{}),{version:(f=(d=(l=e.compatibility)==null?void 0:l.version)!=null?d:e.compatibilityModeVersion)!=null?f:15})))}}class F5 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{val:"w:val"})}}class S6 extends Rt{constructor(e){super("w:name"),this.root.push(new F5({val:e}))}}class k6 extends Rt{constructor(e){super("w:uiPriority"),this.root.push(new F5({val:Sa(e)}))}}class A6 extends Ir{constructor(){super(...arguments),At(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class B5 extends Rt{constructor(e,t){super("w:style"),this.root.push(new A6(e)),t.name&&this.root.push(new S6(t.name)),t.basedOn&&this.root.push(new dd("w:basedOn",t.basedOn)),t.next&&this.root.push(new dd("w:next",t.next)),t.link&&this.root.push(new dd("w:link",t.link)),t.uiPriority!==void 0&&this.root.push(new k6(t.uiPriority)),t.semiHidden!==void 0&&this.root.push(new Pt("w:semiHidden",t.semiHidden)),t.unhideWhenUsed!==void 0&&this.root.push(new Pt("w:unhideWhenUsed",t.unhideWhenUsed)),t.quickFormat!==void 0&&this.root.push(new Pt("w:qFormat",t.quickFormat))}}class Ch extends B5{constructor(e){super({type:"paragraph",styleId:e.id},e),At(this,"paragraphProperties"),At(this,"runProperties"),this.paragraphProperties=new Sd(e.paragraph),this.runProperties=new zu(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class Lh extends B5{constructor(e){super({type:"character",styleId:e.id},Si({uiPriority:99,unhideWhenUsed:!0},e)),At(this,"runProperties"),this.runProperties=new zu(e.run),this.root.push(this.runProperties)}}class fu extends Ch{constructor(e){super(Si({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class N6 extends fu{constructor(e){super(Si({id:"Title",name:"Title"},e))}}class E6 extends fu{constructor(e){super(Si({id:"Heading1",name:"Heading 1"},e))}}class T6 extends fu{constructor(e){super(Si({id:"Heading2",name:"Heading 2"},e))}}class C6 extends fu{constructor(e){super(Si({id:"Heading3",name:"Heading 3"},e))}}class L6 extends fu{constructor(e){super(Si({id:"Heading4",name:"Heading 4"},e))}}class I6 extends fu{constructor(e){super(Si({id:"Heading5",name:"Heading 5"},e))}}class R6 extends fu{constructor(e){super(Si({id:"Heading6",name:"Heading 6"},e))}}class j6 extends fu{constructor(e){super(Si({id:"Strong",name:"Strong"},e))}}class P6 extends Ch{constructor(e){super(Si({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class D6 extends Ch{constructor(e){super(Si({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:T1.AUTO}},run:{size:20}},e))}}class O6 extends Lh{constructor(e){super(Si({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class F6 extends Lh{constructor(e){super(Si({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class B6 extends Lh{constructor(e){super(Si({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:R5.SINGLE}}},e))}}class L1 extends Rt{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(const t of e.paragraphStyles)this.root.push(new Ch(t));if(e.characterStyles)for(const t of e.characterStyles)this.root.push(new Lh(t))}}class M6 extends Rt{constructor(e){super("w:pPrDefault"),this.root.push(new Sd(e))}}class z6 extends Rt{constructor(e){super("w:rPrDefault"),this.root.push(new zu(e))}}class $6 extends Rt{constructor(e){super("w:docDefaults"),At(this,"runPropertiesDefaults"),At(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new z6(e.run),this.paragraphPropertiesDefaults=new M6(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class U6{newInstance(e){const t=A5.xml2js(e,{compact:!1});let o;for(const u of t.elements||[])u.name==="w:styles"&&(o=u);if(o===void 0)throw new Error("can not find styles element");const a=o.elements||[];return new L1({initialStyles:new j4(o.attributes),importedStyles:a.map(u=>e0(u))})}}class h2{newInstance(e={}){var t;return{initialStyles:new Th(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new $6((t=e.document)!=null?t:{}),new N6(Si({run:{size:56}},e.title)),new E6(Si({run:{color:"2E74B5",size:32}},e.heading1)),new T6(Si({run:{color:"2E74B5",size:26}},e.heading2)),new C6(Si({run:{color:"1F4D78",size:24}},e.heading3)),new L6(Si({run:{color:"2E74B5",italics:!0}},e.heading4)),new I6(Si({run:{color:"2E74B5"}},e.heading5)),new R6(Si({run:{color:"1F4D78"}},e.heading6)),new j6(Si({run:{bold:!0}},e.strong)),new P6(e.listParagraph||{}),new B6(e.hyperlink||{}),new O6(e.footnoteReference||{}),new D6(e.footnoteText||{}),new F6(e.footnoteTextChar||{})]}}}let q6=class{constructor(e){At(this,"currentRelationshipId",1),At(this,"documentWrapper"),At(this,"headers",[]),At(this,"footers",[]),At(this,"coreProperties"),At(this,"numbering"),At(this,"media"),At(this,"fileRelationships"),At(this,"footnotesWrapper"),At(this,"settings"),At(this,"contentTypes"),At(this,"customProperties"),At(this,"appProperties"),At(this,"styles"),At(this,"comments"),At(this,"fontWrapper");var t,o,a,s,u,l,d,f,h,S,b,p;if(this.coreProperties=new E3(vd(Si({},e),{creator:(t=e.creator)!=null?t:"Un-named",revision:(o=e.revision)!=null?o:1,lastModifiedBy:(a=e.lastModifiedBy)!=null?a:"Un-named"})),this.numbering=new y6(e.numbering?e.numbering:{config:[]}),this.comments=new I_((s=e.comments)!=null?s:{children:[]}),this.fileRelationships=new $u,this.customProperties=new j3((u=e.customProperties)!=null?u:[]),this.appProperties=new _3,this.footnotesWrapper=new Y3,this.contentTypes=new N3,this.documentWrapper=new O5({background:e.background}),this.settings=new _6({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(l=e.features)==null?void 0:l.trackRevisions,updateFields:(d=e.features)==null?void 0:d.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(f=e.hyphenation)==null?void 0:f.autoHyphenation,hyphenationZone:(h=e.hyphenation)==null?void 0:h.hyphenationZone,consecutiveHyphenLimit:(S=e.hyphenation)==null?void 0:S.consecutiveHyphenLimit,doNotHyphenateCaps:(b=e.hyphenation)==null?void 0:b.doNotHyphenateCaps}}),this.media=new e6,e.externalStyles!==void 0){const j=new U6;this.styles=j.newInstance(e.externalStyles)}else if(e.styles){const N=new h2().newInstance(e.styles.default);this.styles=new L1(Si(Si({},N),e.styles))}else{const j=new h2;this.styles=new L1(j.newInstance())}this.addDefaultRelationships();for(const j of e.sections)this.addSection(j);if(e.footnotes)for(const j in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(j),e.footnotes[j].children);this.fontWrapper=new F3((p=e.fonts)!=null?p:[])}addSection({headers:e={},footers:t={},children:o,properties:a}){this.documentWrapper.View.Body.addSection(vd(Si({},a),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:t.default?this.createFooter(t.default):void 0,first:t.first?this.createFooter(t.first):void 0,even:t.even?this.createFooter(t.even):void 0}}));for(const s of o)this.documentWrapper.View.add(s)}createHeader(e){const t=new Q3(this.media,this.currentRelationshipId++);for(const o of e.options.children)t.add(o);return this.addHeaderToDocument(t),t}createFooter(e){const t=new z3(this.media,this.currentRelationshipId++);for(const o of e.options.children)t.add(o);return this.addFooterToDocument(t),t}addHeaderToDocument(e,t=fd.DEFAULT){this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,t=fd.DEFAULT){this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var W6=J1();function Wf(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ym={exports:{}},p2;function H6(){return p2||(p2=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(o,a,s){function u(f,h){if(!a[f]){if(!o[f]){var S=typeof Wf=="function"&&Wf;if(!h&&S)return S(f,!0);if(l)return l(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var p=a[f]={exports:{}};o[f][0].call(p.exports,function(j){var N=o[f][1][j];return u(N||j)},p,p.exports,t,o,a,s)}return a[f].exports}for(var l=typeof Wf=="function"&&Wf,d=0;d<s.length;d++)u(s[d]);return u})({1:[function(t,o,a){var s=t("./utils"),u=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var f,h,S,b,p,j,N,A=[],w=0,R=d.length,I=R,k=s.getTypeOf(d)!=="string";w<d.length;)I=R-w,S=k?(f=d[w++],h=w<R?d[w++]:0,w<R?d[w++]:0):(f=d.charCodeAt(w++),h=w<R?d.charCodeAt(w++):0,w<R?d.charCodeAt(w++):0),b=f>>2,p=(3&f)<<4|h>>4,j=1<I?(15&h)<<2|S>>6:64,N=2<I?63&S:64,A.push(l.charAt(b)+l.charAt(p)+l.charAt(j)+l.charAt(N));return A.join("")},a.decode=function(d){var f,h,S,b,p,j,N=0,A=0,w="data:";if(d.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var R,I=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===l.charAt(64)&&I--,d.charAt(d.length-2)===l.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=u.uint8array?new Uint8Array(0|I):new Array(0|I);N<d.length;)f=l.indexOf(d.charAt(N++))<<2|(b=l.indexOf(d.charAt(N++)))>>4,h=(15&b)<<4|(p=l.indexOf(d.charAt(N++)))>>2,S=(3&p)<<6|(j=l.indexOf(d.charAt(N++))),R[A++]=f,p!==64&&(R[A++]=h),j!==64&&(R[A++]=S);return R}},{"./support":30,"./utils":32}],2:[function(t,o,a){var s=t("./external"),u=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),d=t("./stream/DataLengthProbe");function f(h,S,b,p,j){this.compressedSize=h,this.uncompressedSize=S,this.crc32=b,this.compression=p,this.compressedContent=j}f.prototype={getContentWorker:function(){var h=new u(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),S=this;return h.on("end",function(){if(this.streamInfo.data_length!==S.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new u(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(h,S,b){return h.pipe(new l).pipe(new d("uncompressedSize")).pipe(S.compressWorker(b)).pipe(new d("compressedSize")).withStreamInfo("compression",S)},o.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,o,a){var s=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,o,a){var s=t("./utils"),u=(function(){for(var l,d=[],f=0;f<256;f++){l=f;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;d[f]=l}return d})();o.exports=function(l,d){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?(function(f,h,S,b){var p=u,j=b+S;f^=-1;for(var N=b;N<j;N++)f=f>>>8^p[255&(f^h[N])];return-1^f})(0|d,l,l.length,0):(function(f,h,S,b){var p=u,j=b+S;f^=-1;for(var N=b;N<j;N++)f=f>>>8^p[255&(f^h.charCodeAt(N))];return-1^f})(0|d,l,l.length,0):0}},{"./utils":32}],5:[function(t,o,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,o,a){var s=null;s=typeof Promise<"u"?Promise:t("lie"),o.exports={Promise:s}},{lie:37}],7:[function(t,o,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=t("pako"),l=t("./utils"),d=t("./stream/GenericWorker"),f=s?"uint8array":"array";function h(S,b){d.call(this,"FlateWorker/"+S),this._pako=null,this._pakoAction=S,this._pakoOptions=b,this.meta={}}a.magic="\b\0",l.inherits(h,d),h.prototype.processChunk=function(S){this.meta=S.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(f,S.data),!1)},h.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var S=this;this._pako.onData=function(b){S.push({data:b,meta:S.meta})}},a.compressWorker=function(S){return new h("Deflate",S)},a.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,o,a){function s(p,j){var N,A="";for(N=0;N<j;N++)A+=String.fromCharCode(255&p),p>>>=8;return A}function u(p,j,N,A,w,R){var I,k,G=p.file,re=p.compression,Q=R!==f.utf8encode,ie=l.transformTo("string",R(G.name)),U=l.transformTo("string",f.utf8encode(G.name)),ue=G.comment,oe=l.transformTo("string",R(ue)),B=l.transformTo("string",f.utf8encode(ue)),te=U.length!==G.name.length,P=B.length!==ue.length,be="",Ae="",ge="",xe=G.dir,ke=G.date,Fe={crc32:0,compressedSize:0,uncompressedSize:0};j&&!N||(Fe.crc32=p.crc32,Fe.compressedSize=p.compressedSize,Fe.uncompressedSize=p.uncompressedSize);var J=0;j&&(J|=8),Q||!te&&!P||(J|=2048);var C=0,Z=0;xe&&(C|=16),w==="UNIX"?(Z=798,C|=(function(ye,ce){var M=ye;return ye||(M=ce?16893:33204),(65535&M)<<16})(G.unixPermissions,xe)):(Z=20,C|=(function(ye){return 63&(ye||0)})(G.dosPermissions)),I=ke.getUTCHours(),I<<=6,I|=ke.getUTCMinutes(),I<<=5,I|=ke.getUTCSeconds()/2,k=ke.getUTCFullYear()-1980,k<<=4,k|=ke.getUTCMonth()+1,k<<=5,k|=ke.getUTCDate(),te&&(Ae=s(1,1)+s(h(ie),4)+U,be+="up"+s(Ae.length,2)+Ae),P&&(ge=s(1,1)+s(h(oe),4)+B,be+="uc"+s(ge.length,2)+ge);var ne="";return ne+=`
\0`,ne+=s(J,2),ne+=re.magic,ne+=s(I,2),ne+=s(k,2),ne+=s(Fe.crc32,4),ne+=s(Fe.compressedSize,4),ne+=s(Fe.uncompressedSize,4),ne+=s(ie.length,2),ne+=s(be.length,2),{fileRecord:S.LOCAL_FILE_HEADER+ne+ie+be,dirRecord:S.CENTRAL_FILE_HEADER+s(Z,2)+ne+s(oe.length,2)+"\0\0\0\0"+s(C,4)+s(A,4)+ie+be+oe}}var l=t("../utils"),d=t("../stream/GenericWorker"),f=t("../utf8"),h=t("../crc32"),S=t("../signature");function b(p,j,N,A){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=j,this.zipPlatform=N,this.encodeFileName=A,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(b,d),b.prototype.push=function(p){var j=p.meta.percent||0,N=this.entriesCount,A=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,d.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:N?(j+100*(N-A-1))/N:100}}))},b.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var j=this.streamFiles&&!p.file.dir;if(j){var N=u(p,j,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:N.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(p){this.accumulate=!1;var j=this.streamFiles&&!p.file.dir,N=u(p,j,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(N.dirRecord),j)this.push({data:(function(A){return S.DATA_DESCRIPTOR+s(A.crc32,4)+s(A.compressedSize,4)+s(A.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:N.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var p=this.bytesWritten,j=0;j<this.dirRecords.length;j++)this.push({data:this.dirRecords[j],meta:{percent:100}});var N=this.bytesWritten-p,A=(function(w,R,I,k,G){var re=l.transformTo("string",G(k));return S.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(R,4)+s(I,4)+s(re.length,2)+re})(this.dirRecords.length,N,p,this.zipComment,this.encodeFileName);this.push({data:A,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(p){this._sources.push(p);var j=this;return p.on("data",function(N){j.processChunk(N)}),p.on("end",function(){j.closedSource(j.previous.streamInfo),j._sources.length?j.prepareNextSource():j.end()}),p.on("error",function(N){j.error(N)}),this},b.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(p){var j=this._sources;if(!d.prototype.error.call(this,p))return!1;for(var N=0;N<j.length;N++)try{j[N].error(p)}catch{}return!0},b.prototype.lock=function(){d.prototype.lock.call(this);for(var p=this._sources,j=0;j<p.length;j++)p[j].lock()},o.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,o,a){var s=t("../compressions"),u=t("./ZipFileWorker");a.generateWorker=function(l,d,f){var h=new u(d.streamFiles,f,d.platform,d.encodeFileName),S=0;try{l.forEach(function(b,p){S++;var j=(function(R,I){var k=R||I,G=s[k];if(!G)throw new Error(k+" is not a valid compression method !");return G})(p.options.compression,d.compression),N=p.options.compressionOptions||d.compressionOptions||{},A=p.dir,w=p.date;p._compressWorker(j,N).withStreamInfo("file",{name:b,dir:A,date:w,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(h)}),h.entriesCount=S}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,o,a){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new s;for(var l in this)typeof this[l]!="function"&&(u[l]=this[l]);return u}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(u,l){return new s().loadAsync(u,l)},s.external=t("./external"),o.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,o,a){var s=t("./utils"),u=t("./external"),l=t("./utf8"),d=t("./zipEntries"),f=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function S(b){return new u.Promise(function(p,j){var N=b.decompressed.getContentWorker().pipe(new f);N.on("error",function(A){j(A)}).on("end",function(){N.streamInfo.crc32!==b.decompressed.crc32?j(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}o.exports=function(b,p){var j=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(b)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,p.optimizedBinaryString,p.base64).then(function(N){var A=new d(p);return A.load(N),A}).then(function(N){var A=[u.Promise.resolve(N)],w=N.files;if(p.checkCRC32)for(var R=0;R<w.length;R++)A.push(S(w[R]));return u.Promise.all(A)}).then(function(N){for(var A=N.shift(),w=A.files,R=0;R<w.length;R++){var I=w[R],k=I.fileNameStr,G=s.resolve(I.fileNameStr);j.file(G,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:p.createFolders}),I.dir||(j.file(G).unsafeOriginalName=k)}return A.zipComment.length&&(j.comment=A.zipComment),j})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,o,a){var s=t("../utils"),u=t("../stream/GenericWorker");function l(d,f){u.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(l,u),l.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(h){f.push({data:h,meta:{percent:0}})}).on("error",function(h){f.isPaused?this.generatedError=h:f.error(h)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},l.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,o,a){var s=t("readable-stream").Readable;function u(l,d,f){s.call(this,d),this._helper=l;var h=this;l.on("data",function(S,b){h.push(S)||h._helper.pause(),f&&f(b)}).on("error",function(S){h.emit("error",S)}).on("end",function(){h.push(null)})}t("../utils").inherits(u,s),u.prototype._read=function(){this._helper.resume()},o.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,o,a){o.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,u);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,u)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var u=new Buffer(s);return u.fill(0),u},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,o,a){function s(G,re,Q){var ie,U=l.getTypeOf(re),ue=l.extend(Q||{},h);ue.date=ue.date||new Date,ue.compression!==null&&(ue.compression=ue.compression.toUpperCase()),typeof ue.unixPermissions=="string"&&(ue.unixPermissions=parseInt(ue.unixPermissions,8)),ue.unixPermissions&&16384&ue.unixPermissions&&(ue.dir=!0),ue.dosPermissions&&16&ue.dosPermissions&&(ue.dir=!0),ue.dir&&(G=w(G)),ue.createFolders&&(ie=A(G))&&R.call(this,ie,!0);var oe=U==="string"&&ue.binary===!1&&ue.base64===!1;Q&&Q.binary!==void 0||(ue.binary=!oe),(re instanceof S&&re.uncompressedSize===0||ue.dir||!re||re.length===0)&&(ue.base64=!1,ue.binary=!0,re="",ue.compression="STORE",U="string");var B=null;B=re instanceof S||re instanceof d?re:j.isNode&&j.isStream(re)?new N(G,re):l.prepareContent(G,re,ue.binary,ue.optimizedBinaryString,ue.base64);var te=new b(G,B,ue);this.files[G]=te}var u=t("./utf8"),l=t("./utils"),d=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),h=t("./defaults"),S=t("./compressedObject"),b=t("./zipObject"),p=t("./generate"),j=t("./nodejsUtils"),N=t("./nodejs/NodejsStreamInputAdapter"),A=function(G){G.slice(-1)==="/"&&(G=G.substring(0,G.length-1));var re=G.lastIndexOf("/");return 0<re?G.substring(0,re):""},w=function(G){return G.slice(-1)!=="/"&&(G+="/"),G},R=function(G,re){return re=re!==void 0?re:h.createFolders,G=w(G),this.files[G]||s.call(this,G,null,{dir:!0,createFolders:re}),this.files[G]};function I(G){return Object.prototype.toString.call(G)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(G){var re,Q,ie;for(re in this.files)ie=this.files[re],(Q=re.slice(this.root.length,re.length))&&re.slice(0,this.root.length)===this.root&&G(Q,ie)},filter:function(G){var re=[];return this.forEach(function(Q,ie){G(Q,ie)&&re.push(ie)}),re},file:function(G,re,Q){if(arguments.length!==1)return G=this.root+G,s.call(this,G,re,Q),this;if(I(G)){var ie=G;return this.filter(function(ue,oe){return!oe.dir&&ie.test(ue)})}var U=this.files[this.root+G];return U&&!U.dir?U:null},folder:function(G){if(!G)return this;if(I(G))return this.filter(function(U,ue){return ue.dir&&G.test(U)});var re=this.root+G,Q=R.call(this,re),ie=this.clone();return ie.root=Q.name,ie},remove:function(G){G=this.root+G;var re=this.files[G];if(re||(G.slice(-1)!=="/"&&(G+="/"),re=this.files[G]),re&&!re.dir)delete this.files[G];else for(var Q=this.filter(function(U,ue){return ue.name.slice(0,G.length)===G}),ie=0;ie<Q.length;ie++)delete this.files[Q[ie].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(G){var re,Q={};try{if((Q=l.extend(G||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=Q.type.toLowerCase(),Q.compression=Q.compression.toUpperCase(),Q.type==="binarystring"&&(Q.type="string"),!Q.type)throw new Error("No output type specified.");l.checkSupport(Q.type),Q.platform!=="darwin"&&Q.platform!=="freebsd"&&Q.platform!=="linux"&&Q.platform!=="sunos"||(Q.platform="UNIX"),Q.platform==="win32"&&(Q.platform="DOS");var ie=Q.comment||this.comment||"";re=p.generateWorker(this,Q,ie)}catch(U){(re=new d("error")).error(U)}return new f(re,Q.type||"string",Q.mimeType)},generateAsync:function(G,re){return this.generateInternalStream(G).accumulate(re)},generateNodeStream:function(G,re){return(G=G||{}).type||(G.type="nodebuffer"),this.generateInternalStream(G).toNodejsStream(re)}};o.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,o,a){o.exports=t("stream")},{stream:void 0}],17:[function(t,o,a){var s=t("./DataReader");function u(l){s.call(this,l);for(var d=0;d<this.data.length;d++)l[d]=255&l[d]}t("../utils").inherits(u,s),u.prototype.byteAt=function(l){return this.data[this.zero+l]},u.prototype.lastIndexOfSignature=function(l){for(var d=l.charCodeAt(0),f=l.charCodeAt(1),h=l.charCodeAt(2),S=l.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===d&&this.data[b+1]===f&&this.data[b+2]===h&&this.data[b+3]===S)return b-this.zero;return-1},u.prototype.readAndCheckSignature=function(l){var d=l.charCodeAt(0),f=l.charCodeAt(1),h=l.charCodeAt(2),S=l.charCodeAt(3),b=this.readData(4);return d===b[0]&&f===b[1]&&h===b[2]&&S===b[3]},u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,d},o.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,o,a){var s=t("../utils");function u(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var d,f=0;for(this.checkOffset(l),d=this.index+l-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=l,f},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},o.exports=u},{"../utils":32}],19:[function(t,o,a){var s=t("./Uint8ArrayReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.readData=function(l){this.checkOffset(l);var d=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,d},o.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,o,a){var s=t("./DataReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},u.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},u.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},u.prototype.readData=function(l){this.checkOffset(l);var d=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,d},o.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,o,a){var s=t("./ArrayReader");function u(l){s.call(this,l)}t("../utils").inherits(u,s),u.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,d},o.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,o,a){var s=t("../utils"),u=t("../support"),l=t("./ArrayReader"),d=t("./StringReader"),f=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");o.exports=function(S){var b=s.getTypeOf(S);return s.checkSupport(b),b!=="string"||u.uint8array?b==="nodebuffer"?new f(S):u.uint8array?new h(s.transformTo("uint8array",S)):new l(s.transformTo("array",S)):new d(S)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,o,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,o,a){var s=t("./GenericWorker"),u=t("../utils");function l(d){s.call(this,"ConvertWorker to "+d),this.destType=d}u.inherits(l,s),l.prototype.processChunk=function(d){this.push({data:u.transformTo(this.destType,d.data),meta:d.meta})},o.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,o,a){var s=t("./GenericWorker"),u=t("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,s),l.prototype.processChunk=function(d){this.streamInfo.crc32=u(d.data,this.streamInfo.crc32||0),this.push(d)},o.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,o,a){var s=t("../utils"),u=t("./GenericWorker");function l(d){u.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}s.inherits(l,u),l.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}u.prototype.processChunk.call(this,d)},o.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,o,a){var s=t("../utils"),u=t("./GenericWorker");function l(d){u.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){f.dataIsReady=!0,f.data=h,f.max=h&&h.length||0,f.type=s.getTypeOf(h),f.isPaused||f._tickAndRepeat()},function(h){f.error(h)})}s.inherits(l,u),l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,o,a){function s(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,l){return this._listeners[u].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,l){if(this._listeners[u])for(var d=0;d<this._listeners[u].length;d++)this._listeners[u][d].call(this,l)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var l=this;return u.on("data",function(d){l.processChunk(d)}),u.on("end",function(){l.end()}),u.on("error",function(d){l.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,l){return this.extraStreamInfo[u]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},o.exports=s},{}],29:[function(t,o,a){var s=t("../utils"),u=t("./ConvertWorker"),l=t("./GenericWorker"),d=t("../base64"),f=t("../support"),h=t("../external"),S=null;if(f.nodestream)try{S=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(j,N){return new h.Promise(function(A,w){var R=[],I=j._internalType,k=j._outputType,G=j._mimeType;j.on("data",function(re,Q){R.push(re),N&&N(Q)}).on("error",function(re){R=[],w(re)}).on("end",function(){try{var re=(function(Q,ie,U){switch(Q){case"blob":return s.newBlob(s.transformTo("arraybuffer",ie),U);case"base64":return d.encode(ie);default:return s.transformTo(Q,ie)}})(k,(function(Q,ie){var U,ue=0,oe=null,B=0;for(U=0;U<ie.length;U++)B+=ie[U].length;switch(Q){case"string":return ie.join("");case"array":return Array.prototype.concat.apply([],ie);case"uint8array":for(oe=new Uint8Array(B),U=0;U<ie.length;U++)oe.set(ie[U],ue),ue+=ie[U].length;return oe;case"nodebuffer":return Buffer.concat(ie);default:throw new Error("concat : unsupported type '"+Q+"'")}})(I,R),G);A(re)}catch(Q){w(Q)}R=[]}).resume()})}function p(j,N,A){var w=N;switch(N){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=N,this._mimeType=A,s.checkSupport(w),this._worker=j.pipe(new u(w)),j.lock()}catch(R){this._worker=new l("error"),this._worker.error(R)}}p.prototype={accumulate:function(j){return b(this,j)},on:function(j,N){var A=this;return j==="data"?this._worker.on(j,function(w){N.call(A,w.data,w.meta)}):this._worker.on(j,function(){s.delay(N,arguments,A)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(j){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new S(this,{objectMode:this._outputType!=="nodebuffer"},j)}},o.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,o,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(s),a.blob=u.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,o,a){for(var s=t("./utils"),u=t("./support"),l=t("./nodejsUtils"),d=t("./stream/GenericWorker"),f=new Array(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;f[254]=f[254]=1;function S(){d.call(this,"utf-8 decode"),this.leftOver=null}function b(){d.call(this,"utf-8 encode")}a.utf8encode=function(p){return u.nodebuffer?l.newBufferFrom(p,"utf-8"):(function(j){var N,A,w,R,I,k=j.length,G=0;for(R=0;R<k;R++)(64512&(A=j.charCodeAt(R)))==55296&&R+1<k&&(64512&(w=j.charCodeAt(R+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),R++),G+=A<128?1:A<2048?2:A<65536?3:4;for(N=u.uint8array?new Uint8Array(G):new Array(G),R=I=0;I<G;R++)(64512&(A=j.charCodeAt(R)))==55296&&R+1<k&&(64512&(w=j.charCodeAt(R+1)))==56320&&(A=65536+(A-55296<<10)+(w-56320),R++),A<128?N[I++]=A:(A<2048?N[I++]=192|A>>>6:(A<65536?N[I++]=224|A>>>12:(N[I++]=240|A>>>18,N[I++]=128|A>>>12&63),N[I++]=128|A>>>6&63),N[I++]=128|63&A);return N})(p)},a.utf8decode=function(p){return u.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):(function(j){var N,A,w,R,I=j.length,k=new Array(2*I);for(N=A=0;N<I;)if((w=j[N++])<128)k[A++]=w;else if(4<(R=f[w]))k[A++]=65533,N+=R-1;else{for(w&=R===2?31:R===3?15:7;1<R&&N<I;)w=w<<6|63&j[N++],R--;1<R?k[A++]=65533:w<65536?k[A++]=w:(w-=65536,k[A++]=55296|w>>10&1023,k[A++]=56320|1023&w)}return k.length!==A&&(k.subarray?k=k.subarray(0,A):k.length=A),s.applyFromCharCode(k)})(p=s.transformTo(u.uint8array?"uint8array":"array",p))},s.inherits(S,d),S.prototype.processChunk=function(p){var j=s.transformTo(u.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var N=j;(j=new Uint8Array(N.length+this.leftOver.length)).set(this.leftOver,0),j.set(N,this.leftOver.length)}else j=this.leftOver.concat(j);this.leftOver=null}var A=(function(R,I){var k;for((I=I||R.length)>R.length&&(I=R.length),k=I-1;0<=k&&(192&R[k])==128;)k--;return k<0||k===0?I:k+f[R[k]]>I?k:I})(j),w=j;A!==j.length&&(u.uint8array?(w=j.subarray(0,A),this.leftOver=j.subarray(A,j.length)):(w=j.slice(0,A),this.leftOver=j.slice(A,j.length))),this.push({data:a.utf8decode(w),meta:p.meta})},S.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=S,s.inherits(b,d),b.prototype.processChunk=function(p){this.push({data:a.utf8encode(p.data),meta:p.meta})},a.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,o,a){var s=t("./support"),u=t("./base64"),l=t("./nodejsUtils"),d=t("./external");function f(N){return N}function h(N,A){for(var w=0;w<N.length;++w)A[w]=255&N.charCodeAt(w);return A}t("setimmediate"),a.newBlob=function(N,A){a.checkSupport("blob");try{return new Blob([N],{type:A})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(N),w.getBlob(A)}catch{throw new Error("Bug : can't construct the Blob.")}}};var S={stringifyByChunk:function(N,A,w){var R=[],I=0,k=N.length;if(k<=w)return String.fromCharCode.apply(null,N);for(;I<k;)A==="array"||A==="nodebuffer"?R.push(String.fromCharCode.apply(null,N.slice(I,Math.min(I+w,k)))):R.push(String.fromCharCode.apply(null,N.subarray(I,Math.min(I+w,k)))),I+=w;return R.join("")},stringifyByChar:function(N){for(var A="",w=0;w<N.length;w++)A+=String.fromCharCode(N[w]);return A},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function b(N){var A=65536,w=a.getTypeOf(N),R=!0;if(w==="uint8array"?R=S.applyCanBeUsed.uint8array:w==="nodebuffer"&&(R=S.applyCanBeUsed.nodebuffer),R)for(;1<A;)try{return S.stringifyByChunk(N,w,A)}catch{A=Math.floor(A/2)}return S.stringifyByChar(N)}function p(N,A){for(var w=0;w<N.length;w++)A[w]=N[w];return A}a.applyFromCharCode=b;var j={};j.string={string:f,array:function(N){return h(N,new Array(N.length))},arraybuffer:function(N){return j.string.uint8array(N).buffer},uint8array:function(N){return h(N,new Uint8Array(N.length))},nodebuffer:function(N){return h(N,l.allocBuffer(N.length))}},j.array={string:b,array:f,arraybuffer:function(N){return new Uint8Array(N).buffer},uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return l.newBufferFrom(N)}},j.arraybuffer={string:function(N){return b(new Uint8Array(N))},array:function(N){return p(new Uint8Array(N),new Array(N.byteLength))},arraybuffer:f,uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return l.newBufferFrom(new Uint8Array(N))}},j.uint8array={string:b,array:function(N){return p(N,new Array(N.length))},arraybuffer:function(N){return N.buffer},uint8array:f,nodebuffer:function(N){return l.newBufferFrom(N)}},j.nodebuffer={string:b,array:function(N){return p(N,new Array(N.length))},arraybuffer:function(N){return j.nodebuffer.uint8array(N).buffer},uint8array:function(N){return p(N,new Uint8Array(N.length))},nodebuffer:f},a.transformTo=function(N,A){if(A=A||"",!N)return A;a.checkSupport(N);var w=a.getTypeOf(A);return j[w][N](A)},a.resolve=function(N){for(var A=N.split("/"),w=[],R=0;R<A.length;R++){var I=A[R];I==="."||I===""&&R!==0&&R!==A.length-1||(I===".."?w.pop():w.push(I))}return w.join("/")},a.getTypeOf=function(N){return typeof N=="string"?"string":Object.prototype.toString.call(N)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(N)?"nodebuffer":s.uint8array&&N instanceof Uint8Array?"uint8array":s.arraybuffer&&N instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(N){if(!s[N.toLowerCase()])throw new Error(N+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(N){var A,w,R="";for(w=0;w<(N||"").length;w++)R+="\\x"+((A=N.charCodeAt(w))<16?"0":"")+A.toString(16).toUpperCase();return R},a.delay=function(N,A,w){setImmediate(function(){N.apply(w||null,A||[])})},a.inherits=function(N,A){function w(){}w.prototype=A.prototype,N.prototype=new w},a.extend=function(){var N,A,w={};for(N=0;N<arguments.length;N++)for(A in arguments[N])Object.prototype.hasOwnProperty.call(arguments[N],A)&&w[A]===void 0&&(w[A]=arguments[N][A]);return w},a.prepareContent=function(N,A,w,R,I){return d.Promise.resolve(A).then(function(k){return s.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new d.Promise(function(G,re){var Q=new FileReader;Q.onload=function(ie){G(ie.target.result)},Q.onerror=function(ie){re(ie.target.error)},Q.readAsArrayBuffer(k)}):k}).then(function(k){var G=a.getTypeOf(k);return G?(G==="arraybuffer"?k=a.transformTo("uint8array",k):G==="string"&&(I?k=u.decode(k):w&&R!==!0&&(k=(function(re){return h(re,s.uint8array?new Uint8Array(re.length):new Array(re.length))})(k))),k):d.Promise.reject(new Error("Can't read the data of '"+N+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,o,a){var s=t("./reader/readerFor"),u=t("./utils"),l=t("./signature"),d=t("./zipEntry"),f=t("./support");function h(S){this.files=[],this.loadOptions=S}h.prototype={checkSignature:function(S){if(!this.reader.readAndCheckSignature(S)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(b)+", expected "+u.pretty(S)+")")}},isSignature:function(S,b){var p=this.reader.index;this.reader.setIndex(S);var j=this.reader.readString(4)===b;return this.reader.setIndex(p),j},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var S=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",p=u.transformTo(b,S);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var S,b,p,j=this.zip64EndOfCentralSize-44;0<j;)S=this.reader.readInt(2),b=this.reader.readInt(4),p=this.reader.readData(b),this.zip64ExtensibleData[S]={id:S,length:b,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var S,b;for(S=0;S<this.files.length;S++)b=this.files[S],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var S;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(S=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(S);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var S=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(S<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(S);var b=S;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(S=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(S),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var j=b-p;if(0<j)this.isSignature(b,l.CENTRAL_FILE_HEADER)||(this.reader.zero=j);else if(j<0)throw new Error("Corrupted zip: missing "+Math.abs(j)+" bytes.")},prepareReader:function(S){this.reader=s(S)},load:function(S){this.prepareReader(S),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,o,a){var s=t("./reader/readerFor"),u=t("./utils"),l=t("./compressedObject"),d=t("./crc32"),f=t("./utf8"),h=t("./compressions"),S=t("./support");function b(p,j){this.options=p,this.loadOptions=j}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var j,N;if(p.skip(22),this.fileNameLength=p.readInt(2),N=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(N),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((j=(function(A){for(var w in h)if(Object.prototype.hasOwnProperty.call(h,w)&&h[w].magic===A)return h[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,j,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var j=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(j),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var j,N,A,w=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<w;)j=p.readInt(2),N=p.readInt(2),A=p.readData(N),this.extraFields[j]={id:j,length:N,value:A};p.setIndex(w)},handleUTF8:function(){var p=S.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var j=this.findExtraFieldUnicodePath();if(j!==null)this.fileNameStr=j;else{var N=u.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(N)}var A=this.findExtraFieldUnicodeComment();if(A!==null)this.fileCommentStr=A;else{var w=u.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var j=s(p.value);return j.readInt(1)!==1||d(this.fileName)!==j.readInt(4)?null:f.utf8decode(j.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var j=s(p.value);return j.readInt(1)!==1||d(this.fileComment)!==j.readInt(4)?null:f.utf8decode(j.readData(p.length-5))}return null}},o.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,o,a){function s(j,N,A){this.name=j,this.dir=A.dir,this.date=A.date,this.comment=A.comment,this.unixPermissions=A.unixPermissions,this.dosPermissions=A.dosPermissions,this._data=N,this._dataBinary=A.binary,this.options={compression:A.compression,compressionOptions:A.compressionOptions}}var u=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),d=t("./utf8"),f=t("./compressedObject"),h=t("./stream/GenericWorker");s.prototype={internalStream:function(j){var N=null,A="string";try{if(!j)throw new Error("No output type specified.");var w=(A=j.toLowerCase())==="string"||A==="text";A!=="binarystring"&&A!=="text"||(A="string"),N=this._decompressWorker();var R=!this._dataBinary;R&&!w&&(N=N.pipe(new d.Utf8EncodeWorker)),!R&&w&&(N=N.pipe(new d.Utf8DecodeWorker))}catch(I){(N=new h("error")).error(I)}return new u(N,A,"")},async:function(j,N){return this.internalStream(j).accumulate(N)},nodeStream:function(j,N){return this.internalStream(j||"nodebuffer").toNodejsStream(N)},_compressWorker:function(j,N){if(this._data instanceof f&&this._data.compression.magic===j.magic)return this._data.getCompressedWorker();var A=this._decompressWorker();return this._dataBinary||(A=A.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(A,j,N)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var S=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<S.length;p++)s.prototype[S[p]]=b;o.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,o,a){(function(s){var u,l,d=s.MutationObserver||s.WebKitMutationObserver;if(d){var f=0,h=new d(j),S=s.document.createTextNode("");h.observe(S,{characterData:!0}),u=function(){S.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)u="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var N=s.document.createElement("script");N.onreadystatechange=function(){j(),N.onreadystatechange=null,N.parentNode.removeChild(N),N=null},s.document.documentElement.appendChild(N)}:function(){setTimeout(j,0)};else{var b=new s.MessageChannel;b.port1.onmessage=j,u=function(){b.port2.postMessage(0)}}var p=[];function j(){var N,A;l=!0;for(var w=p.length;w;){for(A=p,p=[],N=-1;++N<w;)A[N]();w=p.length}l=!1}o.exports=function(N){p.push(N)!==1||l||u()}}).call(this,typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,o,a){var s=t("immediate");function u(){}var l={},d=["REJECTED"],f=["FULFILLED"],h=["PENDING"];function S(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,w!==u&&N(this,w)}function b(w,R,I){this.promise=w,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function p(w,R,I){s(function(){var k;try{k=R(I)}catch(G){return l.reject(w,G)}k===w?l.reject(w,new TypeError("Cannot resolve promise with itself")):l.resolve(w,k)})}function j(w){var R=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof R=="function")return function(){R.apply(w,arguments)}}function N(w,R){var I=!1;function k(Q){I||(I=!0,l.reject(w,Q))}function G(Q){I||(I=!0,l.resolve(w,Q))}var re=A(function(){R(G,k)});re.status==="error"&&k(re.value)}function A(w,R){var I={};try{I.value=w(R),I.status="success"}catch(k){I.status="error",I.value=k}return I}(o.exports=S).prototype.finally=function(w){if(typeof w!="function")return this;var R=this.constructor;return this.then(function(I){return R.resolve(w()).then(function(){return I})},function(I){return R.resolve(w()).then(function(){throw I})})},S.prototype.catch=function(w){return this.then(null,w)},S.prototype.then=function(w,R){if(typeof w!="function"&&this.state===f||typeof R!="function"&&this.state===d)return this;var I=new this.constructor(u);return this.state!==h?p(I,this.state===f?w:R,this.outcome):this.queue.push(new b(I,w,R)),I},b.prototype.callFulfilled=function(w){l.resolve(this.promise,w)},b.prototype.otherCallFulfilled=function(w){p(this.promise,this.onFulfilled,w)},b.prototype.callRejected=function(w){l.reject(this.promise,w)},b.prototype.otherCallRejected=function(w){p(this.promise,this.onRejected,w)},l.resolve=function(w,R){var I=A(j,R);if(I.status==="error")return l.reject(w,I.value);var k=I.value;if(k)N(w,k);else{w.state=f,w.outcome=R;for(var G=-1,re=w.queue.length;++G<re;)w.queue[G].callFulfilled(R)}return w},l.reject=function(w,R){w.state=d,w.outcome=R;for(var I=-1,k=w.queue.length;++I<k;)w.queue[I].callRejected(R);return w},S.resolve=function(w){return w instanceof this?w:l.resolve(new this(u),w)},S.reject=function(w){var R=new this(u);return l.reject(R,w)},S.all=function(w){var R=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=w.length,k=!1;if(!I)return this.resolve([]);for(var G=new Array(I),re=0,Q=-1,ie=new this(u);++Q<I;)U(w[Q],Q);return ie;function U(ue,oe){R.resolve(ue).then(function(B){G[oe]=B,++re!==I||k||(k=!0,l.resolve(ie,G))},function(B){k||(k=!0,l.reject(ie,B))})}},S.race=function(w){var R=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=w.length,k=!1;if(!I)return this.resolve([]);for(var G=-1,re=new this(u);++G<I;)Q=w[G],R.resolve(Q).then(function(ie){k||(k=!0,l.resolve(re,ie))},function(ie){k||(k=!0,l.reject(re,ie))});var Q;return re}},{immediate:36}],38:[function(t,o,a){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),o.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,o,a){var s=t("./zlib/deflate"),u=t("./utils/common"),l=t("./utils/strings"),d=t("./zlib/messages"),f=t("./zlib/zstream"),h=Object.prototype.toString,S=0,b=-1,p=0,j=8;function N(w){if(!(this instanceof N))return new N(w);this.options=u.assign({level:b,method:j,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},w||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var I=s.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(I!==S)throw new Error(d[I]);if(R.header&&s.deflateSetHeader(this.strm,R.header),R.dictionary){var k;if(k=typeof R.dictionary=="string"?l.string2buf(R.dictionary):h.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(I=s.deflateSetDictionary(this.strm,k))!==S)throw new Error(d[I]);this._dict_set=!0}}function A(w,R){var I=new N(R);if(I.push(w,!0),I.err)throw I.msg||d[I.err];return I.result}N.prototype.push=function(w,R){var I,k,G=this.strm,re=this.options.chunkSize;if(this.ended)return!1;k=R===~~R?R:R===!0?4:0,typeof w=="string"?G.input=l.string2buf(w):h.call(w)==="[object ArrayBuffer]"?G.input=new Uint8Array(w):G.input=w,G.next_in=0,G.avail_in=G.input.length;do{if(G.avail_out===0&&(G.output=new u.Buf8(re),G.next_out=0,G.avail_out=re),(I=s.deflate(G,k))!==1&&I!==S)return this.onEnd(I),!(this.ended=!0);G.avail_out!==0&&(G.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(u.shrinkBuf(G.output,G.next_out))):this.onData(u.shrinkBuf(G.output,G.next_out)))}while((0<G.avail_in||G.avail_out===0)&&I!==1);return k===4?(I=s.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===S):k!==2||(this.onEnd(S),!(G.avail_out=0))},N.prototype.onData=function(w){this.chunks.push(w)},N.prototype.onEnd=function(w){w===S&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=N,a.deflate=A,a.deflateRaw=function(w,R){return(R=R||{}).raw=!0,A(w,R)},a.gzip=function(w,R){return(R=R||{}).gzip=!0,A(w,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,o,a){var s=t("./zlib/inflate"),u=t("./utils/common"),l=t("./utils/strings"),d=t("./zlib/constants"),f=t("./zlib/messages"),h=t("./zlib/zstream"),S=t("./zlib/gzheader"),b=Object.prototype.toString;function p(N){if(!(this instanceof p))return new p(N);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},N||{});var A=this.options;A.raw&&0<=A.windowBits&&A.windowBits<16&&(A.windowBits=-A.windowBits,A.windowBits===0&&(A.windowBits=-15)),!(0<=A.windowBits&&A.windowBits<16)||N&&N.windowBits||(A.windowBits+=32),15<A.windowBits&&A.windowBits<48&&(15&A.windowBits)==0&&(A.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,A.windowBits);if(w!==d.Z_OK)throw new Error(f[w]);this.header=new S,s.inflateGetHeader(this.strm,this.header)}function j(N,A){var w=new p(A);if(w.push(N,!0),w.err)throw w.msg||f[w.err];return w.result}p.prototype.push=function(N,A){var w,R,I,k,G,re,Q=this.strm,ie=this.options.chunkSize,U=this.options.dictionary,ue=!1;if(this.ended)return!1;R=A===~~A?A:A===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof N=="string"?Q.input=l.binstring2buf(N):b.call(N)==="[object ArrayBuffer]"?Q.input=new Uint8Array(N):Q.input=N,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new u.Buf8(ie),Q.next_out=0,Q.avail_out=ie),(w=s.inflate(Q,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&U&&(re=typeof U=="string"?l.string2buf(U):b.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,w=s.inflateSetDictionary(this.strm,re)),w===d.Z_BUF_ERROR&&ue===!0&&(w=d.Z_OK,ue=!1),w!==d.Z_STREAM_END&&w!==d.Z_OK)return this.onEnd(w),!(this.ended=!0);Q.next_out&&(Q.avail_out!==0&&w!==d.Z_STREAM_END&&(Q.avail_in!==0||R!==d.Z_FINISH&&R!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=l.utf8border(Q.output,Q.next_out),k=Q.next_out-I,G=l.buf2string(Q.output,I),Q.next_out=k,Q.avail_out=ie-k,k&&u.arraySet(Q.output,Q.output,I,k,0),this.onData(G)):this.onData(u.shrinkBuf(Q.output,Q.next_out)))),Q.avail_in===0&&Q.avail_out===0&&(ue=!0)}while((0<Q.avail_in||Q.avail_out===0)&&w!==d.Z_STREAM_END);return w===d.Z_STREAM_END&&(R=d.Z_FINISH),R===d.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===d.Z_OK):R!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(Q.avail_out=0))},p.prototype.onData=function(N){this.chunks.push(N)},p.prototype.onEnd=function(N){N===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},a.Inflate=p,a.inflate=j,a.inflateRaw=function(N,A){return(A=A||{}).raw=!0,j(N,A)},a.ungzip=j},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,o,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var S in h)h.hasOwnProperty(S)&&(d[S]=h[S])}}return d},a.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var u={arraySet:function(d,f,h,S,b){if(f.subarray&&d.subarray)d.set(f.subarray(h,h+S),b);else for(var p=0;p<S;p++)d[b+p]=f[h+p]},flattenChunks:function(d){var f,h,S,b,p,j;for(f=S=0,h=d.length;f<h;f++)S+=d[f].length;for(j=new Uint8Array(S),f=b=0,h=d.length;f<h;f++)p=d[f],j.set(p,b),b+=p.length;return j}},l={arraySet:function(d,f,h,S,b){for(var p=0;p<S;p++)d[b+p]=f[h+p]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,u)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(s)},{}],42:[function(t,o,a){var s=t("./common"),u=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var d=new s.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function h(S,b){if(b<65537&&(S.subarray&&l||!S.subarray&&u))return String.fromCharCode.apply(null,s.shrinkBuf(S,b));for(var p="",j=0;j<b;j++)p+=String.fromCharCode(S[j]);return p}d[254]=d[254]=1,a.string2buf=function(S){var b,p,j,N,A,w=S.length,R=0;for(N=0;N<w;N++)(64512&(p=S.charCodeAt(N)))==55296&&N+1<w&&(64512&(j=S.charCodeAt(N+1)))==56320&&(p=65536+(p-55296<<10)+(j-56320),N++),R+=p<128?1:p<2048?2:p<65536?3:4;for(b=new s.Buf8(R),N=A=0;A<R;N++)(64512&(p=S.charCodeAt(N)))==55296&&N+1<w&&(64512&(j=S.charCodeAt(N+1)))==56320&&(p=65536+(p-55296<<10)+(j-56320),N++),p<128?b[A++]=p:(p<2048?b[A++]=192|p>>>6:(p<65536?b[A++]=224|p>>>12:(b[A++]=240|p>>>18,b[A++]=128|p>>>12&63),b[A++]=128|p>>>6&63),b[A++]=128|63&p);return b},a.buf2binstring=function(S){return h(S,S.length)},a.binstring2buf=function(S){for(var b=new s.Buf8(S.length),p=0,j=b.length;p<j;p++)b[p]=S.charCodeAt(p);return b},a.buf2string=function(S,b){var p,j,N,A,w=b||S.length,R=new Array(2*w);for(p=j=0;p<w;)if((N=S[p++])<128)R[j++]=N;else if(4<(A=d[N]))R[j++]=65533,p+=A-1;else{for(N&=A===2?31:A===3?15:7;1<A&&p<w;)N=N<<6|63&S[p++],A--;1<A?R[j++]=65533:N<65536?R[j++]=N:(N-=65536,R[j++]=55296|N>>10&1023,R[j++]=56320|1023&N)}return h(R,j)},a.utf8border=function(S,b){var p;for((b=b||S.length)>S.length&&(b=S.length),p=b-1;0<=p&&(192&S[p])==128;)p--;return p<0||p===0?b:p+d[S[p]]>b?p:b}},{"./common":41}],43:[function(t,o,a){o.exports=function(s,u,l,d){for(var f=65535&s|0,h=s>>>16&65535|0,S=0;l!==0;){for(l-=S=2e3<l?2e3:l;h=h+(f=f+u[d++]|0)|0,--S;);f%=65521,h%=65521}return f|h<<16|0}},{}],44:[function(t,o,a){o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,o,a){var s=(function(){for(var u,l=[],d=0;d<256;d++){u=d;for(var f=0;f<8;f++)u=1&u?3988292384^u>>>1:u>>>1;l[d]=u}return l})();o.exports=function(u,l,d,f){var h=s,S=f+d;u^=-1;for(var b=f;b<S;b++)u=u>>>8^h[255&(u^l[b])];return-1^u}},{}],46:[function(t,o,a){var s,u=t("../utils/common"),l=t("./trees"),d=t("./adler32"),f=t("./crc32"),h=t("./messages"),S=0,b=4,p=0,j=-2,N=-1,A=4,w=2,R=8,I=9,k=286,G=30,re=19,Q=2*k+1,ie=15,U=3,ue=258,oe=ue+U+1,B=42,te=113,P=1,be=2,Ae=3,ge=4;function xe(H,ee){return H.msg=h[ee],ee}function ke(H){return(H<<1)-(4<H?9:0)}function Fe(H){for(var ee=H.length;0<=--ee;)H[ee]=0}function J(H){var ee=H.state,X=ee.pending;X>H.avail_out&&(X=H.avail_out),X!==0&&(u.arraySet(H.output,ee.pending_buf,ee.pending_out,X,H.next_out),H.next_out+=X,ee.pending_out+=X,H.total_out+=X,H.avail_out-=X,ee.pending-=X,ee.pending===0&&(ee.pending_out=0))}function C(H,ee){l._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,ee),H.block_start=H.strstart,J(H.strm)}function Z(H,ee){H.pending_buf[H.pending++]=ee}function ne(H,ee){H.pending_buf[H.pending++]=ee>>>8&255,H.pending_buf[H.pending++]=255&ee}function ye(H,ee){var X,T,L=H.max_chain_length,q=H.strstart,Se=H.prev_length,Le=H.nice_match,Ee=H.strstart>H.w_size-oe?H.strstart-(H.w_size-oe):0,qe=H.window,dt=H.w_mask,ot=H.prev,lt=H.strstart+ue,Nt=qe[q+Se-1],Ft=qe[q+Se];H.prev_length>=H.good_match&&(L>>=2),Le>H.lookahead&&(Le=H.lookahead);do if(qe[(X=ee)+Se]===Ft&&qe[X+Se-1]===Nt&&qe[X]===qe[q]&&qe[++X]===qe[q+1]){q+=2,X++;do;while(qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&qe[++q]===qe[++X]&&q<lt);if(T=ue-(lt-q),q=lt-ue,Se<T){if(H.match_start=ee,Le<=(Se=T))break;Nt=qe[q+Se-1],Ft=qe[q+Se]}}while((ee=ot[ee&dt])>Ee&&--L!=0);return Se<=H.lookahead?Se:H.lookahead}function ce(H){var ee,X,T,L,q,Se,Le,Ee,qe,dt,ot=H.w_size;do{if(L=H.window_size-H.lookahead-H.strstart,H.strstart>=ot+(ot-oe)){for(u.arraySet(H.window,H.window,ot,ot,0),H.match_start-=ot,H.strstart-=ot,H.block_start-=ot,ee=X=H.hash_size;T=H.head[--ee],H.head[ee]=ot<=T?T-ot:0,--X;);for(ee=X=ot;T=H.prev[--ee],H.prev[ee]=ot<=T?T-ot:0,--X;);L+=ot}if(H.strm.avail_in===0)break;if(Se=H.strm,Le=H.window,Ee=H.strstart+H.lookahead,qe=L,dt=void 0,dt=Se.avail_in,qe<dt&&(dt=qe),X=dt===0?0:(Se.avail_in-=dt,u.arraySet(Le,Se.input,Se.next_in,dt,Ee),Se.state.wrap===1?Se.adler=d(Se.adler,Le,dt,Ee):Se.state.wrap===2&&(Se.adler=f(Se.adler,Le,dt,Ee)),Se.next_in+=dt,Se.total_in+=dt,dt),H.lookahead+=X,H.lookahead+H.insert>=U)for(q=H.strstart-H.insert,H.ins_h=H.window[q],H.ins_h=(H.ins_h<<H.hash_shift^H.window[q+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[q+U-1])&H.hash_mask,H.prev[q&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=q,q++,H.insert--,!(H.lookahead+H.insert<U)););}while(H.lookahead<oe&&H.strm.avail_in!==0)}function M(H,ee){for(var X,T;;){if(H.lookahead<oe){if(ce(H),H.lookahead<oe&&ee===S)return P;if(H.lookahead===0)break}if(X=0,H.lookahead>=U&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+U-1])&H.hash_mask,X=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),X!==0&&H.strstart-X<=H.w_size-oe&&(H.match_length=ye(H,X)),H.match_length>=U)if(T=l._tr_tally(H,H.strstart-H.match_start,H.match_length-U),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=U){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+U-1])&H.hash_mask,X=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else T=l._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(T&&(C(H,!1),H.strm.avail_out===0))return P}return H.insert=H.strstart<U-1?H.strstart:U-1,ee===b?(C(H,!0),H.strm.avail_out===0?Ae:ge):H.last_lit&&(C(H,!1),H.strm.avail_out===0)?P:be}function z(H,ee){for(var X,T,L;;){if(H.lookahead<oe){if(ce(H),H.lookahead<oe&&ee===S)return P;if(H.lookahead===0)break}if(X=0,H.lookahead>=U&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+U-1])&H.hash_mask,X=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=U-1,X!==0&&H.prev_length<H.max_lazy_match&&H.strstart-X<=H.w_size-oe&&(H.match_length=ye(H,X),H.match_length<=5&&(H.strategy===1||H.match_length===U&&4096<H.strstart-H.match_start)&&(H.match_length=U-1)),H.prev_length>=U&&H.match_length<=H.prev_length){for(L=H.strstart+H.lookahead-U,T=l._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-U),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=L&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+U-1])&H.hash_mask,X=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=U-1,H.strstart++,T&&(C(H,!1),H.strm.avail_out===0))return P}else if(H.match_available){if((T=l._tr_tally(H,0,H.window[H.strstart-1]))&&C(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return P}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(T=l._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<U-1?H.strstart:U-1,ee===b?(C(H,!0),H.strm.avail_out===0?Ae:ge):H.last_lit&&(C(H,!1),H.strm.avail_out===0)?P:be}function fe(H,ee,X,T,L){this.good_length=H,this.max_lazy=ee,this.nice_length=X,this.max_chain=T,this.func=L}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*Q),this.dyn_dtree=new u.Buf16(2*(2*G+1)),this.bl_tree=new u.Buf16(2*(2*re+1)),Fe(this.dyn_ltree),Fe(this.dyn_dtree),Fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(ie+1),this.heap=new u.Buf16(2*k+1),Fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*k+1),Fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(H){var ee;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=w,(ee=H.state).pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?B:te,H.adler=ee.wrap===2?0:1,ee.last_flush=S,l._tr_init(ee),p):xe(H,j)}function me(H){var ee=se(H);return ee===p&&(function(X){X.window_size=2*X.w_size,Fe(X.head),X.max_lazy_match=s[X.level].max_lazy,X.good_match=s[X.level].good_length,X.nice_match=s[X.level].nice_length,X.max_chain_length=s[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=U-1,X.match_available=0,X.ins_h=0})(H.state),ee}function Be(H,ee,X,T,L,q){if(!H)return j;var Se=1;if(ee===N&&(ee=6),T<0?(Se=0,T=-T):15<T&&(Se=2,T-=16),L<1||I<L||X!==R||T<8||15<T||ee<0||9<ee||q<0||A<q)return xe(H,j);T===8&&(T=9);var Le=new he;return(H.state=Le).strm=H,Le.wrap=Se,Le.gzhead=null,Le.w_bits=T,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=L+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+U-1)/U),Le.window=new u.Buf8(2*Le.w_size),Le.head=new u.Buf16(Le.hash_size),Le.prev=new u.Buf16(Le.w_size),Le.lit_bufsize=1<<L+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new u.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=ee,Le.strategy=q,Le.method=X,me(H)}s=[new fe(0,0,0,0,function(H,ee){var X=65535;for(X>H.pending_buf_size-5&&(X=H.pending_buf_size-5);;){if(H.lookahead<=1){if(ce(H),H.lookahead===0&&ee===S)return P;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var T=H.block_start+X;if((H.strstart===0||H.strstart>=T)&&(H.lookahead=H.strstart-T,H.strstart=T,C(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-oe&&(C(H,!1),H.strm.avail_out===0))return P}return H.insert=0,ee===b?(C(H,!0),H.strm.avail_out===0?Ae:ge):(H.strstart>H.block_start&&(C(H,!1),H.strm.avail_out),P)}),new fe(4,4,8,4,M),new fe(4,5,16,8,M),new fe(4,6,32,32,M),new fe(4,4,16,16,z),new fe(8,16,32,32,z),new fe(8,16,128,128,z),new fe(8,32,128,256,z),new fe(32,128,258,1024,z),new fe(32,258,258,4096,z)],a.deflateInit=function(H,ee){return Be(H,ee,R,15,8,0)},a.deflateInit2=Be,a.deflateReset=me,a.deflateResetKeep=se,a.deflateSetHeader=function(H,ee){return H&&H.state?H.state.wrap!==2?j:(H.state.gzhead=ee,p):j},a.deflate=function(H,ee){var X,T,L,q;if(!H||!H.state||5<ee||ee<0)return H?xe(H,j):j;if(T=H.state,!H.output||!H.input&&H.avail_in!==0||T.status===666&&ee!==b)return xe(H,H.avail_out===0?-5:j);if(T.strm=H,X=T.last_flush,T.last_flush=ee,T.status===B)if(T.wrap===2)H.adler=0,Z(T,31),Z(T,139),Z(T,8),T.gzhead?(Z(T,(T.gzhead.text?1:0)+(T.gzhead.hcrc?2:0)+(T.gzhead.extra?4:0)+(T.gzhead.name?8:0)+(T.gzhead.comment?16:0)),Z(T,255&T.gzhead.time),Z(T,T.gzhead.time>>8&255),Z(T,T.gzhead.time>>16&255),Z(T,T.gzhead.time>>24&255),Z(T,T.level===9?2:2<=T.strategy||T.level<2?4:0),Z(T,255&T.gzhead.os),T.gzhead.extra&&T.gzhead.extra.length&&(Z(T,255&T.gzhead.extra.length),Z(T,T.gzhead.extra.length>>8&255)),T.gzhead.hcrc&&(H.adler=f(H.adler,T.pending_buf,T.pending,0)),T.gzindex=0,T.status=69):(Z(T,0),Z(T,0),Z(T,0),Z(T,0),Z(T,0),Z(T,T.level===9?2:2<=T.strategy||T.level<2?4:0),Z(T,3),T.status=te);else{var Se=R+(T.w_bits-8<<4)<<8;Se|=(2<=T.strategy||T.level<2?0:T.level<6?1:T.level===6?2:3)<<6,T.strstart!==0&&(Se|=32),Se+=31-Se%31,T.status=te,ne(T,Se),T.strstart!==0&&(ne(T,H.adler>>>16),ne(T,65535&H.adler)),H.adler=1}if(T.status===69)if(T.gzhead.extra){for(L=T.pending;T.gzindex<(65535&T.gzhead.extra.length)&&(T.pending!==T.pending_buf_size||(T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),J(H),L=T.pending,T.pending!==T.pending_buf_size));)Z(T,255&T.gzhead.extra[T.gzindex]),T.gzindex++;T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),T.gzindex===T.gzhead.extra.length&&(T.gzindex=0,T.status=73)}else T.status=73;if(T.status===73)if(T.gzhead.name){L=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),J(H),L=T.pending,T.pending===T.pending_buf_size)){q=1;break}q=T.gzindex<T.gzhead.name.length?255&T.gzhead.name.charCodeAt(T.gzindex++):0,Z(T,q)}while(q!==0);T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),q===0&&(T.gzindex=0,T.status=91)}else T.status=91;if(T.status===91)if(T.gzhead.comment){L=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),J(H),L=T.pending,T.pending===T.pending_buf_size)){q=1;break}q=T.gzindex<T.gzhead.comment.length?255&T.gzhead.comment.charCodeAt(T.gzindex++):0,Z(T,q)}while(q!==0);T.gzhead.hcrc&&T.pending>L&&(H.adler=f(H.adler,T.pending_buf,T.pending-L,L)),q===0&&(T.status=103)}else T.status=103;if(T.status===103&&(T.gzhead.hcrc?(T.pending+2>T.pending_buf_size&&J(H),T.pending+2<=T.pending_buf_size&&(Z(T,255&H.adler),Z(T,H.adler>>8&255),H.adler=0,T.status=te)):T.status=te),T.pending!==0){if(J(H),H.avail_out===0)return T.last_flush=-1,p}else if(H.avail_in===0&&ke(ee)<=ke(X)&&ee!==b)return xe(H,-5);if(T.status===666&&H.avail_in!==0)return xe(H,-5);if(H.avail_in!==0||T.lookahead!==0||ee!==S&&T.status!==666){var Le=T.strategy===2?(function(Ee,qe){for(var dt;;){if(Ee.lookahead===0&&(ce(Ee),Ee.lookahead===0)){if(qe===S)return P;break}if(Ee.match_length=0,dt=l._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,dt&&(C(Ee,!1),Ee.strm.avail_out===0))return P}return Ee.insert=0,qe===b?(C(Ee,!0),Ee.strm.avail_out===0?Ae:ge):Ee.last_lit&&(C(Ee,!1),Ee.strm.avail_out===0)?P:be})(T,ee):T.strategy===3?(function(Ee,qe){for(var dt,ot,lt,Nt,Ft=Ee.window;;){if(Ee.lookahead<=ue){if(ce(Ee),Ee.lookahead<=ue&&qe===S)return P;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=U&&0<Ee.strstart&&(ot=Ft[lt=Ee.strstart-1])===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]){Nt=Ee.strstart+ue;do;while(ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&ot===Ft[++lt]&&lt<Nt);Ee.match_length=ue-(Nt-lt),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=U?(dt=l._tr_tally(Ee,1,Ee.match_length-U),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(dt=l._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),dt&&(C(Ee,!1),Ee.strm.avail_out===0))return P}return Ee.insert=0,qe===b?(C(Ee,!0),Ee.strm.avail_out===0?Ae:ge):Ee.last_lit&&(C(Ee,!1),Ee.strm.avail_out===0)?P:be})(T,ee):s[T.level].func(T,ee);if(Le!==Ae&&Le!==ge||(T.status=666),Le===P||Le===Ae)return H.avail_out===0&&(T.last_flush=-1),p;if(Le===be&&(ee===1?l._tr_align(T):ee!==5&&(l._tr_stored_block(T,0,0,!1),ee===3&&(Fe(T.head),T.lookahead===0&&(T.strstart=0,T.block_start=0,T.insert=0))),J(H),H.avail_out===0))return T.last_flush=-1,p}return ee!==b?p:T.wrap<=0?1:(T.wrap===2?(Z(T,255&H.adler),Z(T,H.adler>>8&255),Z(T,H.adler>>16&255),Z(T,H.adler>>24&255),Z(T,255&H.total_in),Z(T,H.total_in>>8&255),Z(T,H.total_in>>16&255),Z(T,H.total_in>>24&255)):(ne(T,H.adler>>>16),ne(T,65535&H.adler)),J(H),0<T.wrap&&(T.wrap=-T.wrap),T.pending!==0?p:1)},a.deflateEnd=function(H){var ee;return H&&H.state?(ee=H.state.status)!==B&&ee!==69&&ee!==73&&ee!==91&&ee!==103&&ee!==te&&ee!==666?xe(H,j):(H.state=null,ee===te?xe(H,-3):p):j},a.deflateSetDictionary=function(H,ee){var X,T,L,q,Se,Le,Ee,qe,dt=ee.length;if(!H||!H.state||(q=(X=H.state).wrap)===2||q===1&&X.status!==B||X.lookahead)return j;for(q===1&&(H.adler=d(H.adler,ee,dt,0)),X.wrap=0,dt>=X.w_size&&(q===0&&(Fe(X.head),X.strstart=0,X.block_start=0,X.insert=0),qe=new u.Buf8(X.w_size),u.arraySet(qe,ee,dt-X.w_size,X.w_size,0),ee=qe,dt=X.w_size),Se=H.avail_in,Le=H.next_in,Ee=H.input,H.avail_in=dt,H.next_in=0,H.input=ee,ce(X);X.lookahead>=U;){for(T=X.strstart,L=X.lookahead-(U-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[T+U-1])&X.hash_mask,X.prev[T&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=T,T++,--L;);X.strstart=T,X.lookahead=U-1,ce(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=U-1,X.match_available=0,H.next_in=Le,H.input=Ee,H.avail_in=Se,X.wrap=q,p},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,o,a){o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,o,a){o.exports=function(s,u){var l,d,f,h,S,b,p,j,N,A,w,R,I,k,G,re,Q,ie,U,ue,oe,B,te,P,be;l=s.state,d=s.next_in,P=s.input,f=d+(s.avail_in-5),h=s.next_out,be=s.output,S=h-(u-s.avail_out),b=h+(s.avail_out-257),p=l.dmax,j=l.wsize,N=l.whave,A=l.wnext,w=l.window,R=l.hold,I=l.bits,k=l.lencode,G=l.distcode,re=(1<<l.lenbits)-1,Q=(1<<l.distbits)-1;e:do{I<15&&(R+=P[d++]<<I,I+=8,R+=P[d++]<<I,I+=8),ie=k[R&re];t:for(;;){if(R>>>=U=ie>>>24,I-=U,(U=ie>>>16&255)===0)be[h++]=65535&ie;else{if(!(16&U)){if((64&U)==0){ie=k[(65535&ie)+(R&(1<<U)-1)];continue t}if(32&U){l.mode=12;break e}s.msg="invalid literal/length code",l.mode=30;break e}ue=65535&ie,(U&=15)&&(I<U&&(R+=P[d++]<<I,I+=8),ue+=R&(1<<U)-1,R>>>=U,I-=U),I<15&&(R+=P[d++]<<I,I+=8,R+=P[d++]<<I,I+=8),ie=G[R&Q];n:for(;;){if(R>>>=U=ie>>>24,I-=U,!(16&(U=ie>>>16&255))){if((64&U)==0){ie=G[(65535&ie)+(R&(1<<U)-1)];continue n}s.msg="invalid distance code",l.mode=30;break e}if(oe=65535&ie,I<(U&=15)&&(R+=P[d++]<<I,(I+=8)<U&&(R+=P[d++]<<I,I+=8)),p<(oe+=R&(1<<U)-1)){s.msg="invalid distance too far back",l.mode=30;break e}if(R>>>=U,I-=U,(U=h-S)<oe){if(N<(U=oe-U)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break e}if(te=w,(B=0)===A){if(B+=j-U,U<ue){for(ue-=U;be[h++]=w[B++],--U;);B=h-oe,te=be}}else if(A<U){if(B+=j+A-U,(U-=A)<ue){for(ue-=U;be[h++]=w[B++],--U;);if(B=0,A<ue){for(ue-=U=A;be[h++]=w[B++],--U;);B=h-oe,te=be}}}else if(B+=A-U,U<ue){for(ue-=U;be[h++]=w[B++],--U;);B=h-oe,te=be}for(;2<ue;)be[h++]=te[B++],be[h++]=te[B++],be[h++]=te[B++],ue-=3;ue&&(be[h++]=te[B++],1<ue&&(be[h++]=te[B++]))}else{for(B=h-oe;be[h++]=be[B++],be[h++]=be[B++],be[h++]=be[B++],2<(ue-=3););ue&&(be[h++]=be[B++],1<ue&&(be[h++]=be[B++]))}break}}break}}while(d<f&&h<b);d-=ue=I>>3,R&=(1<<(I-=ue<<3))-1,s.next_in=d,s.next_out=h,s.avail_in=d<f?f-d+5:5-(d-f),s.avail_out=h<b?b-h+257:257-(h-b),l.hold=R,l.bits=I}},{}],49:[function(t,o,a){var s=t("../utils/common"),u=t("./adler32"),l=t("./crc32"),d=t("./inffast"),f=t("./inftrees"),h=1,S=2,b=0,p=-2,j=1,N=852,A=592;function w(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(B){var te;return B&&B.state?(te=B.state,B.total_in=B.total_out=te.total=0,B.msg="",te.wrap&&(B.adler=1&te.wrap),te.mode=j,te.last=0,te.havedict=0,te.dmax=32768,te.head=null,te.hold=0,te.bits=0,te.lencode=te.lendyn=new s.Buf32(N),te.distcode=te.distdyn=new s.Buf32(A),te.sane=1,te.back=-1,b):p}function k(B){var te;return B&&B.state?((te=B.state).wsize=0,te.whave=0,te.wnext=0,I(B)):p}function G(B,te){var P,be;return B&&B.state?(be=B.state,te<0?(P=0,te=-te):(P=1+(te>>4),te<48&&(te&=15)),te&&(te<8||15<te)?p:(be.window!==null&&be.wbits!==te&&(be.window=null),be.wrap=P,be.wbits=te,k(B))):p}function re(B,te){var P,be;return B?(be=new R,(B.state=be).window=null,(P=G(B,te))!==b&&(B.state=null),P):p}var Q,ie,U=!0;function ue(B){if(U){var te;for(Q=new s.Buf32(512),ie=new s.Buf32(32),te=0;te<144;)B.lens[te++]=8;for(;te<256;)B.lens[te++]=9;for(;te<280;)B.lens[te++]=7;for(;te<288;)B.lens[te++]=8;for(f(h,B.lens,0,288,Q,0,B.work,{bits:9}),te=0;te<32;)B.lens[te++]=5;f(S,B.lens,0,32,ie,0,B.work,{bits:5}),U=!1}B.lencode=Q,B.lenbits=9,B.distcode=ie,B.distbits=5}function oe(B,te,P,be){var Ae,ge=B.state;return ge.window===null&&(ge.wsize=1<<ge.wbits,ge.wnext=0,ge.whave=0,ge.window=new s.Buf8(ge.wsize)),be>=ge.wsize?(s.arraySet(ge.window,te,P-ge.wsize,ge.wsize,0),ge.wnext=0,ge.whave=ge.wsize):(be<(Ae=ge.wsize-ge.wnext)&&(Ae=be),s.arraySet(ge.window,te,P-be,Ae,ge.wnext),(be-=Ae)?(s.arraySet(ge.window,te,P-be,be,0),ge.wnext=be,ge.whave=ge.wsize):(ge.wnext+=Ae,ge.wnext===ge.wsize&&(ge.wnext=0),ge.whave<ge.wsize&&(ge.whave+=Ae))),0}a.inflateReset=k,a.inflateReset2=G,a.inflateResetKeep=I,a.inflateInit=function(B){return re(B,15)},a.inflateInit2=re,a.inflate=function(B,te){var P,be,Ae,ge,xe,ke,Fe,J,C,Z,ne,ye,ce,M,z,fe,he,se,me,Be,H,ee,X,T,L=0,q=new s.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return p;(P=B.state).mode===12&&(P.mode=13),xe=B.next_out,Ae=B.output,Fe=B.avail_out,ge=B.next_in,be=B.input,ke=B.avail_in,J=P.hold,C=P.bits,Z=ke,ne=Fe,ee=b;e:for(;;)switch(P.mode){case j:if(P.wrap===0){P.mode=13;break}for(;C<16;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(2&P.wrap&&J===35615){q[P.check=0]=255&J,q[1]=J>>>8&255,P.check=l(P.check,q,2,0),C=J=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&J)<<8)+(J>>8))%31){B.msg="incorrect header check",P.mode=30;break}if((15&J)!=8){B.msg="unknown compression method",P.mode=30;break}if(C-=4,H=8+(15&(J>>>=4)),P.wbits===0)P.wbits=H;else if(H>P.wbits){B.msg="invalid window size",P.mode=30;break}P.dmax=1<<H,B.adler=P.check=1,P.mode=512&J?10:12,C=J=0;break;case 2:for(;C<16;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(P.flags=J,(255&P.flags)!=8){B.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){B.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=J>>8&1),512&P.flags&&(q[0]=255&J,q[1]=J>>>8&255,P.check=l(P.check,q,2,0)),C=J=0,P.mode=3;case 3:for(;C<32;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.head&&(P.head.time=J),512&P.flags&&(q[0]=255&J,q[1]=J>>>8&255,q[2]=J>>>16&255,q[3]=J>>>24&255,P.check=l(P.check,q,4,0)),C=J=0,P.mode=4;case 4:for(;C<16;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.head&&(P.head.xflags=255&J,P.head.os=J>>8),512&P.flags&&(q[0]=255&J,q[1]=J>>>8&255,P.check=l(P.check,q,2,0)),C=J=0,P.mode=5;case 5:if(1024&P.flags){for(;C<16;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.length=J,P.head&&(P.head.extra_len=J),512&P.flags&&(q[0]=255&J,q[1]=J>>>8&255,P.check=l(P.check,q,2,0)),C=J=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(ke<(ye=P.length)&&(ye=ke),ye&&(P.head&&(H=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),s.arraySet(P.head.extra,be,ge,ye,H)),512&P.flags&&(P.check=l(P.check,be,ye,ge)),ke-=ye,ge+=ye,P.length-=ye),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(ke===0)break e;for(ye=0;H=be[ge+ye++],P.head&&H&&P.length<65536&&(P.head.name+=String.fromCharCode(H)),H&&ye<ke;);if(512&P.flags&&(P.check=l(P.check,be,ye,ge)),ke-=ye,ge+=ye,H)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(ke===0)break e;for(ye=0;H=be[ge+ye++],P.head&&H&&P.length<65536&&(P.head.comment+=String.fromCharCode(H)),H&&ye<ke;);if(512&P.flags&&(P.check=l(P.check,be,ye,ge)),ke-=ye,ge+=ye,H)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;C<16;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(J!==(65535&P.check)){B.msg="header crc mismatch",P.mode=30;break}C=J=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),B.adler=P.check=0,P.mode=12;break;case 10:for(;C<32;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}B.adler=P.check=w(J),C=J=0,P.mode=11;case 11:if(P.havedict===0)return B.next_out=xe,B.avail_out=Fe,B.next_in=ge,B.avail_in=ke,P.hold=J,P.bits=C,2;B.adler=P.check=1,P.mode=12;case 12:if(te===5||te===6)break e;case 13:if(P.last){J>>>=7&C,C-=7&C,P.mode=27;break}for(;C<3;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}switch(P.last=1&J,C-=1,3&(J>>>=1)){case 0:P.mode=14;break;case 1:if(ue(P),P.mode=20,te!==6)break;J>>>=2,C-=2;break e;case 2:P.mode=17;break;case 3:B.msg="invalid block type",P.mode=30}J>>>=2,C-=2;break;case 14:for(J>>>=7&C,C-=7&C;C<32;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if((65535&J)!=(J>>>16^65535)){B.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&J,C=J=0,P.mode=15,te===6)break e;case 15:P.mode=16;case 16:if(ye=P.length){if(ke<ye&&(ye=ke),Fe<ye&&(ye=Fe),ye===0)break e;s.arraySet(Ae,be,ge,ye,xe),ke-=ye,ge+=ye,Fe-=ye,xe+=ye,P.length-=ye;break}P.mode=12;break;case 17:for(;C<14;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(P.nlen=257+(31&J),J>>>=5,C-=5,P.ndist=1+(31&J),J>>>=5,C-=5,P.ncode=4+(15&J),J>>>=4,C-=4,286<P.nlen||30<P.ndist){B.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;C<3;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.lens[Se[P.have++]]=7&J,J>>>=3,C-=3}for(;P.have<19;)P.lens[Se[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,X={bits:P.lenbits},ee=f(0,P.lens,0,19,P.lencode,0,P.work,X),P.lenbits=X.bits,ee){B.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;fe=(L=P.lencode[J&(1<<P.lenbits)-1])>>>16&255,he=65535&L,!((z=L>>>24)<=C);){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(he<16)J>>>=z,C-=z,P.lens[P.have++]=he;else{if(he===16){for(T=z+2;C<T;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(J>>>=z,C-=z,P.have===0){B.msg="invalid bit length repeat",P.mode=30;break}H=P.lens[P.have-1],ye=3+(3&J),J>>>=2,C-=2}else if(he===17){for(T=z+3;C<T;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}C-=z,H=0,ye=3+(7&(J>>>=z)),J>>>=3,C-=3}else{for(T=z+7;C<T;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}C-=z,H=0,ye=11+(127&(J>>>=z)),J>>>=7,C-=7}if(P.have+ye>P.nlen+P.ndist){B.msg="invalid bit length repeat",P.mode=30;break}for(;ye--;)P.lens[P.have++]=H}}if(P.mode===30)break;if(P.lens[256]===0){B.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,X={bits:P.lenbits},ee=f(h,P.lens,0,P.nlen,P.lencode,0,P.work,X),P.lenbits=X.bits,ee){B.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,X={bits:P.distbits},ee=f(S,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,X),P.distbits=X.bits,ee){B.msg="invalid distances set",P.mode=30;break}if(P.mode=20,te===6)break e;case 20:P.mode=21;case 21:if(6<=ke&&258<=Fe){B.next_out=xe,B.avail_out=Fe,B.next_in=ge,B.avail_in=ke,P.hold=J,P.bits=C,d(B,ne),xe=B.next_out,Ae=B.output,Fe=B.avail_out,ge=B.next_in,be=B.input,ke=B.avail_in,J=P.hold,C=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;fe=(L=P.lencode[J&(1<<P.lenbits)-1])>>>16&255,he=65535&L,!((z=L>>>24)<=C);){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(fe&&(240&fe)==0){for(se=z,me=fe,Be=he;fe=(L=P.lencode[Be+((J&(1<<se+me)-1)>>se)])>>>16&255,he=65535&L,!(se+(z=L>>>24)<=C);){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}J>>>=se,C-=se,P.back+=se}if(J>>>=z,C-=z,P.back+=z,P.length=he,fe===0){P.mode=26;break}if(32&fe){P.back=-1,P.mode=12;break}if(64&fe){B.msg="invalid literal/length code",P.mode=30;break}P.extra=15&fe,P.mode=22;case 22:if(P.extra){for(T=P.extra;C<T;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.length+=J&(1<<P.extra)-1,J>>>=P.extra,C-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;fe=(L=P.distcode[J&(1<<P.distbits)-1])>>>16&255,he=65535&L,!((z=L>>>24)<=C);){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if((240&fe)==0){for(se=z,me=fe,Be=he;fe=(L=P.distcode[Be+((J&(1<<se+me)-1)>>se)])>>>16&255,he=65535&L,!(se+(z=L>>>24)<=C);){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}J>>>=se,C-=se,P.back+=se}if(J>>>=z,C-=z,P.back+=z,64&fe){B.msg="invalid distance code",P.mode=30;break}P.offset=he,P.extra=15&fe,P.mode=24;case 24:if(P.extra){for(T=P.extra;C<T;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}P.offset+=J&(1<<P.extra)-1,J>>>=P.extra,C-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){B.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(Fe===0)break e;if(ye=ne-Fe,P.offset>ye){if((ye=P.offset-ye)>P.whave&&P.sane){B.msg="invalid distance too far back",P.mode=30;break}ce=ye>P.wnext?(ye-=P.wnext,P.wsize-ye):P.wnext-ye,ye>P.length&&(ye=P.length),M=P.window}else M=Ae,ce=xe-P.offset,ye=P.length;for(Fe<ye&&(ye=Fe),Fe-=ye,P.length-=ye;Ae[xe++]=M[ce++],--ye;);P.length===0&&(P.mode=21);break;case 26:if(Fe===0)break e;Ae[xe++]=P.length,Fe--,P.mode=21;break;case 27:if(P.wrap){for(;C<32;){if(ke===0)break e;ke--,J|=be[ge++]<<C,C+=8}if(ne-=Fe,B.total_out+=ne,P.total+=ne,ne&&(B.adler=P.check=P.flags?l(P.check,Ae,ne,xe-ne):u(P.check,Ae,ne,xe-ne)),ne=Fe,(P.flags?J:w(J))!==P.check){B.msg="incorrect data check",P.mode=30;break}C=J=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;C<32;){if(ke===0)break e;ke--,J+=be[ge++]<<C,C+=8}if(J!==(4294967295&P.total)){B.msg="incorrect length check",P.mode=30;break}C=J=0}P.mode=29;case 29:ee=1;break e;case 30:ee=-3;break e;case 31:return-4;case 32:default:return p}return B.next_out=xe,B.avail_out=Fe,B.next_in=ge,B.avail_in=ke,P.hold=J,P.bits=C,(P.wsize||ne!==B.avail_out&&P.mode<30&&(P.mode<27||te!==4))&&oe(B,B.output,B.next_out,ne-B.avail_out)?(P.mode=31,-4):(Z-=B.avail_in,ne-=B.avail_out,B.total_in+=Z,B.total_out+=ne,P.total+=ne,P.wrap&&ne&&(B.adler=P.check=P.flags?l(P.check,Ae,ne,B.next_out-ne):u(P.check,Ae,ne,B.next_out-ne)),B.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(Z==0&&ne===0||te===4)&&ee===b&&(ee=-5),ee)},a.inflateEnd=function(B){if(!B||!B.state)return p;var te=B.state;return te.window&&(te.window=null),B.state=null,b},a.inflateGetHeader=function(B,te){var P;return B&&B.state?(2&(P=B.state).wrap)==0?p:((P.head=te).done=!1,b):p},a.inflateSetDictionary=function(B,te){var P,be=te.length;return B&&B.state?(P=B.state).wrap!==0&&P.mode!==11?p:P.mode===11&&u(1,te,be,0)!==P.check?-3:oe(B,te,be,be)?(P.mode=31,-4):(P.havedict=1,b):p},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,o,a){var s=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(h,S,b,p,j,N,A,w){var R,I,k,G,re,Q,ie,U,ue,oe=w.bits,B=0,te=0,P=0,be=0,Ae=0,ge=0,xe=0,ke=0,Fe=0,J=0,C=null,Z=0,ne=new s.Buf16(16),ye=new s.Buf16(16),ce=null,M=0;for(B=0;B<=15;B++)ne[B]=0;for(te=0;te<p;te++)ne[S[b+te]]++;for(Ae=oe,be=15;1<=be&&ne[be]===0;be--);if(be<Ae&&(Ae=be),be===0)return j[N++]=20971520,j[N++]=20971520,w.bits=1,0;for(P=1;P<be&&ne[P]===0;P++);for(Ae<P&&(Ae=P),B=ke=1;B<=15;B++)if(ke<<=1,(ke-=ne[B])<0)return-1;if(0<ke&&(h===0||be!==1))return-1;for(ye[1]=0,B=1;B<15;B++)ye[B+1]=ye[B]+ne[B];for(te=0;te<p;te++)S[b+te]!==0&&(A[ye[S[b+te]]++]=te);if(Q=h===0?(C=ce=A,19):h===1?(C=u,Z-=257,ce=l,M-=257,256):(C=d,ce=f,-1),B=P,re=N,xe=te=J=0,k=-1,G=(Fe=1<<(ge=Ae))-1,h===1&&852<Fe||h===2&&592<Fe)return 1;for(;;){for(ie=B-xe,ue=A[te]<Q?(U=0,A[te]):A[te]>Q?(U=ce[M+A[te]],C[Z+A[te]]):(U=96,0),R=1<<B-xe,P=I=1<<ge;j[re+(J>>xe)+(I-=R)]=ie<<24|U<<16|ue|0,I!==0;);for(R=1<<B-1;J&R;)R>>=1;if(R!==0?(J&=R-1,J+=R):J=0,te++,--ne[B]==0){if(B===be)break;B=S[b+A[te]]}if(Ae<B&&(J&G)!==k){for(xe===0&&(xe=Ae),re+=P,ke=1<<(ge=B-xe);ge+xe<be&&!((ke-=ne[ge+xe])<=0);)ge++,ke<<=1;if(Fe+=1<<ge,h===1&&852<Fe||h===2&&592<Fe)return 1;j[k=J&G]=Ae<<24|ge<<16|re-N|0}}return J!==0&&(j[re+J]=B-xe<<24|64<<16|0),w.bits=Ae,0}},{"../utils/common":41}],51:[function(t,o,a){o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,o,a){var s=t("../utils/common"),u=0,l=1;function d(L){for(var q=L.length;0<=--q;)L[q]=0}var f=0,h=29,S=256,b=S+1+h,p=30,j=19,N=2*b+1,A=15,w=16,R=7,I=256,k=16,G=17,re=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=new Array(2*(b+2));d(oe);var B=new Array(2*p);d(B);var te=new Array(512);d(te);var P=new Array(256);d(P);var be=new Array(h);d(be);var Ae,ge,xe,ke=new Array(p);function Fe(L,q,Se,Le,Ee){this.static_tree=L,this.extra_bits=q,this.extra_base=Se,this.elems=Le,this.max_length=Ee,this.has_stree=L&&L.length}function J(L,q){this.dyn_tree=L,this.max_code=0,this.stat_desc=q}function C(L){return L<256?te[L]:te[256+(L>>>7)]}function Z(L,q){L.pending_buf[L.pending++]=255&q,L.pending_buf[L.pending++]=q>>>8&255}function ne(L,q,Se){L.bi_valid>w-Se?(L.bi_buf|=q<<L.bi_valid&65535,Z(L,L.bi_buf),L.bi_buf=q>>w-L.bi_valid,L.bi_valid+=Se-w):(L.bi_buf|=q<<L.bi_valid&65535,L.bi_valid+=Se)}function ye(L,q,Se){ne(L,Se[2*q],Se[2*q+1])}function ce(L,q){for(var Se=0;Se|=1&L,L>>>=1,Se<<=1,0<--q;);return Se>>>1}function M(L,q,Se){var Le,Ee,qe=new Array(A+1),dt=0;for(Le=1;Le<=A;Le++)qe[Le]=dt=dt+Se[Le-1]<<1;for(Ee=0;Ee<=q;Ee++){var ot=L[2*Ee+1];ot!==0&&(L[2*Ee]=ce(qe[ot]++,ot))}}function z(L){var q;for(q=0;q<b;q++)L.dyn_ltree[2*q]=0;for(q=0;q<p;q++)L.dyn_dtree[2*q]=0;for(q=0;q<j;q++)L.bl_tree[2*q]=0;L.dyn_ltree[2*I]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function fe(L){8<L.bi_valid?Z(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function he(L,q,Se,Le){var Ee=2*q,qe=2*Se;return L[Ee]<L[qe]||L[Ee]===L[qe]&&Le[q]<=Le[Se]}function se(L,q,Se){for(var Le=L.heap[Se],Ee=Se<<1;Ee<=L.heap_len&&(Ee<L.heap_len&&he(q,L.heap[Ee+1],L.heap[Ee],L.depth)&&Ee++,!he(q,Le,L.heap[Ee],L.depth));)L.heap[Se]=L.heap[Ee],Se=Ee,Ee<<=1;L.heap[Se]=Le}function me(L,q,Se){var Le,Ee,qe,dt,ot=0;if(L.last_lit!==0)for(;Le=L.pending_buf[L.d_buf+2*ot]<<8|L.pending_buf[L.d_buf+2*ot+1],Ee=L.pending_buf[L.l_buf+ot],ot++,Le===0?ye(L,Ee,q):(ye(L,(qe=P[Ee])+S+1,q),(dt=Q[qe])!==0&&ne(L,Ee-=be[qe],dt),ye(L,qe=C(--Le),Se),(dt=ie[qe])!==0&&ne(L,Le-=ke[qe],dt)),ot<L.last_lit;);ye(L,I,q)}function Be(L,q){var Se,Le,Ee,qe=q.dyn_tree,dt=q.stat_desc.static_tree,ot=q.stat_desc.has_stree,lt=q.stat_desc.elems,Nt=-1;for(L.heap_len=0,L.heap_max=N,Se=0;Se<lt;Se++)qe[2*Se]!==0?(L.heap[++L.heap_len]=Nt=Se,L.depth[Se]=0):qe[2*Se+1]=0;for(;L.heap_len<2;)qe[2*(Ee=L.heap[++L.heap_len]=Nt<2?++Nt:0)]=1,L.depth[Ee]=0,L.opt_len--,ot&&(L.static_len-=dt[2*Ee+1]);for(q.max_code=Nt,Se=L.heap_len>>1;1<=Se;Se--)se(L,qe,Se);for(Ee=lt;Se=L.heap[1],L.heap[1]=L.heap[L.heap_len--],se(L,qe,1),Le=L.heap[1],L.heap[--L.heap_max]=Se,L.heap[--L.heap_max]=Le,qe[2*Ee]=qe[2*Se]+qe[2*Le],L.depth[Ee]=(L.depth[Se]>=L.depth[Le]?L.depth[Se]:L.depth[Le])+1,qe[2*Se+1]=qe[2*Le+1]=Ee,L.heap[1]=Ee++,se(L,qe,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],(function(Ft,Zt){var Rn,$t,Rr,An,Zn,or,jn=Zt.dyn_tree,dn=Zt.max_code,fi=Zt.stat_desc.static_tree,Wn=Zt.stat_desc.has_stree,Un=Zt.stat_desc.extra_bits,qr=Zt.stat_desc.extra_base,yn=Zt.stat_desc.max_length,kn=0;for(An=0;An<=A;An++)Ft.bl_count[An]=0;for(jn[2*Ft.heap[Ft.heap_max]+1]=0,Rn=Ft.heap_max+1;Rn<N;Rn++)yn<(An=jn[2*jn[2*($t=Ft.heap[Rn])+1]+1]+1)&&(An=yn,kn++),jn[2*$t+1]=An,dn<$t||(Ft.bl_count[An]++,Zn=0,qr<=$t&&(Zn=Un[$t-qr]),or=jn[2*$t],Ft.opt_len+=or*(An+Zn),Wn&&(Ft.static_len+=or*(fi[2*$t+1]+Zn)));if(kn!==0){do{for(An=yn-1;Ft.bl_count[An]===0;)An--;Ft.bl_count[An]--,Ft.bl_count[An+1]+=2,Ft.bl_count[yn]--,kn-=2}while(0<kn);for(An=yn;An!==0;An--)for($t=Ft.bl_count[An];$t!==0;)dn<(Rr=Ft.heap[--Rn])||(jn[2*Rr+1]!==An&&(Ft.opt_len+=(An-jn[2*Rr+1])*jn[2*Rr],jn[2*Rr+1]=An),$t--)}})(L,q),M(qe,Nt,L.bl_count)}function H(L,q,Se){var Le,Ee,qe=-1,dt=q[1],ot=0,lt=7,Nt=4;for(dt===0&&(lt=138,Nt=3),q[2*(Se+1)+1]=65535,Le=0;Le<=Se;Le++)Ee=dt,dt=q[2*(Le+1)+1],++ot<lt&&Ee===dt||(ot<Nt?L.bl_tree[2*Ee]+=ot:Ee!==0?(Ee!==qe&&L.bl_tree[2*Ee]++,L.bl_tree[2*k]++):ot<=10?L.bl_tree[2*G]++:L.bl_tree[2*re]++,qe=Ee,Nt=(ot=0)===dt?(lt=138,3):Ee===dt?(lt=6,3):(lt=7,4))}function ee(L,q,Se){var Le,Ee,qe=-1,dt=q[1],ot=0,lt=7,Nt=4;for(dt===0&&(lt=138,Nt=3),Le=0;Le<=Se;Le++)if(Ee=dt,dt=q[2*(Le+1)+1],!(++ot<lt&&Ee===dt)){if(ot<Nt)for(;ye(L,Ee,L.bl_tree),--ot!=0;);else Ee!==0?(Ee!==qe&&(ye(L,Ee,L.bl_tree),ot--),ye(L,k,L.bl_tree),ne(L,ot-3,2)):ot<=10?(ye(L,G,L.bl_tree),ne(L,ot-3,3)):(ye(L,re,L.bl_tree),ne(L,ot-11,7));qe=Ee,Nt=(ot=0)===dt?(lt=138,3):Ee===dt?(lt=6,3):(lt=7,4)}}d(ke);var X=!1;function T(L,q,Se,Le){ne(L,(f<<1)+(Le?1:0),3),(function(Ee,qe,dt,ot){fe(Ee),Z(Ee,dt),Z(Ee,~dt),s.arraySet(Ee.pending_buf,Ee.window,qe,dt,Ee.pending),Ee.pending+=dt})(L,q,Se)}a._tr_init=function(L){X||((function(){var q,Se,Le,Ee,qe,dt=new Array(A+1);for(Ee=Le=0;Ee<h-1;Ee++)for(be[Ee]=Le,q=0;q<1<<Q[Ee];q++)P[Le++]=Ee;for(P[Le-1]=Ee,Ee=qe=0;Ee<16;Ee++)for(ke[Ee]=qe,q=0;q<1<<ie[Ee];q++)te[qe++]=Ee;for(qe>>=7;Ee<p;Ee++)for(ke[Ee]=qe<<7,q=0;q<1<<ie[Ee]-7;q++)te[256+qe++]=Ee;for(Se=0;Se<=A;Se++)dt[Se]=0;for(q=0;q<=143;)oe[2*q+1]=8,q++,dt[8]++;for(;q<=255;)oe[2*q+1]=9,q++,dt[9]++;for(;q<=279;)oe[2*q+1]=7,q++,dt[7]++;for(;q<=287;)oe[2*q+1]=8,q++,dt[8]++;for(M(oe,b+1,dt),q=0;q<p;q++)B[2*q+1]=5,B[2*q]=ce(q,5);Ae=new Fe(oe,Q,S+1,b,A),ge=new Fe(B,ie,0,p,A),xe=new Fe(new Array(0),U,0,j,R)})(),X=!0),L.l_desc=new J(L.dyn_ltree,Ae),L.d_desc=new J(L.dyn_dtree,ge),L.bl_desc=new J(L.bl_tree,xe),L.bi_buf=0,L.bi_valid=0,z(L)},a._tr_stored_block=T,a._tr_flush_block=function(L,q,Se,Le){var Ee,qe,dt=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=(function(ot){var lt,Nt=4093624447;for(lt=0;lt<=31;lt++,Nt>>>=1)if(1&Nt&&ot.dyn_ltree[2*lt]!==0)return u;if(ot.dyn_ltree[18]!==0||ot.dyn_ltree[20]!==0||ot.dyn_ltree[26]!==0)return l;for(lt=32;lt<S;lt++)if(ot.dyn_ltree[2*lt]!==0)return l;return u})(L)),Be(L,L.l_desc),Be(L,L.d_desc),dt=(function(ot){var lt;for(H(ot,ot.dyn_ltree,ot.l_desc.max_code),H(ot,ot.dyn_dtree,ot.d_desc.max_code),Be(ot,ot.bl_desc),lt=j-1;3<=lt&&ot.bl_tree[2*ue[lt]+1]===0;lt--);return ot.opt_len+=3*(lt+1)+5+5+4,lt})(L),Ee=L.opt_len+3+7>>>3,(qe=L.static_len+3+7>>>3)<=Ee&&(Ee=qe)):Ee=qe=Se+5,Se+4<=Ee&&q!==-1?T(L,q,Se,Le):L.strategy===4||qe===Ee?(ne(L,2+(Le?1:0),3),me(L,oe,B)):(ne(L,4+(Le?1:0),3),(function(ot,lt,Nt,Ft){var Zt;for(ne(ot,lt-257,5),ne(ot,Nt-1,5),ne(ot,Ft-4,4),Zt=0;Zt<Ft;Zt++)ne(ot,ot.bl_tree[2*ue[Zt]+1],3);ee(ot,ot.dyn_ltree,lt-1),ee(ot,ot.dyn_dtree,Nt-1)})(L,L.l_desc.max_code+1,L.d_desc.max_code+1,dt+1),me(L,L.dyn_ltree,L.dyn_dtree)),z(L),Le&&fe(L)},a._tr_tally=function(L,q,Se){return L.pending_buf[L.d_buf+2*L.last_lit]=q>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&q,L.pending_buf[L.l_buf+L.last_lit]=255&Se,L.last_lit++,q===0?L.dyn_ltree[2*Se]++:(L.matches++,q--,L.dyn_ltree[2*(P[Se]+S+1)]++,L.dyn_dtree[2*C(q)]++),L.last_lit===L.lit_bufsize-1},a._tr_align=function(L){ne(L,2,3),ye(L,I,oe),(function(q){q.bi_valid===16?(Z(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)})(L)}},{"../utils/common":41}],53:[function(t,o,a){o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,o,a){(function(s){(function(u,l){if(!u.setImmediate){var d,f,h,S,b=1,p={},j=!1,N=u.document,A=Object.getPrototypeOf&&Object.getPrototypeOf(u);A=A&&A.setTimeout?A:u,d={}.toString.call(u.process)==="[object process]"?function(k){ai.nextTick(function(){R(k)})}:(function(){if(u.postMessage&&!u.importScripts){var k=!0,G=u.onmessage;return u.onmessage=function(){k=!1},u.postMessage("","*"),u.onmessage=G,k}})()?(S="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",I,!1):u.attachEvent("onmessage",I),function(k){u.postMessage(S+k,"*")}):u.MessageChannel?((h=new MessageChannel).port1.onmessage=function(k){R(k.data)},function(k){h.port2.postMessage(k)}):N&&"onreadystatechange"in N.createElement("script")?(f=N.documentElement,function(k){var G=N.createElement("script");G.onreadystatechange=function(){R(k),G.onreadystatechange=null,f.removeChild(G),G=null},f.appendChild(G)}):function(k){setTimeout(R,0,k)},A.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var G=new Array(arguments.length-1),re=0;re<G.length;re++)G[re]=arguments[re+1];var Q={callback:k,args:G};return p[b]=Q,d(b),b++},A.clearImmediate=w}function w(k){delete p[k]}function R(k){if(j)setTimeout(R,0,k);else{var G=p[k];if(G){j=!0;try{(function(re){var Q=re.callback,ie=re.args;switch(ie.length){case 0:Q();break;case 1:Q(ie[0]);break;case 2:Q(ie[0],ie[1]);break;case 3:Q(ie[0],ie[1],ie[2]);break;default:Q.apply(l,ie)}})(G)}finally{w(k),j=!1}}}}function I(k){k.source===u&&typeof k.data=="string"&&k.data.indexOf(S)===0&&R(+k.data.slice(S.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ym)),Ym.exports}var G6=H6();const K6=n5(G6);var qd={exports:{}},Jm,m2;function V6(){if(m2)return Jm;m2=1;var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(o,a){return r[a]}):t}return Jm=e,Jm}var g2;function X6(){if(g2)return qd.exports;g2=1;var r=V6(),e=J1().Stream,t="    ";function o(f,h){typeof h!="object"&&(h={indent:h});var S=h.stream?new e:null,b="",p=!1,j=h.indent?h.indent===!0?t:h.indent:"",N=!0;function A(G){N?ai.nextTick(G):G()}function w(G,re){if(re!==void 0&&(b+=re),G&&!p&&(S=S||new e,p=!0),G&&p){var Q=b;A(function(){S.emit("data",Q)}),b=""}}function R(G,re){l(w,u(G,j,j?1:0),re)}function I(){if(S){var G=b;A(function(){S.emit("data",G),S.emit("end"),S.readable=!1,S.emit("close")})}}function k(G){var re=G.encoding||"UTF-8",Q={version:"1.0",encoding:re};G.standalone&&(Q.standalone=G.standalone),R({"?xml":{_attr:Q}}),b=b.replace("/>","?>")}return A(function(){N=!1}),h.declaration&&k(h.declaration),f&&f.forEach?f.forEach(function(G,re){var Q;re+1===f.length&&(Q=I),R(G,Q)}):R(f,I),S?(S.readable=!0,S):b}function a(){var f=Array.prototype.slice.call(arguments),h={_elem:u(f)};return h.push=function(S){if(!this.append)throw new Error("not assigned to a parent!");var b=this,p=this._elem.indent;l(this.append,u(S,p,this._elem.icount+(p?1:0)),function(){b.append(!0)})},h.close=function(S){S!==void 0&&this.push(S),this.end&&this.end()},h}function s(f,h){return new Array(h||0).join(f||"")}function u(f,h,S){S=S||0;var b=s(h,S),p,j=f,N=!1;if(typeof f=="object"){var A=Object.keys(f);if(p=A[0],j=f[p],j&&j._elem)return j._elem.name=p,j._elem.icount=S,j._elem.indent=h,j._elem.indents=b,j._elem.interrupt=j,j._elem}var w=[],R=[],I;function k(G){var re=Object.keys(G);re.forEach(function(Q){w.push(d(Q,G[Q]))})}switch(typeof j){case"object":if(j===null)break;j._attr&&k(j._attr),j._cdata&&R.push(("<![CDATA["+j._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),j.forEach&&(I=!1,R.push(""),j.forEach(function(G){if(typeof G=="object"){var re=Object.keys(G)[0];re=="_attr"?k(G._attr):R.push(u(G,h,S+1))}else R.pop(),I=!0,R.push(r(G))}),I||R.push(""));break;default:R.push(r(j))}return{name:p,interrupt:N,attributes:w,content:R,icount:S,indents:b,indent:h}}function l(f,h,S){if(typeof h!="object")return f(!1,h);var b=h.interrupt?1:h.content.length;function p(){for(;h.content.length;){var N=h.content.shift();if(N!==void 0){if(j(N))return;l(f,N)}}f(!1,(b>1?h.indents:"")+(h.name?"</"+h.name+">":"")+(h.indent&&!S?`
`:"")),S&&S()}function j(N){return N.interrupt?(N.interrupt.append=f,N.interrupt.end=p,N.interrupt=!1,f(!0),!0):!1}if(f(!1,h.indents+(h.name?"<"+h.name:"")+(h.attributes.length?" "+h.attributes.join(" "):"")+(b?h.name?">":"":h.name?"/>":"")+(h.indent&&b>1?`
`:"")),!b)return f(!1,h.indent?`
`:"");j(h)||p()}function d(f,h){return f+'="'+r(h)+'"'}return qd.exports=o,qd.exports.element=qd.exports.Element=a,qd.exports}var Y6=X6();const $o=n5(Y6),Wd=0,Zm=32,J6=32,Z6=(r,e)=>{const t=e.replace(/-/g,"");if(t.length!==J6)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const a=t.replace(/(..)/g,"$1 ").trim().split(" ").map(d=>parseInt(d,16));a.reverse();const u=r.slice(Wd,Zm).map((d,f)=>d^a[f%a.length]),l=new Uint8Array(Wd+u.length+Math.max(0,r.length-Zm));return l.set(r.slice(0,Wd)),l.set(u,Wd),l.set(r.slice(Zm),Wd+u.length),l};class Q6{format(e,t={stack:[]}){const o=e.prepForXml(t);if(o)return o;throw Error("XMLComponent did not format correctly")}}class eS{replace(e,t,o){let a=e;return t.forEach((s,u)=>{a=a.replace(new RegExp(`{${s.fileName}}`,"g"),(o+u).toString())}),a}getMediaData(e,t){return t.Array.filter(o=>e.search(`{${o.fileName}}`)>0)}}class tS{replace(e,t){let o=e;for(const a of t)o=o.replace(new RegExp(`{${a.reference}-${a.instance}}`,"g"),a.numId.toString());return o}}class nS{constructor(){At(this,"formatter"),At(this,"imageReplacer"),At(this,"numberingReplacer"),this.formatter=new Q6,this.imageReplacer=new eS,this.numberingReplacer=new tS}compile(e,t,o=[]){const a=new K6,s=this.xmlifyFile(e,t),u=new Map(Object.entries(s));for(const[,l]of u)if(Array.isArray(l))for(const d of l)a.file(d.path,d.data);else a.file(l.path,l.data);for(const l of o)a.file(l.path,l.data);for(const l of e.Media.Array)l.type!=="svg"?a.file(`word/media/${l.fileName}`,l.data):(a.file(`word/media/${l.fileName}`,l.data),a.file(`word/media/${l.fallback.fileName}`,l.fallback.data));for(const{data:l,name:d,fontKey:f}of e.FontTable.fontOptionsWithKey){const[h]=d.split(".");a.file(`word/fonts/${h}.odttf`,Z6(l,f))}return a}xmlifyFile(e,t){const o=e.Document.Relationships.RelationshipCount+1,a=$o(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=e.Comments.Relationships.RelationshipCount+1,u=$o(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),l=this.imageReplacer.getMediaData(a,e.Media),d=this.imageReplacer.getMediaData(u,e.Media);return{Relationships:{data:(l.forEach((f,h)=>{e.Document.Relationships.createRelationship(o+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),$o(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const f=this.imageReplacer.replace(a,l,o);return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const f=$o(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:$o(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:$o(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:$o(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((f,h)=>{const S=$o(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(S,e.Media).forEach((p,j)=>{f.Relationships.createRelationship(j,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${p.fileName}`)}),{data:$o(this.formatter.format(f.Relationships,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${h+1}.xml.rels`}}),FooterRelationships:e.Footers.map((f,h)=>{const S=$o(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(S,e.Media).forEach((p,j)=>{f.Relationships.createRelationship(j,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${p.fileName}`)}),{data:$o(this.formatter.format(f.Relationships,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${h+1}.xml.rels`}}),Headers:e.Headers.map((f,h)=>{const S=$o(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),b=this.imageReplacer.getMediaData(S,e.Media),p=this.imageReplacer.replace(S,b,0);return{data:this.numberingReplacer.replace(p,e.Numbering.ConcreteNumbering),path:`word/header${h+1}.xml`}}),Footers:e.Footers.map((f,h)=>{const S=$o(this.formatter.format(f.View,{viewWrapper:f,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),b=this.imageReplacer.getMediaData(S,e.Media),p=this.imageReplacer.replace(S,b,0);return{data:this.numberingReplacer.replace(p,e.Numbering.ConcreteNumbering),path:`word/footer${h+1}.xml`}}),ContentTypes:{data:$o(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:$o(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:$o(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:$o(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:$o(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:$o(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const f=this.imageReplacer.replace(u,d,s);return this.numberingReplacer.replace(f,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(d.forEach((f,h)=>{e.Comments.Relationships.createRelationship(s+h,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${f.fileName}`)}),$o(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:$o(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:$o(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const rS={WITH_2_BLANKS:"  "},y2=r=>r===!0?rS.WITH_2_BLANKS:r===!1?void 0:r,M5=class nd{static pack(e,t,o){return Rb(this,arguments,function*(a,s,u,l=[]){return this.compiler.compile(a,y2(u),l).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,t,o=[]){return nd.pack(e,"string",t,o)}static toBuffer(e,t,o=[]){return nd.pack(e,"nodebuffer",t,o)}static toBase64String(e,t,o=[]){return nd.pack(e,"base64",t,o)}static toBlob(e,t,o=[]){return nd.pack(e,"blob",t,o)}static toArrayBuffer(e,t,o=[]){return nd.pack(e,"arraybuffer",t,o)}static toStream(e,t,o=[]){const a=new W6.Stream;return this.compiler.compile(e,y2(t),o).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(u=>{a.emit("data",u),a.emit("end")}),a}};At(M5,"compiler",new nS);let iS=M5;var lh={exports:{}},oS=lh.exports,v2;function sS(){return v2||(v2=1,(function(r,e){(function(t,o){o()})(oS,function(){function t(f,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function o(f,h,S){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){d(b.response,h,S)},b.onerror=function(){console.error("could not download file")},b.send()}function a(f){var h=new XMLHttpRequest;h.open("HEAD",f,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(h)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Rf=="object"&&Rf.global===Rf?Rf:void 0,l=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(f,h,S){var b=u.URL||u.webkitURL,p=document.createElement("a");h=h||f.name||"download",p.download=h,p.rel="noopener",typeof f=="string"?(p.href=f,p.origin===location.origin?s(p):a(p.href)?o(f,h,S):s(p,p.target="_blank")):(p.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(p.href)},4e4),setTimeout(function(){s(p)},0))}:"msSaveOrOpenBlob"in navigator?function(f,h,S){if(h=h||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,S),h);else if(a(f))o(f,h,S);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){s(b)})}}:function(f,h,S,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return o(f,h,S);var p=f.type==="application/octet-stream",j=/constructor/i.test(u.HTMLElement)||u.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||p&&j||l)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var I=A.result;I=N?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=I:location=I,b=null},A.readAsDataURL(f)}else{var w=u.URL||u.webkitURL,R=w.createObjectURL(f);b?b.location=R:location.href=R,b=null,setTimeout(function(){w.revokeObjectURL(R)},4e4)}});u.saveAs=d.saveAs=d,r.exports=d})})(lh)),lh.exports}var aS=sS();function Xi(r){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(r)}var Il=Uint8Array,Wa=Uint16Array,o0=Int32Array,s0=new Il([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a0=new Il([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w2=new Il([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z5=function(r,e){for(var t=new Wa(31),o=0;o<31;++o)t[o]=e+=1<<r[o-1];for(var a=new o0(t[30]),o=1;o<30;++o)for(var s=t[o];s<t[o+1];++s)a[s]=s-t[o]<<5|o;return{b:t,r:a}},$5=z5(s0,2),lS=$5.b,I1=$5.r;lS[28]=258,I1[258]=28;var cS=z5(a0,0),x2=cS.r,R1=new Wa(32768);for(var _o=0;_o<32768;++_o){var ou=(_o&43690)>>1|(_o&21845)<<1;ou=(ou&52428)>>2|(ou&13107)<<2,ou=(ou&61680)>>4|(ou&3855)<<4,R1[_o]=((ou&65280)>>8|(ou&255)<<8)>>1}var Xd=(function(r,e,t){for(var o=r.length,a=0,s=new Wa(e);a<o;++a)r[a]&&++s[r[a]-1];var u=new Wa(e);for(a=1;a<e;++a)u[a]=u[a-1]+s[a-1]<<1;var l;if(t){l=new Wa(1<<e);var d=15-e;for(a=0;a<o;++a)if(r[a])for(var f=a<<4|r[a],h=e-r[a],S=u[r[a]-1]++<<h,b=S|(1<<h)-1;S<=b;++S)l[R1[S]>>d]=f}else for(l=new Wa(o),a=0;a<o;++a)r[a]&&(l[a]=R1[u[r[a]-1]++]>>15-r[a]);return l}),Bu=new Il(288);for(var _o=0;_o<144;++_o)Bu[_o]=8;for(var _o=144;_o<256;++_o)Bu[_o]=9;for(var _o=256;_o<280;++_o)Bu[_o]=7;for(var _o=280;_o<288;++_o)Bu[_o]=8;var vh=new Il(32);for(var _o=0;_o<32;++_o)vh[_o]=5;var uS=Xd(Bu,9,0),dS=Xd(vh,5,0),U5=function(r){return(r+7)/8|0},fS=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Il(r.subarray(e,t))},Rc=function(r,e,t){t<<=e&7;var o=e/8|0;r[o]|=t,r[o+1]|=t>>8},Hd=function(r,e,t){t<<=e&7;var o=e/8|0;r[o]|=t,r[o+1]|=t>>8,r[o+2]|=t>>16},Qm=function(r,e){for(var t=[],o=0;o<r.length;++o)r[o]&&t.push({s:o,f:r[o]});var a=t.length,s=t.slice();if(!a)return{t:W5,l:0};if(a==1){var u=new Il(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(G,re){return G.f-re.f}),t.push({s:-1,f:25001});var l=t[0],d=t[1],f=0,h=1,S=2;for(t[0]={s:-1,f:l.f+d.f,l,r:d};h!=a-1;)l=t[t[f].f<t[S].f?f++:S++],d=t[f!=h&&t[f].f<t[S].f?f++:S++],t[h++]={s:-1,f:l.f+d.f,l,r:d};for(var b=s[0].s,o=1;o<a;++o)s[o].s>b&&(b=s[o].s);var p=new Wa(b+1),j=j1(t[h-1],p,0);if(j>e){var o=0,N=0,A=j-e,w=1<<A;for(s.sort(function(re,Q){return p[Q.s]-p[re.s]||re.f-Q.f});o<a;++o){var R=s[o].s;if(p[R]>e)N+=w-(1<<j-p[R]),p[R]=e;else break}for(N>>=A;N>0;){var I=s[o].s;p[I]<e?N-=1<<e-p[I]++-1:++o}for(;o>=0&&N;--o){var k=s[o].s;p[k]==e&&(--p[k],++N)}j=e}return{t:new Il(p),l:j}},j1=function(r,e,t){return r.s==-1?Math.max(j1(r.l,e,t+1),j1(r.r,e,t+1)):e[r.s]=t},b2=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Wa(++e),o=0,a=r[0],s=1,u=function(d){t[o++]=d},l=1;l<=e;++l)if(r[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)u(32754);s>2&&(u(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(u(a),--s;s>6;s-=6)u(8304);s>2&&(u(s-3<<5|8208),s=0)}for(;s--;)u(a);s=1,a=r[l]}return{c:t.subarray(0,o),n:e}},Gd=function(r,e){for(var t=0,o=0;o<e.length;++o)t+=r[o]*e[o];return t},q5=function(r,e,t){var o=t.length,a=U5(e+2);r[a]=o&255,r[a+1]=o>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var s=0;s<o;++s)r[a+s+4]=t[s];return(a+4+o)*8},_2=function(r,e,t,o,a,s,u,l,d,f,h){Rc(e,h++,t),++a[256];for(var S=Qm(a,15),b=S.t,p=S.l,j=Qm(s,15),N=j.t,A=j.l,w=b2(b),R=w.c,I=w.n,k=b2(N),G=k.c,re=k.n,Q=new Wa(19),ie=0;ie<R.length;++ie)++Q[R[ie]&31];for(var ie=0;ie<G.length;++ie)++Q[G[ie]&31];for(var U=Qm(Q,7),ue=U.t,oe=U.l,B=19;B>4&&!ue[w2[B-1]];--B);var te=f+5<<3,P=Gd(a,Bu)+Gd(s,vh)+u,be=Gd(a,b)+Gd(s,N)+u+14+3*B+Gd(Q,ue)+2*Q[16]+3*Q[17]+7*Q[18];if(d>=0&&te<=P&&te<=be)return q5(e,h,r.subarray(d,d+f));var Ae,ge,xe,ke;if(Rc(e,h,1+(be<P)),h+=2,be<P){Ae=Xd(b,p,0),ge=b,xe=Xd(N,A,0),ke=N;var Fe=Xd(ue,oe,0);Rc(e,h,I-257),Rc(e,h+5,re-1),Rc(e,h+10,B-4),h+=14;for(var ie=0;ie<B;++ie)Rc(e,h+3*ie,ue[w2[ie]]);h+=3*B;for(var J=[R,G],C=0;C<2;++C)for(var Z=J[C],ie=0;ie<Z.length;++ie){var ne=Z[ie]&31;Rc(e,h,Fe[ne]),h+=ue[ne],ne>15&&(Rc(e,h,Z[ie]>>5&127),h+=Z[ie]>>12)}}else Ae=uS,ge=Bu,xe=dS,ke=vh;for(var ie=0;ie<l;++ie){var ye=o[ie];if(ye>255){var ne=ye>>18&31;Hd(e,h,Ae[ne+257]),h+=ge[ne+257],ne>7&&(Rc(e,h,ye>>23&31),h+=s0[ne]);var ce=ye&31;Hd(e,h,xe[ce]),h+=ke[ce],ce>3&&(Hd(e,h,ye>>5&8191),h+=a0[ce])}else Hd(e,h,Ae[ye]),h+=ge[ye]}return Hd(e,h,Ae[256]),h+ge[256]},hS=new o0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W5=new Il(0),pS=function(r,e,t,o,a,s){var u=s.z||r.length,l=new Il(o+u+5*(1+Math.ceil(u/7e3))+a),d=l.subarray(o,l.length-a),f=s.l,h=(s.r||0)&7;if(e){h&&(d[0]=s.r>>3);for(var S=hS[e-1],b=S>>13,p=S&8191,j=(1<<t)-1,N=s.p||new Wa(32768),A=s.h||new Wa(j+1),w=Math.ceil(t/3),R=2*w,I=function(H){return(r[H]^r[H+1]<<w^r[H+2]<<R)&j},k=new o0(25e3),G=new Wa(288),re=new Wa(32),Q=0,ie=0,U=s.i||0,ue=0,oe=s.w||0,B=0;U+2<u;++U){var te=I(U),P=U&32767,be=A[te];if(N[P]=be,A[te]=P,oe<=U){var Ae=u-U;if((Q>7e3||ue>24576)&&(Ae>423||!f)){h=_2(r,d,0,k,G,re,ie,ue,B,U-B,h),ue=Q=ie=0,B=U;for(var ge=0;ge<286;++ge)G[ge]=0;for(var ge=0;ge<30;++ge)re[ge]=0}var xe=2,ke=0,Fe=p,J=P-be&32767;if(Ae>2&&te==I(U-J))for(var C=Math.min(b,Ae)-1,Z=Math.min(32767,U),ne=Math.min(258,Ae);J<=Z&&--Fe&&P!=be;){if(r[U+xe]==r[U+xe-J]){for(var ye=0;ye<ne&&r[U+ye]==r[U+ye-J];++ye);if(ye>xe){if(xe=ye,ke=J,ye>C)break;for(var ce=Math.min(J,ye-2),M=0,ge=0;ge<ce;++ge){var z=U-J+ge&32767,fe=N[z],he=z-fe&32767;he>M&&(M=he,be=z)}}}P=be,be=N[P],J+=P-be&32767}if(ke){k[ue++]=268435456|I1[xe]<<18|x2[ke];var se=I1[xe]&31,me=x2[ke]&31;ie+=s0[se]+a0[me],++G[257+se],++re[me],oe=U+xe,++Q}else k[ue++]=r[U],++G[r[U]]}}for(U=Math.max(U,oe);U<u;++U)k[ue++]=r[U],++G[r[U]];h=_2(r,d,f,k,G,re,ie,ue,B,U-B,h),f||(s.r=h&7|d[h/8|0]<<3,h-=7,s.h=A,s.p=N,s.i=U,s.w=oe)}else{for(var U=s.w||0;U<u+f;U+=65535){var Be=U+65535;Be>=u&&(d[h/8|0]=f,Be=u),h=q5(d,h+1,r.subarray(U,Be))}s.i=u}return fS(l,0,o+U5(h)+a)},H5=function(){var r=1,e=0;return{p:function(t){for(var o=r,a=e,s=t.length|0,u=0;u!=s;){for(var l=Math.min(u+2655,s);u<l;++u)a+=o+=t[u];o=(o&65535)+15*(o>>16),a=(a&65535)+15*(a>>16)}r=o,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},mS=function(r,e,t,o,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),u=new Il(s.length+r.length);u.set(s),u.set(r,s.length),r=u,a.w=s.length}return pS(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,o,a)},G5=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},gS=function(r,e){var t=e.level,o=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=o<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=H5();a.p(e.dictionary),G5(r,2,a.d())}};function P1(r,e){e||(e={});var t=H5();t.p(r);var o=mS(r,e,e.dictionary?6:2,4);return gS(o,e),G5(o,o.length-4,t.d()),o}var yS=typeof TextDecoder<"u"&&new TextDecoder,vS=0;try{yS.decode(W5,{stream:!0}),vS=1}catch{}function wS(r){if(Array.isArray(r))return r}function xS(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var o,a,s,u,l=[],d=!0,f=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(d=(o=s.call(t)).done)&&(l.push(o.value),l.length!==e);d=!0);}catch(h){f=!0,a=h}finally{try{if(!d&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw a}}return l}}function S2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,o=Array(e);t<e;t++)o[t]=r[t];return o}function bS(r,e){if(r){if(typeof r=="string")return S2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S2(r,e):void 0}}function _S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k2(r,e){return wS(r)||xS(r,e)||bS(r,e)||_S()}function A2(r,e="utf8"){return new TextDecoder(e).decode(r)}const SS=new TextEncoder;function kS(r){return SS.encode(r)}const AS=1024*8,NS=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),e1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class l0{constructor(e=AS,t={}){Vi(this,"buffer");Vi(this,"byteLength");Vi(this,"byteOffset");Vi(this,"length");Vi(this,"offset");Vi(this,"lastWrittenByte");Vi(this,"littleEndian");Vi(this,"_data");Vi(this,"_mark");Vi(this,"_marks");let o=!1;typeof e=="number"?e=new ArrayBuffer(e):(o=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,s=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof l0)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),o?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const o=(this.offset+e)*2,a=new Uint8Array(o);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=o,this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const o=e1[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+o);if(this.littleEndian===NS&&t!=="uint8"&&t!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+o));l.reverse();const d=new e1[t](l.buffer);return this.offset+=o,d.reverse(),d}const u=new e1[t](s);return this.offset+=o,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let o=0;o<e;o++)t+=this.readChar();return t}readUtf8(e=1){return A2(this.readBytes(e))}decodeText(e=1,t="utf8"){return A2(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(kS(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ad(r){let e=r.length;for(;--e>=0;)r[e]=0}const ES=3,TS=258,K5=29,CS=256,LS=CS+1+K5,V5=30,IS=512,RS=new Array((LS+2)*2);Ad(RS);const jS=new Array(V5*2);Ad(jS);const PS=new Array(IS);Ad(PS);const DS=new Array(TS-ES+1);Ad(DS);const OS=new Array(K5);Ad(OS);const FS=new Array(V5);Ad(FS);const BS=(r,e,t,o)=>{let a=r&65535|0,s=r>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[o++]|0,s=s+a|0;while(--u);a%=65521,s%=65521}return a|s<<16|0};var D1=BS;const MS=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},zS=new Uint32Array(MS()),$S=(r,e,t,o)=>{const a=zS,s=o+t;r^=-1;for(let u=o;u<s;u++)r=r>>>8^a[(r^e[u])&255];return r^-1};var Ql=$S,O1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},X5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const US=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var qS=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const o in t)US(t,o)&&(r[o]=t[o])}}return r},WS=r=>{let e=0;for(let o=0,a=r.length;o<a;o++)e+=r[o].length;const t=new Uint8Array(e);for(let o=0,a=0,s=r.length;o<s;o++){let u=r[o];t.set(u,a),a+=u.length}return t},Y5={assign:qS,flattenChunks:WS};let J5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{J5=!1}const Qd=new Uint8Array(256);for(let r=0;r<256;r++)Qd[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Qd[254]=Qd[254]=1;var HS=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,o,a,s,u=r.length,l=0;for(a=0;a<u;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(o=r.charCodeAt(a+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),a++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(o=r.charCodeAt(a+1),(o&64512)===56320&&(t=65536+(t-55296<<10)+(o-56320),a++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const GS=(r,e)=>{if(e<65534&&r.subarray&&J5)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let o=0;o<e;o++)t+=String.fromCharCode(r[o]);return t};var KS=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let o,a;const s=new Array(t*2);for(a=0,o=0;o<t;){let u=r[o++];if(u<128){s[a++]=u;continue}let l=Qd[u];if(l>4){s[a++]=65533,o+=l-1;continue}for(u&=l===2?31:l===3?15:7;l>1&&o<t;)u=u<<6|r[o++]&63,l--;if(l>1){s[a++]=65533;continue}u<65536?s[a++]=u:(u-=65536,s[a++]=55296|u>>10&1023,s[a++]=56320|u&1023)}return GS(s,a)},VS=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Qd[r[t]]>e?t:e},F1={string2buf:HS,buf2string:KS,utf8border:VS};function XS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var YS=XS;const Hf=16209,JS=16191;var ZS=function(e,t){let o,a,s,u,l,d,f,h,S,b,p,j,N,A,w,R,I,k,G,re,Q,ie,U,ue;const oe=e.state;o=e.next_in,U=e.input,a=o+(e.avail_in-5),s=e.next_out,ue=e.output,u=s-(t-e.avail_out),l=s+(e.avail_out-257),d=oe.dmax,f=oe.wsize,h=oe.whave,S=oe.wnext,b=oe.window,p=oe.hold,j=oe.bits,N=oe.lencode,A=oe.distcode,w=(1<<oe.lenbits)-1,R=(1<<oe.distbits)-1;e:do{j<15&&(p+=U[o++]<<j,j+=8,p+=U[o++]<<j,j+=8),I=N[p&w];t:for(;;){if(k=I>>>24,p>>>=k,j-=k,k=I>>>16&255,k===0)ue[s++]=I&65535;else if(k&16){G=I&65535,k&=15,k&&(j<k&&(p+=U[o++]<<j,j+=8),G+=p&(1<<k)-1,p>>>=k,j-=k),j<15&&(p+=U[o++]<<j,j+=8,p+=U[o++]<<j,j+=8),I=A[p&R];n:for(;;){if(k=I>>>24,p>>>=k,j-=k,k=I>>>16&255,k&16){if(re=I&65535,k&=15,j<k&&(p+=U[o++]<<j,j+=8,j<k&&(p+=U[o++]<<j,j+=8)),re+=p&(1<<k)-1,re>d){e.msg="invalid distance too far back",oe.mode=Hf;break e}if(p>>>=k,j-=k,k=s-u,re>k){if(k=re-k,k>h&&oe.sane){e.msg="invalid distance too far back",oe.mode=Hf;break e}if(Q=0,ie=b,S===0){if(Q+=f-k,k<G){G-=k;do ue[s++]=b[Q++];while(--k);Q=s-re,ie=ue}}else if(S<k){if(Q+=f+S-k,k-=S,k<G){G-=k;do ue[s++]=b[Q++];while(--k);if(Q=0,S<G){k=S,G-=k;do ue[s++]=b[Q++];while(--k);Q=s-re,ie=ue}}}else if(Q+=S-k,k<G){G-=k;do ue[s++]=b[Q++];while(--k);Q=s-re,ie=ue}for(;G>2;)ue[s++]=ie[Q++],ue[s++]=ie[Q++],ue[s++]=ie[Q++],G-=3;G&&(ue[s++]=ie[Q++],G>1&&(ue[s++]=ie[Q++]))}else{Q=s-re;do ue[s++]=ue[Q++],ue[s++]=ue[Q++],ue[s++]=ue[Q++],G-=3;while(G>2);G&&(ue[s++]=ue[Q++],G>1&&(ue[s++]=ue[Q++]))}}else if((k&64)===0){I=A[(I&65535)+(p&(1<<k)-1)];continue n}else{e.msg="invalid distance code",oe.mode=Hf;break e}break}}else if((k&64)===0){I=N[(I&65535)+(p&(1<<k)-1)];continue t}else if(k&32){oe.mode=JS;break e}else{e.msg="invalid literal/length code",oe.mode=Hf;break e}break}}while(o<a&&s<l);G=j>>3,o-=G,j-=G<<3,p&=(1<<j)-1,e.next_in=o,e.next_out=s,e.avail_in=o<a?5+(a-o):5-(o-a),e.avail_out=s<l?257+(l-s):257-(s-l),oe.hold=p,oe.bits=j};const Zu=15,N2=852,E2=592,T2=0,t1=1,C2=2,QS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),e8=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),t8=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),n8=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),r8=(r,e,t,o,a,s,u,l)=>{const d=l.bits;let f=0,h=0,S=0,b=0,p=0,j=0,N=0,A=0,w=0,R=0,I,k,G,re,Q,ie=null,U;const ue=new Uint16Array(Zu+1),oe=new Uint16Array(Zu+1);let B=null,te,P,be;for(f=0;f<=Zu;f++)ue[f]=0;for(h=0;h<o;h++)ue[e[t+h]]++;for(p=d,b=Zu;b>=1&&ue[b]===0;b--);if(p>b&&(p=b),b===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(S=1;S<b&&ue[S]===0;S++);for(p<S&&(p=S),A=1,f=1;f<=Zu;f++)if(A<<=1,A-=ue[f],A<0)return-1;if(A>0&&(r===T2||b!==1))return-1;for(oe[1]=0,f=1;f<Zu;f++)oe[f+1]=oe[f]+ue[f];for(h=0;h<o;h++)e[t+h]!==0&&(u[oe[e[t+h]]++]=h);if(r===T2?(ie=B=u,U=20):r===t1?(ie=QS,B=e8,U=257):(ie=t8,B=n8,U=0),R=0,h=0,f=S,Q=s,j=p,N=0,G=-1,w=1<<p,re=w-1,r===t1&&w>N2||r===C2&&w>E2)return 1;for(;;){te=f-N,u[h]+1<U?(P=0,be=u[h]):u[h]>=U?(P=B[u[h]-U],be=ie[u[h]-U]):(P=96,be=0),I=1<<f-N,k=1<<j,S=k;do k-=I,a[Q+(R>>N)+k]=te<<24|P<<16|be|0;while(k!==0);for(I=1<<f-1;R&I;)I>>=1;if(I!==0?(R&=I-1,R+=I):R=0,h++,--ue[f]===0){if(f===b)break;f=e[t+u[h]]}if(f>p&&(R&re)!==G){for(N===0&&(N=p),Q+=S,j=f-N,A=1<<j;j+N<b&&(A-=ue[j+N],!(A<=0));)j++,A<<=1;if(w+=1<<j,r===t1&&w>N2||r===C2&&w>E2)return 1;G=R&re,a[G]=p<<24|j<<16|Q-s|0}}return R!==0&&(a[Q+R]=f-N<<24|64<<16|0),l.bits=p,0};var Yd=r8;const i8=0,Z5=1,Q5=2,{Z_FINISH:L2,Z_BLOCK:o8,Z_TREES:Gf,Z_OK:Mu,Z_STREAM_END:s8,Z_NEED_DICT:a8,Z_STREAM_ERROR:dl,Z_DATA_ERROR:ew,Z_MEM_ERROR:tw,Z_BUF_ERROR:l8,Z_DEFLATED:I2}=X5,Ih=16180,R2=16181,j2=16182,P2=16183,D2=16184,O2=16185,F2=16186,B2=16187,M2=16188,z2=16189,wh=16190,jc=16191,n1=16192,$2=16193,r1=16194,U2=16195,q2=16196,W2=16197,H2=16198,Kf=16199,Vf=16200,G2=16201,K2=16202,V2=16203,X2=16204,Y2=16205,i1=16206,J2=16207,Z2=16208,Eo=16209,nw=16210,rw=16211,c8=852,u8=592,d8=15,f8=d8,Q2=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function h8(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Uu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Ih||e.mode>rw?1:0},iw=r=>{if(Uu(r))return dl;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Ih,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(c8),e.distcode=e.distdyn=new Int32Array(u8),e.sane=1,e.back=-1,Mu},ow=r=>{if(Uu(r))return dl;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,iw(r)},sw=(r,e)=>{let t;if(Uu(r))return dl;const o=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?dl:(o.window!==null&&o.wbits!==e&&(o.window=null),o.wrap=t,o.wbits=e,ow(r))},aw=(r,e)=>{if(!r)return dl;const t=new h8;r.state=t,t.strm=r,t.window=null,t.mode=Ih;const o=sw(r,e);return o!==Mu&&(r.state=null),o},p8=r=>aw(r,f8);let ev=!0,o1,s1;const m8=r=>{if(ev){o1=new Int32Array(512),s1=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Yd(Z5,r.lens,0,288,o1,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Yd(Q5,r.lens,0,32,s1,0,r.work,{bits:5}),ev=!1}r.lencode=o1,r.lenbits=9,r.distcode=s1,r.distbits=5},lw=(r,e,t,o)=>{let a;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),o>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>o&&(a=o),s.window.set(e.subarray(t-o,t-o+a),s.wnext),o-=a,o?(s.window.set(e.subarray(t-o,t),0),s.wnext=o,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},g8=(r,e)=>{let t,o,a,s,u,l,d,f,h,S,b,p,j,N,A=0,w,R,I,k,G,re,Q,ie;const U=new Uint8Array(4);let ue,oe;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Uu(r)||!r.output||!r.input&&r.avail_in!==0)return dl;t=r.state,t.mode===jc&&(t.mode=n1),u=r.next_out,a=r.output,d=r.avail_out,s=r.next_in,o=r.input,l=r.avail_in,f=t.hold,h=t.bits,S=l,b=d,ie=Mu;e:for(;;)switch(t.mode){case Ih:if(t.wrap===0){t.mode=n1;break}for(;h<16;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,U[0]=f&255,U[1]=f>>>8&255,t.check=Ql(t.check,U,2,0),f=0,h=0,t.mode=R2;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){r.msg="incorrect header check",t.mode=Eo;break}if((f&15)!==I2){r.msg="unknown compression method",t.mode=Eo;break}if(f>>>=4,h-=4,Q=(f&15)+8,t.wbits===0&&(t.wbits=Q),Q>15||Q>t.wbits){r.msg="invalid window size",t.mode=Eo;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=f&512?z2:jc,f=0,h=0;break;case R2:for(;h<16;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(t.flags=f,(t.flags&255)!==I2){r.msg="unknown compression method",t.mode=Eo;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Eo;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,t.check=Ql(t.check,U,2,0)),f=0,h=0,t.mode=j2;case j2:for(;h<32;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,U[2]=f>>>16&255,U[3]=f>>>24&255,t.check=Ql(t.check,U,4,0)),f=0,h=0,t.mode=P2;case P2:for(;h<16;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,t.check=Ql(t.check,U,2,0)),f=0,h=0,t.mode=D2;case D2:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(U[0]=f&255,U[1]=f>>>8&255,t.check=Ql(t.check,U,2,0)),f=0,h=0}else t.head&&(t.head.extra=null);t.mode=O2;case O2:if(t.flags&1024&&(p=t.length,p>l&&(p=l),p&&(t.head&&(Q=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(o.subarray(s,s+p),Q)),t.flags&512&&t.wrap&4&&(t.check=Ql(t.check,o,p,s)),l-=p,s+=p,t.length-=p),t.length))break e;t.length=0,t.mode=F2;case F2:if(t.flags&2048){if(l===0)break e;p=0;do Q=o[s+p++],t.head&&Q&&t.length<65536&&(t.head.name+=String.fromCharCode(Q));while(Q&&p<l);if(t.flags&512&&t.wrap&4&&(t.check=Ql(t.check,o,p,s)),l-=p,s+=p,Q)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=B2;case B2:if(t.flags&4096){if(l===0)break e;p=0;do Q=o[s+p++],t.head&&Q&&t.length<65536&&(t.head.comment+=String.fromCharCode(Q));while(Q&&p<l);if(t.flags&512&&t.wrap&4&&(t.check=Ql(t.check,o,p,s)),l-=p,s+=p,Q)break e}else t.head&&(t.head.comment=null);t.mode=M2;case M2:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(t.wrap&4&&f!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Eo;break}f=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=jc;break;case z2:for(;h<32;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}r.adler=t.check=Q2(f),f=0,h=0,t.mode=wh;case wh:if(t.havedict===0)return r.next_out=u,r.avail_out=d,r.next_in=s,r.avail_in=l,t.hold=f,t.bits=h,a8;r.adler=t.check=1,t.mode=jc;case jc:if(e===o8||e===Gf)break e;case n1:if(t.last){f>>>=h&7,h-=h&7,t.mode=i1;break}for(;h<3;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}switch(t.last=f&1,f>>>=1,h-=1,f&3){case 0:t.mode=$2;break;case 1:if(m8(t),t.mode=Kf,e===Gf){f>>>=2,h-=2;break e}break;case 2:t.mode=q2;break;case 3:r.msg="invalid block type",t.mode=Eo}f>>>=2,h-=2;break;case $2:for(f>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Eo;break}if(t.length=f&65535,f=0,h=0,t.mode=r1,e===Gf)break e;case r1:t.mode=U2;case U2:if(p=t.length,p){if(p>l&&(p=l),p>d&&(p=d),p===0)break e;a.set(o.subarray(s,s+p),u),l-=p,s+=p,d-=p,u+=p,t.length-=p;break}t.mode=jc;break;case q2:for(;h<14;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(t.nlen=(f&31)+257,f>>>=5,h-=5,t.ndist=(f&31)+1,f>>>=5,h-=5,t.ncode=(f&15)+4,f>>>=4,h-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Eo;break}t.have=0,t.mode=W2;case W2:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.lens[B[t.have++]]=f&7,f>>>=3,h-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ue={bits:t.lenbits},ie=Yd(i8,t.lens,0,19,t.lencode,0,t.work,ue),t.lenbits=ue.bits,ie){r.msg="invalid code lengths set",t.mode=Eo;break}t.have=0,t.mode=H2;case H2:for(;t.have<t.nlen+t.ndist;){for(;A=t.lencode[f&(1<<t.lenbits)-1],w=A>>>24,R=A>>>16&255,I=A&65535,!(w<=h);){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(I<16)f>>>=w,h-=w,t.lens[t.have++]=I;else{if(I===16){for(oe=w+2;h<oe;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(f>>>=w,h-=w,t.have===0){r.msg="invalid bit length repeat",t.mode=Eo;break}Q=t.lens[t.have-1],p=3+(f&3),f>>>=2,h-=2}else if(I===17){for(oe=w+3;h<oe;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}f>>>=w,h-=w,Q=0,p=3+(f&7),f>>>=3,h-=3}else{for(oe=w+7;h<oe;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}f>>>=w,h-=w,Q=0,p=11+(f&127),f>>>=7,h-=7}if(t.have+p>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Eo;break}for(;p--;)t.lens[t.have++]=Q}}if(t.mode===Eo)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Eo;break}if(t.lenbits=9,ue={bits:t.lenbits},ie=Yd(Z5,t.lens,0,t.nlen,t.lencode,0,t.work,ue),t.lenbits=ue.bits,ie){r.msg="invalid literal/lengths set",t.mode=Eo;break}if(t.distbits=6,t.distcode=t.distdyn,ue={bits:t.distbits},ie=Yd(Q5,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ue),t.distbits=ue.bits,ie){r.msg="invalid distances set",t.mode=Eo;break}if(t.mode=Kf,e===Gf)break e;case Kf:t.mode=Vf;case Vf:if(l>=6&&d>=258){r.next_out=u,r.avail_out=d,r.next_in=s,r.avail_in=l,t.hold=f,t.bits=h,ZS(r,b),u=r.next_out,a=r.output,d=r.avail_out,s=r.next_in,o=r.input,l=r.avail_in,f=t.hold,h=t.bits,t.mode===jc&&(t.back=-1);break}for(t.back=0;A=t.lencode[f&(1<<t.lenbits)-1],w=A>>>24,R=A>>>16&255,I=A&65535,!(w<=h);){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(R&&(R&240)===0){for(k=w,G=R,re=I;A=t.lencode[re+((f&(1<<k+G)-1)>>k)],w=A>>>24,R=A>>>16&255,I=A&65535,!(k+w<=h);){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}f>>>=k,h-=k,t.back+=k}if(f>>>=w,h-=w,t.back+=w,t.length=I,R===0){t.mode=Y2;break}if(R&32){t.back=-1,t.mode=jc;break}if(R&64){r.msg="invalid literal/length code",t.mode=Eo;break}t.extra=R&15,t.mode=G2;case G2:if(t.extra){for(oe=t.extra;h<oe;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=K2;case K2:for(;A=t.distcode[f&(1<<t.distbits)-1],w=A>>>24,R=A>>>16&255,I=A&65535,!(w<=h);){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if((R&240)===0){for(k=w,G=R,re=I;A=t.distcode[re+((f&(1<<k+G)-1)>>k)],w=A>>>24,R=A>>>16&255,I=A&65535,!(k+w<=h);){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}f>>>=k,h-=k,t.back+=k}if(f>>>=w,h-=w,t.back+=w,R&64){r.msg="invalid distance code",t.mode=Eo;break}t.offset=I,t.extra=R&15,t.mode=V2;case V2:if(t.extra){for(oe=t.extra;h<oe;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Eo;break}t.mode=X2;case X2:if(d===0)break e;if(p=b-d,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Eo;break}p>t.wnext?(p-=t.wnext,j=t.wsize-p):j=t.wnext-p,p>t.length&&(p=t.length),N=t.window}else N=a,j=u-t.offset,p=t.length;p>d&&(p=d),d-=p,t.length-=p;do a[u++]=N[j++];while(--p);t.length===0&&(t.mode=Vf);break;case Y2:if(d===0)break e;a[u++]=t.length,d--,t.mode=Vf;break;case i1:if(t.wrap){for(;h<32;){if(l===0)break e;l--,f|=o[s++]<<h,h+=8}if(b-=d,r.total_out+=b,t.total+=b,t.wrap&4&&b&&(r.adler=t.check=t.flags?Ql(t.check,a,b,u-b):D1(t.check,a,b,u-b)),b=d,t.wrap&4&&(t.flags?f:Q2(f))!==t.check){r.msg="incorrect data check",t.mode=Eo;break}f=0,h=0}t.mode=J2;case J2:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,f+=o[s++]<<h,h+=8}if(t.wrap&4&&f!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Eo;break}f=0,h=0}t.mode=Z2;case Z2:ie=s8;break e;case Eo:ie=ew;break e;case nw:return tw;case rw:default:return dl}return r.next_out=u,r.avail_out=d,r.next_in=s,r.avail_in=l,t.hold=f,t.bits=h,(t.wsize||b!==r.avail_out&&t.mode<Eo&&(t.mode<i1||e!==L2))&&lw(r,r.output,r.next_out,b-r.avail_out),S-=r.avail_in,b-=r.avail_out,r.total_in+=S,r.total_out+=b,t.total+=b,t.wrap&4&&b&&(r.adler=t.check=t.flags?Ql(t.check,a,b,r.next_out-b):D1(t.check,a,b,r.next_out-b)),r.data_type=t.bits+(t.last?64:0)+(t.mode===jc?128:0)+(t.mode===Kf||t.mode===r1?256:0),(S===0&&b===0||e===L2)&&ie===Mu&&(ie=l8),ie},y8=r=>{if(Uu(r))return dl;let e=r.state;return e.window&&(e.window=null),r.state=null,Mu},v8=(r,e)=>{if(Uu(r))return dl;const t=r.state;return(t.wrap&2)===0?dl:(t.head=e,e.done=!1,Mu)},w8=(r,e)=>{const t=e.length;let o,a,s;return Uu(r)||(o=r.state,o.wrap!==0&&o.mode!==wh)?dl:o.mode===wh&&(a=1,a=D1(a,e,t,0),a!==o.check)?ew:(s=lw(r,e,t,t),s?(o.mode=nw,tw):(o.havedict=1,Mu))};var x8=ow,b8=sw,_8=iw,S8=p8,k8=aw,A8=g8,N8=y8,E8=v8,T8=w8,C8="pako inflate (from Nodeca project)",Dc={inflateReset:x8,inflateReset2:b8,inflateResetKeep:_8,inflateInit:S8,inflateInit2:k8,inflate:A8,inflateEnd:N8,inflateGetHeader:E8,inflateSetDictionary:T8,inflateInfo:C8};function L8(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var I8=L8;const cw=Object.prototype.toString,{Z_NO_FLUSH:R8,Z_FINISH:j8,Z_OK:ef,Z_STREAM_END:a1,Z_NEED_DICT:l1,Z_STREAM_ERROR:P8,Z_DATA_ERROR:tv,Z_MEM_ERROR:D8}=X5;function uf(r){this.options=Y5.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YS,this.strm.avail_out=0;let t=Dc.inflateInit2(this.strm,e.windowBits);if(t!==ef)throw new Error(O1[t]);if(this.header=new I8,Dc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=F1.string2buf(e.dictionary):cw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Dc.inflateSetDictionary(this.strm,e.dictionary),t!==ef)))throw new Error(O1[t])}uf.prototype.push=function(r,e){const t=this.strm,o=this.options.chunkSize,a=this.options.dictionary;let s,u,l;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?j8:R8,cw.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(o),t.next_out=0,t.avail_out=o),s=Dc.inflate(t,u),s===l1&&a&&(s=Dc.inflateSetDictionary(t,a),s===ef?s=Dc.inflate(t,u):s===tv&&(s=l1));t.avail_in>0&&s===a1&&t.state.wrap>0&&r[t.next_in]!==0;)Dc.inflateReset(t),s=Dc.inflate(t,u);switch(s){case P8:case tv:case l1:case D8:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===a1))if(this.options.to==="string"){let d=F1.utf8border(t.output,t.next_out),f=t.next_out-d,h=F1.buf2string(t.output,d);t.next_out=f,t.avail_out=o-f,f&&t.output.set(t.output.subarray(d,d+f),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===ef&&l===0)){if(s===a1)return s=Dc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};uf.prototype.onData=function(r){this.chunks.push(r)};uf.prototype.onEnd=function(r){r===ef&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Y5.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function O8(r,e){const t=new uf(e);if(t.push(r),t.err)throw t.msg||O1[t.err];return t.result}var F8=uf,B8=O8,M8={Inflate:F8,inflate:B8};const{Inflate:z8,inflate:$8}=M8;var nv=z8,U8=$8;const uw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;uw[r]=e}const rv=4294967295;function q8(r,e,t){let o=r;for(let a=0;a<t;a++)o=uw[(o^e[a])&255]^o>>>8;return o}function W8(r,e){return(q8(rv,r,e)^rv)>>>0}function iv(r,e,t){const o=r.readUint32(),a=W8(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(a!==o)throw new Error(`CRC mismatch for chunk ${t}. Expected ${o}, found ${a}`)}function dw(r,e,t){for(let o=0;o<t;o++)e[o]=r[o]}function fw(r,e,t,o){let a=0;for(;a<o;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-o]&255}function hw(r,e,t,o){let a=0;if(t.length===0)for(;a<o;a++)e[a]=r[a];else for(;a<o;a++)e[a]=r[a]+t[a]&255}function pw(r,e,t,o,a){let s=0;if(t.length===0){for(;s<a;s++)e[s]=r[s];for(;s<o;s++)e[s]=r[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<o;s++)e[s]=r[s]+(e[s-a]+t[s]>>1)&255}}function mw(r,e,t,o,a){let s=0;if(t.length===0){for(;s<a;s++)e[s]=r[s];for(;s<o;s++)e[s]=r[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=r[s]+t[s]&255;for(;s<o;s++)e[s]=r[s]+H8(e[s-a],t[s],t[s-a])&255}}function H8(r,e,t){const o=r+e-t,a=Math.abs(o-r),s=Math.abs(o-e),u=Math.abs(o-t);return a<=s&&a<=u?r:s<=u?e:t}function G8(r,e,t,o,a,s){switch(r){case 0:dw(e,t,a);break;case 1:fw(e,t,a,s);break;case 2:hw(e,t,o,a);break;case 3:pw(e,t,o,a,s);break;case 4:mw(e,t,o,a,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const K8=new Uint16Array([255]),V8=new Uint8Array(K8.buffer),X8=V8[0]===255;function Y8(r){const{data:e,width:t,height:o,channels:a,depth:s}=r,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,d=new Uint8Array(o*t*l);let f=0;for(let h=0;h<7;h++){const S=u[h],b=Math.ceil((t-S.x)/S.xStep),p=Math.ceil((o-S.y)/S.yStep);if(b<=0||p<=0)continue;const j=b*l,N=new Uint8Array(j);for(let A=0;A<p;A++){const w=e[f++],R=e.subarray(f,f+j);f+=j;const I=new Uint8Array(j);G8(w,R,I,N,j,l),N.set(I);for(let k=0;k<b;k++){const G=S.x+k*S.xStep,re=S.y+A*S.yStep;if(!(G>=t||re>=o))for(let Q=0;Q<l;Q++)d[(re*t+G)*l+Q]=I[k*l+Q]}}}if(s===16){const h=new Uint16Array(d.buffer);if(X8)for(let S=0;S<h.length;S++)h[S]=J8(h[S]);return h}else return d}function J8(r){return(r&255)<<8|r>>8&255}const Z8=new Uint16Array([255]),Q8=new Uint8Array(Z8.buffer),ek=Q8[0]===255,tk=new Uint8Array(0);function ov(r){const{data:e,width:t,height:o,channels:a,depth:s}=r,u=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*t),d=new Uint8Array(o*l);let f=tk,h=0,S,b;for(let p=0;p<o;p++){switch(S=e.subarray(h+1,h+1+l),b=d.subarray(p*l,(p+1)*l),e[h]){case 0:dw(S,b,l);break;case 1:fw(S,b,l,u);break;case 2:hw(S,b,f,l);break;case 3:pw(S,b,f,l,u);break;case 4:mw(S,b,f,l,u);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}f=b,h+=l+1}if(s===16){const p=new Uint16Array(d.buffer);if(ek)for(let j=0;j<p.length;j++)p[j]=nk(p[j]);return p}else return d}function nk(r){return(r&255)<<8|r>>8&255}const ch=Uint8Array.of(137,80,78,71,13,10,26,10);function sv(r){if(!rk(r.readBytes(ch.length)))throw new Error("wrong PNG signature")}function rk(r){if(r.length<ch.length)return!1;for(let e=0;e<ch.length;e++)if(r[e]!==ch[e])return!1;return!0}const ik="tEXt",ok=0,gw=new TextDecoder("latin1");function sk(r){if(lk(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const ak=/^[\u0000-\u00FF]*$/;function lk(r){if(!ak.test(r))throw new Error("invalid latin1 text")}function ck(r,e,t){const o=yw(e);r[o]=uk(e,t-o.length-1)}function yw(r){for(r.mark();r.readByte()!==ok;);const e=r.offset;r.reset();const t=gw.decode(r.readBytes(e-r.offset-1));return r.skip(1),sk(t),t}function uk(r,e){return gw.decode(r.readBytes(e))}const qa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},c1={UNKNOWN:-1,DEFLATE:0},av={UNKNOWN:-1,ADAPTIVE:0},u1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Xf={NONE:0,BACKGROUND:1,PREVIOUS:2},d1={SOURCE:0,OVER:1};class dk extends l0{constructor(t,o={}){super(t);Vi(this,"_checkCrc");Vi(this,"_inflator");Vi(this,"_png");Vi(this,"_apng");Vi(this,"_end");Vi(this,"_hasPalette");Vi(this,"_palette");Vi(this,"_hasTransparency");Vi(this,"_transparency");Vi(this,"_compressionMethod");Vi(this,"_filterMethod");Vi(this,"_interlaceMethod");Vi(this,"_colorType");Vi(this,"_isAnimated");Vi(this,"_numberOfFrames");Vi(this,"_numberOfPlays");Vi(this,"_frames");Vi(this,"_writingDataChunks");const{checkCrc:a=!1}=o;this._checkCrc=a,this._inflator=new nv,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=c1.UNKNOWN,this._filterMethod=av.UNKNOWN,this._interlaceMethod=u1.UNKNOWN,this._colorType=qa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(sv(this);!this._end;){const t=this.readUint32(),o=this.readChars(4);this.decodeChunk(t,o)}return this.decodeImage(),this._png}decodeApng(){for(sv(this);!this._end;){const t=this.readUint32(),o=this.readChars(4);this.decodeApngChunk(t,o)}return this.decodeApngImage(),this._apng}decodeChunk(t,o){const a=this.offset;switch(o){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case ik:ck(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?iv(this,t+4,o):this.skip(4)}decodeApngChunk(t,o){const a=this.offset;switch(o!=="fdAT"&&o!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),o){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,o),this.offset=a+t;break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?iv(this,t+4,o):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=fk(this.readUint8());const o=this.readUint8();this._colorType=o;let a;switch(o){case qa.GREYSCALE:a=1;break;case qa.TRUECOLOUR:a=3;break;case qa.INDEXED_COLOUR:a=1;break;case qa.GREYSCALE_ALPHA:a=2;break;case qa.TRUECOLOUR_ALPHA:a=4;break;case qa.UNKNOWN:default:throw new Error(`Unknown color type: ${o}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==c1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const o=t/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<o;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const o=t,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let o=t,a=this.offset+this.byteOffset;if(a+=4,o-=4,this._inflator.push(new Uint8Array(this.buffer,a,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case qa.GREYSCALE:case qa.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let o=0;o<t/2;o++)this._transparency[o]=this.readUint16();break}case qa.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let o=0;for(;o<t;o++){const a=this.readByte();this._palette[o].push(a)}for(;o<this._palette.length;o++)this._palette[o].push(255);break}case qa.UNKNOWN:case qa.GREYSCALE_ALPHA:case qa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const o=yw(this),a=this.readUint8();if(a!==c1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(t-o.length-2);this._png.iccEmbeddedProfile={name:o,profile:U8(s)}}decodepHYs(){const t=this.readUint32(),o=this.readUint32(),a=this.readByte();this._png.resolution={x:t,y:o,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const o={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(t);if(a){if(a.data=ov({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)o.data=a.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(a,s,o),this.addFrameDataToCanvas(o,a)}this._apng.frames.push(o)}}return this._apng}disposeFrame(t,o,a){switch(t.disposeOp){case Xf.NONE:break;case Xf.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let u=0;u<this._png.width;u++){const l=(s*t.width+u)*this._png.channels;for(let d=0;d<this._png.channels;d++)a.data[l+d]=0}break;case Xf.PREVIOUS:a.data.set(o.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,o){const a=1<<this._png.depth,s=(u,l)=>{const d=((u+o.yOffset)*this._png.width+o.xOffset+l)*this._png.channels,f=(u*o.width+l)*this._png.channels;return{index:d,frameIndex:f}};switch(o.blendOp){case d1.SOURCE:for(let u=0;u<o.height;u++)for(let l=0;l<o.width;l++){const{index:d,frameIndex:f}=s(u,l);for(let h=0;h<this._png.channels;h++)t.data[d+h]=o.data[f+h]}break;case d1.OVER:for(let u=0;u<o.height;u++)for(let l=0;l<o.width;l++){const{index:d,frameIndex:f}=s(u,l);for(let h=0;h<this._png.channels;h++){const S=o.data[f+this._png.channels-1]/a,b=h%(this._png.channels-1)===0?1:o.data[f+h],p=Math.floor(S*b+(1-S)*t.data[d+h]);t.data[d+h]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var o;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((o=this._frames)==null?void 0:o.at(0)).data:this._inflator.result;if(this._filterMethod!==av.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===u1.NO_INTERLACE)this._png.data=ov({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===u1.ADAM7)this._png.data=Y8({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,o=this._frames.at(-1);o?o.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Xf.NONE,blendOp:d1.SOURCE,data:t}),this._inflator=new nv,this._writingDataChunks=!1}}function fk(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var lv;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(lv||(lv={}));function hk(r,e){return new dk(r,e).decode()}var Lr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function f1(){Lr.console&&typeof Lr.console.log=="function"&&Lr.console.log.apply(Lr.console,arguments)}var co={log:f1,warn:function(r){Lr.console&&(typeof Lr.console.warn=="function"?Lr.console.warn.apply(Lr.console,arguments):f1.call(null,arguments))},error:function(r){Lr.console&&(typeof Lr.console.error=="function"?Lr.console.error.apply(Lr.console,arguments):f1(r))}};function h1(r,e,t){var o=new XMLHttpRequest;o.open("GET",r),o.responseType="blob",o.onload=function(){Ru(o.response,e,t)},o.onerror=function(){co.error("could not download file")},o.send()}function cv(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Yf(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Ru=Lr.saveAs||((typeof window>"u"?"undefined":Xi(window))!=="object"||window!==Lr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var o=Lr.URL||Lr.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?cv(a.href)?h1(r,e,t):Yf(a,a.target="_blank"):Yf(a)):(a.href=o.createObjectURL(r),setTimeout(function(){o.revokeObjectURL(a.href)},4e4),setTimeout(function(){Yf(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(cv(r))h1(r,e,t);else{var o=document.createElement("a");o.href=r,o.target="_blank",setTimeout(function(){Yf(o)})}else navigator.msSaveOrOpenBlob((function(a,s){return s===void 0?s={autoBom:!1}:Xi(s)!=="object"&&(co.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,t),e)}:function(r,e,t,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),typeof r=="string")return h1(r,e,t);var a=r.type==="application/octet-stream",s=/constructor/i.test(Lr.HTMLElement)||Lr.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&(typeof FileReader>"u"?"undefined":Xi(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=u?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=h:location=h,o=null},l.readAsDataURL(r)}else{var d=Lr.URL||Lr.webkitURL,f=d.createObjectURL(r);o?o.location=f:location.href=f,o=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function vw(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],o=0;o<t.length;o++){var a=t[o].re,s=t[o].process,u=a.exec(r);u&&(e=s(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+l+d+f}}var uh=Lr.atob.bind(Lr),uv=Lr.btoa.bind(Lr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p1(r,e){var t=r[0],o=r[1],a=r[2],s=r[3];t=Zs(t,o,a,s,e[0],7,-680876936),s=Zs(s,t,o,a,e[1],12,-389564586),a=Zs(a,s,t,o,e[2],17,606105819),o=Zs(o,a,s,t,e[3],22,-1044525330),t=Zs(t,o,a,s,e[4],7,-176418897),s=Zs(s,t,o,a,e[5],12,1200080426),a=Zs(a,s,t,o,e[6],17,-1473231341),o=Zs(o,a,s,t,e[7],22,-45705983),t=Zs(t,o,a,s,e[8],7,1770035416),s=Zs(s,t,o,a,e[9],12,-1958414417),a=Zs(a,s,t,o,e[10],17,-42063),o=Zs(o,a,s,t,e[11],22,-1990404162),t=Zs(t,o,a,s,e[12],7,1804603682),s=Zs(s,t,o,a,e[13],12,-40341101),a=Zs(a,s,t,o,e[14],17,-1502002290),t=Qs(t,o=Zs(o,a,s,t,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Qs(s,t,o,a,e[6],9,-1069501632),a=Qs(a,s,t,o,e[11],14,643717713),o=Qs(o,a,s,t,e[0],20,-373897302),t=Qs(t,o,a,s,e[5],5,-701558691),s=Qs(s,t,o,a,e[10],9,38016083),a=Qs(a,s,t,o,e[15],14,-660478335),o=Qs(o,a,s,t,e[4],20,-405537848),t=Qs(t,o,a,s,e[9],5,568446438),s=Qs(s,t,o,a,e[14],9,-1019803690),a=Qs(a,s,t,o,e[3],14,-187363961),o=Qs(o,a,s,t,e[8],20,1163531501),t=Qs(t,o,a,s,e[13],5,-1444681467),s=Qs(s,t,o,a,e[2],9,-51403784),a=Qs(a,s,t,o,e[7],14,1735328473),t=ea(t,o=Qs(o,a,s,t,e[12],20,-1926607734),a,s,e[5],4,-378558),s=ea(s,t,o,a,e[8],11,-2022574463),a=ea(a,s,t,o,e[11],16,1839030562),o=ea(o,a,s,t,e[14],23,-35309556),t=ea(t,o,a,s,e[1],4,-1530992060),s=ea(s,t,o,a,e[4],11,1272893353),a=ea(a,s,t,o,e[7],16,-155497632),o=ea(o,a,s,t,e[10],23,-1094730640),t=ea(t,o,a,s,e[13],4,681279174),s=ea(s,t,o,a,e[0],11,-358537222),a=ea(a,s,t,o,e[3],16,-722521979),o=ea(o,a,s,t,e[6],23,76029189),t=ea(t,o,a,s,e[9],4,-640364487),s=ea(s,t,o,a,e[12],11,-421815835),a=ea(a,s,t,o,e[15],16,530742520),t=ta(t,o=ea(o,a,s,t,e[2],23,-995338651),a,s,e[0],6,-198630844),s=ta(s,t,o,a,e[7],10,1126891415),a=ta(a,s,t,o,e[14],15,-1416354905),o=ta(o,a,s,t,e[5],21,-57434055),t=ta(t,o,a,s,e[12],6,1700485571),s=ta(s,t,o,a,e[3],10,-1894986606),a=ta(a,s,t,o,e[10],15,-1051523),o=ta(o,a,s,t,e[1],21,-2054922799),t=ta(t,o,a,s,e[8],6,1873313359),s=ta(s,t,o,a,e[15],10,-30611744),a=ta(a,s,t,o,e[6],15,-1560198380),o=ta(o,a,s,t,e[13],21,1309151649),t=ta(t,o,a,s,e[4],6,-145523070),s=ta(s,t,o,a,e[11],10,-1120210379),a=ta(a,s,t,o,e[2],15,718787259),o=ta(o,a,s,t,e[9],21,-343485551),r[0]=lu(t,r[0]),r[1]=lu(o,r[1]),r[2]=lu(a,r[2]),r[3]=lu(s,r[3])}function Rh(r,e,t,o,a,s){return e=lu(lu(e,r),lu(o,s)),lu(e<<a|e>>>32-a,t)}function Zs(r,e,t,o,a,s,u){return Rh(e&t|~e&o,r,e,a,s,u)}function Qs(r,e,t,o,a,s,u){return Rh(e&o|t&~o,r,e,a,s,u)}function ea(r,e,t,o,a,s,u){return Rh(e^t^o,r,e,a,s,u)}function ta(r,e,t,o,a,s,u){return Rh(t^(e|~o),r,e,a,s,u)}function ww(r){var e,t=r.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)p1(o,pk(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(p1(o,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,p1(o,a),o}function pk(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var dv="0123456789abcdef".split("");function mk(r){for(var e="",t=0;t<4;t++)e+=dv[r>>8*t+4&15]+dv[r>>8*t&15];return e}function gk(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function B1(r){return ww(r).map(gk).join("")}var yk=(function(r){for(var e=0;e<r.length;e++)r[e]=mk(r[e]);return r.join("")})(ww("hello"))!="5d41402abc4b2a76b9719d911017c592";function lu(r,e){if(yk){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function M1(r,e){var t,o,a,s;if(r!==t){for(var u=(a=r,s=1+(256/r.length|0),new Array(s+1).join(a)),l=[],d=0;d<256;d++)l[d]=d;var f=0;for(d=0;d<256;d++){var h=l[d];f=(f+h+u.charCodeAt(d))%256,l[d]=l[f],l[f]=h}t=r,o=l}else l=o;var S=e.length,b=0,p=0,j="";for(d=0;d<S;d++)p=(p+(h=l[b=(b+1)%256]))%256,l[b]=l[p],l[p]=h,u=l[(l[b]+l[p])%256],j+=String.fromCharCode(e.charCodeAt(d)^u);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fv={print:4,modify:8,copy:16,"annot-forms":32};function rd(r,e,t,o){this.v=1,this.r=2;var a=192;r.forEach(function(l){if(fv.perm!==void 0)throw new Error("Invalid permission: "+l);a+=fv[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,u),this.P=-(1+(255^a)),this.encryptionKey=B1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(o)).substr(0,5),this.U=M1(this.encryptionKey,this.padding)}function id(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,o=0;o<t;o++){var a=r.charCodeAt(o);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[o]}return e}function hv(r){if(Xi(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,o,a){if(a=a||!1,typeof t!="string"||typeof o!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[o,!!a],s},this.unsubscribe=function(t){for(var o in e)if(e[o][t])return delete e[o][t],Object.keys(e[o]).length===0&&delete e[o],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var o=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[t]){var u=e[t][s];try{u[0].apply(r,o)}catch(l){Lr.console&&co.error("jsPDF PubSub Error",l.message,l)}u[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function xh(r){if(!(this instanceof xh))return new xh(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function xw(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function ju(r,e,t,o,a){if(!(this instanceof ju))return new ju(r,e,t,o,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,xw.call(this,o,a)}function sd(r,e,t,o,a){if(!(this instanceof sd))return new sd(r,e,t,o,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,xw.call(this,o,a)}function Gn(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",o=arguments[1],a=arguments[2],s=arguments[3],u=[],l=1,d=16,f="S",h=null;Xi(r=r||{})==="object"&&(t=r.orientation,o=r.unit||o,a=r.format||a,s=r.compress||r.compressPdf||s,(h=r.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(d=r.floatPrecision),f=r.defaultPathOperation||"S"),u=r.filters||(s===!0?["FlateEncode"]:u),o=o||"mm",t=(""+(t||"P")).toLowerCase();var S=r.putOnlyUsedFonts||!1,b={},p={internal:{},__private__:{}};p.__private__.PubSub=hv;var j="1.3",N=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(O){j=O};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return A};var w=p.__private__.getPageFormat=function(O){return A[O]};a=a||"a4";var R="compat",I="advanced",k=R;function G(){this.saveGraphicsState(),ee(new Mn(Rn,0,0,-Rn,0,xi()*Rn).toString()+" cm"),this.setFontSize(this.getFontSize()/Rn),f="n",k=I}function re(){this.restoreGraphicsState(),f="S",k=R}var Q=p.__private__.combineFontStyleAndFontWeight=function(O,le){if(O=="bold"&&le=="normal"||O=="bold"&&le==400||O=="normal"&&le=="italic"||O=="bold"&&le=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return le&&(O=le==400||le==="normal"?O==="italic"?"italic":"normal":le!=700&&le!=="bold"||O!=="normal"?(le==700?"bold":le)+""+O:"bold"),O};p.advancedAPI=function(O){var le=k===R;return le&&G.call(this),typeof O!="function"||(O(this),le&&re.call(this)),this},p.compatAPI=function(O){var le=k===I;return le&&re.call(this),typeof O!="function"||(O(this),le&&G.call(this)),this},p.isAdvancedAPI=function(){return k===I};var ie,U=function(O){if(k!==I)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ue=p.roundToPrecision=p.__private__.roundToPrecision=function(O,le){var Ce=e||le;if(isNaN(O)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(Ce).replace(/0+$/,"")};ie=p.hpf=p.__private__.hpf=typeof d=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(O,d)}:d==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return ue(O,16)};var oe=p.f2=p.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return ue(O,2)},B=p.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return ue(O,3)},te=p.scale=p.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return k===R?O*Rn:k===I?O:void 0},P=function(O){return te((function(le){return k===R?xi()-le:k===I?le:void 0})(O))};p.__private__.setPrecision=p.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(e=parseInt(O,10))};var be,Ae="00000000000000000000000000000000",ge=p.__private__.getFileId=function(){return Ae},xe=p.__private__.setFileId=function(O){return Ae=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():Ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Ei=new rd(h.userPermissions,h.userPassword,h.ownerPassword,Ae)),Ae};p.setFileId=function(O){return xe(O),this},p.getFileId=function(){return ge()};var ke=p.__private__.convertDateToPDFDate=function(O){var le=O.getTimezoneOffset(),Ce=le<0?"+":"-",Oe=Math.floor(Math.abs(le/60)),Xe=Math.abs(le%60),gt=[Ce,ne(Oe),"'",ne(Xe),"'"].join("");return["D:",O.getFullYear(),ne(O.getMonth()+1),ne(O.getDate()),ne(O.getHours()),ne(O.getMinutes()),ne(O.getSeconds()),gt].join("")},Fe=p.__private__.convertPDFDateToDate=function(O){var le=parseInt(O.substr(2,4),10),Ce=parseInt(O.substr(6,2),10)-1,Oe=parseInt(O.substr(8,2),10),Xe=parseInt(O.substr(10,2),10),gt=parseInt(O.substr(12,2),10),vt=parseInt(O.substr(14,2),10);return new Date(le,Ce,Oe,Xe,gt,vt,0)},J=p.__private__.setCreationDate=function(O){var le;if(O===void 0&&(O=new Date),O instanceof Date)le=ke(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");le=O}return be=le},C=p.__private__.getCreationDate=function(O){var le=be;return O==="jsDate"&&(le=Fe(be)),le};p.setCreationDate=function(O){return J(O),this},p.getCreationDate=function(O){return C(O)};var Z,ne=p.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},ye=p.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},ce=0,M=[],z=[],fe=0,he=[],se=[],me=!1,Be=z;p.__private__.setCustomOutputDestination=function(O){me=!0,Be=O};var H=function(O){me||(Be=O)};p.__private__.resetCustomOutputDestination=function(){me=!1,Be=z};var ee=p.__private__.out=function(O){return O=O.toString(),fe+=O.length+1,Be.push(O),Be},X=p.__private__.write=function(O){return ee(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},T=p.__private__.getArrayBuffer=function(O){for(var le=O.length,Ce=new ArrayBuffer(le),Oe=new Uint8Array(Ce);le--;)Oe[le]=O.charCodeAt(le);return Ce},L=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return L};var q=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(O){return q=k===I?O/Rn:O,this};var Se,Le=p.__private__.getFontSize=p.getFontSize=function(){return k===R?q:q*Rn},Ee=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(O){return Ee=O,this},p.__private__.getR2L=p.getR2L=function(){return Ee};var qe,dt=p.__private__.setZoomMode=function(O){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))Se=O;else if(isNaN(O)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');Se=O}else Se=parseInt(O,10)};p.__private__.getZoomMode=function(){return Se};var ot,lt=p.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');qe=O};p.__private__.getPageMode=function(){return qe};var Nt=p.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');ot=O};p.__private__.getLayoutMode=function(){return ot},p.__private__.setDisplayMode=p.setDisplayMode=function(O,le,Ce){return dt(O),Nt(le),lt(Ce),this};var Ft={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(O){if(Object.keys(Ft).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ft[O]},p.__private__.getDocumentProperties=function(){return Ft},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(O){for(var le in Ft)Ft.hasOwnProperty(le)&&O[le]&&(Ft[le]=O[le]);return this},p.__private__.setDocumentProperty=function(O,le){if(Object.keys(Ft).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ft[O]=le};var Zt,Rn,$t,Rr,An,Zn={},or={},jn=[],dn={},fi={},Wn={},Un={},qr=null,yn=0,kn=[],li=new hv(p),Hs=r.hotfixes||[],Do={},Zo={},ps=[],Mn=function O(le,Ce,Oe,Xe,gt,vt){if(!(this instanceof O))return new O(le,Ce,Oe,Xe,gt,vt);isNaN(le)&&(le=1),isNaN(Ce)&&(Ce=0),isNaN(Oe)&&(Oe=0),isNaN(Xe)&&(Xe=1),isNaN(gt)&&(gt=0),isNaN(vt)&&(vt=0),this._matrix=[le,Ce,Oe,Xe,gt,vt]};Object.defineProperty(Mn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Mn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Mn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Mn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Mn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Mn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Mn.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(Mn.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(Mn.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(Mn.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(Mn.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(Mn.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(Mn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mn.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ie).join(O)},Mn.prototype.multiply=function(O){var le=O.sx*this.sx+O.shy*this.shx,Ce=O.sx*this.shy+O.shy*this.sy,Oe=O.shx*this.sx+O.sy*this.shx,Xe=O.shx*this.shy+O.sy*this.sy,gt=O.tx*this.sx+O.ty*this.shx+this.tx,vt=O.tx*this.shy+O.ty*this.sy+this.ty;return new Mn(le,Ce,Oe,Xe,gt,vt)},Mn.prototype.decompose=function(){var O=this.sx,le=this.shy,Ce=this.shx,Oe=this.sy,Xe=this.tx,gt=this.ty,vt=Math.sqrt(O*O+le*le),ln=(O/=vt)*Ce+(le/=vt)*Oe;Ce-=O*ln,Oe-=le*ln;var In=Math.sqrt(Ce*Ce+Oe*Oe);return ln/=In,O*(Oe/=In)<le*(Ce/=In)&&(O=-O,le=-le,ln=-ln,vt=-vt),{scale:new Mn(vt,0,0,In,0,0),translate:new Mn(1,0,0,1,Xe,gt),rotate:new Mn(O,le,-le,O,0,0),skew:new Mn(1,0,ln,1,0,0)}},Mn.prototype.toString=function(O){return this.join(" ")},Mn.prototype.inversed=function(){var O=this.sx,le=this.shy,Ce=this.shx,Oe=this.sy,Xe=this.tx,gt=this.ty,vt=1/(O*Oe-le*Ce),ln=Oe*vt,In=-le*vt,yr=-Ce*vt,br=O*vt;return new Mn(ln,In,yr,br,-ln*Xe-yr*gt,-In*Xe-br*gt)},Mn.prototype.applyToPoint=function(O){var le=O.x*this.sx+O.y*this.shx+this.tx,Ce=O.x*this.shy+O.y*this.sy+this.ty;return new un(le,Ce)},Mn.prototype.applyToRectangle=function(O){var le=this.applyToPoint(O),Ce=this.applyToPoint(new un(O.x+O.w,O.y+O.h));return new lr(le.x,le.y,Ce.x-le.x,Ce.y-le.y)},Mn.prototype.clone=function(){var O=this.sx,le=this.shy,Ce=this.shx,Oe=this.sy,Xe=this.tx,gt=this.ty;return new Mn(O,le,Ce,Oe,Xe,gt)},p.Matrix=Mn;var ms=p.matrixMult=function(O,le){return le.multiply(O)},Is=new Mn(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Is;var Yi=function(O,le){if(!fi[O]){var Ce=(le instanceof ju?"Sh":"P")+(Object.keys(dn).length+1).toString(10);le.id=Ce,fi[O]=Ce,dn[Ce]=le,li.publish("addPattern",le)}};p.ShadingPattern=ju,p.TilingPattern=sd,p.addShadingPattern=function(O,le){return U("addShadingPattern()"),Yi(O,le),this},p.beginTilingPattern=function(O){U("beginTilingPattern()"),Fn(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},p.endTilingPattern=function(O,le){U("endTilingPattern()"),le.stream=se[Z].join(`
`),Yi(O,le),li.publish("endTilingPattern",le),ps.pop().restore()};var uo,ni=p.__private__.newObject=function(){var O=ki();return gr(O,!0),O},ki=p.__private__.newObjectDeferred=function(){return ce++,M[ce]=function(){return fe},ce},gr=function(O,le){return le=typeof le=="boolean"&&le,M[O]=fe,le&&ee(O+" 0 obj"),O},gs=p.__private__.newAdditionalObject=function(){var O={objId:ki(),content:""};return he.push(O),O},Rs=ki(),Me=ki(),He=p.__private__.decodeColorString=function(O){var le=O.split(" ");if(le.length!==2||le[1]!=="g"&&le[1]!=="G")le.length!==5||le[4]!=="k"&&le[4]!=="K"||(le=[(1-le[0])*(1-le[3]),(1-le[1])*(1-le[3]),(1-le[2])*(1-le[3]),"r"]);else{var Ce=parseFloat(le[0]);le=[Ce,Ce,Ce,"r"]}for(var Oe="#",Xe=0;Xe<3;Xe++)Oe+=("0"+Math.floor(255*parseFloat(le[Xe])).toString(16)).slice(-2);return Oe},ht=p.__private__.encodeColorString=function(O){var le;typeof O=="string"&&(O={ch1:O});var Ce=O.ch1,Oe=O.ch2,Xe=O.ch3,gt=O.ch4,vt=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var ln=new vw(Ce);if(ln.ok)Ce=ln.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var In=parseInt(Ce.substr(1),16);Ce=In>>16&255,Oe=In>>8&255,Xe=255&In}if(Oe===void 0||gt===void 0&&Ce===Oe&&Oe===Xe)le=typeof Ce=="string"?Ce+" "+vt[0]:O.precision===2?oe(Ce/255)+" "+vt[0]:B(Ce/255)+" "+vt[0];else if(gt===void 0||Xi(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return["1.","1.","1.",vt[1]].join(" ");le=typeof Ce=="string"?[Ce,Oe,Xe,vt[1]].join(" "):O.precision===2?[oe(Ce/255),oe(Oe/255),oe(Xe/255),vt[1]].join(" "):[B(Ce/255),B(Oe/255),B(Xe/255),vt[1]].join(" ")}else le=typeof Ce=="string"?[Ce,Oe,Xe,gt,vt[2]].join(" "):O.precision===2?[oe(Ce),oe(Oe),oe(Xe),oe(gt),vt[2]].join(" "):[B(Ce),B(Oe),B(Xe),B(gt),vt[2]].join(" ");return le},qt=p.__private__.getFilters=function(){return u},hn=p.__private__.putStream=function(O){var le=(O=O||{}).data||"",Ce=O.filters||qt(),Oe=O.alreadyAppliedFilters||[],Xe=O.addLength1||!1,gt=le.length,vt=O.objectId,ln=function(Lo){return Lo};if(h!==null&&vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ln=Ei.encryptor(vt,0));var In={};Ce===!0&&(Ce=["FlateEncode"]);var yr=O.additionalKeyValues||[],br=(In=Gn.API.processDataByFilters!==void 0?Gn.API.processDataByFilters(le,Ce):{data:le,reverseChain:[]}).reverseChain+(Array.isArray(Oe)?Oe.join(" "):Oe.toString());if(In.data.length!==0&&(yr.push({key:"Length",value:In.data.length}),Xe===!0&&yr.push({key:"Length1",value:gt})),br.length!=0)if(br.split("/").length-1==1)yr.push({key:"Filter",value:br});else{yr.push({key:"Filter",value:"["+br+"]"});for(var Yn=0;Yn<yr.length;Yn+=1)if(yr[Yn].key==="DecodeParms"){for(var Ui=[],eo=0;eo<In.reverseChain.split("/").length-1;eo+=1)Ui.push("null");Ui.push(yr[Yn].value),yr[Yn].value="["+Ui.join(" ")+"]"}}ee("<<");for(var Ci=0;Ci<yr.length;Ci++)ee("/"+yr[Ci].key+" "+yr[Ci].value);ee(">>"),In.data.length!==0&&(ee("stream"),ee(ln(In.data)),ee("endstream"))},Xt=p.__private__.putPage=function(O){var le=O.number,Ce=O.data,Oe=O.objId,Xe=O.contentsObjId;gr(Oe,!0),ee("<</Type /Page"),ee("/Parent "+O.rootDictionaryObjId+" 0 R"),ee("/Resources "+O.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(ie(O.mediaBox.bottomLeftX))+" "+parseFloat(ie(O.mediaBox.bottomLeftY))+" "+ie(O.mediaBox.topRightX)+" "+ie(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&ee("/CropBox ["+ie(O.cropBox.bottomLeftX)+" "+ie(O.cropBox.bottomLeftY)+" "+ie(O.cropBox.topRightX)+" "+ie(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&ee("/BleedBox ["+ie(O.bleedBox.bottomLeftX)+" "+ie(O.bleedBox.bottomLeftY)+" "+ie(O.bleedBox.topRightX)+" "+ie(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&ee("/TrimBox ["+ie(O.trimBox.bottomLeftX)+" "+ie(O.trimBox.bottomLeftY)+" "+ie(O.trimBox.topRightX)+" "+ie(O.trimBox.topRightY)+"]"),O.artBox!==null&&ee("/ArtBox ["+ie(O.artBox.bottomLeftX)+" "+ie(O.artBox.bottomLeftY)+" "+ie(O.artBox.topRightX)+" "+ie(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&ee("/UserUnit "+O.userUnit),li.publish("putPage",{objId:Oe,pageContext:kn[le],pageNumber:le,page:Ce}),ee("/Contents "+Xe+" 0 R"),ee(">>"),ee("endobj");var gt=Ce.join(`
`);return k===I&&(gt+=`
Q`),gr(Xe,!0),hn({data:gt,filters:qt(),objectId:Xe}),ee("endobj"),Oe},cn=p.__private__.putPages=function(){var O,le,Ce=[];for(O=1;O<=yn;O++)kn[O].objId=ki(),kn[O].contentsObjId=ki();for(O=1;O<=yn;O++)Ce.push(Xt({number:O,data:se[O],objId:kn[O].objId,contentsObjId:kn[O].contentsObjId,mediaBox:kn[O].mediaBox,cropBox:kn[O].cropBox,bleedBox:kn[O].bleedBox,trimBox:kn[O].trimBox,artBox:kn[O].artBox,userUnit:kn[O].userUnit,rootDictionaryObjId:Rs,resourceDictionaryObjId:Me}));gr(Rs,!0),ee("<</Type /Pages");var Oe="/Kids [";for(le=0;le<yn;le++)Oe+=Ce[le]+" 0 R ";ee(Oe+"]"),ee("/Count "+yn),ee(">>"),ee("endobj"),li.publish("postPutPages")},Yt=function(O){li.publish("putFont",{font:O,out:ee,newObject:ni,putStream:hn}),O.isAlreadyPutted!==!0&&(O.objectNumber=ni(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+id(O.postScriptName)),ee("/Subtype /Type1"),typeof O.encoding=="string"&&ee("/Encoding /"+O.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Xn=function(O){O.objectNumber=ni();var le=[];le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Form"}),le.push({key:"BBox",value:"["+[ie(O.x),ie(O.y),ie(O.x+O.width),ie(O.y+O.height)].join(" ")+"]"}),le.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var Ce=O.pages[1].join(`
`);hn({data:Ce,additionalKeyValues:le,objectId:O.objectNumber}),ee("endobj")},hi=function(O,le){le||(le=21);var Ce=ni(),Oe=(function(vt,ln){var In,yr=[],br=1/(ln-1);for(In=0;In<1;In+=br)yr.push(In);if(yr.push(1),vt[0].offset!=0){var Yn={offset:0,color:vt[0].color};vt.unshift(Yn)}if(vt[vt.length-1].offset!=1){var Ui={offset:1,color:vt[vt.length-1].color};vt.push(Ui)}for(var eo="",Ci=0,Lo=0;Lo<yr.length;Lo++){for(In=yr[Lo];In>vt[Ci+1].offset;)Ci++;var wo=vt[Ci].offset,Io=(In-wo)/(vt[Ci+1].offset-wo),Ea=vt[Ci].color,ra=vt[Ci+1].color;eo+=ye(Math.round((1-Io)*Ea[0]+Io*ra[0]).toString(16))+ye(Math.round((1-Io)*Ea[1]+Io*ra[1]).toString(16))+ye(Math.round((1-Io)*Ea[2]+Io*ra[2]).toString(16))}return eo.trim()})(O.colors,le),Xe=[];Xe.push({key:"FunctionType",value:"0"}),Xe.push({key:"Domain",value:"[0.0 1.0]"}),Xe.push({key:"Size",value:"["+le+"]"}),Xe.push({key:"BitsPerSample",value:"8"}),Xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hn({data:Oe,additionalKeyValues:Xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),ee("endobj"),O.objectNumber=ni(),ee("<< /ShadingType "+O.type),ee("/ColorSpace /DeviceRGB");var gt="/Coords ["+ie(parseFloat(O.coords[0]))+" "+ie(parseFloat(O.coords[1]))+" ";O.type===2?gt+=ie(parseFloat(O.coords[2]))+" "+ie(parseFloat(O.coords[3])):gt+=ie(parseFloat(O.coords[2]))+" "+ie(parseFloat(O.coords[3]))+" "+ie(parseFloat(O.coords[4]))+" "+ie(parseFloat(O.coords[5])),ee(gt+="]"),O.matrix&&ee("/Matrix ["+O.matrix.toString()+"]"),ee("/Function "+Ce+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},wi=function(O,le){var Ce=ki(),Oe=ni();le.push({resourcesOid:Ce,objectOid:Oe}),O.objectNumber=Oe;var Xe=[];Xe.push({key:"Type",value:"/Pattern"}),Xe.push({key:"PatternType",value:"1"}),Xe.push({key:"PaintType",value:"1"}),Xe.push({key:"TilingType",value:"1"}),Xe.push({key:"BBox",value:"["+O.boundingBox.map(ie).join(" ")+"]"}),Xe.push({key:"XStep",value:ie(O.xStep)}),Xe.push({key:"YStep",value:ie(O.yStep)}),Xe.push({key:"Resources",value:Ce+" 0 R"}),O.matrix&&Xe.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),hn({data:O.stream,additionalKeyValues:Xe,objectId:O.objectNumber}),ee("endobj")},So=function(O){for(var le in O.objectNumber=ni(),ee("<<"),O)switch(le){case"opacity":ee("/ca "+oe(O[le]));break;case"stroke-opacity":ee("/CA "+oe(O[le]))}ee(">>"),ee("endobj")},jr=function(O){gr(O.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var le in ee("/Font <<"),Zn)Zn.hasOwnProperty(le)&&(S===!1||S===!0&&b.hasOwnProperty(le))&&ee("/"+le+" "+Zn[le].objectNumber+" 0 R");ee(">>")})(),(function(){if(Object.keys(dn).length>0){for(var le in ee("/Shading <<"),dn)dn.hasOwnProperty(le)&&dn[le]instanceof ju&&dn[le].objectNumber>=0&&ee("/"+le+" "+dn[le].objectNumber+" 0 R");li.publish("putShadingPatternDict"),ee(">>")}})(),(function(le){if(Object.keys(dn).length>0){for(var Ce in ee("/Pattern <<"),dn)dn.hasOwnProperty(Ce)&&dn[Ce]instanceof p.TilingPattern&&dn[Ce].objectNumber>=0&&dn[Ce].objectNumber<le&&ee("/"+Ce+" "+dn[Ce].objectNumber+" 0 R");li.publish("putTilingPatternDict"),ee(">>")}})(O.objectOid),(function(){if(Object.keys(Wn).length>0){var le;for(le in ee("/ExtGState <<"),Wn)Wn.hasOwnProperty(le)&&Wn[le].objectNumber>=0&&ee("/"+le+" "+Wn[le].objectNumber+" 0 R");li.publish("putGStateDict"),ee(">>")}})(),(function(){for(var le in ee("/XObject <<"),Do)Do.hasOwnProperty(le)&&Do[le].objectNumber>=0&&ee("/"+le+" "+Do[le].objectNumber+" 0 R");li.publish("putXobjectDict"),ee(">>")})(),ee(">>"),ee("endobj")},yo=function(O){or[O.fontName]=or[O.fontName]||{},or[O.fontName][O.fontStyle]=O.id},io=function(O,le,Ce,Oe,Xe){var gt={id:"F"+(Object.keys(Zn).length+1).toString(10),postScriptName:O,fontName:le,fontStyle:Ce,encoding:Oe,isStandardFont:Xe||!1,metadata:{}};return li.publish("addFont",{font:gt,instance:this}),Zn[gt.id]=gt,yo(gt),gt.id},Vr=p.__private__.pdfEscape=p.pdfEscape=function(O,le){return(function(Ce,Oe){var Xe,gt,vt,ln,In,yr,br,Yn,Ui;if(vt=(Oe=Oe||{}).sourceEncoding||"Unicode",In=Oe.outputEncoding,(Oe.autoencode||In)&&Zn[Zt].metadata&&Zn[Zt].metadata[vt]&&Zn[Zt].metadata[vt].encoding&&(ln=Zn[Zt].metadata[vt].encoding,!In&&Zn[Zt].encoding&&(In=Zn[Zt].encoding),!In&&ln.codePages&&(In=ln.codePages[0]),typeof In=="string"&&(In=ln[In]),In)){for(br=!1,yr=[],Xe=0,gt=Ce.length;Xe<gt;Xe++)(Yn=In[Ce.charCodeAt(Xe)])?yr.push(String.fromCharCode(Yn)):yr.push(Ce[Xe]),yr[Xe].charCodeAt(0)>>8&&(br=!0);Ce=yr.join("")}for(Xe=Ce.length;br===void 0&&Xe!==0;)Ce.charCodeAt(Xe-1)>>8&&(br=!0),Xe--;if(!br)return Ce;for(yr=Oe.noBOM?[]:[254,255],Xe=0,gt=Ce.length;Xe<gt;Xe++){if((Ui=(Yn=Ce.charCodeAt(Xe))>>8)>>8)throw new Error("Character at position "+Xe+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yr.push(Ui),yr.push(Yn-(Ui<<8))}return String.fromCharCode.apply(void 0,yr)})(O,le).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},On=p.__private__.beginPage=function(O){se[++yn]=[],kn[yn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},Xr(yn),H(se[Z])},wr=function(O,le){var Ce,Oe,Xe;switch(t=le||t,typeof O=="string"&&(Ce=w(O.toLowerCase()),Array.isArray(Ce)&&(Oe=Ce[0],Xe=Ce[1])),Array.isArray(O)&&(Oe=O[0]*Rn,Xe=O[1]*Rn),isNaN(Oe)&&(Oe=a[0],Xe=a[1]),(Oe>14400||Xe>14400)&&(co.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Oe=Math.min(14400,Oe),Xe=Math.min(14400,Xe)),a=[Oe,Xe],t.substr(0,1)){case"l":Xe>Oe&&(a=[Xe,Oe]);break;case"p":Oe>Xe&&(a=[Xe,Oe])}On(a),pn(vo),ee(Oo),Ht!==0&&ee(Ht+" J"),fn!==0&&ee(fn+" j"),li.publish("addPage",{pageNumber:yn})},pi=function(O){O>0&&O<=yn&&(se.splice(O,1),kn.splice(O,1),yn--,Z>yn&&(Z=yn),this.setPage(Z))},Xr=function(O){O>0&&O<=yn&&(Z=O)},Yr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return se.length-1},Mi=function(O,le,Ce){var Oe,Xe=void 0;return Ce=Ce||{},O=O!==void 0?O:Zn[Zt].fontName,le=le!==void 0?le:Zn[Zt].fontStyle,Oe=O.toLowerCase(),or[Oe]!==void 0&&or[Oe][le]!==void 0?Xe=or[Oe][le]:or[O]!==void 0&&or[O][le]!==void 0?Xe=or[O][le]:Ce.disableWarning===!1&&co.warn("Unable to look up font label for font '"+O+"', '"+le+"'. Refer to getFontList() for available fonts."),Xe||Ce.noFallback||(Xe=or.times[le])==null&&(Xe=or.times.normal),Xe},sr=p.__private__.putInfo=function(){var O=ni(),le=function(Oe){return Oe};for(var Ce in h!==null&&(le=Ei.encryptor(O,0)),ee("<<"),ee("/Producer ("+Vr(le("jsPDF "+Gn.version))+")"),Ft)Ft.hasOwnProperty(Ce)&&Ft[Ce]&&ee("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Vr(le(Ft[Ce]))+")");ee("/CreationDate ("+Vr(le(be))+")"),ee(">>"),ee("endobj")},_i=p.__private__.putCatalog=function(O){var le=(O=O||{}).rootDictionaryObjId||Rs;switch(ni(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+le+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+Se;Ce.substr(Ce.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+oe(Se)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}qe&&ee("/PageMode /"+qe),li.publish("putCatalog"),ee(">>"),ee("endobj")},Ni=p.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(ce+1)),ee("/Root "+ce+" 0 R"),ee("/Info "+(ce-1)+" 0 R"),h!==null&&ee("/Encrypt "+Ei.oid+" 0 R"),ee("/ID [ <"+Ae+"> <"+Ae+"> ]"),ee(">>")},kr=p.__private__.putHeader=function(){ee("%PDF-"+j),ee("%")},To=p.__private__.putXRef=function(){var O="0000000000";ee("xref"),ee("0 "+(ce+1)),ee("0000000000 65535 f ");for(var le=1;le<=ce;le++)typeof M[le]=="function"?ee((O+M[le]()).slice(-10)+" 00000 n "):M[le]!==void 0?ee((O+M[le]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Co=p.__private__.buildDocument=function(){var O;ce=0,fe=0,z=[],M=[],he=[],Rs=ki(),Me=ki(),H(z),li.publish("buildDocument"),kr(),cn(),(function(){li.publish("putAdditionalObjects");for(var Ce=0;Ce<he.length;Ce++){var Oe=he[Ce];gr(Oe.objId,!0),ee(Oe.content),ee("endobj")}li.publish("postPutAdditionalObjects")})(),O=[],(function(){for(var Ce in Zn)Zn.hasOwnProperty(Ce)&&(S===!1||S===!0&&b.hasOwnProperty(Ce))&&Yt(Zn[Ce])})(),(function(){var Ce;for(Ce in Wn)Wn.hasOwnProperty(Ce)&&So(Wn[Ce])})(),(function(){for(var Ce in Do)Do.hasOwnProperty(Ce)&&Xn(Do[Ce])})(),(function(Ce){var Oe;for(Oe in dn)dn.hasOwnProperty(Oe)&&(dn[Oe]instanceof ju?hi(dn[Oe]):dn[Oe]instanceof sd&&wi(dn[Oe],Ce))})(O),li.publish("putResources"),O.forEach(jr),jr({resourcesOid:Me,objectOid:Number.MAX_SAFE_INTEGER}),li.publish("postPutResources"),h!==null&&(Ei.oid=ni(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Ei.v),ee("/R "+Ei.r),ee("/U <"+Ei.toHexString(Ei.U)+">"),ee("/O <"+Ei.toHexString(Ei.O)+">"),ee("/P "+Ei.P),ee(">>"),ee("endobj")),sr(),_i();var le=fe;return To(),Ni(),ee("startxref"),ee(""+le),ee("%%EOF"),H(se[Z]),z.join(`
`)},Qo=p.__private__.getBlob=function(O){return new Blob([T(O)],{type:"application/pdf"})},Ar=p.output=p.__private__.output=(uo=function(O,le){switch(typeof(le=le||{})=="string"?le={filename:le}:le.filename=le.filename||"generated.pdf",O){case void 0:return Co();case"save":p.save(le.filename);break;case"arraybuffer":return T(Co());case"blob":return Qo(Co());case"bloburi":case"bloburl":if(Lr.URL!==void 0&&typeof Lr.URL.createObjectURL=="function")return Lr.URL&&Lr.URL.createObjectURL(Qo(Co()))||void 0;co.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Oe=Co();try{Ce=uv(Oe)}catch{Ce=uv(unescape(encodeURIComponent(Oe)))}return"data:application/pdf;filename="+le.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var Xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';le.pdfObjectUrl&&(Xe=le.pdfObjectUrl,gt="");var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Xe+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(le)+");<\/script></body></html>",ln=Lr.open();return ln!==null&&ln.document.write(vt),ln}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(le.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+le.filename+'" width="500px" height="400px" /></body></html>',yr=Lr.open();if(yr!==null){yr.document.write(In);var br=this;yr.document.documentElement.querySelector("#pdfViewer").onload=function(){yr.document.title=le.filename,yr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return yr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",le)+'"></iframe></body></html>',Ui=Lr.open();if(Ui!==null&&(Ui.document.write(Yn),Ui.document.title=le.filename),Ui||typeof safari>"u")return Ui;break;case"datauri":case"dataurl":return Lr.document.location.href=this.output("datauristring",le);default:return null}},uo.foo=function(){try{return uo.apply(this,arguments)}catch(Ce){var O=Ce.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var le="Error in function "+O.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!Lr.console)throw new Error(le);Lr.console.error(le,Ce),Lr.alert&&alert(le)}},uo.foo.bar=uo,uo.foo),Ji=function(O){return Array.isArray(Hs)===!0&&Hs.indexOf(O)>-1};switch(o){case"pt":Rn=1;break;case"mm":Rn=72/25.4;break;case"cm":Rn=72/2.54;break;case"in":Rn=72;break;case"px":Rn=Ji("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rn=12;break;case"ex":Rn=6;break;default:if(typeof o!="number")throw new Error("Invalid unit: "+o);Rn=o}var Ei=null;J(),xe();var fo=p.__private__.getPageInfo=p.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kn[O].objId,pageNumber:O,pageContext:kn[O]}},ys=p.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var le in kn)if(kn[le].objId===O)break;return fo(le)},ss=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:kn[Z].objId,pageNumber:Z,pageContext:kn[Z]}};p.addPage=function(){return wr.apply(this,arguments),this},p.setPage=function(){return Xr.apply(this,arguments),H.call(this,se[Z]),this},p.insertPage=function(O){return this.addPage(),this.movePage(Z,O),this},p.movePage=function(O,le){var Ce,Oe;if(O>le){Ce=se[O],Oe=kn[O];for(var Xe=O;Xe>le;Xe--)se[Xe]=se[Xe-1],kn[Xe]=kn[Xe-1];se[le]=Ce,kn[le]=Oe,this.setPage(le)}else if(O<le){Ce=se[O],Oe=kn[O];for(var gt=O;gt<le;gt++)se[gt]=se[gt+1],kn[gt]=kn[gt+1];se[le]=Ce,kn[le]=Oe,this.setPage(le)}return this},p.deletePage=function(){return pi.apply(this,arguments),this},p.__private__.text=p.text=function(O,le,Ce,Oe,Xe){var gt,vt,ln,In,yr,br,Yn,Ui,eo,Ci=(Oe=Oe||{}).scope||this;if(typeof O=="number"&&typeof le=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var Lo=Ce;Ce=le,le=O,O=Lo}if(arguments[3]instanceof Mn==0?(ln=arguments[4],In=arguments[5],Xi(Yn=arguments[3])==="object"&&Yn!==null||(typeof ln=="string"&&(In=ln,ln=null),typeof Yn=="string"&&(In=Yn,Yn=null),typeof Yn=="number"&&(ln=Yn,Yn=null),Oe={flags:Yn,angle:ln,align:In})):(U("The transform parameter of text() with a Matrix value"),eo=Xe),isNaN(le)||isNaN(Ce)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return Ci;var wo,Io="",Ea=typeof Oe.lineHeightFactor=="number"?Oe.lineHeightFactor:$i,ra=Ci.internal.scaleFactor;function Ha(gi){return gi=gi.split("	").join(Array(Oe.TabLen||9).join(" ")),Vr(gi,Yn)}function Pl(gi){for(var Li,po=gi.concat(),ko=[],Ks=po.length;Ks--;)typeof(Li=po.shift())=="string"?ko.push(Li):Array.isArray(gi)&&(Li.length===1||Li[1]===void 0&&Li[2]===void 0)?ko.push(Li[0]):ko.push([Li[0],Li[1],Li[2]]);return ko}function Dl(gi,Li){var po;if(typeof gi=="string")po=Li(gi)[0];else if(Array.isArray(gi)){for(var ko,Ks,fc=gi.concat(),Ja=[],Da=fc.length;Da--;)typeof(ko=fc.shift())=="string"?Ja.push(Li(ko)[0]):Array.isArray(ko)&&typeof ko[0]=="string"&&(Ks=Li(ko[0],ko[1],ko[2]),Ja.push([Ks[0],Ks[1],Ks[2]]));po=Ja}return po}var ia=!1,fl=!0;if(typeof O=="string")ia=!0;else if(Array.isArray(O)){var Ga=O.concat();vt=[];for(var Ka,Fo=Ga.length;Fo--;)(typeof(Ka=Ga.shift())!="string"||Array.isArray(Ka)&&typeof Ka[0]!="string")&&(fl=!1);ia=fl}if(ia===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var Va=q/Ci.internal.scaleFactor,hl=Va*(Ea-1);switch(Oe.baseline){case"bottom":Ce-=hl;break;case"top":Ce+=Va-hl;break;case"hanging":Ce+=Va-2*hl;break;case"middle":Ce+=Va/2-hl}if((br=Oe.maxWidth||0)>0&&(typeof O=="string"?O=Ci.splitTextToSize(O,br):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(gi,Li){return gi.concat(Ci.splitTextToSize(Li,br))},[]))),gt={text:O,x:le,y:Ce,options:Oe,mutex:{pdfEscape:Vr,activeFontKey:Zt,fonts:Zn,activeFontSize:q}},li.publish("preProcessText",gt),O=gt.text,ln=(Oe=gt.options).angle,eo instanceof Mn==0&&ln&&typeof ln=="number"){ln*=Math.PI/180,Oe.rotationDirection===0&&(ln=-ln),k===I&&(ln=-ln);var cc=Math.cos(ln),uc=Math.sin(ln);eo=new Mn(cc,uc,-uc,cc,0,0)}else ln&&ln instanceof Mn&&(eo=ln);k!==I||eo||(eo=Is),(yr=Oe.charSpace||Tt)!==void 0&&(Io+=ie(te(yr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ui=Oe.horizontalScale)!==void 0&&(Io+=ie(100*Ui)+` Tz
`),Oe.lang;var us=-1,oa=Oe.renderingMode!==void 0?Oe.renderingMode:Oe.stroke,fa=Ci.internal.getCurrentPageInfo().pageContext;switch(oa){case 0:case!1:case"fill":us=0;break;case 1:case!0:case"stroke":us=1;break;case 2:case"fillThenStroke":us=2;break;case 3:case"invisible":us=3;break;case 4:case"fillAndAddForClipping":us=4;break;case 5:case"strokeAndAddPathForClipping":us=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":us=6;break;case 7:case"addToPathForClipping":us=7}var dc=fa.usedRenderingMode!==void 0?fa.usedRenderingMode:-1;us!==-1?Io+=us+` Tr
`:dc!==-1&&(Io+=`0 Tr
`),us!==-1&&(fa.usedRenderingMode=us),In=Oe.align||"left";var js,Ta=q*Ea,Ol=Ci.internal.pageSize.getWidth(),Fl=Zn[Zt];yr=Oe.charSpace||Tt,br=Oe.maxWidth||0,Yn=Object.assign({autoencode:!0,noBOM:!0},Oe.flags);var Ca=[],Gs=function(gi){return Ci.getStringUnitWidth(gi,{font:Fl,charSpace:yr,fontSize:q,doKerning:!1})*q/ra};if(Object.prototype.toString.call(O)==="[object Array]"){var Ps;vt=Pl(O),In!=="left"&&(js=vt.map(Gs));var es,La=0;if(In==="right"){le-=js[0],O=[],Fo=vt.length;for(var bs=0;bs<Fo;bs++)bs===0?(es=rr(le),Ps=Nn(Ce)):(es=te(La-js[bs]),Ps=-Ta),O.push([vt[bs],es,Ps]),La=js[bs]}else if(In==="center"){le-=js[0]/2,O=[],Fo=vt.length;for(var ha=0;ha<Fo;ha++)ha===0?(es=rr(le),Ps=Nn(Ce)):(es=te((La-js[ha])/2),Ps=-Ta),O.push([vt[ha],es,Ps]),La=js[ha]}else if(In==="left"){O=[],Fo=vt.length;for(var Ds=0;Ds<Fo;Ds++)O.push(vt[Ds])}else if(In==="justify"&&Fl.encoding==="Identity-H"){O=[],Fo=vt.length,br=br!==0?br:Ol;for(var pa=0,ho=0;ho<Fo;ho++)if(Ps=ho===0?Nn(Ce):-Ta,es=ho===0?rr(le):pa,ho<Fo-1){var Xa=te((br-js[ho])/(vt[ho].split(" ").length-1)),ma=vt[ho].split(" ");O.push([ma[0]+" ",es,Ps]),pa=0;for(var sa=1;sa<ma.length;sa++){var pl=(Gs(ma[sa-1]+" "+ma[sa])-Gs(ma[sa]))*ra+Xa;sa==ma.length-1?O.push([ma[sa],pl,0]):O.push([ma[sa]+" ",pl,0]),pa-=pl}}else O.push([vt[ho],es,Ps]);O.push(["",pa,0])}else{if(In!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],Fo=vt.length,br=br!==0?br:Ol,ho=0;ho<Fo;ho++){Ps=ho===0?Nn(Ce):-Ta,es=ho===0?rr(le):0;var Ia=vt[ho].split(" ").length-1,Bl=Ia>0?(br-js[ho])/Ia:0;ho<Fo-1?Ca.push(ie(te(Bl))):Ca.push(0),O.push([vt[ho],es,Ps])}}}(typeof Oe.R2L=="boolean"?Oe.R2L:Ee)===!0&&(O=Dl(O,function(gi,Li,po){return[gi.split("").reverse().join(""),Li,po]})),gt={text:O,x:le,y:Ce,options:Oe,mutex:{pdfEscape:Vr,activeFontKey:Zt,fonts:Zn,activeFontSize:q}},li.publish("postProcessText",gt),O=gt.text,wo=gt.mutex.isHex||!1;var ml=Zn[Zt].encoding;ml!=="WinAnsiEncoding"&&ml!=="StandardEncoding"||(O=Dl(O,function(gi,Li,po){return[Ha(gi),Li,po]})),vt=Pl(O),O=[];for(var ga,Ra,ja,gl=Array.isArray(vt[0])?1:0,Pa="",Ya=function(gi,Li,po){var ko="";return po instanceof Mn?(po=typeof Oe.angle=="number"?ms(po,new Mn(1,0,0,1,gi,Li)):ms(new Mn(1,0,0,1,gi,Li),po),k===I&&(po=ms(new Mn(1,0,0,-1,0,0),po)),ko=po.join(" ")+` Tm
`):ko=ie(gi)+" "+ie(Li)+` Td
`,ko},Fi=0;Fi<vt.length;Fi++){switch(Pa="",gl){case 1:ja=(wo?"<":"(")+vt[Fi][0]+(wo?">":")"),ga=parseFloat(vt[Fi][1]),Ra=parseFloat(vt[Fi][2]);break;case 0:ja=(wo?"<":"(")+vt[Fi]+(wo?">":")"),ga=rr(le),Ra=Nn(Ce)}Ca!==void 0&&Ca[Fi]!==void 0&&(Pa=Ca[Fi]+` Tw
`),Fi===0?O.push(Pa+Ya(ga,Ra,eo)+ja):gl===0?O.push(Pa+ja):gl===1&&O.push(Pa+Ya(ga,Ra,eo)+ja)}O=gl===0?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var ds=`BT
/`;return ds+=Zt+" "+q+` Tf
`,ds+=ie(q*Ea)+` TL
`,ds+=ls+`
`,ds+=Io,ds+=O,ee(ds+="ET"),b[Zt]=!0,Ci};var as=p.__private__.clip=p.clip=function(O){return ee(O==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return as("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ee("n"),this};var ar=p.__private__.isValidStyle=function(O){var le=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(le=!0),le};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(O){return ar(O)&&(f=O),this};var Ln=p.__private__.getStyle=p.getStyle=function(O){var le=f;switch(O){case"D":case"S":le="S";break;case"F":le="f";break;case"FD":case"DF":le="B";break;case"f":case"f*":case"B":case"B*":le=O}return le},Wr=p.close=function(){return ee("h"),this};p.stroke=function(){return ee("S"),this},p.fill=function(O){return vs("f",O),this},p.fillEvenOdd=function(O){return vs("f*",O),this},p.fillStroke=function(O){return vs("B",O),this},p.fillStrokeEvenOdd=function(O){return vs("B*",O),this};var vs=function(O,le){Xi(le)==="object"?xr(le,O):ee(O)},ws=function(O){O===null||k===I&&O===void 0||(O=Ln(O),ee(O))};function Oi(O,le,Ce,Oe,Xe){var gt=new sd(le||this.boundingBox,Ce||this.xStep,Oe||this.yStep,this.gState,Xe||this.matrix);gt.stream=this.stream;var vt=O+"$$"+this.cloneIndex+++"$$";return Yi(vt,gt),gt}var xr=function(O,le){var Ce=fi[O.key],Oe=dn[Ce];if(Oe instanceof ju)ee("q"),ee(ri(le)),Oe.gState&&p.setGState(Oe.gState),ee(O.matrix.toString()+" cm"),ee("/"+Ce+" sh"),ee("Q");else if(Oe instanceof sd){var Xe=new Mn(1,0,0,-1,0,xi());O.matrix&&(Xe=Xe.multiply(O.matrix||Is),Ce=Oi.call(Oe,O.key,O.boundingBox,O.xStep,O.yStep,Xe).id),ee("q"),ee("/Pattern cs"),ee("/"+Ce+" scn"),Oe.gState&&p.setGState(Oe.gState),ee(le),ee("Q")}},ri=function(O){switch(O){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$r=p.moveTo=function(O,le){return ee(ie(te(O))+" "+ie(P(le))+" m"),this},xs=p.lineTo=function(O,le){return ee(ie(te(O))+" "+ie(P(le))+" l"),this},Zi=p.curveTo=function(O,le,Ce,Oe,Xe,gt){return ee([ie(te(O)),ie(P(le)),ie(te(Ce)),ie(P(Oe)),ie(te(Xe)),ie(P(gt)),"c"].join(" ")),this};p.__private__.line=p.line=function(O,le,Ce,Oe,Xe){if(isNaN(O)||isNaN(le)||isNaN(Ce)||isNaN(Oe)||!ar(Xe))throw new Error("Invalid arguments passed to jsPDF.line");return k===R?this.lines([[Ce-O,Oe-le]],O,le,[1,1],Xe||"S"):this.lines([[Ce-O,Oe-le]],O,le,[1,1]).stroke()},p.__private__.lines=p.lines=function(O,le,Ce,Oe,Xe,gt){var vt,ln,In,yr,br,Yn,Ui,eo,Ci,Lo,wo,Io;if(typeof O=="number"&&(Io=Ce,Ce=le,le=O,O=Io),Oe=Oe||[1,1],gt=gt||!1,isNaN(le)||isNaN(Ce)||!Array.isArray(O)||!Array.isArray(Oe)||!ar(Xe)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($r(le,Ce),vt=Oe[0],ln=Oe[1],yr=O.length,Lo=le,wo=Ce,In=0;In<yr;In++)(br=O[In]).length===2?(Lo=br[0]*vt+Lo,wo=br[1]*ln+wo,xs(Lo,wo)):(Yn=br[0]*vt+Lo,Ui=br[1]*ln+wo,eo=br[2]*vt+Lo,Ci=br[3]*ln+wo,Lo=br[4]*vt+Lo,wo=br[5]*ln+wo,Zi(Yn,Ui,eo,Ci,Lo,wo));return gt&&Wr(),ws(Xe),this},p.path=function(O){for(var le=0;le<O.length;le++){var Ce=O[le],Oe=Ce.c;switch(Ce.op){case"m":$r(Oe[0],Oe[1]);break;case"l":xs(Oe[0],Oe[1]);break;case"c":Zi.apply(this,Oe);break;case"h":Wr()}}return this},p.__private__.rect=p.rect=function(O,le,Ce,Oe,Xe){if(isNaN(O)||isNaN(le)||isNaN(Ce)||isNaN(Oe)||!ar(Xe))throw new Error("Invalid arguments passed to jsPDF.rect");return k===R&&(Oe=-Oe),ee([ie(te(O)),ie(P(le)),ie(te(Ce)),ie(te(Oe)),"re"].join(" ")),ws(Xe),this},p.__private__.triangle=p.triangle=function(O,le,Ce,Oe,Xe,gt,vt){if(isNaN(O)||isNaN(le)||isNaN(Ce)||isNaN(Oe)||isNaN(Xe)||isNaN(gt)||!ar(vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-O,Oe-le],[Xe-Ce,gt-Oe],[O-Xe,le-gt]],O,le,[1,1],vt,!0),this},p.__private__.roundedRect=p.roundedRect=function(O,le,Ce,Oe,Xe,gt,vt){if(isNaN(O)||isNaN(le)||isNaN(Ce)||isNaN(Oe)||isNaN(Xe)||isNaN(gt)||!ar(vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ln=4/3*(Math.SQRT2-1);return Xe=Math.min(Xe,.5*Ce),gt=Math.min(gt,.5*Oe),this.lines([[Ce-2*Xe,0],[Xe*ln,0,Xe,gt-gt*ln,Xe,gt],[0,Oe-2*gt],[0,gt*ln,-Xe*ln,gt,-Xe,gt],[2*Xe-Ce,0],[-Xe*ln,0,-Xe,-gt*ln,-Xe,-gt],[0,2*gt-Oe],[0,-gt*ln,Xe*ln,-gt,Xe,-gt]],O+Xe,le,[1,1],vt,!0),this},p.__private__.ellipse=p.ellipse=function(O,le,Ce,Oe,Xe){if(isNaN(O)||isNaN(le)||isNaN(Ce)||isNaN(Oe)||!ar(Xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*Ce,vt=4/3*(Math.SQRT2-1)*Oe;return $r(O+Ce,le),Zi(O+Ce,le-vt,O+gt,le-Oe,O,le-Oe),Zi(O-gt,le-Oe,O-Ce,le-vt,O-Ce,le),Zi(O-Ce,le+vt,O-gt,le+Oe,O,le+Oe),Zi(O+gt,le+Oe,O+Ce,le+vt,O+Ce,le),ws(Xe),this},p.__private__.circle=p.circle=function(O,le,Ce,Oe){if(isNaN(O)||isNaN(le)||isNaN(Ce)||!ar(Oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,le,Ce,Ce,Oe)},p.setFont=function(O,le,Ce){return Ce&&(le=Q(le,Ce)),Zt=Mi(O,le,{disableWarning:!1}),this};var kt=p.__private__.getFont=p.getFont=function(){return Zn[Mi.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var O,le,Ce={};for(O in or)if(or.hasOwnProperty(O))for(le in Ce[O]=[],or[O])or[O].hasOwnProperty(le)&&Ce[O].push(le);return Ce},p.addFont=function(O,le,Ce,Oe,Xe){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?Xe=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(Ce=Q(Ce,Oe)),io.call(this,O,le,Ce,Xe=Xe||"Identity-H")};var $i,vo=r.lineWidth||.200025,Qi=p.__private__.getLineWidth=p.getLineWidth=function(){return vo},pn=p.__private__.setLineWidth=p.setLineWidth=function(O){return vo=O,ee(ie(te(O))+" w"),this};p.__private__.setLineDash=Gn.API.setLineDash=Gn.API.setLineDashPattern=function(O,le){if(O=O||[],le=le||0,isNaN(le)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(Ce){return ie(te(Ce))}).join(" "),le=ie(te(le)),ee("["+O+"] "+le+" d"),this};var Pr=p.__private__.getLineHeight=p.getLineHeight=function(){return q*$i};p.__private__.getLineHeight=p.getLineHeight=function(){return q*$i};var Aa=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&($i=O),this},Na=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return $i};Aa(r.lineHeight);var rr=p.__private__.getHorizontalCoordinate=function(O){return te(O)},Nn=p.__private__.getVerticalCoordinate=function(O){return k===I?O:kn[Z].mediaBox.topRightY-kn[Z].mediaBox.bottomLeftY-te(O)},mi=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(O){return ie(rr(O))},na=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(O){return ie(Nn(O))},Oo=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return He(Oo)},p.__private__.setStrokeColor=p.setDrawColor=function(O,le,Ce,Oe){return Oo=ht({ch1:O,ch2:le,ch3:Ce,ch4:Oe,pdfColorType:"draw",precision:2}),ee(Oo),this};var da=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return He(da)},p.__private__.setFillColor=p.setFillColor=function(O,le,Ce,Oe){return da=ht({ch1:O,ch2:le,ch3:Ce,ch4:Oe,pdfColorType:"fill",precision:2}),ee(da),this};var ls=r.textColor||"0 g",cs=p.__private__.getTextColor=p.getTextColor=function(){return He(ls)};p.__private__.setTextColor=p.setTextColor=function(O,le,Ce,Oe){return ls=ht({ch1:O,ch2:le,ch3:Ce,ch4:Oe,pdfColorType:"text",precision:3}),this};var Tt=r.charSpace,on=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tt||0)};p.__private__.setCharSpace=p.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tt=O,this};var Ht=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(O){var le=p.CapJoinStyles[O];if(le===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ht=le,ee(le+" J"),this};var fn=0;p.__private__.setLineJoin=p.setLineJoin=function(O){var le=p.CapJoinStyles[O];if(le===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=le,ee(le+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(ie(te(O))+" M"),this},p.GState=xh,p.setGState=function(O){(O=typeof O=="string"?Wn[Un[O]]:rn(null,O)).equals(qr)||(ee("/"+O.id+" gs"),qr=O)};var rn=function(O,le){if(!O||!Un[O]){var Ce=!1;for(var Oe in Wn)if(Wn.hasOwnProperty(Oe)&&Wn[Oe].equals(le)){Ce=!0;break}if(Ce)le=Wn[Oe];else{var Xe="GS"+(Object.keys(Wn).length+1).toString(10);Wn[Xe]=le,le.id=Xe}return O&&(Un[O]=le.id),li.publish("addGState",le),le}};p.addGState=function(O,le){return rn(O,le),this},p.saveGraphicsState=function(){return ee("q"),jn.push({key:Zt,size:q,color:ls}),this},p.restoreGraphicsState=function(){ee("Q");var O=jn.pop();return Zt=O.key,q=O.size,ls=O.color,qr=null,this},p.setCurrentTransformationMatrix=function(O){return ee(O.toString()+" cm"),this},p.comment=function(O){return ee("#"+O),this};var un=function(O,le){var Ce=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(gt){isNaN(gt)||(Ce=parseFloat(gt))}});var Oe=le||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Oe},set:function(gt){isNaN(gt)||(Oe=parseFloat(gt))}});var Xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Xe},set:function(gt){Xe=gt.toString()}}),this},lr=function(O,le,Ce,Oe){un.call(this,O,le),this.type="rect";var Xe=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Xe},set:function(vt){isNaN(vt)||(Xe=parseFloat(vt))}});var gt=Oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(vt){isNaN(vt)||(gt=parseFloat(vt))}}),this},Qn=function(){this.page=yn,this.currentPage=Z,this.pages=se.slice(0),this.pagesContext=kn.slice(0),this.x=$t,this.y=Rr,this.matrix=An,this.width=Bt(Z),this.height=mr(Z),this.outputDestination=Be,this.id="",this.objectNumber=-1};Qn.prototype.restore=function(){yn=this.page,Z=this.currentPage,kn=this.pagesContext,se=this.pages,$t=this.x,Rr=this.y,An=this.matrix,Mt(Z,this.width),Kn(Z,this.height),Be=this.outputDestination};var Fn=function(O,le,Ce,Oe,Xe){ps.push(new Qn),yn=Z=0,se=[],$t=O,Rr=le,An=Xe,On([Ce,Oe])};for(var cr in p.beginFormObject=function(O,le,Ce,Oe,Xe){return Fn(O,le,Ce,Oe,Xe),this},p.endFormObject=function(O){return(function(le){if(Zo[le])ps.pop().restore();else{var Ce=new Qn,Oe="Xo"+(Object.keys(Do).length+1).toString(10);Ce.id=Oe,Zo[le]=Oe,Do[Oe]=Ce,li.publish("addFormObject",Ce),ps.pop().restore()}})(O),this},p.doFormObject=function(O,le){var Ce=Do[Zo[O]];return ee("q"),ee(le.toString()+" cm"),ee("/"+Ce.id+" Do"),ee("Q"),this},p.getFormObject=function(O){var le=Do[Zo[O]];return{x:le.x,y:le.y,width:le.width,height:le.height,matrix:le.matrix}},p.save=function(O,le){return O=O||"generated.pdf",(le=le||{}).returnPromise=le.returnPromise||!1,le.returnPromise===!1?(Ru(Qo(Co()),O),typeof Ru.unload=="function"&&Lr.setTimeout&&setTimeout(Ru.unload,911),this):new Promise(function(Ce,Oe){try{var Xe=Ru(Qo(Co()),O);typeof Ru.unload=="function"&&Lr.setTimeout&&setTimeout(Ru.unload,911),Ce(Xe)}catch(gt){Oe(gt.message)}})},Gn.API)Gn.API.hasOwnProperty(cr)&&(cr==="events"&&Gn.API.events.length?(function(O,le){var Ce,Oe,Xe;for(Xe=le.length-1;Xe!==-1;Xe--)Ce=le[Xe][0],Oe=le[Xe][1],O.subscribe.apply(O,[Ce].concat(typeof Oe=="function"?[Oe]:Oe))})(li,Gn.API.events):p[cr]=Gn.API[cr]);function Bt(O){return kn[O].mediaBox.topRightX-kn[O].mediaBox.bottomLeftX}function Mt(O,le){kn[O].mediaBox.topRightX=le+kn[O].mediaBox.bottomLeftX}function mr(O){return kn[O].mediaBox.topRightY-kn[O].mediaBox.bottomLeftY}function Kn(O,le){kn[O].mediaBox.topRightY=le+kn[O].mediaBox.bottomLeftY}var Fr=p.getPageWidth=function(O){return Bt(O=O||Z)/Rn},er=p.setPageWidth=function(O,le){Mt(O,le*Rn)},xi=p.getPageHeight=function(O){return mr(O=O||Z)/Rn},Ti=p.setPageHeight=function(O,le){Kn(O,le*Rn)};return p.internal={pdfEscape:Vr,getStyle:Ln,getFont:kt,getFontSize:Le,getCharSpace:on,getTextColor:cs,getLineHeight:Pr,getLineHeightFactor:Na,getLineWidth:Qi,write:X,getHorizontalCoordinate:rr,getVerticalCoordinate:Nn,getCoordinateString:mi,getVerticalCoordinateString:na,collections:{},newObject:ni,newAdditionalObject:gs,newObjectDeferred:ki,newObjectDeferredBegin:gr,getFilters:qt,putStream:hn,events:li,scaleFactor:Rn,pageSize:{getWidth:function(){return Fr(Z)},setWidth:function(O){er(Z,O)},getHeight:function(){return xi(Z)},setHeight:function(O){Ti(Z,O)}},encryptionOptions:h,encryption:Ei,getEncryptor:function(O){return h!==null?Ei.encryptor(O,0):function(le){return le}},output:Ar,getNumberOfPages:Yr,get pages(){return se},out:ee,f2:oe,f3:B,getPageInfo:fo,getPageInfoByObjId:ys,getCurrentPageInfo:ss,getPDFVersion:N,Point:un,Rectangle:lr,Matrix:Mn,hasHotfix:Ji},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Fr(Z)},set:function(O){er(Z,O)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return xi(Z)},set:function(O){Ti(Z,O)},enumerable:!0,configurable:!0}),(function(O){for(var le=0,Ce=L.length;le<Ce;le++){var Oe=io.call(this,O[le][0],O[le][1],O[le][2],L[le][3],!0);S===!1&&(b[Oe]=!0);var Xe=O[le][0].split("-");yo({id:Oe,fontName:Xe[0],fontStyle:Xe[1]||""})}li.publish("addFonts",{fonts:Zn,dictionary:or})}).call(p,L),Zt="F1",wr(a,t),li.publish("initialized"),p}rd.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},rd.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rd.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},rd.prototype.processOwnerPassword=function(r,e){return M1(B1(e).substr(0,5),r)},rd.prototype.encryptor=function(r,e){var t=B1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(o){return M1(t,o)}},xh.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Xi(r)!==Xi(this))return!1;var o=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;o++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&o--;return o===0},Gn.API={events:[]},Gn.version="4.0.0";var qo=Gn.API,c0=1,qu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qu=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zr=function(r){return r.toFixed(2)},su=function(r){return r.toFixed(5)};qo.__acroform__={};var ka=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},pv=function(r){return r*c0},tc=function(r){var e=new _w,t=Cn.internal.getHeight(r)||0,o=Cn.internal.getWidth(r)||0;return e.BBox=[0,0,Number(zr(o)),Number(zr(t))],e},vk=qo.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},wk=qo.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},xk=qo.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Ko=qo.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xk(r,e-1)},Vo=qo.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vk(r,e-1)},Xo=qo.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wk(r,e-1)},bk=qo.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,o=e.internal.getVerticalCoordinate,a=r[0],s=r[1],u=r[2],l=r[3],d={};return d.lowerLeft_X=t(a)||0,d.lowerLeft_Y=o(s+l)||0,d.upperRight_X=t(a+u)||0,d.upperRight_Y=o(s)||0,[Number(zr(d.lowerLeft_X)),Number(zr(d.lowerLeft_Y)),Number(zr(d.upperRight_X)),Number(zr(d.upperRight_Y))]},_k=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,o=z1(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+zr(o.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(o.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=tc(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},z1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,o={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(oe){return oe.split(`
`)}):a.map(function(oe){return[oe]});var s=t,u=Cn.internal.getHeight(r)||0;u=u<0?-u:u;var l=Cn.internal.getWidth(r)||0;l=l<0?-l:l;var d=function(oe,B,te){if(oe+1<a.length){var P=B+" "+a[oe+1][0];return Jf(P,r,te).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var f,h,S=Jf("3",r,s).height,b=r.multiline?u-s:(u-S)/2,p=b+=2,j=0,N=0,A=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Jf(e,r,s=12).width+", FieldWidth:"+l+`
`;break}for(var w="",R=0,I=0;I<a.length;I++)if(a.hasOwnProperty(I)){var k=!1;if(a[I].length!==1&&A!==a[I].length-1){if((S+2)*(R+2)+2>u)continue e;w+=a[I][A],k=!0,N=I,I--}else{w=(w+=a[I][A]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var G=parseInt(I),re=d(G,w,s),Q=I>=a.length-1;if(re&&!Q){w+=" ",A=0;continue}if(re||Q){if(Q)N=G;else if(r.multiline&&(S+2)*(R+2)+2>u)continue e}else{if(!r.multiline||(S+2)*(R+2)+2>u)continue e;N=G}}for(var ie="",U=j;U<=N;U++){var ue=a[U];if(r.multiline){if(U===N){ie+=ue[A]+" ",A=(A+1)%ue.length;continue}if(U===j){ie+=ue[ue.length-1]+" ";continue}}ie+=ue[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,h=Jf(ie,r,s).width,r.textAlign){case"right":f=l-h-2;break;case"center":f=(l-h)/2;break;default:f=2}e+=zr(f)+" "+zr(p)+` Td
`,e+="("+qu(ie)+`) Tj
`,e+=-zr(f)+` 0 Td
`,p=-(s+2),h=0,j=k?N:N+1,R++,w=""}break}return o.text=e,o.fontSize=s,o},Jf=function(r,e,t){var o=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:o,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Sk={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kk=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(o){return o.type===t.type&&o.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},Ak=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Rl.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Sk)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");c0=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new Sw,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var o=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];s.objId=void 0,s.hasAnnotation&&kk(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(o,a){var s=!o;for(var u in o||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),o=o||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(o.hasOwnProperty(u)){var l=o[u],d=[],f=l.Rect;if(l.Rect&&(l.Rect=bk(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Cn.createDefaultAppearanceStream(l),Xi(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=_k(l);d.push({key:"AP",value:"<</N "+h+">>"}),a.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var S="";for(var b in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(b)){var p=l.appearanceStreamContent[b];if(S+="/"+b+" ",S+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var u in p)if(p.hasOwnProperty(u)){var j=p[u];typeof j=="function"&&(j=j.call(a,l)),S+="/"+u+" "+j+" ",a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(a,l)),S+="/"+u+" "+j,a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j);S+=">>"}d.push({key:"AP",value:`<<
`+S+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:l.objId}),a.internal.out("endobj")}s&&(function(N,A){for(var w in N)if(N.hasOwnProperty(w)){var R=w,I=N[w];A.internal.newObjectDeferredBegin(I.objId,!0),Xi(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete N[R]}})(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},bw=qo.__acroform__.arrayToPdfArray=function(r,e,t){var o=function(u){return u};if(Array.isArray(r)){for(var a="[",s=0;s<r.length;s++)switch(s!==0&&(a+=" "),Xi(r[s])){case"boolean":case"number":case"object":a+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(o=t.internal.getEncryptor(e)),a+="("+qu(o(r[s].toString()))+")"):a+=r[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},m1=function(r,e,t){var o=function(a){return a};return e!==void 0&&t&&(o=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+qu(o(r))+")"},oc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oc.prototype.toString=function(){return this.objId+" 0 R"},oc.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},oc.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var o=e[t],a=this[o];a&&(Array.isArray(a)?r.push({key:o,value:bw(a,this.objId,this.scope)}):a instanceof oc?(a.scope=this.scope,r.push({key:o,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:o,value:a}))}return r};var _w=function(){oc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};ka(_w,oc);var Sw=function(){oc.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(o){return o};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+qu(t(r))+")"}},set:function(t){r=t}})};ka(Sw,oc);var Rl=function r(){oc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ko(e,3)},set:function(w){w?this.F=Vo(e,3):this.F=Xo(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var o=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(o.length!==0)return o},set:function(w){o=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[0])?0:o[0]},set:function(w){o[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[1])?0:o[1]},set:function(w){o[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[2])?0:o[2]},set:function(w){o[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!o||isNaN(o[3])?0:o[3]},set:function(w){o[3]=w}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bh)return;s="FieldObject"+r.FieldNum++}var w=function(R){return R};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+qu(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(w){d=w}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/c0:f},set:function(w){f=w}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(w){h=w}});var S="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!S||this instanceof bh||this instanceof Fu))return m1(S,this.objId,this.scope)},set:function(w){w=w.toString(),S=w}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ls==0?m1(b,this.objId,this.scope):b},set:function(w){w=w.toString(),b=this instanceof Ls==0?w.substr(0,1)==="("?Qu(w.substr(1,w.length-2)):Qu(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ls==1?Qu(b.substr(1,b.length-1)):b},set:function(w){w=w.toString(),b=this instanceof Ls==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ls==0?m1(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Ls==0?w.substr(0,1)==="("?Qu(w.substr(1,w.length-2)):Qu(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ls==1?Qu(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Ls==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(w){w=!!w,N=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(w){j=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,1)},set:function(w){w?this.Ff=Vo(this.Ff,1):this.Ff=Xo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,2)},set:function(w){w?this.Ff=Vo(this.Ff,2):this.Ff=Xo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,3)},set:function(w){w?this.Ff=Vo(this.Ff,3):this.Ff=Xo(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');A=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(A){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};ka(Rl,oc);var hd=function(){Rl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bw(e,this.objId,this.scope)},set:function(t){var o,a;a=[],typeof(o=t)=="string"&&(a=(function(s,u,l){l||(l=1);for(var d,f=[];d=u.exec(s);)f.push(d[l]);return f})(o,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,o){for(o=o||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),o!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,18)},set:function(t){t?this.Ff=Vo(this.Ff,18):this.Ff=Xo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Vo(this.Ff,19):this.Ff=Xo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,20)},set:function(t){t?(this.Ff=Vo(this.Ff,20),e.sort()):this.Ff=Xo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,22)},set:function(t){t?this.Ff=Vo(this.Ff,22):this.Ff=Xo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,23)},set:function(t){t?this.Ff=Vo(this.Ff,23):this.Ff=Xo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,27)},set:function(t){t?this.Ff=Vo(this.Ff,27):this.Ff=Xo(this.Ff,27)}}),this.hasAppearanceStream=!1};ka(hd,Rl);var pd=function(){hd.call(this),this.fontName="helvetica",this.combo=!1};ka(pd,hd);var md=function(){pd.call(this),this.combo=!0};ka(md,pd);var dh=function(){md.call(this),this.edit=!0};ka(dh,md);var Ls=function(){Rl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,15)},set:function(t){t?this.Ff=Vo(this.Ff,15):this.Ff=Xo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,16)},set:function(t){t?this.Ff=Vo(this.Ff,16):this.Ff=Xo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,17)},set:function(t){t?this.Ff=Vo(this.Ff,17):this.Ff=Xo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,26)},set:function(t){t?this.Ff=Vo(this.Ff,26):this.Ff=Xo(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var o,a=[];for(o in a.push("<<"),e)a.push("/"+o+" ("+qu(t(e[o]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){Xi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};ka(Ls,Rl);var fh=function(){Ls.call(this),this.pushButton=!0};ka(fh,Ls);var gd=function(){Ls.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};ka(gd,Ls);var bh=function(){var r,e;Rl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,u=[];for(s in u.push("<<"),o)u.push("/"+s+" ("+qu(a(o[s]))+")");return u.push(">>"),u.join(`
`)},set:function(a){Xi(a)==="object"&&(o=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(a){typeof a=="string"&&(o.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Cn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ka(bh,Rl),gd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},gd.prototype.createOption=function(r){var e=new bh;return e.Parent=this,e.optionName=r,this.Kids.push(e),Nk.call(this.scope,e),e};var hh=function(){Ls.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Cn.CheckBox.createAppearanceStream()};ka(hh,Ls);var Fu=function(){Rl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,13)},set:function(e){e?this.Ff=Vo(this.Ff,13):this.Ff=Xo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,21)},set:function(e){e?this.Ff=Vo(this.Ff,21):this.Ff=Xo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,23)},set:function(e){e?this.Ff=Vo(this.Ff,23):this.Ff=Xo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,24)},set:function(e){e?this.Ff=Vo(this.Ff,24):this.Ff=Xo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,25)},set:function(e){e?this.Ff=Vo(this.Ff,25):this.Ff=Xo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,26)},set:function(e){e?this.Ff=Vo(this.Ff,26):this.Ff=Xo(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ka(Fu,Rl);var ph=function(){Fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ko(this.Ff,14)},set:function(r){r?this.Ff=Vo(this.Ff,14):this.Ff=Xo(this.Ff,14)}}),this.password=!0};ka(ph,Fu);var Cn={CheckBox:{createAppearanceStream:function(){return{N:{On:Cn.CheckBox.YesNormal},D:{On:Cn.CheckBox.YesPushDown,Off:Cn.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=[],o=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),s=z1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+zr(Cn.internal.getWidth(r))+" "+zr(Cn.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+o+" "+zr(s.fontSize)+" Tf "+a),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=tc(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color),a=[],s=Cn.internal.getHeight(r),u=Cn.internal.getWidth(r),l=z1(r,r.caption);return a.push("1 g"),a.push("0 0 "+zr(u)+" "+zr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+zr(u-1)+" "+zr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+zr(l.fontSize)+" Tf "+o),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+zr(Cn.internal.getWidth(r))+" "+zr(Cn.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Cn.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Cn.RadioButton.Circle.YesNormal,e.D[r]=Cn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=tc(r);e.scope=r.scope;var t=[],o=Cn.internal.getWidth(r)<=Cn.internal.getHeight(r)?Cn.internal.getWidth(r)/4:Cn.internal.getHeight(r)/4;o=Number((.9*o).toFixed(5));var a=Cn.internal.Bezier_C,s=Number((o*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+su(Cn.internal.getWidth(r)/2)+" "+su(Cn.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),t.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),t.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),t.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=[],o=Cn.internal.getWidth(r)<=Cn.internal.getHeight(r)?Cn.internal.getWidth(r)/4:Cn.internal.getHeight(r)/4;o=Number((.9*o).toFixed(5));var a=Number((2*o).toFixed(5)),s=Number((a*Cn.internal.Bezier_C).toFixed(5)),u=Number((o*Cn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+su(Cn.internal.getWidth(r)/2)+" "+su(Cn.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),t.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),t.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),t.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+su(Cn.internal.getWidth(r)/2)+" "+su(Cn.internal.getHeight(r)/2)+" cm"),t.push(o+" 0 m"),t.push(o+" "+u+" "+u+" "+o+" 0 "+o+" c"),t.push("-"+u+" "+o+" -"+o+" "+u+" -"+o+" 0 c"),t.push("-"+o+" -"+u+" -"+u+" -"+o+" 0 -"+o+" c"),t.push(u+" -"+o+" "+o+" -"+u+" "+o+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=[],o=Cn.internal.getWidth(r)<=Cn.internal.getHeight(r)?Cn.internal.getWidth(r)/4:Cn.internal.getHeight(r)/4;o=Number((.9*o).toFixed(5));var a=Number((2*o).toFixed(5)),s=Number((a*Cn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+su(Cn.internal.getWidth(r)/2)+" "+su(Cn.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),t.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),t.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),t.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Cn.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Cn.RadioButton.Cross.YesNormal,e.D[r]=Cn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=tc(r);e.scope=r.scope;var t=[],o=Cn.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+zr(Cn.internal.getWidth(r)-2)+" "+zr(Cn.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(zr(o.x1.x)+" "+zr(o.x1.y)+" m"),t.push(zr(o.x2.x)+" "+zr(o.x2.y)+" l"),t.push(zr(o.x4.x)+" "+zr(o.x4.y)+" m"),t.push(zr(o.x3.x)+" "+zr(o.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=Cn.internal.calculateCross(r),o=[];return o.push("0.749023 g"),o.push("0 0 "+zr(Cn.internal.getWidth(r))+" "+zr(Cn.internal.getHeight(r))+" re"),o.push("f"),o.push("q"),o.push("1 1 "+zr(Cn.internal.getWidth(r)-2)+" "+zr(Cn.internal.getHeight(r)-2)+" re"),o.push("W"),o.push("n"),o.push(zr(t.x1.x)+" "+zr(t.x1.y)+" m"),o.push(zr(t.x2.x)+" "+zr(t.x2.y)+" l"),o.push(zr(t.x4.x)+" "+zr(t.x4.y)+" m"),o.push(zr(t.x3.x)+" "+zr(t.x3.y)+" l"),o.push("s"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(r){var e=tc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+zr(Cn.internal.getWidth(r))+" "+zr(Cn.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Cn.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Cn.internal.getWidth(r),t=Cn.internal.getHeight(r),o=Math.min(e,t);return{x1:{x:(e-o)/2,y:(t-o)/2+o},x2:{x:(e-o)/2+o,y:(t-o)/2},x3:{x:(e-o)/2,y:(t-o)/2},x4:{x:(e-o)/2+o,y:(t-o)/2+o}}}},Cn.internal.getWidth=function(r){var e=0;return Xi(r)==="object"&&(e=pv(r.Rect[2])),e},Cn.internal.getHeight=function(r){var e=0;return Xi(r)==="object"&&(e=pv(r.Rect[3])),e};var Nk=qo.addField=function(r){if(Ak(this,r),!(r instanceof Rl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};qo.AcroFormChoiceField=hd,qo.AcroFormListBox=pd,qo.AcroFormComboBox=md,qo.AcroFormEditBox=dh,qo.AcroFormButton=Ls,qo.AcroFormPushButton=fh,qo.AcroFormRadioButton=gd,qo.AcroFormCheckBox=hh,qo.AcroFormTextField=Fu,qo.AcroFormPasswordField=ph,qo.AcroFormAppearance=Cn,qo.AcroForm={ChoiceField:hd,ListBox:pd,ComboBox:md,EditBox:dh,Button:Ls,PushButton:fh,RadioButton:gd,CheckBox:hh,TextField:Fu,PasswordField:ph,Appearance:Cn},Gn.AcroForm={ChoiceField:hd,ListBox:pd,ComboBox:md,EditBox:dh,Button:Ls,PushButton:fh,RadioButton:gd,CheckBox:hh,TextField:Fu,PasswordField:ph,Appearance:Cn};Gn.AcroForm;function kw(r){return r.reduce(function(e,t,o){return e[t]=o,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",o={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(oe,B){var te,P,be,Ae,ge,xe=t;if((B=B||t)==="RGBA"||oe.data!==void 0&&oe.data instanceof Uint8ClampedArray&&"height"in oe&&"width"in oe)return"RGBA";if(re(oe))for(ge in o)for(be=o[ge],te=0;te<be.length;te+=1){for(Ae=!0,P=0;P<be[te].length;P+=1)if(be[te][P]!==void 0&&be[te][P]!==oe[P]){Ae=!1;break}if(Ae===!0){xe=ge;break}}else for(ge in o)for(be=o[ge],te=0;te<be.length;te+=1){for(Ae=!0,P=0;P<be[te].length;P+=1)if(be[te][P]!==void 0&&be[te][P]!==oe.charCodeAt(P)){Ae=!1;break}if(Ae===!0){xe=ge;break}}return xe===t&&B!==t&&(xe=B),xe},s=function oe(B){for(var te=this.internal.write,P=this.internal.putStream,be=(0,this.internal.getFilters)();be.indexOf("FlateEncode")!==-1;)be.splice(be.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var Ae=[];if(Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Image"}),Ae.push({key:"Width",value:B.width}),Ae.push({key:"Height",value:B.height}),B.colorSpace===w.INDEXED?Ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(Ae.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===w.DEVICE_CMYK&&Ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ae.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&Ae.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ge="",xe=0,ke=B.transparency.length;xe<ke;xe++)ge+=B.transparency[xe]+" "+B.transparency[xe]+" ";Ae.push({key:"Mask",value:"["+ge+"]"})}B.sMask!==void 0&&Ae.push({key:"SMask",value:B.objectId+1+" 0 R"});var Fe=B.filter!==void 0?["/"+B.filter]:void 0;if(P({data:B.data,additionalKeyValues:Ae,alreadyAppliedFilters:Fe,objectId:B.objectId}),te("endobj"),"sMask"in B&&B.sMask!==void 0){var J,C=(J=B.sMaskBitsPerComponent)!==null&&J!==void 0?J:B.bitsPerComponent,Z={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:C,data:B.sMask};"filter"in B&&(Z.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(C," /Columns ").concat(B.width),Z.filter=B.filter),oe.call(this,Z)}if(B.colorSpace===w.INDEXED){var ne=this.internal.newObject();P({data:ie(new Uint8Array(B.palette)),objectId:ne}),te("endobj")}},u=function(){var oe=this.internal.collections[e+"images"];for(var B in oe)s.call(this,oe[B])},l=function(){var oe,B=this.internal.collections[e+"images"],te=this.internal.write;for(var P in B)te("/I"+(oe=B[P]).index,oe.objectId,"0","R")},d=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var oe=this.internal.collections[e+"images"];return d.call(this),oe},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},S=function(oe){return typeof r["process"+oe.toUpperCase()]=="function"},b=function(oe){return Xi(oe)==="object"&&oe.nodeType===1},p=function(oe,B){if(oe.nodeName==="IMG"&&oe.hasAttribute("src")){var te=""+oe.getAttribute("src");if(te.indexOf("data:image/")===0)return uh(unescape(te).split("base64,").pop());var P=r.loadFile(te,!0);if(P!==void 0)return P}if(oe.nodeName==="CANVAS"){if(oe.width===0||oe.height===0)throw new Error("Given canvas must have data. Canvas width: "+oe.width+", height: "+oe.height);var be;switch(B){case"PNG":be="image/png";break;case"WEBP":be="image/webp";break;default:be="image/jpeg"}return uh(oe.toDataURL(be,1).split("base64,").pop())}},j=function(oe){var B=this.internal.collections[e+"images"];if(B){for(var te in B)if(oe===B[te].alias)return B[te]}},N=function(oe,B,te){return oe||B||(oe=-96,B=-96),oe<0&&(oe=-1*te.width*72/oe/this.internal.scaleFactor),B<0&&(B=-1*te.height*72/B/this.internal.scaleFactor),oe===0&&(oe=B*te.width/te.height),B===0&&(B=oe*te.height/te.width),[oe,B]},A=function(oe,B,te,P,be,Ae){var ge=N.call(this,te,P,be),xe=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Fe=f.call(this);if(te=ge[0],P=ge[1],Fe[be.index]=be,Ae){Ae*=Math.PI/180;var J=Math.cos(Ae),C=Math.sin(Ae),Z=function(ye){return ye.toFixed(4)},ne=[Z(J),Z(C),Z(-1*C),Z(J),0,0,"cm"]}this.internal.write("q"),Ae?(this.internal.write([1,"0","0",1,xe(oe),ke(B+P),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([xe(te),"0","0",xe(P),"0","0","cm"].join(" "))):this.internal.write([xe(te),"0","0",xe(P),xe(oe),ke(B+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+be.index+" Do"),this.internal.write("Q")},w=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=r.__addimage__.sHashCode=function(oe){var B,te,P=0;if(typeof oe=="string")for(te=oe.length,B=0;B<te;B++)P=(P<<5)-P+oe.charCodeAt(B),P|=0;else if(re(oe))for(te=oe.byteLength/2,B=0;B<te;B++)P=(P<<5)-P+oe[B],P|=0;return P},k=r.__addimage__.validateStringAsBase64=function(oe){(oe=oe||"").toString().trim();var B=!0;return oe.length===0&&(B=!1),oe.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(oe.substr(0,oe.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(oe.substr(-2))===!1&&(B=!1),B},G=r.__addimage__.extractImageFromDataUrl=function(oe){if(oe==null||!(oe=oe.trim()).startsWith("data:"))return null;var B=oe.indexOf(",");return B<0?null:oe.substring(0,B).trim().endsWith("base64")?oe.substring(B+1):null};r.__addimage__.isArrayBuffer=function(oe){return oe instanceof ArrayBuffer};var re=r.__addimage__.isArrayBufferView=function(oe){return oe instanceof Int8Array||oe instanceof Uint8Array||oe instanceof Uint8ClampedArray||oe instanceof Int16Array||oe instanceof Uint16Array||oe instanceof Int32Array||oe instanceof Uint32Array||oe instanceof Float32Array||oe instanceof Float64Array},Q=r.__addimage__.binaryStringToUint8Array=function(oe){for(var B=oe.length,te=new Uint8Array(B),P=0;P<B;P++)te[P]=oe.charCodeAt(P);return te},ie=r.__addimage__.arrayBufferToBinaryString=function(oe){for(var B="",te=re(oe)?oe:new Uint8Array(oe),P=0;P<te.length;P+=8192)B+=String.fromCharCode.apply(null,te.subarray(P,P+8192));return B};r.addImage=function(){var oe,B,te,P,be,Ae,ge,xe,ke;if(typeof arguments[1]=="number"?(B=t,te=arguments[1],P=arguments[2],be=arguments[3],Ae=arguments[4],ge=arguments[5],xe=arguments[6],ke=arguments[7]):(B=arguments[1],te=arguments[2],P=arguments[3],be=arguments[4],Ae=arguments[5],ge=arguments[6],xe=arguments[7],ke=arguments[8]),Xi(oe=arguments[0])==="object"&&!b(oe)&&"imageData"in oe){var Fe=oe;oe=Fe.imageData,B=Fe.format||B||t,te=Fe.x||te||0,P=Fe.y||P||0,be=Fe.w||Fe.width||be,Ae=Fe.h||Fe.height||Ae,ge=Fe.alias||ge,xe=Fe.compression||xe,ke=Fe.rotation||Fe.angle||ke}var J=this.internal.getFilters();if(xe===void 0&&J.indexOf("FlateEncode")!==-1&&(xe="SLOW"),isNaN(te)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var C=U.call(this,oe,B,ge,xe);return A.call(this,te,P,be,Ae,C,ke),this};var U=function(oe,B,te,P){var be,Ae,ge;if(typeof oe=="string"&&a(oe)===t){oe=unescape(oe);var xe=ue(oe,!1);(xe!==""||(xe=r.loadFile(oe,!0))!==void 0)&&(oe=xe)}if(b(oe)&&(oe=p(oe,B)),B=a(oe,B),!S(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ge=te)==null||ge.length===0)&&(te=(function(ke){return typeof ke=="string"||re(ke)?I(ke):re(ke.data)?I(ke.data):null})(oe)),(be=j.call(this,te))||(oe instanceof Uint8Array||B==="RGBA"||(Ae=oe,oe=Q(oe)),be=this["process"+B.toUpperCase()](oe,h.call(this),te,(function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in r.image_compression?ke:R.NONE})(P),Ae)),!be)throw new Error("An unknown error occurred whilst processing the image.");return be},ue=r.__addimage__.convertBase64ToBinaryString=function(oe,B){B=typeof B!="boolean"||B;var te,P="";if(typeof oe=="string"){var be;te=(be=G(oe))!==null&&be!==void 0?be:oe;try{P=uh(te)}catch(Ae){if(B)throw k(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return P};r.getImageProperties=function(oe){var B,te,P="";if(b(oe)&&(oe=p(oe)),typeof oe=="string"&&a(oe)===t&&((P=ue(oe,!1))===""&&(P=r.loadFile(oe)||""),oe=P),te=a(oe),!S(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(oe instanceof Uint8Array||(oe=Q(oe)),!(B=this["process"+te.toUpperCase()](oe)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=te,B}})(Gn.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Gn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var o,a,s,u=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,h=!1,S=0;S<f.length&&!h;S++)switch((o=f[S]).type){case"link":(e(o.options.url)||e(o.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var b=0;b<f.length;b++){o=f[b];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(t.objId);switch(o.type){case"reference":this.internal.write(" "+o.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(N.objId),R=o.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(o.bounds.x)+" "+l(o.bounds.y+o.bounds.h)+" "+u(o.bounds.x+o.bounds.w)+" "+l(o.bounds.y)+"] ")+"/Contents ("+p(w(o.contents))+")",s+=" /Popup "+A.objId+" 0 R",s+=" /P "+d.objId+" 0 R",s+=" /T ("+p(w(R))+") >>",N.content=s;var I=N.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(o.bounds.x+30)+" "+l(o.bounds.y+o.bounds.h)+" "+u(o.bounds.x+o.bounds.w+30)+" "+l(o.bounds.y)+"] ")+" /Parent "+I,o.open&&(s+=" /Open true"),s+=" >>",A.content=s,this.internal.write(N.objId,"0 R",A.objId,"0 R");break;case"freetext":a="/Rect ["+u(o.bounds.x)+" "+l(o.bounds.y)+" "+u(o.bounds.x+o.bounds.w)+" "+l(o.bounds.y+o.bounds.h)+"] ";var k=o.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(j(o.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(o.options.name){var G=this.annotations._nameMap[o.options.name];o.options.pageNumber=G.page,o.options.top=G.y}else o.options.top||(o.options.top=0);if(a="/Rect ["+o.finalBounds.x+" "+o.finalBounds.y+" "+o.finalBounds.w+" "+o.finalBounds.h+"] ",s="",o.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(o.options.url))+") >>";else if(o.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(o.options.pageNumber).objId+" 0 R",o.options.magFactor=o.options.magFactor||"XYZ",o.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+o.options.top+"]";break;case"FitV":o.options.left=o.options.left||0,s+=" /FitV "+o.options.left+"]";break;default:var re=l(o.options.top);o.options.left=o.options.left||0,o.options.zoom===void 0&&(o.options.zoom=0),s+=" /XYZ "+o.options.left+" "+re+" "+o.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var o=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":o.pageContext.annotations.push(t)}},r.link=function(t,o,a,s,u){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(t),y:f(o),w:d(t+a),h:f(o+s)},options:u,type:"link"})},r.textWithLink=function(t,o,a,s){var u,l,d=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var h=this.splitTextToSize(t,l).length;u=Math.ceil(f*h)}else l=d,u=f;return this.text(t,o,a,s),a+=.2*f,s.align==="center"&&(o-=d/2),s.align==="right"&&(o-=d),this.link(o,a-f,l,u,s),d},r.getTextWidth=function(t){var o=this.internal.getFontSize();return this.getStringUnitWidth(t)*o/this.internal.scaleFactor}})(Gn.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},o={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},u=r.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},l=r.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&s(N)&&e[N.charCodeAt(0)].length<=2},d=r.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&a.indexOf(N.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&s(N)&&e[N.charCodeAt(0)].length>=1};var f=r.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&s(N)&&e[N.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&s(N)&&e[N.charCodeAt(0)].length>=3};var h=r.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&s(N)&&e[N.charCodeAt(0)].length==4},S=r.__arabicParser__.resolveLigatures=function(N){var A=0,w=t,R="",I=0;for(A=0;A<N.length;A+=1)w[N.charCodeAt(A)]!==void 0?(I++,typeof(w=w[N.charCodeAt(A)])=="number"&&(R+=String.fromCharCode(w),w=t,I=0),A===N.length-1&&(w=t,R+=N.charAt(A-(I-1)),A-=I-1,I=0)):(w=t,R+=N.charAt(A-I),A-=I,I=0);return R};r.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&o[N.charCodeAt(0)]!==void 0};var b=r.__arabicParser__.getCorrectForm=function(N,A,w){return u(N)?s(N)===!1?-1:!f(N)||!u(A)&&!u(w)||!u(w)&&l(A)||l(N)&&!u(A)||l(N)&&d(A)||l(N)&&l(A)?0:h(N)&&u(A)&&!l(A)&&u(w)&&f(w)?3:l(N)||!u(w)?1:2:-1},p=function(N){var A=0,w=0,R=0,I="",k="",G="",re=(N=N||"").split("\\s+"),Q=[];for(A=0;A<re.length;A+=1){for(Q.push(""),w=0;w<re[A].length;w+=1)I=re[A][w],k=re[A][w-1],G=re[A][w+1],u(I)?(R=b(I,k,G),Q[A]+=R!==-1?String.fromCharCode(e[I.charCodeAt(0)][R]):I):Q[A]+=I;Q[A]=S(Q[A])}return Q.join(" ")},j=r.__arabicParser__.processArabic=r.processArabic=function(){var N,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(A)){var R=0;for(w=[],R=0;R<A.length;R+=1)Array.isArray(A[R])?w.push([p(A[R][0]),A[R][1],A[R][2]]):w.push([p(A[R])]);N=w}else N=p(A);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};r.events.push(["preProcessText",j])})(Gn.API),Gn.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var o=150;Object.defineProperty(this,"width",{get:function(){return o},set:function(l){o=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=o+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(l){u=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,o){var a;if((t=t||"2d")!=="2d")return null;for(a in o)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=o[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Gn.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,o=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var S=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return S},set:function(N){S=N}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(N){j=N}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(d){return o.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},r.getTextDimensions=function(d,f){o.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),S=f.font||this.getFont(),b=f.scaleFactor||this.internal.scaleFactor,p=0,j=0,N=0,A=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var w=f.maxWidth;w>0?typeof d=="string"?d=this.splitTextToSize(d,w):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(I,k){return I.concat(A.splitTextToSize(k,w))},[])):d=Array.isArray(d)?d:[d];for(var R=0;R<d.length;R++)p<(N=this.getStringUnitWidth(d[R],{font:S})*h)&&(p=N);return p!==0&&(j=d.length),{w:p/=b,h:Math.max((j*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/b,0)}},r.cellAddPage=function(){o.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=r.cell=function(){var d;d=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),o.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,S=this.internal.__cell__.margins||e,b=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+S.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=S.top,p&&b&&(this.printHeaderRow(d.lineNumber,!0),d.y+=b[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,t===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-h,d.y+h,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+h,{align:"center",baseline:"top",maxWidth:d.width-h-h}):this.text(d.text,d.x+h,d.y+h,{align:"left",baseline:"top",maxWidth:d.width-h-h})),this.internal.__cell__.lastCell=d,this};r.table=function(d,f,h,S,b){if(o.call(this),!h)throw new Error("No data for PDF table.");var p,j,N,A,w=[],R=[],I=[],k={},G={},re=[],Q=[],ie=(b=b||{}).autoSize||!1,U=b.printHeaders!==!1,ue=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,oe=b.margins||Object.assign({width:this.getPageWidth()},e),B=typeof b.padding=="number"?b.padding:3,te=b.headerBackgroundColor||"#c8c8c8",P=b.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=oe,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=te,this.internal.__cell__.headerTextColor=P,this.setFontSize(ue),S==null)R=w=Object.keys(h[0]),I=w.map(function(){return"left"});else if(Array.isArray(S)&&Xi(S[0])==="object")for(w=S.map(function(Fe){return Fe.name}),R=S.map(function(Fe){return Fe.prompt||Fe.name||""}),I=S.map(function(Fe){return Fe.align||"left"}),p=0;p<S.length;p+=1)G[S[p].name]=.7499990551181103*S[p].width;else Array.isArray(S)&&typeof S[0]=="string"&&(R=w=S,I=w.map(function(){return"left"}));if(ie||Array.isArray(S)&&typeof S[0]=="string")for(p=0;p<w.length;p+=1){for(k[A=w[p]]=h.map(function(Fe){return Fe[A]}),this.setFont(void 0,"bold"),re.push(this.getTextDimensions(R[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=k[A],this.setFont(void 0,"normal"),N=0;N<j.length;N+=1)re.push(this.getTextDimensions(j[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[A]=Math.max.apply(null,re)+B+B,re=[]}if(U){var be={};for(p=0;p<w.length;p+=1)be[w[p]]={},be[w[p]].text=R[p],be[w[p]].align=I[p];var Ae=l.call(this,be,G);Q=w.map(function(Fe){return new s(d,f,G[Fe],Ae,be[Fe].text,void 0,be[Fe].align)}),this.setTableHeaderRow(Q),this.printHeaderRow(1,!1)}var ge=S.reduce(function(Fe,J){return Fe[J.name]=J.align,Fe},{});for(p=0;p<h.length;p+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:p,data:h[p]},this);var xe=l.call(this,h[p],G);for(N=0;N<w.length;N+=1){var ke=h[p][w[N]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:p,col:N,data:ke},this),u.call(this,new s(d,f,G[w[N]],xe,ke,p+2,ge[w[N]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var l=function(d,f){var h=this.internal.__cell__.padding,S=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(d).map(function(p){var j=d[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*S/b+h+h},this).reduce(function(p,j){return Math.max(p,j)},0)};r.setTableHeaderRow=function(d){o.call(this),this.internal.__cell__.tableHeaderRow=d},r.printHeaderRow=function(d,f){if(o.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var S=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(S[0],S[1],S[2],S[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,b.push(h)),h.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,h),this.setTextColor(j)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}})(Gn.API);var Aw={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$1=kw(Nw),Ew=[100,200,300,400,500,600,700,800,900],Ek=kw(Ew);function g1(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return Aw[s=s||"normal"]?s:"normal"})(r.style),o=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(r.weight),a=(function(s){return typeof $1[s=s||"normal"]=="number"?s:"normal"})(r.stretch);return{family:e,style:t,weight:o,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,o].join(" ")}}}function mv(r,e,t,o){var a;for(a=t;a>=0&&a<e.length;a+=o)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=o)if(r[e[a]])return r[e[a]]}var Tk={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},gv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yv(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function vv(r){return r.trimLeft()}function Ck(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Lk(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Zf,wv,xv,ed,Qf,bv,_v,Sv,y1=["times"];function kv(r,e,t,o,a){var s=4,u=Nv;switch(a){case Gn.API.image_compression.FAST:s=1,u=Av;break;case Gn.API.image_compression.MEDIUM:s=6,u=Ev;break;case Gn.API.image_compression.SLOW:s=9,u=Tv}r=(function(d,f,h,S){for(var b,p=d.length/f,j=new Uint8Array(d.length+p),N=[Ik,Av,Nv,Ev,Tv],A=0;A<p;A+=1){var w=A*f,R=d.subarray(w,w+f);if(S)j.set(S(R,h,b),w+A);else{for(var I=N.length,k=[],G=0;G<I;G+=1)k[G]=N[G](R,h,b);var re=jk(k.concat());j.set(k[re],w+A)}b=R}return j})(r,e,Math.ceil(t*o/8),u);var l=P1(r,{level:s});return Gn.API.__addimage__.arrayBufferToBinaryString(l)}function Ik(r){var e=Array.apply([],r);return e.unshift(0),e}function Av(r,e){var t=r.length,o=[];o[0]=1;for(var a=0;a<t;a+=1){var s=r[a-e]||0;o[a+1]=r[a]-s+256&255}return o}function Nv(r,e,t){var o=r.length,a=[];a[0]=2;for(var s=0;s<o;s+=1){var u=t&&t[s]||0;a[s+1]=r[s]-u+256&255}return a}function Ev(r,e,t){var o=r.length,a=[];a[0]=3;for(var s=0;s<o;s+=1){var u=r[s-e]||0,l=t&&t[s]||0;a[s+1]=r[s]+256-(u+l>>>1)&255}return a}function Tv(r,e,t){var o=r.length,a=[];a[0]=4;for(var s=0;s<o;s+=1){var u=Rk(r[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);a[s+1]=r[s]-u+256&255}return a}function Rk(r,e,t){if(r===e&&e===t)return r;var o=Math.abs(e-t),a=Math.abs(r-t),s=Math.abs(r+e-t-t);return o<=a&&o<=s?r:a<=s?e:t}function jk(r){var e=r.map(function(t){return t.reduce(function(o,a){return o+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function v1(r,e,t){var o=e*t,a=Math.floor(o/8),s=16-(o-8*a+t),u=(1<<t)-1;return Tw(r,a)>>s&u}function Cv(r,e,t,o){var a=t*o,s=Math.floor(a/8),u=16-(a-8*s+o),l=(1<<o)-1,d=(e&l)<<u;(function(f,h,S){if(h+1<f.byteLength)f.setUint16(h,S,!1);else{var b=S>>8&255;f.setUint8(h,b)}})(r,s,Tw(r,s)&~(l<<u)&65535|d)}function Tw(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function Pk(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,o=r[e++]|r[e++]<<8,a=r[e++],s=a>>7,u=1<<1+(7&a);r[e++],r[e++];var l=null,d=null;s&&(l=e,d=u,e+=3*u);var f=!0,h=[],S=0,b=null,p=0,j=null;for(this.width=t,this.height=o;f&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,j=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((oe=r[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=r[e++];S=r[e++]|r[e++]<<8,b=r[e++],1&N||(b=null),p=N>>2&7,e++;break;case 254:for(;;){if(!((oe=r[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var A=r[e++]|r[e++]<<8,w=r[e++]|r[e++]<<8,R=r[e++]|r[e++]<<8,I=r[e++]|r[e++]<<8,k=r[e++],G=k>>6&1,re=1<<1+(7&k),Q=l,ie=d,U=!1;k>>7&&(U=!0,Q=e,ie=re,e+=3*re);var ue=e;for(e++;;){var oe;if(!((oe=r[e++])>=0))throw Error("Invalid block size");if(oe===0)break;e+=oe}h.push({x:A,y:w,width:R,height:I,has_local_palette:U,palette_offset:Q,palette_size:ie,data_offset:ue,data_length:e-ue,transparent_index:b,interlaced:!!G,delay:S,disposal:p});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return j},this.frameInfo=function(B){if(B<0||B>=h.length)throw new Error("Frame index out of range.");return h[B]},this.decodeAndBlitFrameBGRA=function(B,te){var P=this.frameInfo(B),be=P.width*P.height,Ae=new Uint8Array(be);Lv(r,P.data_offset,Ae,be);var ge=P.palette_offset,xe=P.transparent_index;xe===null&&(xe=256);var ke=P.width,Fe=t-ke,J=ke,C=4*(P.y*t+P.x),Z=4*((P.y+P.height)*t+P.x),ne=C,ye=4*Fe;P.interlaced===!0&&(ye+=4*t*7);for(var ce=8,M=0,z=Ae.length;M<z;++M){var fe=Ae[M];if(J===0&&(J=ke,(ne+=ye)>=Z&&(ye=4*Fe+4*t*(ce-1),ne=C+(ke+Fe)*(ce<<1),ce>>=1)),fe===xe)ne+=4;else{var he=r[ge+3*fe],se=r[ge+3*fe+1],me=r[ge+3*fe+2];te[ne++]=me,te[ne++]=se,te[ne++]=he,te[ne++]=255}--J}},this.decodeAndBlitFrameRGBA=function(B,te){var P=this.frameInfo(B),be=P.width*P.height,Ae=new Uint8Array(be);Lv(r,P.data_offset,Ae,be);var ge=P.palette_offset,xe=P.transparent_index;xe===null&&(xe=256);var ke=P.width,Fe=t-ke,J=ke,C=4*(P.y*t+P.x),Z=4*((P.y+P.height)*t+P.x),ne=C,ye=4*Fe;P.interlaced===!0&&(ye+=4*t*7);for(var ce=8,M=0,z=Ae.length;M<z;++M){var fe=Ae[M];if(J===0&&(J=ke,(ne+=ye)>=Z&&(ye=4*Fe+4*t*(ce-1),ne=C+(ke+Fe)*(ce<<1),ce>>=1)),fe===xe)ne+=4;else{var he=r[ge+3*fe],se=r[ge+3*fe+1],me=r[ge+3*fe+2];te[ne++]=he,te[ne++]=se,te[ne++]=me,te[ne++]=255}--J}}}function Lv(r,e,t,o){for(var a=r[e++],s=1<<a,u=s+1,l=u+1,d=a+1,f=(1<<d)-1,h=0,S=0,b=0,p=r[e++],j=new Int32Array(4096),N=null;;){for(;h<16&&p!==0;)S|=r[e++]<<h,h+=8,p===1?p=r[e++]:--p;if(h<d)break;var A=S&f;if(S>>=d,h-=d,A!==s){if(A===u)break;for(var w=A<l?A:N,R=0,I=w;I>s;)I=j[I]>>8,++R;var k=I;if(b+R+(w!==A?1:0)>o)return void co.log("Warning, gif stream longer than expected.");t[b++]=k;var G=b+=R;for(w!==A&&(t[b++]=k),I=w;R--;)I=j[I],t[--G]=255&I,I>>=8;N!==null&&l<4096&&(j[l++]=N<<8|k,l>=f+1&&d<12&&(++d,f=f<<1|1)),N=A}else l=u+1,f=(1<<(d=a+1))-1,N=null}return b!==o&&co.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function w1(r){var e,t,o,a,s,u=Math.floor,l=new Array(64),d=new Array(64),f=new Array(64),h=new Array(64),S=new Array(65535),b=new Array(65535),p=new Array(64),j=new Array(64),N=[],A=0,w=7,R=new Array(64),I=new Array(64),k=new Array(64),G=new Array(256),re=new Array(2048),Q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],oe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],be=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ae(C,Z){for(var ne=0,ye=0,ce=new Array,M=1;M<=16;M++){for(var z=1;z<=C[M];z++)ce[Z[ye]]=[],ce[Z[ye]][0]=ne,ce[Z[ye]][1]=M,ye++,ne++;ne*=2}return ce}function ge(C){for(var Z=C[0],ne=C[1]-1;ne>=0;)Z&1<<ne&&(A|=1<<w),ne--,--w<0&&(A==255?(xe(255),xe(0)):xe(A),w=7,A=0)}function xe(C){N.push(C)}function ke(C){xe(C>>8&255),xe(255&C)}function Fe(C,Z,ne,ye,ce){for(var M,z=ce[0],fe=ce[240],he=(function(q,Se){var Le,Ee,qe,dt,ot,lt,Nt,Ft,Zt,Rn,$t=0;for(Zt=0;Zt<8;++Zt){Le=q[$t],Ee=q[$t+1],qe=q[$t+2],dt=q[$t+3],ot=q[$t+4],lt=q[$t+5],Nt=q[$t+6];var Rr=Le+(Ft=q[$t+7]),An=Le-Ft,Zn=Ee+Nt,or=Ee-Nt,jn=qe+lt,dn=qe-lt,fi=dt+ot,Wn=dt-ot,Un=Rr+fi,qr=Rr-fi,yn=Zn+jn,kn=Zn-jn;q[$t]=Un+yn,q[$t+4]=Un-yn;var li=.707106781*(kn+qr);q[$t+2]=qr+li,q[$t+6]=qr-li;var Hs=.382683433*((Un=Wn+dn)-(kn=or+An)),Do=.5411961*Un+Hs,Zo=1.306562965*kn+Hs,ps=.707106781*(yn=dn+or),Mn=An+ps,ms=An-ps;q[$t+5]=ms+Do,q[$t+3]=ms-Do,q[$t+1]=Mn+Zo,q[$t+7]=Mn-Zo,$t+=8}for($t=0,Zt=0;Zt<8;++Zt){Le=q[$t],Ee=q[$t+8],qe=q[$t+16],dt=q[$t+24],ot=q[$t+32],lt=q[$t+40],Nt=q[$t+48];var Is=Le+(Ft=q[$t+56]),Yi=Le-Ft,uo=Ee+Nt,ni=Ee-Nt,ki=qe+lt,gr=qe-lt,gs=dt+ot,Rs=dt-ot,Me=Is+gs,He=Is-gs,ht=uo+ki,qt=uo-ki;q[$t]=Me+ht,q[$t+32]=Me-ht;var hn=.707106781*(qt+He);q[$t+16]=He+hn,q[$t+48]=He-hn;var Xt=.382683433*((Me=Rs+gr)-(qt=ni+Yi)),cn=.5411961*Me+Xt,Yt=1.306562965*qt+Xt,Xn=.707106781*(ht=gr+ni),hi=Yi+Xn,wi=Yi-Xn;q[$t+40]=wi+cn,q[$t+24]=wi-cn,q[$t+8]=hi+Yt,q[$t+56]=hi-Yt,$t++}for(Zt=0;Zt<64;++Zt)Rn=q[Zt]*Se[Zt],p[Zt]=Rn>0?Rn+.5|0:Rn-.5|0;return p})(C,Z),se=0;se<64;++se)j[Q[se]]=he[se];var me=j[0]-ne;ne=j[0],me==0?ge(ye[0]):(ge(ye[b[M=32767+me]]),ge(S[M]));for(var Be=63;Be>0&&j[Be]==0;)Be--;if(Be==0)return ge(z),ne;for(var H,ee=1;ee<=Be;){for(var X=ee;j[ee]==0&&ee<=Be;)++ee;var T=ee-X;if(T>=16){H=T>>4;for(var L=1;L<=H;++L)ge(fe);T&=15}M=32767+j[ee],ge(ce[(T<<4)+b[M]]),ge(S[M]),ee++}return Be!=63&&ge(z),ne}function J(C){C=Math.min(Math.max(C,1),100),s!=C&&((function(Z){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ye=0;ye<64;ye++){var ce=u((ne[ye]*Z+50)/100);ce=Math.min(Math.max(ce,1),255),l[Q[ye]]=ce}for(var M=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],z=0;z<64;z++){var fe=u((M[z]*Z+50)/100);fe=Math.min(Math.max(fe,1),255),d[Q[z]]=fe}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],se=0,me=0;me<8;me++)for(var Be=0;Be<8;Be++)f[se]=1/(l[Q[se]]*he[me]*he[Be]*8),h[se]=1/(d[Q[se]]*he[me]*he[Be]*8),se++})(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,Z){Z&&J(Z),N=new Array,A=0,w=7,ke(65496),ke(65504),ke(16),xe(74),xe(70),xe(73),xe(70),xe(0),xe(1),xe(1),xe(0),ke(1),ke(1),xe(0),xe(0),(function(){ke(65499),ke(132),xe(0);for(var Ee=0;Ee<64;Ee++)xe(l[Ee]);xe(1);for(var qe=0;qe<64;qe++)xe(d[qe])})(),(function(Ee,qe){ke(65472),ke(17),xe(8),ke(qe),ke(Ee),xe(3),xe(1),xe(17),xe(0),xe(2),xe(17),xe(1),xe(3),xe(17),xe(1)})(C.width,C.height),(function(){ke(65476),ke(418),xe(0);for(var Ee=0;Ee<16;Ee++)xe(ie[Ee+1]);for(var qe=0;qe<=11;qe++)xe(U[qe]);xe(16);for(var dt=0;dt<16;dt++)xe(ue[dt+1]);for(var ot=0;ot<=161;ot++)xe(oe[ot]);xe(1);for(var lt=0;lt<16;lt++)xe(B[lt+1]);for(var Nt=0;Nt<=11;Nt++)xe(te[Nt]);xe(17);for(var Ft=0;Ft<16;Ft++)xe(P[Ft+1]);for(var Zt=0;Zt<=161;Zt++)xe(be[Zt])})(),ke(65498),ke(12),xe(3),xe(1),xe(0),xe(2),xe(17),xe(3),xe(17),xe(0),xe(63),xe(0);var ne=0,ye=0,ce=0;A=0,w=7,this.encode.displayName="_encode_";for(var M,z,fe,he,se,me,Be,H,ee,X=C.data,T=C.width,L=C.height,q=4*T,Se=0;Se<L;){for(M=0;M<q;){for(se=q*Se+M,Be=-1,H=0,ee=0;ee<64;ee++)me=se+(H=ee>>3)*q+(Be=4*(7&ee)),Se+H>=L&&(me-=q*(Se+1+H-L)),M+Be>=q&&(me-=M+Be-q+4),z=X[me++],fe=X[me++],he=X[me++],R[ee]=(re[z]+re[fe+256|0]+re[he+512|0]>>16)-128,I[ee]=(re[z+768|0]+re[fe+1024|0]+re[he+1280|0]>>16)-128,k[ee]=(re[z+1280|0]+re[fe+1536|0]+re[he+1792|0]>>16)-128;ne=Fe(R,f,ne,e,o),ye=Fe(I,h,ye,t,a),ce=Fe(k,h,ce,t,a),M+=32}Se+=8}if(w>=0){var Le=[];Le[1]=w+1,Le[0]=(1<<w+1)-1,ge(Le)}return ke(65497),new Uint8Array(N)},r=r||50,(function(){for(var C=String.fromCharCode,Z=0;Z<256;Z++)G[Z]=C(Z)})(),e=Ae(ie,U),t=Ae(B,te),o=Ae(ue,oe),a=Ae(P,be),(function(){for(var C=1,Z=2,ne=1;ne<=15;ne++){for(var ye=C;ye<Z;ye++)b[32767+ye]=ne,S[32767+ye]=[],S[32767+ye][1]=ne,S[32767+ye][0]=ye;for(var ce=-(Z-1);ce<=-C;ce++)b[32767+ce]=ne,S[32767+ce]=[],S[32767+ce][1]=ne,S[32767+ce][0]=Z-1+ce;C<<=1,Z<<=1}})(),(function(){for(var C=0;C<256;C++)re[C]=19595*C,re[C+256|0]=38470*C,re[C+512|0]=7471*C+32768,re[C+768|0]=-11059*C,re[C+1024|0]=-21709*C,re[C+1280|0]=32768*C+8421375,re[C+1536|0]=-27439*C,re[C+1792|0]=-5329*C})(),J(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Tl(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Iv(r){function e(U){if(!U)throw Error("assert :P")}function t(U,ue,oe){for(var B=0;4>B;B++)if(U[ue+B]!=oe.charCodeAt(B))return!0;return!1}function o(U,ue,oe,B,te){for(var P=0;P<te;P++)U[ue+P]=oe[B+P]}function a(U,ue,oe,B){for(var te=0;te<B;te++)U[ue+te]=oe}function s(U){return new Int32Array(U)}function u(U,ue){for(var oe=[],B=0;B<U;B++)oe.push(new ue);return oe}function l(U,ue){var oe=[];return(function B(te,P,be){for(var Ae=be[P],ge=0;ge<Ae&&(te.push(be.length>P+1?[]:new ue),!(be.length<P+1));ge++)B(te[ge],P+1,be)})(oe,0,U),oe}var d=function(){var U=this;function ue(m,_){for(var W=1<<_-1>>>0;m&W;)W>>>=1;return W?(m&W-1)+W:m}function oe(m,_,W,Y,pe){e(!(Y%W));do m[_+(Y-=W)]=pe;while(0<Y)}function B(m,_,W,Y,pe){if(e(2328>=pe),512>=pe)var we=s(512);else if((we=s(pe))==null)return 0;return(function(_e,Ne,Te,Ie,Ge,nt){var Re,Je,et=Ne,xt=1<<Te,it=s(16),yt=s(16);for(e(Ge!=0),e(Ie!=null),e(_e!=null),e(0<Te),Je=0;Je<Ge;++Je){if(15<Ie[Je])return 0;++it[Ie[Je]]}if(it[0]==Ge)return 0;for(yt[1]=0,Re=1;15>Re;++Re){if(it[Re]>1<<Re)return 0;yt[Re+1]=yt[Re]+it[Re]}for(Je=0;Je<Ge;++Je)Re=Ie[Je],0<Ie[Je]&&(nt[yt[Re]++]=Je);if(yt[15]==1)return(Ie=new te).g=0,Ie.value=nt[0],oe(_e,et,1,xt,Ie),xt;var wt,_t=-1,St=xt-1,En=0,mn=1,_r=1,wn=1<<Te;for(Je=0,Re=1,Ge=2;Re<=Te;++Re,Ge<<=1){if(mn+=_r<<=1,0>(_r-=it[Re]))return 0;for(;0<it[Re];--it[Re])(Ie=new te).g=Re,Ie.value=nt[Je++],oe(_e,et+En,Ge,wn,Ie),En=ue(En,Re)}for(Re=Te+1,Ge=2;15>=Re;++Re,Ge<<=1){if(mn+=_r<<=1,0>(_r-=it[Re]))return 0;for(;0<it[Re];--it[Re]){if(Ie=new te,(En&St)!=_t){for(et+=wn,wt=1<<(_t=Re)-Te;15>_t&&!(0>=(wt-=it[_t]));)++_t,wt<<=1;xt+=wn=1<<(wt=_t-Te),_e[Ne+(_t=En&St)].g=wt+Te,_e[Ne+_t].value=et-Ne-_t}Ie.g=Re-Te,Ie.value=nt[Je++],oe(_e,et+(En>>Te),Ge,wn,Ie),En=ue(En,Re)}}return mn!=2*yt[15]-1?0:xt})(m,_,W,Y,pe,we)}function te(){this.value=this.g=0}function P(){this.value=this.g=0}function be(){this.G=u(5,te),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Gs,P)}function Ae(m,_,W,Y){e(m!=null),e(_!=null),e(2147483648>Y),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=_,m.pa=W,m.Jd=_,m.Yc=W+Y,m.Zc=4<=Y?W+Y-4+1:W,z(m)}function ge(m,_){for(var W=0;0<_--;)W|=he(m,128)<<_;return W}function xe(m,_){var W=ge(m,_);return fe(m)?-W:W}function ke(m,_,W,Y){var pe,we=0;for(e(m!=null),e(_!=null),e(4294967288>Y),m.Sb=Y,m.Ra=0,m.u=0,m.h=0,4<Y&&(Y=4),pe=0;pe<Y;++pe)we+=_[W+pe]<<8*pe;m.Ra=we,m.bb=Y,m.oa=_,m.pa=W}function Fe(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<La-8>>>0,++m.bb,m.u-=8;ye(m)&&(m.h=1,m.u=0)}function J(m,_){if(e(0<=_),!m.h&&_<=es){var W=ne(m)&Ps[_];return m.u+=_,Fe(m),W}return m.h=1,m.u=0}function C(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(m){return m.Ra>>>(m.u&La-1)>>>0}function ye(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>La}function ce(m,_){m.u=_,m.h=ye(m)}function M(m){m.u>=bs&&(e(m.u>=bs),Fe(m))}function z(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function fe(m){return ge(m,1)}function he(m,_){var W=m.Ca;0>m.b&&z(m);var Y=m.b,pe=W*_>>>8,we=(m.I>>>Y>pe)+0;for(we?(W-=pe,m.I-=pe+1<<Y>>>0):W=pe+1,Y=W,pe=0;256<=Y;)pe+=8,Y>>=8;return Y=7^pe+ha[Y],m.b-=Y,m.Ca=(W<<Y)-1,we}function se(m,_,W){m[_+0]=W>>24&255,m[_+1]=W>>16&255,m[_+2]=W>>8&255,m[_+3]=255&W}function me(m,_){return m[_+0]|m[_+1]<<8}function Be(m,_){return me(m,_)|m[_+2]<<16}function H(m,_){return me(m,_)|me(m,_+2)<<16}function ee(m,_){var W=1<<_;return e(m!=null),e(0<_),m.X=s(W),m.X==null?0:(m.Mb=32-_,m.Xa=_,1)}function X(m,_){e(m!=null),e(_!=null),e(m.Xa==_.Xa),o(_.X,0,m.X,0,1<<_.Xa)}function T(){this.X=[],this.Xa=this.Mb=0}function L(m,_,W,Y){e(W!=null),e(Y!=null);var pe=W[0],we=Y[0];return pe==0&&(pe=(m*we+_/2)/_),we==0&&(we=(_*pe+m/2)/m),0>=pe||0>=we?0:(W[0]=pe,Y[0]=we,1)}function q(m,_){return m+(1<<_)-1>>>_}function Se(m,_){return((4278255360&m)+(4278255360&_)>>>0&4278255360)+((16711935&m)+(16711935&_)>>>0&16711935)>>>0}function Le(m,_){U[_]=function(W,Y,pe,we,_e,Ne,Te){var Ie;for(Ie=0;Ie<_e;++Ie){var Ge=U[m](Ne[Te+Ie-1],pe,we+Ie);Ne[Te+Ie]=Se(W[Y+Ie],Ge)}}}function Ee(){this.ud=this.hd=this.jd=0}function qe(m,_){return((4278124286&(m^_))>>>1)+(m&_)>>>0}function dt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function ot(m,_){return dt(m+(m-_+.5>>1))}function lt(m,_,W){return Math.abs(_-W)-Math.abs(m-W)}function Nt(m,_,W,Y,pe,we,_e){for(Y=we[_e-1],W=0;W<pe;++W)we[_e+W]=Y=Se(m[_+W],Y)}function Ft(m,_,W,Y,pe){var we;for(we=0;we<W;++we){var _e=m[_+we],Ne=_e>>8&255,Te=16711935&(Te=(Te=16711935&_e)+((Ne<<16)+Ne));Y[pe+we]=(4278255360&_e)+Te>>>0}}function Zt(m,_){_.jd=255&m,_.hd=m>>8&255,_.ud=m>>16&255}function Rn(m,_,W,Y,pe,we){var _e;for(_e=0;_e<Y;++_e){var Ne=_[W+_e],Te=Ne>>>8,Ie=Ne,Ge=255&(Ge=(Ge=Ne>>>16)+((m.jd<<24>>24)*(Te<<24>>24)>>>5));Ie=255&(Ie=(Ie+=(m.hd<<24>>24)*(Te<<24>>24)>>>5)+((m.ud<<24>>24)*(Ge<<24>>24)>>>5)),pe[we+_e]=(4278255360&Ne)+(Ge<<16)+Ie}}function $t(m,_,W,Y,pe){U[_]=function(we,_e,Ne,Te,Ie,Ge,nt,Re,Je){for(Te=nt;Te<Re;++Te)for(nt=0;nt<Je;++nt)Ie[Ge++]=pe(Ne[Y(we[_e++])])},U[m]=function(we,_e,Ne,Te,Ie,Ge,nt){var Re=8>>we.b,Je=we.Ea,et=we.K[0],xt=we.w;if(8>Re)for(we=(1<<we.b)-1,xt=(1<<Re)-1;_e<Ne;++_e){var it,yt=0;for(it=0;it<Je;++it)it&we||(yt=Y(Te[Ie++])),Ge[nt++]=pe(et[yt&xt]),yt>>=Re}else U["VP8LMapColor"+W](Te,Ie,et,xt,Ge,nt,_e,Ne,Je)}}function Rr(m,_,W,Y,pe){for(W=_+W;_<W;){var we=m[_++];Y[pe++]=we>>16&255,Y[pe++]=we>>8&255,Y[pe++]=255&we}}function An(m,_,W,Y,pe){for(W=_+W;_<W;){var we=m[_++];Y[pe++]=we>>16&255,Y[pe++]=we>>8&255,Y[pe++]=255&we,Y[pe++]=we>>24&255}}function Zn(m,_,W,Y,pe){for(W=_+W;_<W;){var we=(_e=m[_++])>>16&240|_e>>12&15,_e=240&_e|_e>>28&15;Y[pe++]=we,Y[pe++]=_e}}function or(m,_,W,Y,pe){for(W=_+W;_<W;){var we=(_e=m[_++])>>16&248|_e>>13&7,_e=_e>>5&224|_e>>3&31;Y[pe++]=we,Y[pe++]=_e}}function jn(m,_,W,Y,pe){for(W=_+W;_<W;){var we=m[_++];Y[pe++]=255&we,Y[pe++]=we>>8&255,Y[pe++]=we>>16&255}}function dn(m,_,W,Y,pe,we){if(we==0)for(W=_+W;_<W;)se(Y,((we=m[_++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),pe+=32;else o(Y,pe,m,_,W)}function fi(m,_){U[_][0]=U[m+"0"],U[_][1]=U[m+"1"],U[_][2]=U[m+"2"],U[_][3]=U[m+"3"],U[_][4]=U[m+"4"],U[_][5]=U[m+"5"],U[_][6]=U[m+"6"],U[_][7]=U[m+"7"],U[_][8]=U[m+"8"],U[_][9]=U[m+"9"],U[_][10]=U[m+"10"],U[_][11]=U[m+"11"],U[_][12]=U[m+"12"],U[_][13]=U[m+"13"],U[_][14]=U[m+"0"],U[_][15]=U[m+"0"]}function Wn(m){return m==xl||m==el||m==mc||m==gc}function Un(){this.eb=[],this.size=this.A=this.fb=0}function qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Un,this.f.kb=new qr,this.sd=null}function kn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function li(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hs(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Do(m,_){var W=m.T,Y=_.ba.f.RGBA,pe=Y.eb,we=Y.fb+m.ka*Y.A,_e=rs[_.ba.S],Ne=m.y,Te=m.O,Ie=m.f,Ge=m.N,nt=m.ea,Re=m.W,Je=_.cc,et=_.dc,xt=_.Mc,it=_.Nc,yt=m.ka,wt=m.ka+m.T,_t=m.U,St=_t+1>>1;for(yt==0?_e(Ne,Te,null,null,Ie,Ge,nt,Re,Ie,Ge,nt,Re,pe,we,null,null,_t):(_e(_.ec,_.fc,Ne,Te,Je,et,xt,it,Ie,Ge,nt,Re,pe,we-Y.A,pe,we,_t),++W);yt+2<wt;yt+=2)Je=Ie,et=Ge,xt=nt,it=Re,Ge+=m.Rc,Re+=m.Rc,we+=2*Y.A,_e(Ne,(Te+=2*m.fa)-m.fa,Ne,Te,Je,et,xt,it,Ie,Ge,nt,Re,pe,we-Y.A,pe,we,_t);return Te+=m.fa,m.j+wt<m.o?(o(_.ec,_.fc,Ne,Te,_t),o(_.cc,_.dc,Ie,Ge,St),o(_.Mc,_.Nc,nt,Re,St),W--):1&wt||_e(Ne,Te,null,null,Ie,Ge,nt,Re,Ie,Ge,nt,Re,pe,we+Y.A,null,null,_t),W}function Zo(m,_,W){var Y=m.F,pe=[m.J];if(Y!=null){var we=m.U,_e=_.ba.S,Ne=_e==Ul||_e==mc;_=_.ba.f.RGBA;var Te=[0],Ie=m.ka;Te[0]=m.T,m.Kb&&(Ie==0?--Te[0]:(--Ie,pe[0]-=m.width),m.j+m.ka+m.T==m.o&&(Te[0]=m.o-m.j-Ie));var Ge=_.eb;Ie=_.fb+Ie*_.A,m=vl(Y,pe[0],m.width,we,Te,Ge,Ie+(Ne?0:3),_.A),e(W==Te),m&&Wn(_e)&&Qa(Ge,Ie,Ne,we,Te,_.A)}return 0}function ps(m){var _=m.ma,W=_.ba.S,Y=11>W,pe=W==Oa||W==$l||W==Ul||W==Ii||W==12||Wn(W);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Ol(_.Oa,m,pe?11:12))return 0;if(pe&&Wn(W)&&Pl(),m.da)alert("todo:use_scaling");else{if(Y){if(_.Ib=Hs,m.Kb){if(W=m.U+1>>1,_.memory=s(m.U+2*W),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+m.U,_.Mc=_.cc,_.Nc=_.dc+W,_.Ib=Do,Pl()}}else alert("todo:EmitYUV");pe&&(_.Jb=Zo,Y&&ra())}if(Y&&!oo){for(m=0;256>m;++m)Ao[m]=89858*(m-128)+Ms>>la,As[m]=-22014*(m-128)+Ms,ca[m]=-45773*(m-128),ol[m]=113618*(m-128)+Ms>>la;for(m=Br;m<vr;++m)_=76283*(m-16)+Ms>>la,Kl[m-Br]=sr(_,255),Vc[m-Br]=sr(_+8>>4,15);oo=1}return 1}function Mn(m){var _=m.ma,W=m.U,Y=m.T;return e(!(1&m.ka)),0>=W||0>=Y?0:(W=_.Ib(m,_),_.Jb!=null&&_.Jb(m,_,W),_.Dc+=W,1)}function ms(m){m.ma.memory=null}function Is(m,_,W,Y){return J(m,8)!=47?0:(_[0]=J(m,14)+1,W[0]=J(m,14)+1,Y[0]=J(m,1),J(m,3)!=0?0:!m.h)}function Yi(m,_){if(4>m)return m+1;var W=m-2>>1;return(2+(1&m)<<W)+J(_,W)+1}function uo(m,_){return 120<_?_-120:1<=(W=((W=Nd[_-1])>>4)*m+(8-(15&W)))?W:1;var W}function ni(m,_,W){var Y=ne(W),pe=m[_+=255&Y].g-8;return 0<pe&&(ce(W,W.u+8),Y=ne(W),_+=m[_].value,_+=Y&(1<<pe)-1),ce(W,W.u+m[_].g),m[_].value}function ki(m,_,W){return W.g+=m.g,W.value+=m.value<<_>>>0,e(8>=W.g),m.g}function gr(m,_,W){var Y=m.xc;return e((_=Y==0?0:m.vc[m.md*(W>>Y)+(_>>Y)])<m.Wb),m.Ya[_]}function gs(m,_,W,Y){var pe=m.ab,we=m.c*_,_e=m.C;_=_e+_;var Ne=W,Te=Y;for(Y=m.Ta,W=m.Ua;0<pe--;){var Ie=m.gc[pe],Ge=_e,nt=_,Re=Ne,Je=Te,et=(Te=Y,Ne=W,Ie.Ea);switch(e(Ge<nt),e(nt<=Ie.nc),Ie.hc){case 2:ho(Re,Je,(nt-Ge)*et,Te,Ne);break;case 0:var xt=Ge,it=nt,yt=Te,wt=Ne,_t=(wn=Ie).Ea;xt==0&&(Ds(Re,Je,null,null,1,yt,wt),Nt(Re,Je+1,0,0,_t-1,yt,wt+1),Je+=_t,wt+=_t,++xt);for(var St=1<<wn.b,En=St-1,mn=q(_t,wn.b),_r=wn.K,wn=wn.w+(xt>>wn.b)*mn;xt<it;){var Jr=_r,so=wn,Nr=1;for(pa(Re,Je,yt,wt-_t,1,yt,wt);Nr<_t;){var gn=(Nr&~En)+St;gn>_t&&(gn=_t),(0,Ia[Jr[so++]>>8&15])(Re,Je+ +Nr,yt,wt+Nr-_t,gn-Nr,yt,wt+Nr),Nr=gn}Je+=_t,wt+=_t,++xt&En||(wn+=mn)}nt!=Ie.nc&&o(Te,Ne-et,Te,Ne+(nt-Ge-1)*et,et);break;case 1:for(et=Re,it=Je,_t=(Re=Ie.Ea)-(wt=Re&~(yt=(Je=1<<Ie.b)-1)),xt=q(Re,Ie.b),St=Ie.K,Ie=Ie.w+(Ge>>Ie.b)*xt;Ge<nt;){for(En=St,mn=Ie,_r=new Ee,wn=it+wt,Jr=it+Re;it<wn;)Zt(En[mn++],_r),Bl(_r,et,it,Je,Te,Ne),it+=Je,Ne+=Je;it<Jr&&(Zt(En[mn++],_r),Bl(_r,et,it,_t,Te,Ne),it+=_t,Ne+=_t),++Ge&yt||(Ie+=xt)}break;case 3:if(Re==Te&&Je==Ne&&0<Ie.b){for(it=Te,Re=et=Ne+(nt-Ge)*et-(wt=(nt-Ge)*q(Ie.Ea,Ie.b)),Je=Te,yt=Ne,xt=[],wt=(_t=wt)-1;0<=wt;--wt)xt[wt]=Je[yt+wt];for(wt=_t-1;0<=wt;--wt)it[Re+wt]=xt[wt];Xa(Ie,Ge,nt,Te,et,Te,Ne)}else Xa(Ie,Ge,nt,Re,Je,Te,Ne)}Ne=Y,Te=W}Te!=W&&o(Y,W,Ne,Te,we)}function Rs(m,_){var W=m.V,Y=m.Ba+m.c*m.C,pe=_-m.C;if(e(_<=m.l.o),e(16>=pe),0<pe){var we=m.l,_e=m.Ta,Ne=m.Ua,Te=we.width;if(gs(m,pe,W,Y),pe=Ne=[Ne],e((W=m.C)<(Y=_)),e(we.v<we.va),Y>we.o&&(Y=we.o),W<we.j){var Ie=we.j-W;W=we.j,pe[0]+=Ie*Te}if(W>=Y?W=0:(pe[0]+=4*we.v,we.ka=W-we.j,we.U=we.va-we.v,we.T=Y-W,W=1),W){if(Ne=Ne[0],11>(W=m.ca).S){var Ge=W.f.RGBA,nt=(Y=W.S,pe=we.U,we=we.T,Ie=Ge.eb,Ge.A),Re=we;for(Ge=Ge.fb+m.Ma*Ge.A;0<Re--;){var Je=_e,et=Ne,xt=pe,it=Ie,yt=Ge;switch(Y){case zl:ml(Je,et,xt,it,yt);break;case Oa:ga(Je,et,xt,it,yt);break;case xl:ga(Je,et,xt,it,yt),Qa(it,yt,0,xt,1,0);break;case hu:gl(Je,et,xt,it,yt);break;case $l:dn(Je,et,xt,it,yt,1);break;case el:dn(Je,et,xt,it,yt,1),Qa(it,yt,0,xt,1,0);break;case Ul:dn(Je,et,xt,it,yt,0);break;case mc:dn(Je,et,xt,it,yt,0),Qa(it,yt,1,xt,1,0);break;case Ii:Ra(Je,et,xt,it,yt);break;case gc:Ra(Je,et,xt,it,yt),zc(it,yt,xt,1,0);break;case pc:ja(Je,et,xt,it,yt);break;default:e(0)}Ne+=Te,Ge+=nt}m.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=W.height)}}m.C=_,e(m.C<=m.i)}function Me(m){var _;if(0<m.ua)return 0;for(_=0;_<m.Wb;++_){var W=m.Ya[_].G,Y=m.Ya[_].H;if(0<W[1][Y[1]+0].g||0<W[2][Y[2]+0].g||0<W[3][Y[3]+0].g)return 0}return 1}function He(m,_,W,Y,pe,we){if(m.Z!=0){var _e=m.qd,Ne=m.rd;for(e(ns[m.Z]!=null);_<W;++_)ns[m.Z](_e,Ne,Y,pe,Y,pe,we),_e=Y,Ne=pe,pe+=we;m.qd=_e,m.rd=Ne}}function ht(m,_){var W=m.l.ma,Y=W.Z==0||W.Z==1?m.l.j:m.C;if(Y=m.C<Y?Y:m.C,e(_<=m.l.o),_>Y){var pe=m.l.width,we=W.ca,_e=W.tb+pe*Y,Ne=m.V,Te=m.Ba+m.c*Y,Ie=m.gc;e(m.ab==1),e(Ie[0].hc==3),sa(Ie[0],Y,_,Ne,Te,we,_e),He(W,Y,_,we,_e,pe)}m.C=m.Ma=_}function qt(m,_,W,Y,pe,we,_e){var Ne=m.$/Y,Te=m.$%Y,Ie=m.m,Ge=m.s,nt=W+m.$,Re=nt;pe=W+Y*pe;var Je=W+Y*we,et=280+Ge.ua,xt=m.Pb?Ne:16777216,it=0<Ge.ua?Ge.Wa:null,yt=Ge.wc,wt=nt<Je?gr(Ge,Te,Ne):null;e(m.C<we),e(Je<=pe);var _t=!1;e:for(;;){for(;_t||nt<Je;){var St=0;if(Ne>=xt){var En=nt-W;e((xt=m).Pb),xt.wd=xt.m,xt.xd=En,0<xt.s.ua&&X(xt.s.Wa,xt.s.vb),xt=Ne+vc}if(Te&yt||(wt=gr(Ge,Te,Ne)),e(wt!=null),wt.Qb&&(_[nt]=wt.qb,_t=!0),!_t)if(M(Ie),wt.jc){St=Ie,En=_;var mn=nt,_r=wt.pd[ne(St)&Gs-1];e(wt.jc),256>_r.g?(ce(St,St.u+_r.g),En[mn]=_r.value,St=0):(ce(St,St.u+_r.g-256),e(256<=_r.value),St=_r.value),St==0&&(_t=!0)}else St=ni(wt.G[0],wt.H[0],Ie);if(Ie.h)break;if(_t||256>St){if(!_t)if(wt.nd)_[nt]=(wt.qb|St<<8)>>>0;else{if(M(Ie),_t=ni(wt.G[1],wt.H[1],Ie),M(Ie),En=ni(wt.G[2],wt.H[2],Ie),mn=ni(wt.G[3],wt.H[3],Ie),Ie.h)break;_[nt]=(mn<<24|_t<<16|St<<8|En)>>>0}if(_t=!1,++nt,++Te>=Y&&(Te=0,++Ne,_e!=null&&Ne<=we&&!(Ne%16)&&_e(m,Ne),it!=null))for(;Re<nt;)St=_[Re++],it.X[(506832829*St&4294967295)>>>it.Mb]=St}else if(280>St){if(St=Yi(St-256,Ie),En=ni(wt.G[4],wt.H[4],Ie),M(Ie),En=uo(Y,En=Yi(En,Ie)),Ie.h)break;if(nt-W<En||pe-nt<St)break e;for(mn=0;mn<St;++mn)_[nt+mn]=_[nt+mn-En];for(nt+=St,Te+=St;Te>=Y;)Te-=Y,++Ne,_e!=null&&Ne<=we&&!(Ne%16)&&_e(m,Ne);if(e(nt<=pe),Te&yt&&(wt=gr(Ge,Te,Ne)),it!=null)for(;Re<nt;)St=_[Re++],it.X[(506832829*St&4294967295)>>>it.Mb]=St}else{if(!(St<et))break e;for(_t=St-280,e(it!=null);Re<nt;)St=_[Re++],it.X[(506832829*St&4294967295)>>>it.Mb]=St;St=nt,e(!(_t>>>(En=it).Xa)),_[St]=En.X[_t],_t=!0}_t||e(Ie.h==ye(Ie))}if(m.Pb&&Ie.h&&nt<pe)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&X(m.s.vb,m.s.Wa);else{if(Ie.h)break e;_e!=null&&_e(m,Ne>we?we:Ne),m.a=0,m.$=nt-W}return 1}return m.a=3,0}function hn(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var _=m.Wa;_!=null&&(_.X=null),m.vb=null,e(m!=null)}function Xt(){var m=new yr;return m==null?null:(m.a=0,m.xb=Hl,fi("Predictor","VP8LPredictors"),fi("Predictor","VP8LPredictors_C"),fi("PredictorAdd","VP8LPredictorsAdd"),fi("PredictorAdd","VP8LPredictorsAdd_C"),ho=Ft,Bl=Rn,ml=Rr,ga=An,Ra=Zn,ja=or,gl=jn,U.VP8LMapColor32b=ma,U.VP8LMapColor8b=pl,m)}function cn(m,_,W,Y,pe){var we=1,_e=[m],Ne=[_],Te=Y.m,Ie=Y.s,Ge=null,nt=0;e:for(;;){if(W)for(;we&&J(Te,1);){var Re=_e,Je=Ne,et=Y,xt=1,it=et.m,yt=et.gc[et.ab],wt=J(it,2);if(et.Oc&1<<wt)we=0;else{switch(et.Oc|=1<<wt,yt.hc=wt,yt.Ea=Re[0],yt.nc=Je[0],yt.K=[null],++et.ab,e(4>=et.ab),wt){case 0:case 1:yt.b=J(it,3)+2,xt=cn(q(yt.Ea,yt.b),q(yt.nc,yt.b),0,et,yt.K),yt.K=yt.K[0];break;case 3:var _t,St=J(it,8)+1,En=16<St?0:4<St?1:2<St?2:3;if(Re[0]=q(yt.Ea,En),yt.b=En,_t=xt=cn(St,1,0,et,yt.K)){var mn,_r=St,wn=yt,Jr=1<<(8>>wn.b),so=s(Jr);if(so==null)_t=0;else{var Nr=wn.K[0],gn=wn.w;for(so[0]=wn.K[0][0],mn=1;mn<1*_r;++mn)so[mn]=Se(Nr[gn+mn],so[mn-1]);for(;mn<4*Jr;++mn)so[mn]=0;wn.K[0]=null,wn.K[0]=so,_t=1}}xt=_t;break;case 2:break;default:e(0)}we=xt}}if(_e=_e[0],Ne=Ne[0],we&&J(Te,1)&&!(we=1<=(nt=J(Te,4))&&11>=nt)){Y.a=3;break e}var Jt;if(Jt=we)t:{var mo,ur,Hr,Bi=Y,Ro=_e,xo=Ne,to=nt,No=W,jo=Bi.m,qi=Bi.s,Qr=[null],yi=1,Wi=0,vi=ql[to];n:for(;;){if(No&&J(jo,1)){var ao=J(jo,3)+2,lo=q(Ro,ao),Ri=q(xo,ao),g=lo*Ri;if(!cn(lo,Ri,0,Bi,Qr))break n;for(Qr=Qr[0],qi.xc=ao,mo=0;mo<g;++mo){var x=Qr[mo]>>8&65535;Qr[mo]=x,x>=yi&&(yi=x+1)}}if(jo.h)break n;for(ur=0;5>ur;++ur){var K=nl[ur];!ur&&0<to&&(K+=1<<to),Wi<K&&(Wi=K)}var $=u(yi*vi,te),E=yi,ae=u(E,be);if(ae==null)var de=null;else e(65536>=E),de=ae;var D=s(Wi);if(de==null||D==null||$==null){Bi.a=1;break n}var Pe=$;for(mo=Hr=0;mo<yi;++mo){var Ue=de[mo],je=Ue.G,$e=Ue.H,De=0,Ye=1,ct=0;for(ur=0;5>ur;++ur){K=nl[ur],je[ur]=Pe,$e[ur]=Hr,!ur&&0<to&&(K+=1<<to);i:{var Dt,mt=K,tt=Bi,ft=D,Qt=Pe,_n=Hr,ut=0,xn=tt.m,ei=J(xn,1);if(a(ft,0,0,mt),ei){var ci=J(xn,1)+1,zi=J(xn,1),Ct=J(xn,zi==0?1:8);ft[Ct]=1,ci==2&&(ft[Ct=J(xn,8)]=1);var tr=1}else{var Ke=s(19),We=J(xn,4)+4;if(19<We){tt.a=3;var Et=0;break i}for(Dt=0;Dt<We;++Dt)Ke[pu[Dt]]=J(xn,3);var sn=void 0,bt=void 0,Kt=tt,Bn=Ke,Jn=mt,Sr=ft,bo=0,Mo=Kt.m,Po=8,Wo=u(128,te);r:for(;B(Wo,0,7,Bn,19);){if(J(Mo,1)){var Fa=2+2*J(Mo,3);if((sn=2+J(Mo,Fa))>Jn)break r}else sn=Jn;for(bt=0;bt<Jn&&sn--;){M(Mo);var xc=Wo[0+(127&ne(Mo))];ce(Mo,Mo.u+xc.g);var Ba=xc.value;if(16>Ba)Sr[bt++]=Ba,Ba!=0&&(Po=Ba);else{var wu=Ba==16,Yc=Ba-16,xu=tl[Yc],Jc=J(Mo,yc[Yc])+xu;if(bt+Jc>Jn)break r;for(var bu=wu?Po:0;0<Jc--;)Sr[bt++]=bu}}bo=1;break r}bo||(Kt.a=3),tr=bo}(tr=tr&&!xn.h)&&(ut=B(Qt,_n,8,ft,mt)),tr&&ut!=0?Et=ut:(tt.a=3,Et=0)}if(Et==0)break n;if(Ye&&Kc[ur]==1&&(Ye=Pe[Hr].g==0),De+=Pe[Hr].g,Hr+=Et,3>=ur){var Sl,bc=D[0];for(Sl=1;Sl<K;++Sl)D[Sl]>bc&&(bc=D[Sl]);ct+=bc}}if(Ue.nd=Ye,Ue.Qb=0,Ye&&(Ue.qb=(je[3][$e[3]+0].value<<24|je[1][$e[1]+0].value<<16|je[2][$e[2]+0].value)>>>0,De==0&&256>je[0][$e[0]+0].value&&(Ue.Qb=1,Ue.qb+=je[0][$e[0]+0].value<<8)),Ue.jc=!Ue.Qb&&6>ct,Ue.jc){var Yl,Ns=Ue;for(Yl=0;Yl<Gs;++Yl){var wa=Yl,Vs=Ns.pd[wa],al=Ns.G[0][Ns.H[0]+wa];256<=al.value?(Vs.g=al.g+256,Vs.value=al.value):(Vs.g=0,Vs.value=0,wa>>=ki(al,8,Vs),wa>>=ki(Ns.G[1][Ns.H[1]+wa],16,Vs),wa>>=ki(Ns.G[2][Ns.H[2]+wa],0,Vs),ki(Ns.G[3][Ns.H[3]+wa],24,Vs))}}}qi.vc=Qr,qi.Wb=yi,qi.Ya=de,qi.yc=$,Jt=1;break t}Jt=0}if(!(we=Jt)){Y.a=3;break e}if(0<nt){if(Ie.ua=1<<nt,!ee(Ie.Wa,nt)){Y.a=1,we=0;break e}}else Ie.ua=0;var _c=Y,Sc=_e,_u=Ne,kc=_c.s,Ac=kc.xc;if(_c.c=Sc,_c.i=_u,kc.md=q(Sc,Ac),kc.wc=Ac==0?-1:(1<<Ac)-1,W){Y.xb=va;break e}if((Ge=s(_e*Ne))==null){Y.a=1,we=0;break e}we=(we=qt(Y,Ge,0,_e,Ne,Ne,null))&&!Te.h;break e}return we?(pe!=null?pe[0]=Ge:(e(Ge==null),e(W)),Y.$=0,W||hn(Ie)):hn(Ie),we}function Yt(m,_){var W=m.c*m.i,Y=W+_+16*_;return e(m.c<=_),m.V=s(Y),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+W+_,1)}function Xn(m,_){var W=m.C,Y=_-W,pe=m.V,we=m.Ba+m.c*W;for(e(_<=m.l.o);0<Y;){var _e=16<Y?16:Y,Ne=m.l.ma,Te=m.l.width,Ie=Te*_e,Ge=Ne.ca,nt=Ne.tb+Te*W,Re=m.Ta,Je=m.Ua;gs(m,_e,pe,we),$c(Re,Je,Ge,nt,Ie),He(Ne,W,W+_e,Ge,nt,Te),Y-=_e,pe+=_e*m.c,W+=_e}e(W==_),m.C=m.Ma=_}function hi(){this.ub=this.yd=this.td=this.Rb=0}function wi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function So(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function jr(){this.Yb=(function(){var m=[];return(function _(W,Y,pe){for(var we=pe[Y],_e=0;_e<we&&(W.push(pe.length>Y+1?[]:0),!(pe.length<Y+1));_e++)_(W[_e],Y+1,pe)})(m,0,[3,11]),m})()}function yo(){this.jb=s(3),this.Wc=l([4,8],jr),this.Xc=l([4,17],jr)}function io(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Vr(){this.ld=this.La=this.dd=this.tc=0}function On(){this.Na=this.la=0}function wr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vr),this.Y=0,this.ya=Array(new pi),this.aa=0,this.l=new _i}function Yr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Mi(){this.cb=this.a=0,this.sc="",this.m=new C,this.Od=new hi,this.Kc=new wi,this.ed=new io,this.Qa=new So,this.Ic=this.$c=this.Aa=0,this.D=new Xr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,C),this.ia=0,this.pb=u(4,wr),this.Pa=new yo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yr),this.Hd=0,this.rb=Array(new On),this.sb=0,this.wa=Array(new Vr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pi),this.L=this.aa=0,this.gd=l([4,2],Vr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sr(m,_){return 0>m?0:m>_?_:m}function _i(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ni(){var m=new Mi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,_l||(_l=Qo)),m}function kr(m,_,W){return m.a==0&&(m.a=_,m.sc=W,m.cb=0),0}function To(m,_,W){return 3<=W&&m[_+0]==157&&m[_+1]==1&&m[_+2]==42}function Co(m,_){if(m==null)return 0;if(m.a=0,m.sc="OK",_==null)return kr(m,2,"null VP8Io passed to VP8GetHeaders()");var W=_.data,Y=_.w,pe=_.ha;if(4>pe)return kr(m,7,"Truncated header.");var we=W[Y+0]|W[Y+1]<<8|W[Y+2]<<16,_e=m.Od;if(_e.Rb=!(1&we),_e.td=we>>1&7,_e.yd=we>>4&1,_e.ub=we>>5,3<_e.td)return kr(m,3,"Incorrect keyframe parameters.");if(!_e.yd)return kr(m,4,"Frame not displayable.");Y+=3,pe-=3;var Ne=m.Kc;if(_e.Rb){if(7>pe)return kr(m,7,"cannot parse picture header");if(!To(W,Y,pe))return kr(m,3,"Bad code word");Ne.c=16383&(W[Y+4]<<8|W[Y+3]),Ne.Td=W[Y+4]>>6,Ne.i=16383&(W[Y+6]<<8|W[Y+5]),Ne.Ud=W[Y+6]>>6,Y+=7,pe-=7,m.za=Ne.c+15>>4,m.Ub=Ne.i+15>>4,_.width=Ne.c,_.height=Ne.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,a((we=m.Pa).jb,0,255,we.jb.length),e((we=m.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,a(we.Zb,0,0,we.Zb.length),a(we.Lb,0,0,we.Lb)}if(_e.ub>pe)return kr(m,7,"bad partition length");Ae(we=m.m,W,Y,_e.ub),Y+=_e.ub,pe-=_e.ub,_e.Rb&&(Ne.Ld=fe(we),Ne.Kd=fe(we)),Ne=m.Qa;var Te,Ie=m.Pa;if(e(we!=null),e(Ne!=null),Ne.Cb=fe(we),Ne.Cb){if(Ne.Bb=fe(we),fe(we)){for(Ne.Fb=fe(we),Te=0;4>Te;++Te)Ne.Zb[Te]=fe(we)?xe(we,7):0;for(Te=0;4>Te;++Te)Ne.Lb[Te]=fe(we)?xe(we,6):0}if(Ne.Bb)for(Te=0;3>Te;++Te)Ie.jb[Te]=fe(we)?ge(we,8):255}else Ne.Bb=0;if(we.Ka)return kr(m,3,"cannot parse segment header");if((Ne=m.ed).zd=fe(we),Ne.Tb=ge(we,6),Ne.wb=ge(we,3),Ne.Pc=fe(we),Ne.Pc&&fe(we)){for(Ie=0;4>Ie;++Ie)fe(we)&&(Ne.vd[Ie]=xe(we,6));for(Ie=0;4>Ie;++Ie)fe(we)&&(Ne.od[Ie]=xe(we,6))}if(m.L=Ne.Tb==0?0:Ne.zd?1:2,we.Ka)return kr(m,3,"cannot parse filter header");var Ge=pe;if(pe=Te=Y,Y=Te+Ge,Ne=Ge,m.Xb=(1<<ge(m.m,2))-1,Ge<3*(Ie=m.Xb))W=7;else{for(Te+=3*Ie,Ne-=3*Ie,Ge=0;Ge<Ie;++Ge){var nt=W[pe+0]|W[pe+1]<<8|W[pe+2]<<16;nt>Ne&&(nt=Ne),Ae(m.Jc[+Ge],W,Te,nt),Te+=nt,Ne-=nt,pe+=3}Ae(m.Jc[+Ie],W,Te,Ne),W=Te<Y?0:5}if(W!=0)return kr(m,W,"cannot parse partitions");for(W=ge(Te=m.m,7),pe=fe(Te)?xe(Te,4):0,Y=fe(Te)?xe(Te,4):0,Ne=fe(Te)?xe(Te,4):0,Ie=fe(Te)?xe(Te,4):0,Te=fe(Te)?xe(Te,4):0,Ge=m.Qa,nt=0;4>nt;++nt){if(Ge.Cb){var Re=Ge.Zb[nt];Ge.Fb||(Re+=W)}else{if(0<nt){m.pb[nt]=m.pb[0];continue}Re=W}var Je=m.pb[nt];Je.Sc[0]=Wl[sr(Re+pe,127)],Je.Sc[1]=bl[sr(Re+0,127)],Je.Eb[0]=2*Wl[sr(Re+Y,127)],Je.Eb[1]=101581*bl[sr(Re+Ne,127)]>>16,8>Je.Eb[1]&&(Je.Eb[1]=8),Je.Qc[0]=Wl[sr(Re+Ie,117)],Je.Qc[1]=bl[sr(Re+Te,127)],Je.lc=Re+Te}if(!_e.Rb)return kr(m,4,"Not a key frame.");for(fe(we),_e=m.Pa,W=0;4>W;++W){for(pe=0;8>pe;++pe)for(Y=0;3>Y;++Y)for(Ne=0;11>Ne;++Ne)Ie=he(we,yu[W][pe][Y][Ne])?ge(we,8):rl[W][pe][Y][Ne],_e.Wc[W][pe].Yb[Y][Ne]=Ie;for(pe=0;17>pe;++pe)_e.Xc[W][pe]=_e.Wc[W][vu[pe]]}return m.kc=fe(we),m.kc&&(m.Bd=ge(we,8)),m.cb=1}function Qo(m,_,W,Y,pe,we,_e){var Ne=_[pe].Yb[W];for(W=0;16>pe;++pe){if(!he(m,Ne[W+0]))return pe;for(;!he(m,Ne[W+1]);)if(Ne=_[++pe].Yb[0],W=0,pe==16)return 16;var Te=_[pe+1].Yb;if(he(m,Ne[W+2])){var Ie=m,Ge=0;if(he(Ie,(Re=Ne)[(nt=W)+3]))if(he(Ie,Re[nt+6])){for(Ne=0,nt=2*(Ge=he(Ie,Re[nt+8]))+(Re=he(Ie,Re[nt+9+Ge])),Ge=0,Re=mu[nt];Re[Ne];++Ne)Ge+=Ge+he(Ie,Re[Ne]);Ge+=3+(8<<nt)}else he(Ie,Re[nt+7])?(Ge=7+2*he(Ie,165),Ge+=he(Ie,145)):Ge=5+he(Ie,159);else Ge=he(Ie,Re[nt+4])?3+he(Ie,Re[nt+5]):2;Ne=Te[2]}else Ge=1,Ne=Te[1];Te=_e+gu[pe],0>(Ie=m).b&&z(Ie);var nt,Re=Ie.b,Je=(nt=Ie.Ca>>1)-(Ie.I>>Re)>>31;--Ie.b,Ie.Ca+=Je,Ie.Ca|=1,Ie.I-=(nt+1&Je)<<Re,we[Te]=((Ge^Je)-Je)*Y[(0<pe)+0]}return 16}function Ar(m){var _=m.rb[m.sb-1];_.la=0,_.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function Ji(m,_,W,Y,pe){pe=m[_+W+32*Y]+(pe>>3),m[_+W+32*Y]=-256&pe?0>pe?0:255:pe}function Ei(m,_,W,Y,pe,we){Ji(m,_,0,W,Y+pe),Ji(m,_,1,W,Y+we),Ji(m,_,2,W,Y-we),Ji(m,_,3,W,Y-pe)}function fo(m){return(20091*m>>16)+m}function ys(m,_,W,Y){var pe,we=0,_e=s(16);for(pe=0;4>pe;++pe){var Ne=m[_+0]+m[_+8],Te=m[_+0]-m[_+8],Ie=(35468*m[_+4]>>16)-fo(m[_+12]),Ge=fo(m[_+4])+(35468*m[_+12]>>16);_e[we+0]=Ne+Ge,_e[we+1]=Te+Ie,_e[we+2]=Te-Ie,_e[we+3]=Ne-Ge,we+=4,_++}for(pe=we=0;4>pe;++pe)Ne=(m=_e[we+0]+4)+_e[we+8],Te=m-_e[we+8],Ie=(35468*_e[we+4]>>16)-fo(_e[we+12]),Ji(W,Y,0,0,Ne+(Ge=fo(_e[we+4])+(35468*_e[we+12]>>16))),Ji(W,Y,1,0,Te+Ie),Ji(W,Y,2,0,Te-Ie),Ji(W,Y,3,0,Ne-Ge),we++,Y+=32}function ss(m,_,W,Y){var pe=m[_+0]+4,we=35468*m[_+4]>>16,_e=fo(m[_+4]),Ne=35468*m[_+1]>>16;Ei(W,Y,0,pe+_e,m=fo(m[_+1]),Ne),Ei(W,Y,1,pe+we,m,Ne),Ei(W,Y,2,pe-we,m,Ne),Ei(W,Y,3,pe-_e,m,Ne)}function as(m,_,W,Y,pe){ys(m,_,W,Y),pe&&ys(m,_+16,W,Y+4)}function ar(m,_,W,Y){Ya(m,_+0,W,Y,1),Ya(m,_+32,W,Y+128,1)}function Ln(m,_,W,Y){var pe;for(m=m[_+0]+4,pe=0;4>pe;++pe)for(_=0;4>_;++_)Ji(W,Y,_,pe,m)}function Wr(m,_,W,Y){m[_+0]&&gi(m,_+0,W,Y),m[_+16]&&gi(m,_+16,W,Y+4),m[_+32]&&gi(m,_+32,W,Y+128),m[_+48]&&gi(m,_+48,W,Y+128+4)}function vs(m,_,W,Y){var pe,we=s(16);for(pe=0;4>pe;++pe){var _e=m[_+0+pe]+m[_+12+pe],Ne=m[_+4+pe]+m[_+8+pe],Te=m[_+4+pe]-m[_+8+pe],Ie=m[_+0+pe]-m[_+12+pe];we[0+pe]=_e+Ne,we[8+pe]=_e-Ne,we[4+pe]=Ie+Te,we[12+pe]=Ie-Te}for(pe=0;4>pe;++pe)_e=(m=we[0+4*pe]+3)+we[3+4*pe],Ne=we[1+4*pe]+we[2+4*pe],Te=we[1+4*pe]-we[2+4*pe],Ie=m-we[3+4*pe],W[Y+0]=_e+Ne>>3,W[Y+16]=Ie+Te>>3,W[Y+32]=_e-Ne>>3,W[Y+48]=Ie-Te>>3,Y+=64}function ws(m,_,W){var Y,pe=_-32,we=Bo,_e=255-m[pe-1];for(Y=0;Y<W;++Y){var Ne,Te=we,Ie=_e+m[_-1];for(Ne=0;Ne<W;++Ne)m[_+Ne]=Te[Ie+m[pe+Ne]];_+=32}}function Oi(m,_){ws(m,_,4)}function xr(m,_){ws(m,_,8)}function ri(m,_){ws(m,_,16)}function $r(m,_){var W;for(W=0;16>W;++W)o(m,_+32*W,m,_-32,16)}function xs(m,_){var W;for(W=16;0<W;--W)a(m,_,m[_-1],16),_+=32}function Zi(m,_,W){var Y;for(Y=0;16>Y;++Y)a(_,W+32*Y,m,16)}function kt(m,_){var W,Y=16;for(W=0;16>W;++W)Y+=m[_-1+32*W]+m[_+W-32];Zi(Y>>5,m,_)}function $i(m,_){var W,Y=8;for(W=0;16>W;++W)Y+=m[_-1+32*W];Zi(Y>>4,m,_)}function vo(m,_){var W,Y=8;for(W=0;16>W;++W)Y+=m[_+W-32];Zi(Y>>4,m,_)}function Qi(m,_){Zi(128,m,_)}function pn(m,_,W){return m+2*_+W+2>>2}function Pr(m,_){var W,Y=_-32;for(Y=new Uint8Array([pn(m[Y-1],m[Y+0],m[Y+1]),pn(m[Y+0],m[Y+1],m[Y+2]),pn(m[Y+1],m[Y+2],m[Y+3]),pn(m[Y+2],m[Y+3],m[Y+4])]),W=0;4>W;++W)o(m,_+32*W,Y,0,Y.length)}function Aa(m,_){var W=m[_-1],Y=m[_-1+32],pe=m[_-1+64],we=m[_-1+96];se(m,_+0,16843009*pn(m[_-1-32],W,Y)),se(m,_+32,16843009*pn(W,Y,pe)),se(m,_+64,16843009*pn(Y,pe,we)),se(m,_+96,16843009*pn(pe,we,we))}function Na(m,_){var W,Y=4;for(W=0;4>W;++W)Y+=m[_+W-32]+m[_-1+32*W];for(Y>>=3,W=0;4>W;++W)a(m,_+32*W,Y,4)}function rr(m,_){var W=m[_-1+0],Y=m[_-1+32],pe=m[_-1+64],we=m[_-1-32],_e=m[_+0-32],Ne=m[_+1-32],Te=m[_+2-32],Ie=m[_+3-32];m[_+0+96]=pn(Y,pe,m[_-1+96]),m[_+1+96]=m[_+0+64]=pn(W,Y,pe),m[_+2+96]=m[_+1+64]=m[_+0+32]=pn(we,W,Y),m[_+3+96]=m[_+2+64]=m[_+1+32]=m[_+0+0]=pn(_e,we,W),m[_+3+64]=m[_+2+32]=m[_+1+0]=pn(Ne,_e,we),m[_+3+32]=m[_+2+0]=pn(Te,Ne,_e),m[_+3+0]=pn(Ie,Te,Ne)}function Nn(m,_){var W=m[_+1-32],Y=m[_+2-32],pe=m[_+3-32],we=m[_+4-32],_e=m[_+5-32],Ne=m[_+6-32],Te=m[_+7-32];m[_+0+0]=pn(m[_+0-32],W,Y),m[_+1+0]=m[_+0+32]=pn(W,Y,pe),m[_+2+0]=m[_+1+32]=m[_+0+64]=pn(Y,pe,we),m[_+3+0]=m[_+2+32]=m[_+1+64]=m[_+0+96]=pn(pe,we,_e),m[_+3+32]=m[_+2+64]=m[_+1+96]=pn(we,_e,Ne),m[_+3+64]=m[_+2+96]=pn(_e,Ne,Te),m[_+3+96]=pn(Ne,Te,Te)}function mi(m,_){var W=m[_-1+0],Y=m[_-1+32],pe=m[_-1+64],we=m[_-1-32],_e=m[_+0-32],Ne=m[_+1-32],Te=m[_+2-32],Ie=m[_+3-32];m[_+0+0]=m[_+1+64]=we+_e+1>>1,m[_+1+0]=m[_+2+64]=_e+Ne+1>>1,m[_+2+0]=m[_+3+64]=Ne+Te+1>>1,m[_+3+0]=Te+Ie+1>>1,m[_+0+96]=pn(pe,Y,W),m[_+0+64]=pn(Y,W,we),m[_+0+32]=m[_+1+96]=pn(W,we,_e),m[_+1+32]=m[_+2+96]=pn(we,_e,Ne),m[_+2+32]=m[_+3+96]=pn(_e,Ne,Te),m[_+3+32]=pn(Ne,Te,Ie)}function na(m,_){var W=m[_+0-32],Y=m[_+1-32],pe=m[_+2-32],we=m[_+3-32],_e=m[_+4-32],Ne=m[_+5-32],Te=m[_+6-32],Ie=m[_+7-32];m[_+0+0]=W+Y+1>>1,m[_+1+0]=m[_+0+64]=Y+pe+1>>1,m[_+2+0]=m[_+1+64]=pe+we+1>>1,m[_+3+0]=m[_+2+64]=we+_e+1>>1,m[_+0+32]=pn(W,Y,pe),m[_+1+32]=m[_+0+96]=pn(Y,pe,we),m[_+2+32]=m[_+1+96]=pn(pe,we,_e),m[_+3+32]=m[_+2+96]=pn(we,_e,Ne),m[_+3+64]=pn(_e,Ne,Te),m[_+3+96]=pn(Ne,Te,Ie)}function Oo(m,_){var W=m[_-1+0],Y=m[_-1+32],pe=m[_-1+64],we=m[_-1+96];m[_+0+0]=W+Y+1>>1,m[_+2+0]=m[_+0+32]=Y+pe+1>>1,m[_+2+32]=m[_+0+64]=pe+we+1>>1,m[_+1+0]=pn(W,Y,pe),m[_+3+0]=m[_+1+32]=pn(Y,pe,we),m[_+3+32]=m[_+1+64]=pn(pe,we,we),m[_+3+64]=m[_+2+64]=m[_+0+96]=m[_+1+96]=m[_+2+96]=m[_+3+96]=we}function da(m,_){var W=m[_-1+0],Y=m[_-1+32],pe=m[_-1+64],we=m[_-1+96],_e=m[_-1-32],Ne=m[_+0-32],Te=m[_+1-32],Ie=m[_+2-32];m[_+0+0]=m[_+2+32]=W+_e+1>>1,m[_+0+32]=m[_+2+64]=Y+W+1>>1,m[_+0+64]=m[_+2+96]=pe+Y+1>>1,m[_+0+96]=we+pe+1>>1,m[_+3+0]=pn(Ne,Te,Ie),m[_+2+0]=pn(_e,Ne,Te),m[_+1+0]=m[_+3+32]=pn(W,_e,Ne),m[_+1+32]=m[_+3+64]=pn(Y,W,_e),m[_+1+64]=m[_+3+96]=pn(pe,Y,W),m[_+1+96]=pn(we,pe,Y)}function ls(m,_){var W;for(W=0;8>W;++W)o(m,_+32*W,m,_-32,8)}function cs(m,_){var W;for(W=0;8>W;++W)a(m,_,m[_-1],8),_+=32}function Tt(m,_,W){var Y;for(Y=0;8>Y;++Y)a(_,W+32*Y,m,8)}function on(m,_){var W,Y=8;for(W=0;8>W;++W)Y+=m[_+W-32]+m[_-1+32*W];Tt(Y>>4,m,_)}function Ht(m,_){var W,Y=4;for(W=0;8>W;++W)Y+=m[_+W-32];Tt(Y>>3,m,_)}function fn(m,_){var W,Y=4;for(W=0;8>W;++W)Y+=m[_-1+32*W];Tt(Y>>3,m,_)}function rn(m,_){Tt(128,m,_)}function un(m,_,W){var Y=m[_-W],pe=m[_+0],we=3*(pe-Y)+aa[1020+m[_-2*W]-m[_+W]],_e=wl[112+(we+4>>3)];m[_-W]=Bo[255+Y+wl[112+(we+3>>3)]],m[_+0]=Bo[255+pe-_e]}function lr(m,_,W,Y){var pe=m[_+0],we=m[_+W];return Ss[255+m[_-2*W]-m[_-W]]>Y||Ss[255+we-pe]>Y}function Qn(m,_,W,Y){return 4*Ss[255+m[_-W]-m[_+0]]+Ss[255+m[_-2*W]-m[_+W]]<=Y}function Fn(m,_,W,Y,pe){var we=m[_-3*W],_e=m[_-2*W],Ne=m[_-W],Te=m[_+0],Ie=m[_+W],Ge=m[_+2*W],nt=m[_+3*W];return 4*Ss[255+Ne-Te]+Ss[255+_e-Ie]>Y?0:Ss[255+m[_-4*W]-we]<=pe&&Ss[255+we-_e]<=pe&&Ss[255+_e-Ne]<=pe&&Ss[255+nt-Ge]<=pe&&Ss[255+Ge-Ie]<=pe&&Ss[255+Ie-Te]<=pe}function cr(m,_,W,Y){var pe=2*Y+1;for(Y=0;16>Y;++Y)Qn(m,_+Y,W,pe)&&un(m,_+Y,W)}function Bt(m,_,W,Y){var pe=2*Y+1;for(Y=0;16>Y;++Y)Qn(m,_+Y*W,1,pe)&&un(m,_+Y*W,1)}function Mt(m,_,W,Y){var pe;for(pe=3;0<pe;--pe)cr(m,_+=4*W,W,Y)}function mr(m,_,W,Y){var pe;for(pe=3;0<pe;--pe)Bt(m,_+=4,W,Y)}function Kn(m,_,W,Y,pe,we,_e,Ne){for(we=2*we+1;0<pe--;){if(Fn(m,_,W,we,_e))if(lr(m,_,W,Ne))un(m,_,W);else{var Te=m,Ie=_,Ge=W,nt=Te[Ie-2*Ge],Re=Te[Ie-Ge],Je=Te[Ie+0],et=Te[Ie+Ge],xt=Te[Ie+2*Ge],it=27*(wt=aa[1020+3*(Je-Re)+aa[1020+nt-et]])+63>>7,yt=18*wt+63>>7,wt=9*wt+63>>7;Te[Ie-3*Ge]=Bo[255+Te[Ie-3*Ge]+wt],Te[Ie-2*Ge]=Bo[255+nt+yt],Te[Ie-Ge]=Bo[255+Re+it],Te[Ie+0]=Bo[255+Je-it],Te[Ie+Ge]=Bo[255+et-yt],Te[Ie+2*Ge]=Bo[255+xt-wt]}_+=Y}}function Fr(m,_,W,Y,pe,we,_e,Ne){for(we=2*we+1;0<pe--;){if(Fn(m,_,W,we,_e))if(lr(m,_,W,Ne))un(m,_,W);else{var Te=m,Ie=_,Ge=W,nt=Te[Ie-Ge],Re=Te[Ie+0],Je=Te[Ie+Ge],et=wl[112+(4+(xt=3*(Re-nt))>>3)],xt=wl[112+(xt+3>>3)],it=et+1>>1;Te[Ie-2*Ge]=Bo[255+Te[Ie-2*Ge]+it],Te[Ie-Ge]=Bo[255+nt+xt],Te[Ie+0]=Bo[255+Re-et],Te[Ie+Ge]=Bo[255+Je-it]}_+=Y}}function er(m,_,W,Y,pe,we){Kn(m,_,W,1,16,Y,pe,we)}function xi(m,_,W,Y,pe,we){Kn(m,_,1,W,16,Y,pe,we)}function Ti(m,_,W,Y,pe,we){var _e;for(_e=3;0<_e;--_e)Fr(m,_+=4*W,W,1,16,Y,pe,we)}function O(m,_,W,Y,pe,we){var _e;for(_e=3;0<_e;--_e)Fr(m,_+=4,1,W,16,Y,pe,we)}function le(m,_,W,Y,pe,we,_e,Ne){Kn(m,_,pe,1,8,we,_e,Ne),Kn(W,Y,pe,1,8,we,_e,Ne)}function Ce(m,_,W,Y,pe,we,_e,Ne){Kn(m,_,1,pe,8,we,_e,Ne),Kn(W,Y,1,pe,8,we,_e,Ne)}function Oe(m,_,W,Y,pe,we,_e,Ne){Fr(m,_+4*pe,pe,1,8,we,_e,Ne),Fr(W,Y+4*pe,pe,1,8,we,_e,Ne)}function Xe(m,_,W,Y,pe,we,_e,Ne){Fr(m,_+4,1,pe,8,we,_e,Ne),Fr(W,Y+4,1,pe,8,we,_e,Ne)}function gt(){this.ba=new yn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new li,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ln(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function In(){this.ua=0,this.Wa=new T,this.vb=new T,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new te}function yr(){this.xb=this.a=0,this.l=new _i,this.ca=new yn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new In,this.ab=0,this.gc=u(4,ln),this.Oc=0}function br(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _i,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yn(m,_,W,Y,pe,we,_e){for(m=m==null?0:m[_+0],_=0;_<_e;++_)pe[we+_]=m+W[Y+_]&255,m=pe[we+_]}function Ui(m,_,W,Y,pe,we,_e){var Ne;if(m==null)Yn(null,null,W,Y,pe,we,_e);else for(Ne=0;Ne<_e;++Ne)pe[we+Ne]=m[_+Ne]+W[Y+Ne]&255}function eo(m,_,W,Y,pe,we,_e){if(m==null)Yn(null,null,W,Y,pe,we,_e);else{var Ne,Te=m[_+0],Ie=Te,Ge=Te;for(Ne=0;Ne<_e;++Ne)Ie=Ge+(Te=m[_+Ne])-Ie,Ge=W[Y+Ne]+(-256&Ie?0>Ie?0:255:Ie)&255,Ie=Te,pe[we+Ne]=Ge}}function Ci(m,_,W,Y){var pe=_.width,we=_.o;if(e(m!=null&&_!=null),0>W||0>=Y||W+Y>we)return null;if(!m.Cc){if(m.ga==null){var _e;if(m.ga=new br,(_e=m.ga==null)||(_e=_.width*_.o,e(m.Gb.length==0),m.Gb=s(_e),m.Uc=0,m.Gb==null?_e=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,_e=1),_e=!_e),!_e){_e=m.ga;var Ne=m.Fa,Te=m.P,Ie=m.qc,Ge=m.mb,nt=m.nb,Re=Te+1,Je=Ie-1,et=_e.l;if(e(Ne!=null&&Ge!=null&&_!=null),ns[0]=null,ns[1]=Yn,ns[2]=Ui,ns[3]=eo,_e.ca=Ge,_e.tb=nt,_e.c=_.width,_e.i=_.height,e(0<_e.c&&0<_e.i),1>=Ie)_=0;else if(_e.$a=3&Ne[Te+0],_e.Z=Ne[Te+0]>>2&3,_e.Lc=Ne[Te+0]>>4&3,Te=Ne[Te+0]>>6&3,0>_e.$a||1<_e.$a||4<=_e.Z||1<_e.Lc||Te)_=0;else if(et.put=Mn,et.ac=ps,et.bc=ms,et.ma=_e,et.width=_.width,et.height=_.height,et.Da=_.Da,et.v=_.v,et.va=_.va,et.j=_.j,et.o=_.o,_e.$a)e:{e(_e.$a==1),_=Xt();t:for(;;){if(_==null){_=0;break e}if(e(_e!=null),_e.mc=_,_.c=_e.c,_.i=_e.i,_.l=_e.l,_.l.ma=_e,_.l.width=_e.c,_.l.height=_e.i,_.a=0,ke(_.m,Ne,Re,Je),!cn(_e.c,_e.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Me(_.s)?(_e.ic=1,Ne=_.c*_.i,_.Ta=null,_.Ua=0,_.V=s(Ne),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(_e.ic=0,_=Yt(_,_e.c)),!_))break t;_=1;break e}_e.mc=null,_=0}else _=Je>=_e.c*_e.i;_e=!_}if(_e)return null;m.ga.Lc!=1?m.Ga=0:Y=we-W}e(m.ga!=null),e(W+Y<=we);e:{if(_=(Ne=m.ga).c,we=Ne.l.o,Ne.$a==0){if(Re=m.rc,Je=m.Vc,et=m.Fa,Te=m.P+1+W*_,Ie=m.mb,Ge=m.nb+W*_,e(Te<=m.P+m.qc),Ne.Z!=0)for(e(ns[Ne.Z]!=null),_e=0;_e<Y;++_e)ns[Ne.Z](Re,Je,et,Te,Ie,Ge,_),Re=Ie,Je=Ge,Ge+=_,Te+=_;else for(_e=0;_e<Y;++_e)o(Ie,Ge,et,Te,_),Re=Ie,Je=Ge,Ge+=_,Te+=_;m.rc=Re,m.Vc=Je}else{if(e(Ne.mc!=null),_=W+Y,e((_e=Ne.mc)!=null),e(_<=_e.i),_e.C>=_)_=1;else if(Ne.ic||ra(),Ne.ic){Ne=_e.V,Re=_e.Ba,Je=_e.c;var xt=_e.i,it=(et=1,Te=_e.$/Je,Ie=_e.$%Je,Ge=_e.m,nt=_e.s,_e.$),yt=Je*xt,wt=Je*_,_t=nt.wc,St=it<wt?gr(nt,Ie,Te):null;e(it<=yt),e(_<=xt),e(Me(nt));t:for(;;){for(;!Ge.h&&it<wt;){if(Ie&_t||(St=gr(nt,Ie,Te)),e(St!=null),M(Ge),256>(xt=ni(St.G[0],St.H[0],Ge)))Ne[Re+it]=xt,++it,++Ie>=Je&&(Ie=0,++Te<=_&&!(Te%16)&&ht(_e,Te));else{if(!(280>xt)){et=0;break t}xt=Yi(xt-256,Ge);var En,mn=ni(St.G[4],St.H[4],Ge);if(M(Ge),!(it>=(mn=uo(Je,mn=Yi(mn,Ge)))&&yt-it>=xt)){et=0;break t}for(En=0;En<xt;++En)Ne[Re+it+En]=Ne[Re+it+En-mn];for(it+=xt,Ie+=xt;Ie>=Je;)Ie-=Je,++Te<=_&&!(Te%16)&&ht(_e,Te);it<wt&&Ie&_t&&(St=gr(nt,Ie,Te))}e(Ge.h==ye(Ge))}ht(_e,Te>_?_:Te);break t}!et||Ge.h&&it<yt?(et=0,_e.a=Ge.h?5:3):_e.$=it,_=et}else _=qt(_e,_e.V,_e.Ba,_e.c,_e.i,_,Xn);if(!_){Y=0;break e}}W+Y>=we&&(m.Cc=1),Y=1}if(!Y)return null;if(m.Cc&&((Y=m.ga)!=null&&(Y.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+W*pe}function Lo(m,_,W,Y,pe,we){for(;0<pe--;){var _e,Ne=m,Te=_+(W?1:0),Ie=m,Ge=_+(W?0:3);for(_e=0;_e<Y;++_e){var nt=Ie[Ge+4*_e];nt!=255&&(nt*=32897,Ne[Te+4*_e+0]=Ne[Te+4*_e+0]*nt>>23,Ne[Te+4*_e+1]=Ne[Te+4*_e+1]*nt>>23,Ne[Te+4*_e+2]=Ne[Te+4*_e+2]*nt>>23)}_+=we}}function wo(m,_,W,Y,pe){for(;0<Y--;){var we;for(we=0;we<W;++we){var _e=m[_+2*we+0],Ne=15&(Ie=m[_+2*we+1]),Te=4369*Ne,Ie=(240&Ie|Ie>>4)*Te>>16;m[_+2*we+0]=(240&_e|_e>>4)*Te>>16&240|(15&_e|_e<<4)*Te>>16>>4&15,m[_+2*we+1]=240&Ie|Ne}_+=pe}}function Io(m,_,W,Y,pe,we,_e,Ne){var Te,Ie,Ge=255;for(Ie=0;Ie<pe;++Ie){for(Te=0;Te<Y;++Te){var nt=m[_+Te];we[_e+4*Te]=nt,Ge&=nt}_+=W,_e+=Ne}return Ge!=255}function Ea(m,_,W,Y,pe){var we;for(we=0;we<pe;++we)W[Y+we]=m[_+we]>>8}function ra(){Qa=Lo,zc=wo,vl=Io,$c=Ea}function Ha(m,_,W){U[m]=function(Y,pe,we,_e,Ne,Te,Ie,Ge,nt,Re,Je,et,xt,it,yt,wt,_t){var St,En=_t-1>>1,mn=Ne[Te+0]|Ie[Ge+0]<<16,_r=nt[Re+0]|Je[et+0]<<16;e(Y!=null);var wn=3*mn+_r+131074>>2;for(_(Y[pe+0],255&wn,wn>>16,xt,it),we!=null&&(wn=3*_r+mn+131074>>2,_(we[_e+0],255&wn,wn>>16,yt,wt)),St=1;St<=En;++St){var Jr=Ne[Te+St]|Ie[Ge+St]<<16,so=nt[Re+St]|Je[et+St]<<16,Nr=mn+Jr+_r+so+524296,gn=Nr+2*(Jr+_r)>>3;wn=gn+mn>>1,mn=(Nr=Nr+2*(mn+so)>>3)+Jr>>1,_(Y[pe+2*St-1],255&wn,wn>>16,xt,it+(2*St-1)*W),_(Y[pe+2*St-0],255&mn,mn>>16,xt,it+(2*St-0)*W),we!=null&&(wn=Nr+_r>>1,mn=gn+so>>1,_(we[_e+2*St-1],255&wn,wn>>16,yt,wt+(2*St-1)*W),_(we[_e+2*St+0],255&mn,mn>>16,yt,wt+(2*St+0)*W)),mn=Jr,_r=so}1&_t||(wn=3*mn+_r+131074>>2,_(Y[pe+_t-1],255&wn,wn>>16,xt,it+(_t-1)*W),we!=null&&(wn=3*_r+mn+131074>>2,_(we[_e+_t-1],255&wn,wn>>16,yt,wt+(_t-1)*W)))}}function Pl(){rs[zl]=Ed,rs[Oa]=Fs,rs[hu]=Td,rs[$l]=Gl,rs[Ul]=il,rs[Ii]=Bs,rs[pc]=wc,rs[xl]=Fs,rs[el]=Gl,rs[mc]=il,rs[gc]=Bs}function Dl(m){return m&-16384?0>m?0:255:m>>zs}function ia(m,_){return Dl((19077*m>>8)+(26149*_>>8)-14234)}function fl(m,_,W){return Dl((19077*m>>8)-(6419*_>>8)-(13320*W>>8)+8708)}function Ga(m,_){return Dl((19077*m>>8)+(33050*_>>8)-17685)}function Ka(m,_,W,Y,pe){Y[pe+0]=ia(m,W),Y[pe+1]=fl(m,_,W),Y[pe+2]=Ga(m,_)}function Fo(m,_,W,Y,pe){Y[pe+0]=Ga(m,_),Y[pe+1]=fl(m,_,W),Y[pe+2]=ia(m,W)}function Va(m,_,W,Y,pe){var we=fl(m,_,W);_=we<<3&224|Ga(m,_)>>3,Y[pe+0]=248&ia(m,W)|we>>5,Y[pe+1]=_}function hl(m,_,W,Y,pe){var we=240&Ga(m,_)|15;Y[pe+0]=240&ia(m,W)|fl(m,_,W)>>4,Y[pe+1]=we}function cc(m,_,W,Y,pe){Y[pe+0]=255,Ka(m,_,W,Y,pe+1)}function uc(m,_,W,Y,pe){Fo(m,_,W,Y,pe),Y[pe+3]=255}function us(m,_,W,Y,pe){Ka(m,_,W,Y,pe),Y[pe+3]=255}function oa(m,_,W){U[m]=function(Y,pe,we,_e,Ne,Te,Ie,Ge,nt){for(var Re=Ge+(-2&nt)*W;Ge!=Re;)_(Y[pe+0],we[_e+0],Ne[Te+0],Ie,Ge),_(Y[pe+1],we[_e+0],Ne[Te+0],Ie,Ge+W),pe+=2,++_e,++Te,Ge+=2*W;1&nt&&_(Y[pe+0],we[_e+0],Ne[Te+0],Ie,Ge)}}function fa(m,_,W){return W==0?m==0?_==0?6:5:_==0?4:0:W}function dc(m,_,W,Y,pe){switch(m>>>30){case 3:Ya(_,W,Y,pe,0);break;case 2:Fi(_,W,Y,pe);break;case 1:gi(_,W,Y,pe)}}function js(m,_){var W,Y,pe=_.M,we=_.Nb,_e=m.oc,Ne=m.pc+40,Te=m.oc,Ie=m.pc+584,Ge=m.oc,nt=m.pc+600;for(W=0;16>W;++W)_e[Ne+32*W-1]=129;for(W=0;8>W;++W)Te[Ie+32*W-1]=129,Ge[nt+32*W-1]=129;for(0<pe?_e[Ne-1-32]=Te[Ie-1-32]=Ge[nt-1-32]=129:(a(_e,Ne-32-1,127,21),a(Te,Ie-32-1,127,9),a(Ge,nt-32-1,127,9)),Y=0;Y<m.za;++Y){var Re=_.ya[_.aa+Y];if(0<Y){for(W=-1;16>W;++W)o(_e,Ne+32*W-4,_e,Ne+32*W+12,4);for(W=-1;8>W;++W)o(Te,Ie+32*W-4,Te,Ie+32*W+4,4),o(Ge,nt+32*W-4,Ge,nt+32*W+4,4)}var Je=m.Gd,et=m.Hd+Y,xt=Re.ad,it=Re.Hc;if(0<pe&&(o(_e,Ne-32,Je[et].y,0,16),o(Te,Ie-32,Je[et].f,0,8),o(Ge,nt-32,Je[et].ea,0,8)),Re.Za){var yt=_e,wt=Ne-32+16;for(0<pe&&(Y>=m.za-1?a(yt,wt,Je[et].y[15],4):o(yt,wt,Je[et+1].y,0,4)),W=0;4>W;W++)yt[wt+128+W]=yt[wt+256+W]=yt[wt+384+W]=yt[wt+0+W];for(W=0;16>W;++W,it<<=2)yt=_e,wt=Ne+Xc[W],Os[Re.Ob[W]](yt,wt),dc(it,xt,16*+W,yt,wt)}else if(yt=fa(Y,pe,Re.Ob[0]),ts[yt](_e,Ne),it!=0)for(W=0;16>W;++W,it<<=2)dc(it,xt,16*+W,_e,Ne+Xc[W]);for(W=Re.Gc,yt=fa(Y,pe,Re.Dd),ks[yt](Te,Ie),ks[yt](Ge,nt),it=xt,yt=Te,wt=Ie,255&(Re=0|W)&&(170&Re?ds(it,256,yt,wt):Li(it,256,yt,wt)),Re=Ge,it=nt,255&(W>>=8)&&(170&W?ds(xt,320,Re,it):Li(xt,320,Re,it)),pe<m.Ub-1&&(o(Je[et].y,0,_e,Ne+480,16),o(Je[et].f,0,Te,Ie+224,8),o(Je[et].ea,0,Ge,nt+224,8)),W=8*we*m.B,Je=m.sa,et=m.ta+16*Y+16*we*m.R,xt=m.qa,Re=m.ra+8*Y+W,it=m.Ha,yt=m.Ia+8*Y+W,W=0;16>W;++W)o(Je,et+W*m.R,_e,Ne+32*W,16);for(W=0;8>W;++W)o(xt,Re+W*m.B,Te,Ie+32*W,8),o(it,yt+W*m.B,Ge,nt+32*W,8)}}function Ta(m,_,W,Y,pe,we,_e,Ne,Te){var Ie=[0],Ge=[0],nt=0,Re=Te!=null?Te.kd:0,Je=Te??new vt;if(m==null||12>W)return 7;Je.data=m,Je.w=_,Je.ha=W,_=[_],W=[W],Je.gb=[Je.gb];e:{var et=_,xt=W,it=Je.gb;if(e(m!=null),e(xt!=null),e(it!=null),it[0]=0,12<=xt[0]&&!t(m,et[0],"RIFF")){if(t(m,et[0]+8,"WEBP")){it=3;break e}var yt=H(m,et[0]+4);if(12>yt||4294967286<yt){it=3;break e}if(Re&&yt>xt[0]-8){it=7;break e}it[0]=yt,et[0]+=12,xt[0]-=12}it=0}if(it!=0)return it;for(yt=0<Je.gb[0],W=W[0];;){e:{var wt=m;xt=_,it=W;var _t=Ie,St=Ge,En=et=[0];if((wn=nt=[nt])[0]=0,8>it[0])it=7;else{if(!t(wt,xt[0],"VP8X")){if(H(wt,xt[0]+4)!=10){it=3;break e}if(18>it[0]){it=7;break e}var mn=H(wt,xt[0]+8),_r=1+Be(wt,xt[0]+12);if(2147483648<=_r*(wt=1+Be(wt,xt[0]+15))){it=3;break e}En!=null&&(En[0]=mn),_t!=null&&(_t[0]=_r),St!=null&&(St[0]=wt),xt[0]+=18,it[0]-=18,wn[0]=1}it=0}}if(nt=nt[0],et=et[0],it!=0)return it;if(xt=!!(2&et),!yt&&nt)return 3;if(we!=null&&(we[0]=!!(16&et)),_e!=null&&(_e[0]=xt),Ne!=null&&(Ne[0]=0),_e=Ie[0],et=Ge[0],nt&&xt&&Te==null){it=0;break}if(4>W){it=7;break}if(yt&&nt||!yt&&!nt&&!t(m,_[0],"ALPH")){W=[W],Je.na=[Je.na],Je.P=[Je.P],Je.Sa=[Je.Sa];e:{mn=m,it=_,yt=W;var wn=Je.gb;_t=Je.na,St=Je.P,En=Je.Sa,_r=22,e(mn!=null),e(yt!=null),wt=it[0];var Jr=yt[0];for(e(_t!=null),e(En!=null),_t[0]=null,St[0]=null,En[0]=0;;){if(it[0]=wt,yt[0]=Jr,8>Jr){it=7;break e}var so=H(mn,wt+4);if(4294967286<so){it=3;break e}var Nr=8+so+1&-2;if(_r+=Nr,0<wn&&_r>wn){it=3;break e}if(!t(mn,wt,"VP8 ")||!t(mn,wt,"VP8L")){it=0;break e}if(Jr[0]<Nr){it=7;break e}t(mn,wt,"ALPH")||(_t[0]=mn,St[0]=wt+8,En[0]=so),wt+=Nr,Jr-=Nr}}if(W=W[0],Je.na=Je.na[0],Je.P=Je.P[0],Je.Sa=Je.Sa[0],it!=0)break}W=[W],Je.Ja=[Je.Ja],Je.xa=[Je.xa];e:if(wn=m,it=_,yt=W,_t=Je.gb[0],St=Je.Ja,En=Je.xa,mn=it[0],wt=!t(wn,mn,"VP8 "),_r=!t(wn,mn,"VP8L"),e(wn!=null),e(yt!=null),e(St!=null),e(En!=null),8>yt[0])it=7;else{if(wt||_r){if(wn=H(wn,mn+4),12<=_t&&wn>_t-12){it=3;break e}if(Re&&wn>yt[0]-8){it=7;break e}St[0]=wn,it[0]+=8,yt[0]-=8,En[0]=_r}else En[0]=5<=yt[0]&&wn[mn+0]==47&&!(wn[mn+4]>>5),St[0]=yt[0];it=0}if(W=W[0],Je.Ja=Je.Ja[0],Je.xa=Je.xa[0],_=_[0],it!=0)break;if(4294967286<Je.Ja)return 3;if(Ne==null||xt||(Ne[0]=Je.xa?2:1),_e=[_e],et=[et],Je.xa){if(5>W){it=7;break}Ne=_e,Re=et,xt=we,m==null||5>W?m=0:5<=W&&m[_+0]==47&&!(m[_+4]>>5)?(yt=[0],wn=[0],_t=[0],ke(St=new Z,m,_,W),Is(St,yt,wn,_t)?(Ne!=null&&(Ne[0]=yt[0]),Re!=null&&(Re[0]=wn[0]),xt!=null&&(xt[0]=_t[0]),m=1):m=0):m=0}else{if(10>W){it=7;break}Ne=et,m==null||10>W||!To(m,_+3,W-3)?m=0:(Re=m[_+0]|m[_+1]<<8|m[_+2]<<16,xt=16383&(m[_+7]<<8|m[_+6]),m=16383&(m[_+9]<<8|m[_+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=Je.Ja||!xt||!m?m=0:(_e&&(_e[0]=xt),Ne&&(Ne[0]=m),m=1))}if(!m||(_e=_e[0],et=et[0],nt&&(Ie[0]!=_e||Ge[0]!=et)))return 3;Te!=null&&(Te[0]=Je,Te.offset=_-Te.w,e(4294967286>_-Te.w),e(Te.offset==Te.ha-W));break}return it==0||it==7&&nt&&Te==null?(we!=null&&(we[0]|=Je.na!=null&&0<Je.na.length),Y!=null&&(Y[0]=_e),pe!=null&&(pe[0]=et),0):it}function Ol(m,_,W){var Y=_.width,pe=_.height,we=0,_e=0,Ne=Y,Te=pe;if(_.Da=m!=null&&0<m.Da,_.Da&&(Ne=m.cd,Te=m.bd,we=m.v,_e=m.j,11>W||(we&=-2,_e&=-2),0>we||0>_e||0>=Ne||0>=Te||we+Ne>Y||_e+Te>pe))return 0;if(_.v=we,_.j=_e,_.va=we+Ne,_.o=_e+Te,_.U=Ne,_.T=Te,_.da=m!=null&&0<m.da,_.da){if(!L(Ne,Te,W=[m.ib],we=[m.hb]))return 0;_.ib=W[0],_.hb=we[0]}return _.ob=m!=null&&m.ob,_.Kb=m==null||!m.Sd,_.da&&(_.ob=_.ib<3*Y/4&&_.hb<3*pe/4,_.Kb=0),1}function Fl(m){if(m==null)return 2;if(11>m.S){var _=m.f.RGBA;_.fb+=(m.height-1)*_.A,_.A=-_.A}else _=m.f.kb,m=m.height,_.O+=(m-1)*_.fa,_.fa=-_.fa,_.N+=(m-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(m-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(m-1)*_.lb,_.lb=-_.lb);return 0}function Ca(m,_,W,Y){if(Y==null||0>=m||0>=_)return 2;if(W!=null){if(W.Da){var pe=W.cd,we=W.bd,_e=-2&W.v,Ne=-2&W.j;if(0>_e||0>Ne||0>=pe||0>=we||_e+pe>m||Ne+we>_)return 2;m=pe,_=we}if(W.da){if(!L(m,_,pe=[W.ib],we=[W.hb]))return 2;m=pe[0],_=we[0]}}Y.width=m,Y.height=_;e:{var Te=Y.width,Ie=Y.height;if(m=Y.S,0>=Te||0>=Ie||!(m>=zl&&13>m))m=2;else{if(0>=Y.Rd&&Y.sd==null){_e=we=pe=_=0;var Ge=(Ne=Te*Xl[m])*Ie;if(11>m||(we=(Ie+1)/2*(_=(Te+1)/2),m==12&&(_e=(pe=Te)*Ie)),(Ie=s(Ge+2*we+_e))==null){m=1;break e}Y.sd=Ie,11>m?((Te=Y.f.RGBA).eb=Ie,Te.fb=0,Te.A=Ne,Te.size=Ge):((Te=Y.f.kb).y=Ie,Te.O=0,Te.fa=Ne,Te.Fd=Ge,Te.f=Ie,Te.N=0+Ge,Te.Ab=_,Te.Cd=we,Te.ea=Ie,Te.W=0+Ge+we,Te.Db=_,Te.Ed=we,m==12&&(Te.F=Ie,Te.J=0+Ge+2*we),Te.Tc=_e,Te.lb=pe)}if(_=1,pe=Y.S,we=Y.width,_e=Y.height,pe>=zl&&13>pe)if(11>pe)m=Y.f.RGBA,_&=(Ne=Math.abs(m.A))*(_e-1)+we<=m.size,_&=Ne>=we*Xl[pe],_&=m.eb!=null;else{m=Y.f.kb,Ne=(we+1)/2,Ge=(_e+1)/2,Te=Math.abs(m.fa),Ie=Math.abs(m.Ab);var nt=Math.abs(m.Db),Re=Math.abs(m.lb),Je=Re*(_e-1)+we;_&=Te*(_e-1)+we<=m.Fd,_&=Ie*(Ge-1)+Ne<=m.Cd,_=(_&=nt*(Ge-1)+Ne<=m.Ed)&Te>=we&Ie>=Ne&nt>=Ne,_&=m.y!=null,_&=m.f!=null,_&=m.ea!=null,pe==12&&(_&=Re>=we,_&=Je<=m.Tc,_&=m.F!=null)}else _=0;m=_?0:2}}return m!=0||W!=null&&W.fd&&(m=Fl(Y)),m}var Gs=64,Ps=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],es=24,La=32,bs=8,ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Le("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(m){return m},U.Predictor2=function(m,_,W){return _[W+0]},U.Predictor3=function(m,_,W){return _[W+1]},U.Predictor4=function(m,_,W){return _[W-1]},U.Predictor5=function(m,_,W){return qe(qe(m,_[W+1]),_[W+0])},U.Predictor6=function(m,_,W){return qe(m,_[W-1])},U.Predictor7=function(m,_,W){return qe(m,_[W+0])},U.Predictor8=function(m,_,W){return qe(_[W-1],_[W+0])},U.Predictor9=function(m,_,W){return qe(_[W+0],_[W+1])},U.Predictor10=function(m,_,W){return qe(qe(m,_[W-1]),qe(_[W+0],_[W+1]))},U.Predictor11=function(m,_,W){var Y=_[W+0];return 0>=lt(Y>>24&255,m>>24&255,(_=_[W-1])>>24&255)+lt(Y>>16&255,m>>16&255,_>>16&255)+lt(Y>>8&255,m>>8&255,_>>8&255)+lt(255&Y,255&m,255&_)?Y:m},U.Predictor12=function(m,_,W){var Y=_[W+0];return(dt((m>>24&255)+(Y>>24&255)-((_=_[W-1])>>24&255))<<24|dt((m>>16&255)+(Y>>16&255)-(_>>16&255))<<16|dt((m>>8&255)+(Y>>8&255)-(_>>8&255))<<8|dt((255&m)+(255&Y)-(255&_)))>>>0},U.Predictor13=function(m,_,W){var Y=_[W-1];return(ot((m=qe(m,_[W+0]))>>24&255,Y>>24&255)<<24|ot(m>>16&255,Y>>16&255)<<16|ot(m>>8&255,Y>>8&255)<<8|ot(255&m,255&Y))>>>0};var Ds=U.PredictorAdd0;U.PredictorAdd1=Nt,Le("Predictor2","PredictorAdd2"),Le("Predictor3","PredictorAdd3"),Le("Predictor4","PredictorAdd4"),Le("Predictor5","PredictorAdd5"),Le("Predictor6","PredictorAdd6"),Le("Predictor7","PredictorAdd7"),Le("Predictor8","PredictorAdd8"),Le("Predictor9","PredictorAdd9"),Le("Predictor10","PredictorAdd10"),Le("Predictor11","PredictorAdd11"),Le("Predictor12","PredictorAdd12"),Le("Predictor13","PredictorAdd13");var pa=U.PredictorAdd2;$t("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),$t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var ho,Xa=U.ColorIndexInverseTransform,ma=U.MapARGB,sa=U.VP8LColorIndexInverseTransformAlpha,pl=U.MapAlpha,Ia=U.VP8LPredictorsAdd=[];Ia.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var Bl,ml,ga,Ra,ja,gl,Pa,Ya,Fi,ds,gi,Li,po,ko,Ks,fc,Ja,Da,ya,yl,_s,hc,Ml,Za,Qa,zc,vl,$c,Uc=s(511),qc=s(2041),Wc=s(225),Hc=s(767),Gc=0,aa=qc,wl=Wc,Bo=Hc,Ss=Uc,zl=0,Oa=1,hu=2,$l=3,Ul=4,Ii=5,pc=6,xl=7,el=8,mc=9,gc=10,yc=[2,3,7],tl=[3,3,11],nl=[280,256,256,256,40],Kc=[0,1,1,1,0],pu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Nd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ql=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vc=8,Wl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],_l=null,mu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Wu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hu=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ts=[],Os=[],ks=[],va=1,Hl=2,ns=[],rs=[];Ha("UpsampleRgbLinePair",Ka,3),Ha("UpsampleBgrLinePair",Fo,3),Ha("UpsampleRgbaLinePair",us,4),Ha("UpsampleBgraLinePair",uc,4),Ha("UpsampleArgbLinePair",cc,4),Ha("UpsampleRgba4444LinePair",hl,2),Ha("UpsampleRgb565LinePair",Va,2);var Ed=U.UpsampleRgbLinePair,Td=U.UpsampleBgrLinePair,Fs=U.UpsampleRgbaLinePair,Gl=U.UpsampleBgraLinePair,il=U.UpsampleArgbLinePair,Bs=U.UpsampleRgba4444LinePair,wc=U.UpsampleRgb565LinePair,la=16,Ms=1<<la-1,Br=-227,vr=482,zs=6,oo=0,Ao=s(256),ol=s(256),ca=s(256),As=s(256),Kl=s(vr-Br),Vc=s(vr-Br);oa("YuvToRgbRow",Ka,3),oa("YuvToBgrRow",Fo,3),oa("YuvToRgbaRow",us,4),oa("YuvToBgraRow",uc,4),oa("YuvToArgbRow",cc,4),oa("YuvToRgba4444Row",hl,2),oa("YuvToRgb565Row",Va,2);var Xc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vl=[0,2,8],Cd=[8,7,6,4,4,2,2,2,1,1,1,1],sl=1;this.WebPDecodeRGBA=function(m,_,W,Y,pe){var we=Oa,_e=new gt,Ne=new yn;_e.ba=Ne,Ne.S=we,Ne.width=[Ne.width],Ne.height=[Ne.height];var Te=Ne.width,Ie=Ne.height,Ge=new kn;if(Ge==null||m==null)var nt=2;else e(Ge!=null),nt=Ta(m,_,W,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(nt!=0?Te=0:(Te!=null&&(Te[0]=Ge.width[0]),Ie!=null&&(Ie[0]=Ge.height[0]),Te=1),Te){Ne.width=Ne.width[0],Ne.height=Ne.height[0],Y!=null&&(Y[0]=Ne.width),pe!=null&&(pe[0]=Ne.height);e:{if(Y=new _i,(pe=new vt).data=m,pe.w=_,pe.ha=W,pe.kd=1,_=[0],e(pe!=null),((m=Ta(pe.data,pe.w,pe.ha,null,null,null,_,null,pe))==0||m==7)&&_[0]&&(m=4),(_=m)==0){if(e(_e!=null),Y.data=pe.data,Y.w=pe.w+pe.offset,Y.ha=pe.ha-pe.offset,Y.put=Mn,Y.ac=ps,Y.bc=ms,Y.ma=_e,pe.xa){if((m=Xt())==null){_e=1;break e}if((function(Re,Je){var et=[0],xt=[0],it=[0];t:for(;;){if(Re==null)return 0;if(Je==null)return Re.a=2,0;if(Re.l=Je,Re.a=0,ke(Re.m,Je.data,Je.w,Je.ha),!Is(Re.m,et,xt,it)){Re.a=3;break t}if(Re.xb=Hl,Je.width=et[0],Je.height=xt[0],!cn(et[0],xt[0],1,Re,null))break t;return 1}return e(Re.a!=0),0})(m,Y)){if(Y=(_=Ca(Y.width,Y.height,_e.Oa,_e.ba))==0){t:{Y=m;n:for(;;){if(Y==null){Y=0;break t}if(e(Y.s.yc!=null),e(Y.s.Ya!=null),e(0<Y.s.Wb),e((W=Y.l)!=null),e((pe=W.ma)!=null),Y.xb!=0){if(Y.ca=pe.ba,Y.tb=pe.tb,e(Y.ca!=null),!Ol(pe.Oa,W,$l)){Y.a=2;break n}if(!Yt(Y,W.width)||W.da)break n;if((W.da||Wn(Y.ca.S))&&ra(),11>Y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Y.ca.f.kb.F!=null&&ra()),Y.Pb&&0<Y.s.ua&&Y.s.vb.X==null&&!ee(Y.s.vb,Y.s.Wa.Xa)){Y.a=1;break n}Y.xb=0}if(!qt(Y,Y.V,Y.Ba,Y.c,Y.i,W.o,Rs))break n;pe.Dc=Y.Ma,Y=1;break t}e(Y.a!=0),Y=0}Y=!Y}Y&&(_=m.a)}else _=m.a}else{if((m=new Ni)==null){_e=1;break e}if(m.Fa=pe.na,m.P=pe.P,m.qc=pe.Sa,Co(m,Y)){if((_=Ca(Y.width,Y.height,_e.Oa,_e.ba))==0){if(m.Aa=0,W=_e.Oa,e((pe=m)!=null),W!=null){if(0<(Te=0>(Te=W.Md)?0:100<Te?255:255*Te/100)){for(Ie=Ge=0;4>Ie;++Ie)12>(nt=pe.pb[Ie]).lc&&(nt.ia=Te*Cd[0>nt.lc?0:nt.lc]>>3),Ge|=nt.ia;Ge&&(alert("todo:VP8InitRandom"),pe.ia=1)}pe.Ga=W.Id,100<pe.Ga?pe.Ga=100:0>pe.Ga&&(pe.Ga=0)}(function(Re,Je){if(Re==null)return 0;if(Je==null)return kr(Re,2,"NULL VP8Io parameter in VP8Decode().");if(!Re.cb&&!Co(Re,Je))return 0;if(e(Re.cb),Je.ac==null||Je.ac(Je)){Je.ob&&(Re.L=0);var et=Vl[Re.L];if(Re.L==2?(Re.yb=0,Re.zb=0):(Re.yb=Je.v-et>>4,Re.zb=Je.j-et>>4,0>Re.yb&&(Re.yb=0),0>Re.zb&&(Re.zb=0)),Re.Va=Je.o+15+et>>4,Re.Hb=Je.va+15+et>>4,Re.Hb>Re.za&&(Re.Hb=Re.za),Re.Va>Re.Ub&&(Re.Va=Re.Ub),0<Re.L){var xt=Re.ed;for(et=0;4>et;++et){var it;if(Re.Qa.Cb){var yt=Re.Qa.Lb[et];Re.Qa.Fb||(yt+=xt.Tb)}else yt=xt.Tb;for(it=0;1>=it;++it){var wt=Re.gd[et][it],_t=yt;if(xt.Pc&&(_t+=xt.vd[0],it&&(_t+=xt.od[0])),0<(_t=0>_t?0:63<_t?63:_t)){var St=_t;0<xt.wb&&(St=4<xt.wb?St>>2:St>>1)>9-xt.wb&&(St=9-xt.wb),1>St&&(St=1),wt.dd=St,wt.tc=2*_t+St,wt.ld=40<=_t?2:15<=_t?1:0}else wt.tc=0;wt.La=it}}}et=0}else kr(Re,6,"Frame setup failed"),et=Re.a;if(et=et==0){if(et){Re.$c=0,0<Re.Aa||(Re.Ic=sl);t:{et=Re.Ic,xt=4*(St=Re.za);var En=32*St,mn=St+1,_r=0<Re.L?St*(0<Re.Aa?2:1):0,wn=(Re.Aa==2?2:1)*St;if((wt=xt+832+(it=3*(16*et+Vl[Re.L])/2*En)+(yt=Re.Fa!=null&&0<Re.Fa.length?Re.Kc.c*Re.Kc.i:0))!=wt)et=0;else{if(wt>Re.Vb){if(Re.Vb=0,Re.Ec=s(wt),Re.Fc=0,Re.Ec==null){et=kr(Re,1,"no memory during frame initialization.");break t}Re.Vb=wt}wt=Re.Ec,_t=Re.Fc,Re.Ac=wt,Re.Bc=_t,_t+=xt,Re.Gd=u(En,Yr),Re.Hd=0,Re.rb=u(mn+1,On),Re.sb=1,Re.wa=_r?u(_r,Vr):null,Re.Y=0,Re.D.Nb=0,Re.D.wa=Re.wa,Re.D.Y=Re.Y,0<Re.Aa&&(Re.D.Y+=St),e(!0),Re.oc=wt,Re.pc=_t,_t+=832,Re.ya=u(wn,pi),Re.aa=0,Re.D.ya=Re.ya,Re.D.aa=Re.aa,Re.Aa==2&&(Re.D.aa+=St),Re.R=16*St,Re.B=8*St,St=(En=Vl[Re.L])*Re.R,En=En/2*Re.B,Re.sa=wt,Re.ta=_t+St,Re.qa=Re.sa,Re.ra=Re.ta+16*et*Re.R+En,Re.Ha=Re.qa,Re.Ia=Re.ra+8*et*Re.B+En,Re.$c=0,_t+=it,Re.mb=yt?wt:null,Re.nb=yt?_t:null,e(_t+yt<=Re.Fc+Re.Vb),Ar(Re),a(Re.Ac,Re.Bc,0,xt),et=1}}if(et){if(Je.ka=0,Je.y=Re.sa,Je.O=Re.ta,Je.f=Re.qa,Je.N=Re.ra,Je.ea=Re.Ha,Je.Vd=Re.Ia,Je.fa=Re.R,Je.Rc=Re.B,Je.F=null,Je.J=0,!Gc){for(et=-255;255>=et;++et)Uc[255+et]=0>et?-et:et;for(et=-1020;1020>=et;++et)qc[1020+et]=-128>et?-128:127<et?127:et;for(et=-112;112>=et;++et)Wc[112+et]=-16>et?-16:15<et?15:et;for(et=-255;510>=et;++et)Hc[255+et]=0>et?0:255<et?255:et;Gc=1}Pa=vs,Ya=as,ds=ar,gi=Ln,Li=Wr,Fi=ss,po=er,ko=xi,Ks=le,fc=Ce,Ja=Ti,Da=O,ya=Oe,yl=Xe,_s=cr,hc=Bt,Ml=Mt,Za=mr,Os[0]=Na,Os[1]=Oi,Os[2]=Pr,Os[3]=Aa,Os[4]=rr,Os[5]=mi,Os[6]=Nn,Os[7]=na,Os[8]=da,Os[9]=Oo,ts[0]=kt,ts[1]=ri,ts[2]=$r,ts[3]=xs,ts[4]=$i,ts[5]=vo,ts[6]=Qi,ks[0]=on,ks[1]=xr,ks[2]=ls,ks[3]=cs,ks[4]=fn,ks[5]=Ht,ks[6]=rn,et=1}else et=0}et&&(et=(function(Jr,so){for(Jr.M=0;Jr.M<Jr.Va;++Jr.M){var Nr,gn=Jr.Jc[Jr.M&Jr.Xb],Jt=Jr.m,mo=Jr;for(Nr=0;Nr<mo.za;++Nr){var ur=Jt,Hr=mo,Bi=Hr.Ac,Ro=Hr.Bc+4*Nr,xo=Hr.zc,to=Hr.ya[Hr.aa+Nr];if(Hr.Qa.Bb?to.$b=he(ur,Hr.Pa.jb[0])?2+he(ur,Hr.Pa.jb[2]):he(ur,Hr.Pa.jb[1]):to.$b=0,Hr.kc&&(to.Ad=he(ur,Hr.Bd)),to.Za=!he(ur,145)+0,to.Za){var No=to.Ob,jo=0;for(Hr=0;4>Hr;++Hr){var qi,Qr=xo[0+Hr];for(qi=0;4>qi;++qi){Qr=Hu[Bi[Ro+qi]][Qr];for(var yi=Wu[he(ur,Qr[0])];0<yi;)yi=Wu[2*yi+he(ur,Qr[yi])];Qr=-yi,Bi[Ro+qi]=Qr}o(No,jo,Bi,Ro,4),jo+=4,xo[0+Hr]=Qr}}else Qr=he(ur,156)?he(ur,128)?1:3:he(ur,163)?2:0,to.Ob[0]=Qr,a(Bi,Ro,Qr,4),a(xo,0,Qr,4);to.Dd=he(ur,142)?he(ur,114)?he(ur,183)?1:3:2:0}if(mo.m.Ka)return kr(Jr,7,"Premature end-of-partition0 encountered.");for(;Jr.ja<Jr.za;++Jr.ja){if(mo=gn,ur=(Jt=Jr).rb[Jt.sb-1],Bi=Jt.rb[Jt.sb+Jt.ja],Nr=Jt.ya[Jt.aa+Jt.ja],Ro=Jt.kc?Nr.Ad:0)ur.la=Bi.la=0,Nr.Za||(ur.Na=Bi.Na=0),Nr.Hc=0,Nr.Gc=0,Nr.ia=0;else{var Wi,vi;if(ur=Bi,Bi=mo,Ro=Jt.Pa.Xc,xo=Jt.ya[Jt.aa+Jt.ja],to=Jt.pb[xo.$b],Hr=xo.ad,No=0,jo=Jt.rb[Jt.sb-1],Qr=qi=0,a(Hr,No,0,384),xo.Za)var ao=0,lo=Ro[3];else{yi=s(16);var Ri=ur.Na+jo.Na;if(Ri=_l(Bi,Ro[1],Ri,to.Eb,0,yi,0),ur.Na=jo.Na=(0<Ri)+0,1<Ri)Pa(yi,0,Hr,No);else{var g=yi[0]+3>>3;for(yi=0;256>yi;yi+=16)Hr[No+yi]=g}ao=1,lo=Ro[0]}var x=15&ur.la,K=15&jo.la;for(yi=0;4>yi;++yi){var $=1&K;for(g=vi=0;4>g;++g)x=x>>1|($=(Ri=_l(Bi,lo,Ri=$+(1&x),to.Sc,ao,Hr,No))>ao)<<7,vi=vi<<2|(3<Ri?3:1<Ri?2:Hr[No+0]!=0),No+=16;x>>=4,K=K>>1|$<<7,qi=(qi<<8|vi)>>>0}for(lo=x,ao=K>>4,Wi=0;4>Wi;Wi+=2){for(vi=0,x=ur.la>>4+Wi,K=jo.la>>4+Wi,yi=0;2>yi;++yi){for($=1&K,g=0;2>g;++g)Ri=$+(1&x),x=x>>1|($=0<(Ri=_l(Bi,Ro[2],Ri,to.Qc,0,Hr,No)))<<3,vi=vi<<2|(3<Ri?3:1<Ri?2:Hr[No+0]!=0),No+=16;x>>=2,K=K>>1|$<<5}Qr|=vi<<4*Wi,lo|=x<<4<<Wi,ao|=(240&K)<<Wi}ur.la=lo,jo.la=ao,xo.Hc=qi,xo.Gc=Qr,xo.ia=43690&Qr?0:to.ia,Ro=!(qi|Qr)}if(0<Jt.L&&(Jt.wa[Jt.Y+Jt.ja]=Jt.gd[Nr.$b][Nr.Za],Jt.wa[Jt.Y+Jt.ja].La|=!Ro),mo.Ka)return kr(Jr,7,"Premature end-of-file encountered.")}if(Ar(Jr),Jt=so,mo=1,Nr=(gn=Jr).D,ur=0<gn.L&&gn.M>=gn.zb&&gn.M<=gn.Va,gn.Aa==0)t:{if(Nr.M=gn.M,Nr.uc=ur,js(gn,Nr),mo=1,Nr=(vi=gn.D).Nb,ur=(Qr=Vl[gn.L])*gn.R,Bi=Qr/2*gn.B,yi=16*Nr*gn.R,g=8*Nr*gn.B,Ro=gn.sa,xo=gn.ta-ur+yi,to=gn.qa,Hr=gn.ra-Bi+g,No=gn.Ha,jo=gn.Ia-Bi+g,K=(x=vi.M)==0,qi=x>=gn.Va-1,gn.Aa==2&&js(gn,vi),vi.uc)for($=(Ri=gn).D.M,e(Ri.D.uc),vi=Ri.yb;vi<Ri.Hb;++vi){ao=vi,lo=$;var E=(ae=(ct=Ri).D).Nb;Wi=ct.R;var ae=ae.wa[ae.Y+ao],de=ct.sa,D=ct.ta+16*E*Wi+16*ao,Pe=ae.dd,Ue=ae.tc;if(Ue!=0)if(e(3<=Ue),ct.L==1)0<ao&&hc(de,D,Wi,Ue+4),ae.La&&Za(de,D,Wi,Ue),0<lo&&_s(de,D,Wi,Ue+4),ae.La&&Ml(de,D,Wi,Ue);else{var je=ct.B,$e=ct.qa,De=ct.ra+8*E*je+8*ao,Ye=ct.Ha,ct=ct.Ia+8*E*je+8*ao;E=ae.ld,0<ao&&(ko(de,D,Wi,Ue+4,Pe,E),fc($e,De,Ye,ct,je,Ue+4,Pe,E)),ae.La&&(Da(de,D,Wi,Ue,Pe,E),yl($e,De,Ye,ct,je,Ue,Pe,E)),0<lo&&(po(de,D,Wi,Ue+4,Pe,E),Ks($e,De,Ye,ct,je,Ue+4,Pe,E)),ae.La&&(Ja(de,D,Wi,Ue,Pe,E),ya($e,De,Ye,ct,je,Ue,Pe,E))}}if(gn.ia&&alert("todo:DitherRow"),Jt.put!=null){if(vi=16*x,x=16*(x+1),K?(Jt.y=gn.sa,Jt.O=gn.ta+yi,Jt.f=gn.qa,Jt.N=gn.ra+g,Jt.ea=gn.Ha,Jt.W=gn.Ia+g):(vi-=Qr,Jt.y=Ro,Jt.O=xo,Jt.f=to,Jt.N=Hr,Jt.ea=No,Jt.W=jo),qi||(x-=Qr),x>Jt.o&&(x=Jt.o),Jt.F=null,Jt.J=null,gn.Fa!=null&&0<gn.Fa.length&&vi<x&&(Jt.J=Ci(gn,Jt,vi,x-vi),Jt.F=gn.mb,Jt.F==null&&Jt.F.length==0)){mo=kr(gn,3,"Could not decode alpha data.");break t}vi<Jt.j&&(Qr=Jt.j-vi,vi=Jt.j,e(!(1&Qr)),Jt.O+=gn.R*Qr,Jt.N+=gn.B*(Qr>>1),Jt.W+=gn.B*(Qr>>1),Jt.F!=null&&(Jt.J+=Jt.width*Qr)),vi<x&&(Jt.O+=Jt.v,Jt.N+=Jt.v>>1,Jt.W+=Jt.v>>1,Jt.F!=null&&(Jt.J+=Jt.v),Jt.ka=vi-Jt.j,Jt.U=Jt.va-Jt.v,Jt.T=x-vi,mo=Jt.put(Jt))}Nr+1!=gn.Ic||qi||(o(gn.sa,gn.ta-ur,Ro,xo+16*gn.R,ur),o(gn.qa,gn.ra-Bi,to,Hr+8*gn.B,Bi),o(gn.Ha,gn.Ia-Bi,No,jo+8*gn.B,Bi))}if(!mo)return kr(Jr,6,"Output aborted.")}return 1})(Re,Je)),Je.bc!=null&&Je.bc(Je),et&=1}return et?(Re.cb=0,et):0})(m,Y)||(_=m.a)}}else _=m.a}_==0&&_e.Oa!=null&&_e.Oa.fd&&(_=Fl(_e.ba))}_e=_}we=_e!=0?null:11>we?Ne.f.RGBA.eb:Ne.f.kb.y}else we=null;return we};var Xl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(U,ue){for(var oe="",B=0;B<4;B++)oe+=String.fromCharCode(U[ue++]);return oe}function h(U,ue){return U[ue+0]|U[ue+1]<<8}function S(U,ue){return(U[ue+0]|U[ue+1]<<8|U[ue+2]<<16)>>>0}function b(U,ue){return(U[ue+0]|U[ue+1]<<8|U[ue+2]<<16|U[ue+3]<<24)>>>0}new d;var p=[0],j=[0],N=[],A=new d,w=r,R=(function(U,ue){var oe={},B=0,te=!1,P=0,be=0;if(oe.frames=[],!(function(C,Z){for(var ne=0;ne<4;ne++)if(C[Z+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(U,ue)){for(b(U,ue+=4),ue+=8;ue<U.length;){var Ae=f(U,ue),ge=b(U,ue+=4);ue+=4;var xe=ge+(1&ge);switch(Ae){case"VP8 ":case"VP8L":oe.frames[B]===void 0&&(oe.frames[B]={}),(J=oe.frames[B]).src_off=te?be:ue-8,J.src_size=P+ge+8,B++,te&&(te=!1,P=0,be=0);break;case"VP8X":(J=oe.header={}).feature_flags=U[ue];var ke=ue+4;J.canvas_width=1+S(U,ke),ke+=3,J.canvas_height=1+S(U,ke),ke+=3;break;case"ALPH":te=!0,P=xe+8,be=ue-8;break;case"ANIM":(J=oe.header).bgcolor=b(U,ue),ke=ue+4,J.loop_count=h(U,ke),ke+=2;break;case"ANMF":var Fe,J;(J=oe.frames[B]={}).offset_x=2*S(U,ue),ue+=3,J.offset_y=2*S(U,ue),ue+=3,J.width=1+S(U,ue),ue+=3,J.height=1+S(U,ue),ue+=3,J.duration=S(U,ue),ue+=3,Fe=U[ue++],J.dispose=1&Fe,J.blend=Fe>>1&1}Ae!="ANMF"&&(ue+=xe)}return oe}})(w,0);R.response=w,R.rgbaoutput=!0,R.dataurl=!1;var I=R.header?R.header:null,k=R.frames?R.frames:null;if(I){I.loop_counter=I.loop_count,p=[I.canvas_height],j=[I.canvas_width];for(var G=0;G<k.length&&k[G].blend!=0;G++);}var re=k[0],Q=A.WebPDecodeRGBA(w,re.src_off,re.src_size,j,p);re.rgba=Q,re.imgwidth=j[0],re.imgheight=p[0];for(var ie=0;ie<j[0]*p[0]*4;ie++)N[ie]=Q[ie];return this.width=j,this.height=p,this.data=N,this}(function(r){var e,t,o,a,s,u,l,d,f,h=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new d,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new u,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new u,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new S(this),e=this.internal.f2,t=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,u=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,f=new h}]);var S=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=C;Object.defineProperty(this,"pdf",{get:function(){return Z}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(ee){ne=!!ee}});var ye=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ye},set:function(ee){ye=!!ee}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(ee){isNaN(ee)||(ce=ee)}});var M=0;Object.defineProperty(this,"posY",{get:function(){return M},set:function(ee){isNaN(ee)||(M=ee)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ee){var X;typeof ee=="number"?X=[ee,ee,ee,ee]:((X=new Array(4))[0]=ee[0],X[1]=ee.length>=2?ee[1]:X[0],X[2]=ee.length>=3?ee[2]:X[0],X[3]=ee.length>=4?ee[3]:X[1]),f.margin=X}});var z=!1;Object.defineProperty(this,"autoPaging",{get:function(){return z},set:function(ee){z=ee}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(ee){fe=ee}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(ee){he=ee}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ee){ee instanceof h&&(f=ee)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ee){f.path=ee}});var se=[];Object.defineProperty(this,"ctxStack",{get:function(){return se},set:function(ee){se=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var X;X=b(ee),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var X=b(ee);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var me=null,Be=null,H=null;Object.defineProperty(this,"fontFaces",{get:function(){return H},set:function(ee){me=null,Be=null,H=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var X;if(this.ctx.font=ee,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var T=X[1];X[2];var L=X[3],q=X[4];X[5];var Se=X[6],Le=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(q)[2];q=Math.floor(Le==="px"?parseFloat(q)*this.pdf.internal.scaleFactor:Le==="em"?parseFloat(q)*this.pdf.getFontSize():parseFloat(q)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(q);var Ee=(function($t){var Rr,An,Zn=[],or=$t.trim();if(or==="")return y1;if(or in gv)return[gv[or]];for(;or!=="";){switch(An=null,Rr=(or=vv(or)).charAt(0)){case'"':case"'":An=Ck(or.substring(1),Rr);break;default:An=Lk(or)}if(An===null||(Zn.push(An[0]),(or=vv(An[1]))!==""&&or.charAt(0)!==","))return y1;or=or.replace(/^,/,"")}return Zn})(Se);if(this.fontFaces){var qe=(function($t,Rr){var An=$t.getFontList(),Zn=JSON.stringify(An);if(me===null||Be!==Zn){var or=(function(jn){var dn=[];return Object.keys(jn).forEach(function(fi){jn[fi].forEach(function(Wn){var Un=null;switch(Wn){case"bold":Un={family:fi,weight:"bold"};break;case"italic":Un={family:fi,style:"italic"};break;case"bolditalic":Un={family:fi,weight:"bold",style:"italic"};break;case"":case"normal":Un={family:fi}}Un!==null&&(Un.ref={name:fi,style:Wn},dn.push(Un))})}),dn})(An);me=(function(jn){for(var dn={},fi=0;fi<jn.length;++fi){var Wn=g1(jn[fi]),Un=Wn.family,qr=Wn.stretch,yn=Wn.style,kn=Wn.weight;dn[Un]=dn[Un]||{},dn[Un][qr]=dn[Un][qr]||{},dn[Un][qr][yn]=dn[Un][qr][yn]||{},dn[Un][qr][yn][kn]=Wn}return dn})(or.concat(Rr)),Be=Zn}return me})(this.pdf,this.fontFaces),dt=Ee.map(function($t){return{family:$t,stretch:"normal",weight:L,style:T}}),ot=(function($t,Rr,An){for(var Zn=(An=An||{}).defaultFontFamily||"times",or=Object.assign({},Tk,An.genericFontFamilies||{}),jn=null,dn=null,fi=0;fi<Rr.length;++fi)if(or[(jn=g1(Rr[fi])).family]&&(jn.family=or[jn.family]),$t.hasOwnProperty(jn.family)){dn=$t[jn.family];break}if(!(dn=dn||$t[Zn]))throw new Error("Could not find a font-family for the rule '"+yv(jn)+"' and default family '"+Zn+"'.");if(dn=(function(Wn,Un){if(Un[Wn])return Un[Wn];var qr=$1[Wn],yn=qr<=$1.normal?-1:1,kn=mv(Un,Nw,qr,yn);if(!kn)throw new Error("Could not find a matching font-stretch value for "+Wn);return kn})(jn.stretch,dn),dn=(function(Wn,Un){if(Un[Wn])return Un[Wn];for(var qr=Aw[Wn],yn=0;yn<qr.length;++yn)if(Un[qr[yn]])return Un[qr[yn]];throw new Error("Could not find a matching font-style for "+Wn)})(jn.style,dn),!(dn=(function(Wn,Un){if(Un[Wn])return Un[Wn];if(Wn===400&&Un[500])return Un[500];if(Wn===500&&Un[400])return Un[400];var qr=Ek[Wn],yn=mv(Un,Ew,qr,Wn<400?-1:1);if(!yn)throw new Error("Could not find a matching font-weight for value "+Wn);return yn})(jn.weight,dn)))throw new Error("Failed to resolve a font for the rule '"+yv(jn)+"'.");return dn})(qe,dt);this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var lt="";(L==="bold"||parseInt(L,10)>=700||T==="bold")&&(lt="bold"),T==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var Nt="",Ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Zt=0;Zt<Ee.length;Zt++){if(this.pdf.internal.getFont(Ee[Zt],lt,{noFallback:!0,disableWarning:!0})!==void 0){Nt=Ee[Zt];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(Ee[Zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Nt=Ee[Zt],lt="bold";else if(this.pdf.internal.getFont(Ee[Zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Nt=Ee[Zt],lt="normal";break}}if(Nt===""){for(var Rn=0;Rn<Ee.length;Rn++)if(Ft[Ee[Rn]]){Nt=Ft[Ee[Rn]];break}}Nt=Nt===""?"Times":Nt,this.pdf.setFont(Nt,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};S.prototype.setLineDash=function(C){this.lineDash=C},S.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},S.prototype.fill=function(){k.call(this,"fill",!1)},S.prototype.stroke=function(){k.call(this,"stroke",!1)},S.prototype.beginPath=function(){this.path=[{type:"begin"}]},S.prototype.moveTo=function(C,Z){if(isNaN(C)||isNaN(Z))throw co.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new u(C,Z));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(C,Z)},S.prototype.closePath=function(){var C=new u(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&Xi(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){C=new u(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(C.x,C.y)},S.prototype.lineTo=function(C,Z){if(isNaN(C)||isNaN(Z))throw co.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new u(C,Z));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new u(ne.x,ne.y)},S.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},S.prototype.quadraticCurveTo=function(C,Z,ne,ye){if(isNaN(ne)||isNaN(ye)||isNaN(C)||isNaN(Z))throw co.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new u(ne,ye)),M=this.ctx.transform.applyToPoint(new u(C,Z));this.path.push({type:"qct",x1:M.x,y1:M.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new u(ce.x,ce.y)},S.prototype.bezierCurveTo=function(C,Z,ne,ye,ce,M){if(isNaN(ce)||isNaN(M)||isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye))throw co.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var z=this.ctx.transform.applyToPoint(new u(ce,M)),fe=this.ctx.transform.applyToPoint(new u(C,Z)),he=this.ctx.transform.applyToPoint(new u(ne,ye));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:he.x,y2:he.y,x:z.x,y:z.y}),this.ctx.lastPoint=new u(z.x,z.y)},S.prototype.arc=function(C,Z,ne,ye,ce,M){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye)||isNaN(ce))throw co.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(M=!!M,!this.ctx.transform.isIdentity){var z=this.ctx.transform.applyToPoint(new u(C,Z));C=z.x,Z=z.y;var fe=this.ctx.transform.applyToPoint(new u(0,ne)),he=this.ctx.transform.applyToPoint(new u(0,0));ne=Math.sqrt(Math.pow(fe.x-he.x,2)+Math.pow(fe.y-he.y,2))}Math.abs(ce-ye)>=2*Math.PI&&(ye=0,ce=2*Math.PI),this.path.push({type:"arc",x:C,y:Z,radius:ne,startAngle:ye,endAngle:ce,counterclockwise:M})},S.prototype.arcTo=function(C,Z,ne,ye,ce){throw new Error("arcTo not implemented.")},S.prototype.rect=function(C,Z,ne,ye){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye))throw co.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,Z),this.lineTo(C+ne,Z),this.lineTo(C+ne,Z+ye),this.lineTo(C,Z+ye),this.lineTo(C,Z),this.lineTo(C+ne,Z),this.lineTo(C,Z)},S.prototype.fillRect=function(C,Z,ne,ye){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye))throw co.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,Z,ne,ye),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},S.prototype.strokeRect=function(C,Z,ne,ye){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye))throw co.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(C,Z,ne,ye),this.stroke())},S.prototype.clearRect=function(C,Z,ne,ye){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye))throw co.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,Z,ne,ye))},S.prototype.save=function(C){C=typeof C!="boolean"||C;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var ye=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ye}},S.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},S.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(C){var Z,ne,ye,ce;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))Z=0,ne=0,ye=0,ce=0;else{var M=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(M!==null)Z=parseInt(M[1]),ne=parseInt(M[2]),ye=parseInt(M[3]),ce=1;else if((M=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)Z=parseInt(M[1]),ne=parseInt(M[2]),ye=parseInt(M[3]),ce=parseFloat(M[4]);else{if(ce=1,typeof C=="string"&&C.charAt(0)!=="#"){var z=new vw(C);C=z.ok?z.toHex():"#000000"}C.length===4?(Z=C.substring(1,2),Z+=Z,ne=C.substring(2,3),ne+=ne,ye=C.substring(3,4),ye+=ye):(Z=C.substring(1,3),ne=C.substring(3,5),ye=C.substring(5,7)),Z=parseInt(Z,16),ne=parseInt(ne,16),ye=parseInt(ye,16)}}return{r:Z,g:ne,b:ye,a:ce,style:C}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};S.prototype.fillText=function(C,Z,ne,ye){if(isNaN(Z)||isNaN(ne)||typeof C!="string")throw co.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ye=isNaN(ye)?void 0:ye,!p.call(this)){var ce=xe(this.ctx.transform.rotation),M=this.ctx.transform.scaleX;B.call(this,{text:C,x:Z,y:ne,scale:M,angle:ce,align:this.textAlign,maxWidth:ye})}},S.prototype.strokeText=function(C,Z,ne,ye){if(isNaN(Z)||isNaN(ne)||typeof C!="string")throw co.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){ye=isNaN(ye)?void 0:ye;var ce=xe(this.ctx.transform.rotation),M=this.ctx.transform.scaleX;B.call(this,{text:C,x:Z,y:ne,scale:M,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ye})}},S.prototype.measureText=function(C){if(typeof C!="string")throw co.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,ne=this.pdf.internal.scaleFactor,ye=Z.internal.getFontSize(),ce=Z.getStringUnitWidth(C)*ye/Z.internal.scaleFactor;return new function(M){var z=(M=M||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return z}}),this}({width:ce*=Math.round(96*ne/72*1e4)/1e4})},S.prototype.scale=function(C,Z){if(isNaN(C)||isNaN(Z))throw co.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new d(C,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},S.prototype.rotate=function(C){if(isNaN(C))throw co.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new d(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},S.prototype.translate=function(C,Z){if(isNaN(C)||isNaN(Z))throw co.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new d(1,0,0,1,C,Z);this.ctx.transform=this.ctx.transform.multiply(ne)},S.prototype.transform=function(C,Z,ne,ye,ce,M){if(isNaN(C)||isNaN(Z)||isNaN(ne)||isNaN(ye)||isNaN(ce)||isNaN(M))throw co.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var z=new d(C,Z,ne,ye,ce,M);this.ctx.transform=this.ctx.transform.multiply(z)},S.prototype.setTransform=function(C,Z,ne,ye,ce,M){C=isNaN(C)?1:C,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?0:ne,ye=isNaN(ye)?1:ye,ce=isNaN(ce)?0:ce,M=isNaN(M)?0:M,this.ctx.transform=new d(C,Z,ne,ye,ce,M)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};S.prototype.drawImage=function(C,Z,ne,ye,ce,M,z,fe,he){var se=this.pdf.getImageProperties(C),me=1,Be=1,H=1,ee=1;ye!==void 0&&fe!==void 0&&(H=fe/ye,ee=he/ce,me=se.width/ye*fe/ye,Be=se.height/ce*he/ce),M===void 0&&(M=Z,z=ne,Z=0,ne=0),ye!==void 0&&fe===void 0&&(fe=ye,he=ce),ye===void 0&&fe===void 0&&(fe=se.width,he=se.height);var X=this.ctx.transform.decompose(),T=xe(X.rotate.shx),L=new d,q=(L=(L=(L=L.multiply(X.translate)).multiply(X.skew)).multiply(X.scale)).applyToRectangle(new l(M-Z*H,z-ne*ee,ye*me,ce*Be));if(this.autoPaging){for(var Se,Le=A.call(this,q),Ee=[],qe=0;qe<Le.length;qe+=1)Ee.indexOf(Le[qe])===-1&&Ee.push(Le[qe]);I(Ee);for(var dt=Ee[0],ot=Ee[Ee.length-1],lt=dt;lt<ot+1;lt++){this.pdf.setPage(lt);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=lt===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=lt===1?0:Zt+(lt-2)*Rn;if(this.ctx.clip_path.length!==0){var Rr=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Se,this.posX+this.margin[3],-$t+Ft+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Rr}var An=JSON.parse(JSON.stringify(q));An=R([An],this.posX+this.margin[3],-$t+Ft+this.ctx.prevPageLastElemOffset)[0];var Zn=(lt>dt||lt<ot)&&N.call(this);Zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,Rn,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",An.x,An.y,An.w,An.h,null,null,T),Zn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(C,"JPEG",q.x,q.y,q.w,q.h,null,null,T)};var A=function(C,Z,ne){var ye=[];Z=Z||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":ye.push(Math.floor((C.y+ce)/ne)+1);break;case"arc":ye.push(Math.floor((C.y+ce-C.radius)/ne)+1),ye.push(Math.floor((C.y+ce+C.radius)/ne)+1);break;case"qct":var M=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);ye.push(Math.floor((M.y+ce)/ne)+1),ye.push(Math.floor((M.y+M.h+ce)/ne)+1);break;case"bct":var z=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);ye.push(Math.floor((z.y+ce)/ne)+1),ye.push(Math.floor((z.y+z.h+ce)/ne)+1);break;case"rect":ye.push(Math.floor((C.y+ce)/ne)+1),ye.push(Math.floor((C.y+C.h+ce)/ne)+1)}for(var fe=0;fe<ye.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<ye[fe];)w.call(this);return ye},w=function(){var C=this.fillStyle,Z=this.strokeStyle,ne=this.font,ye=this.lineCap,ce=this.lineWidth,M=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=Z,this.font=ne,this.lineCap=ye,this.lineWidth=ce,this.lineJoin=M},R=function(C,Z,ne){for(var ye=0;ye<C.length;ye++)switch(C[ye].type){case"bct":C[ye].x2+=Z,C[ye].y2+=ne;case"qct":C[ye].x1+=Z,C[ye].y1+=ne;default:C[ye].x+=Z,C[ye].y+=ne}return C},I=function(C){return C.sort(function(Z,ne){return Z-ne})},k=function(C,Z){var ne=this.fillStyle,ye=this.strokeStyle,ce=this.lineCap,M=this.lineWidth,z=Math.abs(M*this.ctx.transform.scaleX),fe=this.lineJoin;if(this.autoPaging){for(var he,se,me=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),H=[],ee=0;ee<Be.length;ee++)if(Be[ee].x!==void 0)for(var X=A.call(this,Be[ee]),T=0;T<X.length;T+=1)H.indexOf(X[T])===-1&&H.push(X[T]);for(var L=0;L<H.length;L++)for(;this.pdf.internal.getNumberOfPages()<H[L];)w.call(this);I(H);for(var q=H[0],Se=H[H.length-1],Le=q;Le<Se+1;Le++){this.pdf.setPage(Le),this.fillStyle=ne,this.strokeStyle=ye,this.lineCap=ce,this.lineWidth=z,this.lineJoin=fe;var Ee=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Le===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=Le===1?0:dt+(Le-2)*ot;if(this.ctx.clip_path.length!==0){var Nt=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(he,this.posX+this.margin[3],-lt+qe+this.ctx.prevPageLastElemOffset),G.call(this,C,!0),this.path=Nt}if(se=JSON.parse(JSON.stringify(me)),this.path=R(se,this.posX+this.margin[3],-lt+qe+this.ctx.prevPageLastElemOffset),Z===!1||Le===0){var Ft=(Le>q||Le<Se)&&N.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ee,ot,null).clip().discardPath()),G.call(this,C,Z),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=M}this.path=me}else this.lineWidth=z,G.call(this,C,Z),this.lineWidth=M},G=function(C,Z){if((C!=="stroke"||Z||!j.call(this))&&(C==="stroke"||Z||!p.call(this))){for(var ne,ye,ce=[],M=this.path,z=0;z<M.length;z++){var fe=M[z];switch(fe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:fe,deltas:[],abs:[]});break;case"lt":var he=ce.length;if(M[z-1]&&!isNaN(M[z-1].x)&&(ne=[fe.x-M[z-1].x,fe.y-M[z-1].y],he>0)){for(;he>=0;he--)if(ce[he-1].close!==!0&&ce[he-1].begin!==!0){ce[he-1].deltas.push(ne),ce[he-1].abs.push(fe);break}}break;case"bct":ne=[fe.x1-M[z-1].x,fe.y1-M[z-1].y,fe.x2-M[z-1].x,fe.y2-M[z-1].y,fe.x-M[z-1].x,fe.y-M[z-1].y],ce[ce.length-1].deltas.push(ne);break;case"qct":var se=M[z-1].x+2/3*(fe.x1-M[z-1].x),me=M[z-1].y+2/3*(fe.y1-M[z-1].y),Be=fe.x+2/3*(fe.x1-fe.x),H=fe.y+2/3*(fe.y1-fe.y),ee=fe.x,X=fe.y;ne=[se-M[z-1].x,me-M[z-1].y,Be-M[z-1].x,H-M[z-1].y,ee-M[z-1].x,X-M[z-1].y],ce[ce.length-1].deltas.push(ne);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(fe)}}ye=Z?null:C==="stroke"?"stroke":"fill";for(var T=!1,L=0;L<ce.length;L++)if(ce[L].arc)for(var q=ce[L].abs,Se=0;Se<q.length;Se++){var Le=q[Se];Le.type==="arc"?ie.call(this,Le.x,Le.y,Le.radius,Le.startAngle,Le.endAngle,Le.counterclockwise,void 0,Z,!T):te.call(this,Le.x,Le.y),T=!0}else if(ce[L].close===!0)this.pdf.internal.out("h"),T=!1;else if(ce[L].begin!==!0){var Ee=ce[L].start.x,qe=ce[L].start.y;P.call(this,ce[L].deltas,Ee,qe),T=!0}ye&&U.call(this,ye),Z&&ue.call(this)}},re=function(C){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-ne;case"top":return C+Z-ne;case"hanging":return C+Z-2*ne;case"middle":return C+Z/2-ne;default:return C}},Q=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};S.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(Z,ne){this.colorStops.push([Z,ne])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},S.prototype.createPattern=function(){return this.createLinearGradient()},S.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(C,Z,ne,ye,ce,M,z,fe,he){for(var se=Ae.call(this,ne,ye,ce,M),me=0;me<se.length;me++){var Be=se[me];me===0&&(he?oe.call(this,Be.x1+C,Be.y1+Z):te.call(this,Be.x1+C,Be.y1+Z)),be.call(this,C,Z,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}fe?ue.call(this):U.call(this,z)},U=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},oe=function(C,Z){this.pdf.internal.out(t(C)+" "+o(Z)+" m")},B=function(C){var Z;switch(C.align){case"right":case"end":Z="right";break;case"center":Z="center";break;default:Z="left"}var ne,ye,ce,M=this.pdf.getTextDimensions(C.text),z=re.call(this,C.y),fe=Q.call(this,z)-M.h,he=this.ctx.transform.applyToPoint(new u(C.x,z));if(this.autoPaging){var se=this.ctx.transform.decompose(),me=new d;me=(me=(me=me.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var Be=this.ctx.transform.applyToRectangle(new l(C.x,z,M.w,M.h)),H=me.applyToRectangle(new l(C.x,fe,M.w,M.h)),ee=A.call(this,H),X=[],T=0;T<ee.length;T+=1)X.indexOf(ee[T])===-1&&X.push(ee[T]);I(X);for(var L=X[0],q=X[X.length-1],Se=L;Se<q+1;Se++){this.pdf.setPage(Se);var Le=Se===1?this.posY+this.margin[0]:this.margin[0],Ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],dt=qe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],lt=ot-this.margin[3],Nt=Se===1?0:Ee+(Se-2)*dt;if(this.ctx.clip_path.length!==0){var Ft=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ne,this.posX+this.margin[3],-1*Nt+Le),G.call(this,"fill",!0),this.path=Ft}var Zt=R([JSON.parse(JSON.stringify(H))],this.posX+this.margin[3],-Nt+Le+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*C.scale),ce=this.lineWidth,this.lineWidth=ce*C.scale);var Rn=this.autoPaging!=="text";if(Rn||Zt.y+Zt.h<=qe){if(Rn||Zt.y>=Le&&Zt.x<=ot){var $t=Rn?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||ot-Zt.x)[0],Rr=R([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Nt+Le+this.ctx.prevPageLastElemOffset)[0],An=Rn&&(Se>L||Se<q)&&N.call(this);An&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,dt,null).clip().discardPath()),this.pdf.text($t,Rr.x,Rr.y,{angle:C.angle,align:Z,renderingMode:C.renderingMode}),An&&this.pdf.restoreGraphicsState()}}else Zt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Zt.y);C.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=ce)}}else C.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*C.scale),ce=this.lineWidth,this.lineWidth=ce*C.scale),this.pdf.text(C.text,he.x+this.posX,he.y+this.posY,{angle:C.angle,align:Z,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=ce)},te=function(C,Z,ne,ye){ne=ne||0,ye=ye||0,this.pdf.internal.out(t(C+ne)+" "+o(Z+ye)+" l")},P=function(C,Z,ne){return this.pdf.lines(C,Z,ne,null,null)},be=function(C,Z,ne,ye,ce,M,z,fe){this.pdf.internal.out([e(a(ne+C)),e(s(ye+Z)),e(a(ce+C)),e(s(M+Z)),e(a(z+C)),e(s(fe+Z)),"c"].join(" "))},Ae=function(C,Z,ne,ye){for(var ce=2*Math.PI,M=Math.PI/2;Z>ne;)Z-=ce;var z=Math.abs(ne-Z);z<ce&&ye&&(z=ce-z);for(var fe=[],he=ye?-1:1,se=Z;z>1e-5;){var me=se+he*Math.min(z,M);fe.push(ge.call(this,C,se,me)),z-=Math.abs(me-se),se=me}return fe},ge=function(C,Z,ne){var ye=(ne-Z)/2,ce=C*Math.cos(ye),M=C*Math.sin(ye),z=ce,fe=-M,he=z*z+fe*fe,se=he+z*ce+fe*M,me=4/3*(Math.sqrt(2*he*se)-se)/(z*M-fe*ce),Be=z-me*fe,H=fe+me*z,ee=Be,X=-H,T=ye+Z,L=Math.cos(T),q=Math.sin(T);return{x1:C*Math.cos(Z),y1:C*Math.sin(Z),x2:Be*L-H*q,y2:Be*q+H*L,x3:ee*L-X*q,y3:ee*q+X*L,x4:C*Math.cos(ne),y4:C*Math.sin(ne)}},xe=function(C){return 180*C/Math.PI},ke=function(C,Z,ne,ye,ce,M){var z=C+.5*(ne-C),fe=Z+.5*(ye-Z),he=ce+.5*(ne-ce),se=M+.5*(ye-M),me=Math.min(C,ce,z,he),Be=Math.max(C,ce,z,he),H=Math.min(Z,M,fe,se),ee=Math.max(Z,M,fe,se);return new l(me,H,Be-me,ee-H)},Fe=function(C,Z,ne,ye,ce,M,z,fe){var he,se,me,Be,H,ee,X,T,L,q,Se,Le,Ee,qe,dt=ne-C,ot=ye-Z,lt=ce-ne,Nt=M-ye,Ft=z-ce,Zt=fe-M;for(se=0;se<41;se++)L=(X=(me=C+(he=se/40)*dt)+he*((H=ne+he*lt)-me))+he*(H+he*(ce+he*Ft-H)-X),q=(T=(Be=Z+he*ot)+he*((ee=ye+he*Nt)-Be))+he*(ee+he*(M+he*Zt-ee)-T),se==0?(Se=L,Le=q,Ee=L,qe=q):(Se=Math.min(Se,L),Le=Math.min(Le,q),Ee=Math.max(Ee,L),qe=Math.max(qe,q));return new l(Math.round(Se),Math.round(Le),Math.round(Ee-Se),Math.round(qe-Le))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,Z,ne=(C=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:Z}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Gn.API),(function(r){var e=function(u){var l,d,f,h,S,b,p,j,N,A;for(d=[],f=0,h=(u+=l="\0\0\0\0".slice(u.length%4||4)).length;h>f;f+=4)(S=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(b=(S=((S=((S=((S=(S-(A=S%85))/85)-(N=S%85))/85)-(j=S%85))/85)-(p=S%85))/85)%85,d.push(b+33,p+33,j+33,N+33,A+33)):d.push(122);return(function(w,R){for(var I=R;I>0;I--)w.pop()})(d,l.length),String.fromCharCode.apply(String,d)+"~>"},t=function(u){var l,d,f,h,S,b=String,p="length",j=255,N="charCodeAt",A="slice",w="replace";for(u[A](-2),u=u[A](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),f=[],h=0,S=(u+=l="uuuuu"[A](u[p]%5||5))[p];S>h;h+=5)d=52200625*(u[N](h)-33)+614125*(u[N](h+1)-33)+7225*(u[N](h+2)-33)+85*(u[N](h+3)-33)+(u[N](h+4)-33),f.push(j&d>>24,j&d>>16,j&d>>8,j&d);return(function(R,I){for(var k=I;k>0;k--)R.pop()})(f,l[p]),b.fromCharCode.apply(b,f)},o=function(u){return u.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),l.test(u)===!1)return"";for(var d="",f=0;f<u.length;f+=2)d+=String.fromCharCode("0x"+(u[f]+u[f+1]));return d},s=function(u){for(var l=new Uint8Array(u.length),d=u.length;d--;)l[d]=u.charCodeAt(d);return(l=P1(l)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};r.processDataByFilters=function(u,l){var d=0,f=u||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=o(f),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=s(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}})(Gn.API),(function(r){r.loadFile=function(e,t,o){return(function(a,s,u){s=s!==!1,u=typeof u=="function"?u:function(){};var l=void 0;try{l=(function(d,f,h){var S=new XMLHttpRequest,b=0,p=function(j){var N=j.length,A=[],w=String.fromCharCode;for(b=0;b<N;b+=1)A.push(w(255&j.charCodeAt(b)));return A.join("")};if(S.open("GET",d,!f),S.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(S.onload=function(){S.status===200?h(p(this.responseText)):h(void 0)}),S.send(null),f&&S.status===200)return p(S.responseText)})(a,s,u)}catch{}return l})(e,t,o)},r.allowFsRead=void 0,r.loadImageFile=r.loadFile})(Gn.API),(function(r){function e(){return(Lr.html2canvas?Promise.resolve(Lr.html2canvas):cd(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function t(){return(Lr.DOMPurify?Promise.resolve(Lr.DOMPurify):cd(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var o=function(l){var d=Xi(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},a=function(l,d){var f=document.createElement(l);for(var h in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[h]=d.style[h];return f},s=function l(d,f){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),S=d.firstChild;S;S=S.nextSibling)f!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||h.appendChild(l(S,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h},u=function l(d){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),f);return(h=h.setProgress(1,l,1,[l])).set(d)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(l,d){return l.__proto__=d||u.prototype,l},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(l,d){return this.then(function(){switch(d=d||(function(f){switch(o(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),d){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},u.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(d){var f=this.opt.jsPDF,h=this.opt.fontFaces,S=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:S,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var j=h[p],N=j.src.find(function(A){return A.format==="truetype"});N&&f.addFont(N.url,j.ref.name,j.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),d(this.prop.container,b)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(l,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},u.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},u.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},u.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(l){if(o(l)!=="object")return this;var d=Object.keys(l||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(d)})},u.prototype.get=function(l,d){return this.then(function(){var f=l in u.template.prop?this.prop[l]:this.opt[l];return d?d(f):f})},u.prototype.setMargin=function(l){return this.then(function(){switch(o(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},u.prototype.setPageSize=function(l){function d(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(l=l||Gn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},u.prototype.setProgress=function(l,d,f,h){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(l,d,f,h){return this.setProgress(l?this.progress.val+l:null,d||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},u.prototype.then=function(l,d){var f=this;return this.thenCore(l,d,function(h,S){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,h),b}).then(h,S).then(function(b){return f.updateProgress(1),b})})},u.prototype.thenCore=function(l,d,f){f=f||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),d&&(d=d.bind(h));var S=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:u.convert(Object.assign({},h),Promise.prototype),b=f.call(S,l,d);return u.convert(b,h.__proto__)},u.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},u.prototype.thenList=function(l){var d=this;return l.forEach(function(f){d=d.thenCore(f)}),d},u.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return u.convert(d,this)},u.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},u.prototype.error=function(l){return this.then(function(){throw new Error(l)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Gn.getPageSize=function(l,d,f){if(Xi(l)==="object"){var h=l;l=h.orientation,d=h.unit||d,f=h.format||f}d=d||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var S,b=(""+f).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":S=1;break;case"mm":S=72/25.4;break;case"cm":S=72/2.54;break;case"in":S=72;break;case"px":S=.75;break;case"pc":case"em":S=12;break;case"ex":S=6;break;default:throw"Invalid unit: "+d}var j,N=0,A=0;if(p.hasOwnProperty(b))N=p[b][1]/S,A=p[b][0]/S;else try{N=f[1],A=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",A>N&&(j=A,A=N,N=j);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",N>A&&(j=A,A=N,N=j)}return{width:A,height:N,unit:d,k:S,orientation:l}},r.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(g1):null;var f=new u(d);return d.worker?f:f.from(l).doCallback()}})(Gn.API),Gn.API.addJS=function(r){return xv=r,this.internal.events.subscribe("postPutResources",function(){Zf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Zf!==void 0&&wv!==void 0&&this.internal.out("/Names <</JavaScript "+Zf+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,o=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),s=0;s<a.length;s++){var u=a[s],l=o.exec(u);if(l!=null){var d=l[1];t.internal.newObjectDeferredBegin(d,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(s=0;s<f;s++){var S=t.internal.newObject();h.push(S);var b=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(o,a,s){var u={title:a,options:s,children:[]};return o==null&&(o=this.root),o.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(o){o.id=t.internal.newObjectDeferred();for(var a=0;a<o.children.length;a++)this.genIds_r(o.children[a])},t.outline.renderRoot=function(o){this.objStart(o),this.line("/Type /Outlines"),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1]))),this.line("/Count "+this.count_r({count:0},o)),this.objEnd()},t.outline.renderItems=function(o){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<o.children.length;s++){var u=o.children[s];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(o)),s>0&&this.line("/Prev "+this.makeRef(o.children[s-1])),s<o.children.length-1&&this.line("/Next "+this.makeRef(o.children[s+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var l=this.count=this.count_r({count:0},u);if(l>0&&this.line("/Count "+l),u.options&&u.options.pageNumber){var d=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<o.children.length;f++)this.renderItems(o.children[f])},t.outline.line=function(o){this.ctx.val+=o+`\r
`},t.outline.makeRef=function(o){return o.id+" 0 R"},t.outline.makeString=function(o){return"("+t.internal.pdfEscape(o)+")"},t.outline.objStart=function(o){this.ctx.val+=`\r
`+o.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(o,a){for(var s=0;s<a.children.length;s++)o.count++,this.count_r(o,a.children[s]);return o.count}}])})(Gn.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,o,a,s,u,l){var d,f=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,d=(function(S){for(var b,p=256*S.charCodeAt(4)+S.charCodeAt(5),j=S.length,N={width:0,height:0,numcomponents:1},A=4;A<j;A+=2){if(A+=p,e.indexOf(S.charCodeAt(A+1))!==-1){b=256*S.charCodeAt(A+5)+S.charCodeAt(A+6),N={width:256*S.charCodeAt(A+7)+S.charCodeAt(A+8),height:b,numcomponents:S.charCodeAt(A+9)};break}p=256*S.charCodeAt(A+2)+S.charCodeAt(A+3)}return N})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),d.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:t,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:f,index:o,alias:a}}return h}})(Gn.API),Gn.API.processPNG=function(r,e,t,o){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,s=hk(r,{checkCrc:!0}),u=s.width,l=s.height,d=s.channels,f=s.palette,h=s.depth;a=f&&d===1?(function(ie){for(var U=ie.width,ue=ie.height,oe=ie.data,B=ie.palette,te=ie.depth,P=!1,be=[],Ae=[],ge=void 0,xe=!1,ke=0,Fe=0;Fe<B.length;Fe++){var J=k2(B[Fe],4),C=J[0],Z=J[1],ne=J[2],ye=J[3];be.push(C,Z,ne),ye!=null&&(ye===0?(ke++,Ae.length<1&&Ae.push(Fe)):ye<255&&(xe=!0))}if(xe||ke>1){P=!0,Ae=void 0;var ce=U*ue;ge=new Uint8Array(ce);for(var M=new DataView(oe.buffer),z=0;z<ce;z++){var fe=v1(M,z,te),he=k2(B[fe],4)[3];ge[z]=he}}else ke===0&&(Ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:P?8:void 0,colorBytes:oe,alphaBytes:ge,needSMask:P,palette:be,mask:Ae}})(s):d===2||d===4?(function(ie){for(var U=ie.data,ue=ie.width,oe=ie.height,B=ie.channels,te=ie.depth,P=B===2?"DeviceGray":"DeviceRGB",be=B-1,Ae=ue*oe,ge=be,xe=Ae*ge,ke=1*Ae,Fe=Math.ceil(xe*te/8),J=Math.ceil(ke*te/8),C=new Uint8Array(Fe),Z=new Uint8Array(J),ne=new DataView(U.buffer),ye=new DataView(C.buffer),ce=new DataView(Z.buffer),M=!1,z=0;z<Ae;z++){for(var fe=z*B,he=0;he<ge;he++)Cv(ye,v1(ne,fe+he,te),z*ge+he,te);var se=v1(ne,fe+ge,te);se<(1<<te)-1&&(M=!0),Cv(ce,se,1*z,te)}return{colorSpace:P,colorsPerPixel:be,sMaskBitsPerComponent:M?te:void 0,colorBytes:C,alphaBytes:Z,needSMask:M}})(s):(function(ie){var U=ie.data,ue=ie.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ue,colorsPerPixel:ue==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?(function(oe){for(var B=oe.length,te=new Uint8Array(2*B),P=new DataView(te.buffer,te.byteOffset,te.byteLength),be=0;be<B;be++)P.setUint16(2*be,oe[be],!1);return te})(U):U,needSMask:!1}})(s);var S,b,p,j=a,N=j.colorSpace,A=j.colorsPerPixel,w=j.sMaskBitsPerComponent,R=j.colorBytes,I=j.alphaBytes,k=j.needSMask,G=j.palette,re=j.mask,Q=null;return o!==Gn.API.image_compression.NONE&&typeof P1=="function"?(Q=(function(ie){var U;switch(ie){case Gn.API.image_compression.FAST:U=11;break;case Gn.API.image_compression.MEDIUM:U=13;break;case Gn.API.image_compression.SLOW:U=14;break;default:U=12}return U})(o),S=this.decode.FLATE_DECODE,b="/Predictor ".concat(Q," /Colors ").concat(A," /BitsPerComponent ").concat(h," /Columns ").concat(u),r=kv(R,Math.ceil(u*A*h/8),A,h,o),k&&(p=kv(I,Math.ceil(u*w/8),1,w,o))):(S=void 0,b=void 0,r=R,k&&(p=I)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:t,data:r,index:e,filter:S,decodeParameters:b,transparency:re,palette:G,sMask:p,predictor:Q,width:u,height:l,bitsPerComponent:h,sMaskBitsPerComponent:w,colorSpace:N}}},(function(r){r.processGIF89A=function(e,t,o,a){var s=new Pk(e),u=s.width,l=s.height,d=[];s.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:u,height:l},h=new w1(100).encode(f,100);return r.processJPEG.call(this,h,t,o,a)},r.processGIF87A=r.processGIF89A})(Gn.API),Tl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:o,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Tl.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){co.log("bit decode error:"+t)}},Tl.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),u=o*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var d=this.palette[s>>7-l&1];this.data[u+4*l]=d.blue,this.data[u+4*l+1]=d.green,this.data[u+4*l+2]=d.red,this.data[u+4*l+3]=255}t!==0&&(this.pos+=4-t)}},Tl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var s=this.datav.getUint8(this.pos++,!0),u=o*this.width*4+2*a*4,l=s>>4,d=15&s,f=this.palette[l];if(this.data[u]=f.blue,this.data[u+1]=f.green,this.data[u+2]=f.red,this.data[u+3]=255,2*a+1>=this.width)break;f=this.palette[d],this.data[u+4]=f.blue,this.data[u+4+1]=f.green,this.data[u+4+2]=f.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Tl.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,o=0;o<this.width;o++){var a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*o;if(a<this.palette.length){var u=this.palette[a];this.data[s]=u.red,this.data[s+1]=u.green,this.data[s+2]=u.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},Tl.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var o=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,d=(s>>10&e)/e*255|0,f=s>>15?255:0,h=o*this.width*4+4*a;this.data[h]=d,this.data[h+1]=l,this.data[h+2]=u,this.data[h+3]=f}this.pos+=r}},Tl.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),o=this.height-1;o>=0;o--){for(var a=this.bottom_up?o:this.height-1-o,s=0;s<this.width;s++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(u&e)/e*255|0,d=(u>>5&t)/t*255|0,f=(u>>11)/e*255|0,h=a*this.width*4+4*s;this.data[h]=f,this.data[h+1]=d,this.data[h+2]=l,this.data[h+3]=255}this.pos+=r}},Tl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=s,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=255}this.pos+=this.width%4}},Tl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=o,this.data[l+3]=u}},Tl.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,o,a){var s=new Tl(e,!1),u=s.width,l=s.height,d={data:s.getData(),width:u,height:l},f=new w1(100).encode(d,100);return r.processJPEG.call(this,f,t,o,a)}})(Gn.API),Iv.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,o,a){var s=new Iv(e),u=s.width,l=s.height,d={data:s.getData(),width:u,height:l},f=new w1(100).encode(d,100);return r.processJPEG.call(this,f,t,o,a)}})(Gn.API),Gn.API.processRGBA=function(r,e,t){for(var o=r.data,a=o.length,s=new Uint8Array(a/4*3),u=new Uint8Array(a/4),l=0,d=0,f=0;f<a;f+=4){var h=o[f],S=o[f+1],b=o[f+2],p=o[f+3];s[l++]=h,s[l++]=S,s[l++]=b,u[d++]=p}var j=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:j,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Gn.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ed=Gn.API,Qf=ed.getCharWidthsArray=function(r,e){var t,o,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,d=l.fof?l.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,h=f.fof?f.fof:1,S=e.doKerning!==!1,b=0,p=r.length,j=0,N=l[0]||d,A=[];for(t=0;t<p;t++)o=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?A.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(o))+u*(1e3/s)||0)/1e3):(b=S&&Xi(f[o])==="object"&&!isNaN(parseInt(f[o][j],10))?f[o][j]/h:0,A.push((l[o]||N)/d+b)),j=o;return A},bv=ed.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),o=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ed.processArabic&&(r=ed.processArabic(r)),typeof o.metadata.widthOfString=="function"?o.metadata.widthOfString(r,t,a)/t:Qf.apply(this,arguments).reduce(function(s,u){return s+u},0)},_v=function(r,e,t,o){for(var a=[],s=0,u=r.length,l=0;s!==u&&l+e[s]<t;)l+=e[s],s++;a.push(r.slice(0,s));var d=s;for(l=0;s!==u;)l+e[s]>o&&(a.push(r.slice(d,s)),l=0,d=s),l+=e[s],s++;return d!==s&&a.push(r.slice(d,s)),a},Sv=function(r,e,t){t||(t={});var o,a,s,u,l,d,f,h=[],S=[h],b=t.textIndent||0,p=0,j=0,N=r.split(" "),A=Qf.apply(this,[" ",t])[0];if(d=t.lineIndent===-1?N[0].length+2:t.lineIndent||0){var w=Array(d).join(" "),R=[];N.map(function(k){(k=k.split(/\s*\n/)).length>1?R=R.concat(k.map(function(G,re){return(re&&G.length?`
`:"")+G})):R.push(k[0])}),N=R,d=bv.apply(this,[w,t])}for(s=0,u=N.length;s<u;s++){var I=0;if(o=N[s],d&&o[0]==`
`&&(o=o.substr(1),I=1),b+p+(j=(a=Qf.apply(this,[o,t])).reduce(function(k,G){return k+G},0))>e||I){if(j>e){for(l=_v.apply(this,[o,a,e-(b+p),e]),h.push(l.shift()),h=[l.pop()];l.length;)S.push([l.shift()]);j=a.slice(o.length-(h[0]?h[0].length:0)).reduce(function(k,G){return k+G},0)}else h=[o];S.push(h),b=j+d,p=A}else h.push(o),b+=p+j,p=A}return f=d?function(k,G){return(G?w:"")+k.join(" ")}:function(k){return k.join(" ")},S.map(f)},ed.splitTextToSize=function(r,e,t){var o,a=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var S=this.internal.getFont(h.fontName,h.fontStyle),b="Unicode";return S.metadata[b]?{widths:S.metadata[b].widths||{0:1},kerning:S.metadata[b].kerning||{}}:{font:S.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);o=Array.isArray(r)?r:String(r).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=t.lineIndent;var l,d,f=[];for(l=0,d=o.length;l<d;l++)f=f.concat(Sv.apply(this,[o[l],u,s]));return f},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",o={},a={},s=0;s<16;s++)o[t[s]]=e[s],a[e[s]]=t[s];var u=function(b){return"0x"+parseInt(b,10).toString(16)},l=r.__fontmetrics__.compress=function(b){var p,j,N,A,w=["{"];for(var R in b){if(p=b[R],isNaN(parseInt(R,10))?j="'"+R+"'":(R=parseInt(R,10),j=(j=u(R).slice(2)).slice(0,-1)+a[j.slice(-1)]),typeof p=="number")p<0?(N=u(p).slice(3),A="-"):(N=u(p).slice(2),A=""),N=A+N.slice(0,-1)+a[N.slice(-1)];else{if(Xi(p)!=="object")throw new Error("Don't know what to do with value type "+Xi(p)+".");N=l(p)}w.push(j+N)}return w.push("}"),w.join("")},d=r.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,j,N,A,w={},R=1,I=w,k=[],G="",re="",Q=b.length-1,ie=1;ie<Q;ie+=1)(A=b[ie])=="'"?p?(N=p.join(""),p=void 0):p=[]:p?p.push(A):A=="{"?(k.push([I,N]),I={},N=void 0):A=="}"?((j=k.pop())[0][j[1]]=I,N=void 0,I=j[0]):A=="-"?R=-1:N===void 0?o.hasOwnProperty(A)?(G+=o[A],N=parseInt(G,16)*R,R=1,G=""):G+=A:o.hasOwnProperty(A)?(re+=o[A],I[N]=parseInt(re,16)*R,R=1,N=void 0,re=""):re+=A;return w},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},S={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(b){var p=b.font,j=S.Unicode[p.postScriptName];j&&(p.metadata.Unicode={},p.metadata.Unicode.widths=j.widths,p.metadata.Unicode.kerning=j.kerning);var N=h.Unicode[p.postScriptName];N&&(p.metadata.Unicode.encoding=N,p.encoding=N.codePages[0])}])})(Gn.API),(function(r){var e=function(t){for(var o=t.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=t.charCodeAt(s);return a};r.API.events.push(["addFont",function(t){var o=void 0,a=t.font,s=t.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(o=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(uh(l)),u.metadata=r.API.TTFFont.open(l),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,o)}}])})(Gn),Gn.API.addSvgAsImage=function(r,e,t,o,a,s,u,l){if(isNaN(e)||isNaN(t))throw co.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw co.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=o,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return(Lr.canvg?Promise.resolve(Lr.canvg):cd(()=>import("./index.es-Bw2GQ0ML.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(h)}).then(function(){S.addImage(d.toDataURL("image/jpeg",1),e,t,o,a,u,l)})},Gn.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var o=1;o<=this.internal.getNumberOfPages();o++)for(var a=0;a<this.internal.pages[o].length;a++)this.internal.pages[o][a]=this.internal.pages[o][a].replace(e,t);return this},Gn.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var o,a,s,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(u),d=[],f=0,h=0,S=0;function b(j,N){var A,w=!1;for(A=0;A<j.length;A+=1)j[A]===N&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var p=l.length;for(S=0;S<p;S+=1)t[l[S]].value=t[l[S]].defaultValue,t[l[S]].explicitSet=!1}if(Xi(r)==="object"){for(a in r)if(s=r[a],b(l,a)&&s!==void 0){if(t[a].type==="boolean"&&typeof s=="boolean")t[a].value=s;else if(t[a].type==="name"&&b(t[a].valueSet,s))t[a].value=s;else if(t[a].type==="integer"&&Number.isInteger(s))t[a].value=s;else if(t[a].type==="array"){for(f=0;f<s.length;f+=1)if(o=!0,s[f].length===1&&typeof s[f][0]=="number")d.push(String(s[f]-1));else if(s[f].length>1){for(h=0;h<s[f].length;h+=1)typeof s[f][h]!="number"&&(o=!1);o===!0&&d.push([s[f][0]-1,s[f][1]-1].join(" "))}t[a].value="["+d.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,N=[];for(j in t)t[j].explicitSet===!0&&(t[j].type==="name"?N.push("/"+j+" /"+t[j].value):N.push("/"+j+" "+t[j].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var o='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(o)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+u.length+l.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+s+u+l+d),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(o,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:o,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Gn.API),(function(r){var e=r.API,t=e.pdfEscape16=function(s,u){for(var l,d=u.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],S=0,b=s.length;S<b;++S){if(l=u.metadata.characterToGlyph(s.charCodeAt(S)),u.metadata.glyIdsUsed.push(l),u.metadata.toUnicode[l]=s.charCodeAt(S),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(u.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(f[4-l.length],l)}return h.join("")},o=function(s){var u,l,d,f,h,S,b;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],S=0,b=(l=Object.keys(s).sort(function(p,j){return p-j})).length;S<b;S++)u=l[S],d.length>=100&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),s[u]!==void 0&&s[u]!==null&&typeof s[u].toString=="function"&&(f=("0000"+s[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),d.push("<"+u+"><"+f+">"));return d.length&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(u){var l=u.font,d=u.out,f=u.newObject,h=u.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="Identity-H"){for(var S=l.metadata.Unicode.widths,b=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",j=0;j<b.length;j++)p+=String.fromCharCode(b[j]);var N=f();h({data:p,addLength1:!0,objectId:N}),d("endobj");var A=f();h({data:o(l.metadata.toUnicode),addLength1:!0,objectId:A}),d("endobj");var w=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+id(l.fontName)),d("/FontFile2 "+N+" 0 R"),d("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var R=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+id(l.fontName)),d("/FontDescriptor "+w+" 0 R"),d("/W "+r.API.PDFObject.convert(S)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+A+" 0 R"),d("/BaseFont /"+id(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+R+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(u){var l=u.font,d=u.out,f=u.newObject,h=u.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var S=l.metadata.rawData,b="",p=0;p<S.length;p++)b+=String.fromCharCode(S[p]);var j=f();h({data:b,addLength1:!0,objectId:j}),d("endobj");var N=f();h({data:o(l.metadata.toUnicode),addLength1:!0,objectId:N}),d("endobj");var A=f();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+id(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=f();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+id(l.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var u,l=s.text||"",d=s.x,f=s.y,h=s.options||{},S=s.mutex||{},b=S.pdfEscape,p=S.activeFontKey,j=S.fonts,N=p,A="",w=0,R="",I=j[N].encoding;if(j[N].encoding!=="Identity-H")return{text:l,x:d,y:f,options:h,mutex:S};for(R=l,N=p,Array.isArray(l)&&(R=l[0]),w=0;w<R.length;w+=1)j[N].metadata.hasOwnProperty("cmap")&&(u=j[N].metadata.cmap.unicode.codeMap[R[w].charCodeAt(0)]),u||R[w].charCodeAt(0)<256&&j[N].metadata.hasOwnProperty("Unicode")?A+=R[w]:A+="";var k="";return parseInt(N.slice(1))<14||I==="WinAnsiEncoding"?k=b(A,N).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(k=t(A,j[N])),S.isHex=!0,{text:k,x:d,y:f,options:h,mutex:S}};e.events.push(["postProcessText",function(s){var u=s.text||"",l=[],d={text:u,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(u)){var f=0;for(f=0;f<u.length;f+=1)Array.isArray(u[f])&&u[f].length===3?l.push([a(Object.assign({},d,{text:u[f][0]})).text,u[f][1],u[f][2]]):l.push(a(Object.assign({},d,{text:u[f]})).text);s.text=l}else s.text=a(Object.assign({},d,{text:u})).text}])})(Gn),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,o){return e.call(this),this.internal.vFS[t]=o,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Gn.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(o){var a,s,u,l,d,f,h,S=e,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,I=0;this.__bidiEngine__={};var k=function(oe){var B=oe.charCodeAt(),te=B>>8,P=N[te];return P!==void 0?S[256*P+(255&B)]:te===252||te===253?"AL":w.test(te)?"L":te===8?"R":"N"},G=function(oe){for(var B,te=0;te<oe.length;te++){if((B=k(oe.charAt(te)))==="L")return!1;if(B==="R")return!0}return!1},re=function(oe,B,te,P){var be,Ae,ge,xe,ke=B[P];switch(ke){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(ke="AN");break;case"AL":R=!0,ke="R";break;case"WS":case"BN":ke="N";break;case"CS":P<1||P+1>=B.length||(be=te[P-1])!=="EN"&&be!=="AN"||(Ae=B[P+1])!=="EN"&&Ae!=="AN"?ke="N":R&&(Ae="AN"),ke=Ae===be?Ae:"N";break;case"ES":ke=(be=P>0?te[P-1]:"B")==="EN"&&P+1<B.length&&B[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&te[P-1]==="EN"){ke="EN";break}if(R){ke="N";break}for(ge=P+1,xe=B.length;ge<xe&&B[ge]==="ET";)ge++;ke=ge<xe&&B[ge]==="EN"?"EN":"N";break;case"NSM":if(u&&!l){for(xe=B.length,ge=P+1;ge<xe&&B[ge]==="NSM";)ge++;if(ge<xe){var Fe=oe[P],J=Fe>=1425&&Fe<=2303||Fe===64286;if(be=B[ge],J&&(be==="R"||be==="AL")){ke="R";break}}}ke=P<1||(be=B[P-1])==="B"?"N":te[P-1];break;case"B":R=!1,a=!0,ke=I;break;case"S":s=!0,ke="N"}return ke},Q=function(oe,B,te){var P=oe.split("");return te&&ie(P,te,{hiLevel:I}),P.reverse(),B&&B.reverse(),P.join("")},ie=function(oe,B,te){var P,be,Ae,ge,xe,ke=-1,Fe=oe.length,J=0,C=[],Z=I?p:b,ne=[];for(R=!1,a=!1,s=!1,be=0;be<Fe;be++)ne[be]=k(oe[be]);for(Ae=0;Ae<Fe;Ae++){if(xe=J,C[Ae]=re(oe,ne,C,Ae),P=240&(J=Z[xe][j[C[Ae]]]),J&=15,B[Ae]=ge=Z[J][5],P>0)if(P===16){for(be=ke;be<Ae;be++)B[be]=1;ke=-1}else ke=-1;if(Z[J][6])ke===-1&&(ke=Ae);else if(ke>-1){for(be=ke;be<Ae;be++)B[be]=ge;ke=-1}ne[Ae]==="B"&&(B[Ae]=0),te.hiLevel|=ge}s&&(function(ye,ce,M){for(var z=0;z<M;z++)if(ye[z]==="S"){ce[z]=I;for(var fe=z-1;fe>=0&&ye[fe]==="WS";fe--)ce[fe]=I}})(ne,B,Fe)},U=function(oe,B,te,P,be){if(!(be.hiLevel<oe)){if(oe===1&&I===1&&!a)return B.reverse(),void(te&&te.reverse());for(var Ae,ge,xe,ke,Fe=B.length,J=0;J<Fe;){if(P[J]>=oe){for(xe=J+1;xe<Fe&&P[xe]>=oe;)xe++;for(ke=J,ge=xe-1;ke<ge;ke++,ge--)Ae=B[ke],B[ke]=B[ge],B[ge]=Ae,te&&(Ae=te[ke],te[ke]=te[ge],te[ge]=Ae);J=xe}J++}}},ue=function(oe,B,te){var P=oe.split(""),be={hiLevel:I};return te||(te=[]),ie(P,te,be),(function(Ae,ge,xe){if(xe.hiLevel!==0&&h)for(var ke,Fe=0;Fe<Ae.length;Fe++)ge[Fe]===1&&(ke=A.indexOf(Ae[Fe]))>=0&&(Ae[Fe]=A[ke+1])})(P,te,be),U(2,P,B,te,be),U(1,P,B,te,be),P.join("")};return this.__bidiEngine__.doBidiReorder=function(oe,B,te){if((function(be,Ae){if(Ae)for(var ge=0;ge<be.length;ge++)Ae[ge]=ge;l===void 0&&(l=G(be)),f===void 0&&(f=G(be))})(oe,B),u||!d||f)if(u&&d&&l^f)I=l?1:0,oe=Q(oe,B,te);else if(!u&&d&&f)I=l?1:0,oe=ue(oe,B,te),oe=Q(oe,B);else if(!u||l||d||f){if(u&&!d&&l^f)oe=Q(oe,B),l?(I=0,oe=ue(oe,B,te)):(I=1,oe=ue(oe,B,te),oe=Q(oe,B));else if(u&&l&&!d&&f)I=1,oe=ue(oe,B,te),oe=Q(oe,B);else if(!u&&!d&&l^f){var P=h;l?(I=1,oe=ue(oe,B,te),I=0,h=!1,oe=ue(oe,B,te),h=P):(I=0,oe=ue(oe,B,te),oe=Q(oe,B),I=1,h=!1,oe=ue(oe,B,te),h=P,oe=Q(oe,B))}}else I=0,oe=ue(oe,B,te);else I=l?1:0,oe=ue(oe,B,te);return oe},this.__bidiEngine__.setOptions=function(oe){oe&&(u=oe.isInputVisual,d=oe.isOutputVisual,l=oe.isInputRtl,f=oe.isOutputRtl,h=oe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(o),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(o){var a=o.text;o.x,o.y;var s=o.options||{};o.mutex,s.lang;var u=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(u=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?u.push([t.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):u.push([t.doBidiReorder(a[l])]);o.text=u}else o.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Gn),Gn.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new uu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Xk(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Dk(this.contents),this.head=new Fk(this),this.name=new Uk(this),this.cmap=new Cw(this),this.toUnicode={},this.hhea=new Bk(this),this.maxp=new qk(this),this.hmtx=new Wk(this),this.post=new zk(this),this.os2=new Mk(this),this.loca=new Vk(this),this.glyf=new Hk(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,o,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,l,d,f;for(f=[],u=0,l=(d=this.bbox).length;u<l;u++)e=d[u],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(o=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+o)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,o){var a,s,u,l;for(u=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),u+=this.widthOfGlyph(this.characterToGlyph(a))+o*(1e3/t)||0;return u*(t/1e3)},r.prototype.lineHeight=function(e,t){var o;return t==null&&(t=!1),o=t?this.lineGap:0,(this.ascender+o-this.decender)/1e3*e},r})();var jl,uu=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,o;for(o=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)o[t]=String.fromCharCode(this.readByte());return o.join("")},r.prototype.writeString=function(e){var t,o,a;for(a=[],t=0,o=e.length;0<=o?t<o:t>o;t=0<=o?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,o,a,s,u,l,d;return e=this.readByte(),t=this.readByte(),o=this.readByte(),a=this.readByte(),s=this.readByte(),u=this.readByte(),l=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^o)+4294967296*(255^a)+16777216*(255^s)+65536*(255^u)+256*(255^l)+(255^d)+1):72057594037927940*e+281474976710656*t+1099511627776*o+4294967296*a+16777216*s+65536*u+256*l+d},r.prototype.writeLongLong=function(e){var t,o;return t=Math.floor(e/4294967296),o=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,o;for(t=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)t.push(this.readByte());return t},r.prototype.write=function(e){var t,o,a,s;for(s=[],o=0,a=e.length;o<a;o++)t=e[o],s.push(this.writeByte(t));return s},r})(),Dk=(function(){var r;function e(t){var o,a,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)o={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[o.tag]=o}return e.prototype.encode=function(t){var o,a,s,u,l,d,f,h,S,b,p,j,N;for(N in p=Object.keys(t).length,d=Math.log(2),S=16*Math.floor(Math.log(p)/d),u=Math.floor(S/d),h=16*p-S,(a=new uu).writeInt(this.scalarType),a.writeShort(p),a.writeShort(S),a.writeShort(u),a.writeShort(h),s=16*p,f=a.pos+s,l=null,j=[],t)for(b=t[N],a.writeString(N),a.writeInt(r(b)),a.writeInt(f),a.writeInt(b.length),j=j.concat(b),N==="head"&&(l=f),f+=b.length;f%4;)j.push(0),f++;return a.write(j),o=2981146554-r(a.data),a.pos=l+8,a.writeUInt32(o),a.data},r=function(t){var o,a,s,u;for(t=Lw.call(t);t.length%4;)t.push(0);for(s=new uu(t),a=0,o=0,u=t.length;o<u;o=o+=4)a+=s.readUInt32();return 4294967295&a},e})(),Ok={}.hasOwnProperty,lc=function(r,e){for(var t in e)Ok.call(e,t)&&(r[t]=e[t]);function o(){this.constructor=r}return o.prototype=e.prototype,r.prototype=new o,r.__super__=e.prototype,r};jl=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var Fk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new uu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Rv=(function(){function r(e,t){var o,a,s,u,l,d,f,h,S,b,p,j,N,A,w,R,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),S=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(p=e.readUInt16(),b=p/2,e.pos+=6,s=(function(){var k,G;for(G=[],d=k=0;0<=b?k<b:k>b;d=0<=b?++k:--k)G.push(e.readUInt16());return G})(),e.pos+=2,N=(function(){var k,G;for(G=[],d=k=0;0<=b?k<b:k>b;d=0<=b?++k:--k)G.push(e.readUInt16());return G})(),f=(function(){var k,G;for(G=[],d=k=0;0<=b?k<b:k>b;d=0<=b?++k:--k)G.push(e.readUInt16());return G})(),h=(function(){var k,G;for(G=[],d=k=0;0<=b?k<b:k>b;d=0<=b?++k:--k)G.push(e.readUInt16());return G})(),a=(this.length-e.pos+this.offset)/2,l=(function(){var k,G;for(G=[],d=k=0;0<=a?k<a:k>a;d=0<=a?++k:--k)G.push(e.readUInt16());return G})(),d=w=0,I=s.length;w<I;d=++w)for(A=s[d],o=R=j=N[d];j<=A?R<=A:R>=A;o=j<=A?++R:--R)h[d]===0?u=o+f[d]:(u=l[h[d]/2+(o-j)-(b-d)]||0)!==0&&(u+=f[d]),this.codeMap[o]=65535&u}e.pos=S}return r.encode=function(e,t){var o,a,s,u,l,d,f,h,S,b,p,j,N,A,w,R,I,k,G,re,Q,ie,U,ue,oe,B,te,P,be,Ae,ge,xe,ke,Fe,J,C,Z,ne,ye,ce,M,z,fe,he,se,me;switch(P=new uu,u=Object.keys(e).sort(function(Be,H){return Be-H}),t){case"macroman":for(N=0,A=(function(){var Be=[];for(j=0;j<256;++j)Be.push(0);return Be})(),R={0:0},s={},be=0,ke=u.length;be<ke;be++)R[fe=e[a=u[be]]]==null&&(R[fe]=++N),s[a]={old:e[a],new:R[e[a]]},A[a]=R[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(A),{charMap:s,subtable:P.data,maxGlyphID:N+1};case"unicode":for(B=[],S=[],I=0,R={},o={},w=f=null,Ae=0,Fe=u.length;Ae<Fe;Ae++)R[G=e[a=u[Ae]]]==null&&(R[G]=++I),o[a]={old:G,new:R[G]},l=R[G]-a,w!=null&&l===f||(w&&S.push(w),B.push(a),f=l),w=a;for(w&&S.push(w),S.push(65535),B.push(65535),ue=2*(U=B.length),ie=2*Math.pow(Math.log(U)/Math.LN2,2),b=Math.log(ie/2)/Math.LN2,Q=2*U-ie,d=[],re=[],p=[],j=ge=0,J=B.length;ge<J;j=++ge){if(oe=B[j],h=S[j],oe===65535){d.push(0),re.push(0);break}if(oe-(te=o[oe].new)>=32768)for(d.push(0),re.push(2*(p.length+U-j)),a=xe=oe;oe<=h?xe<=h:xe>=h;a=oe<=h?++xe:--xe)p.push(o[a].new);else d.push(te-oe),re.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*U+2*p.length),P.writeUInt16(0),P.writeUInt16(ue),P.writeUInt16(ie),P.writeUInt16(b),P.writeUInt16(Q),M=0,C=S.length;M<C;M++)a=S[M],P.writeUInt16(a);for(P.writeUInt16(0),z=0,Z=B.length;z<Z;z++)a=B[z],P.writeUInt16(a);for(he=0,ne=d.length;he<ne;he++)l=d[he],P.writeUInt16(l);for(se=0,ye=re.length;se<ye;se++)k=re[se],P.writeUInt16(k);for(me=0,ce=p.length;me<ce;me++)N=p[me],P.writeUInt16(N);return{charMap:o,subtable:P.data,maxGlyphID:I+1}}},r})(),Cw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,o,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)t=new Rv(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var o,a;return t==null&&(t="macroman"),o=Rv.encode(e,t),(a=new uu).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},r})(),Bk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Mk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,o;for(o=[],t=0;t<10;++t)o.push(e.readByte());return o})(),this.charRange=(function(){var t,o;for(o=[],t=0;t<4;++t)o.push(e.readInt());return o})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,o;for(o=[],t=0;t<2;t=++t)o.push(e.readInt());return o})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),zk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="post",r.prototype.parse=function(e){var t,o,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(o=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return o=e.readUInt16(),this.offsets=e.read(o);case 262144:return this.map=(function(){var u,l,d;for(d=[],s=u=0,l=this.file.maxp.numGlyphs;0<=l?u<l:u>l;s=0<=l?++u:--u)d.push(e.readUInt32());return d}).call(this)}},r})(),$k=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Uk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="name",r.prototype.parse=function(e){var t,o,a,s,u,l,d,f,h,S,b;for(e.pos=this.offset,e.readShort(),t=e.readShort(),l=e.readShort(),o=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)o.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(d={},s=h=0,S=o.length;h<S;s=++h)a=o[s],e.pos=a.offset,f=e.readString(a.length),u=new $k(f,a),d[b=a.nameID]==null&&(d[b]=[]),d[a.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},r})(),qk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),Wk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,o,a,s,u,l,d;for(e.pos=this.offset,this.metrics=[],t=0,l=this.file.hhea.numberOfMetrics;0<=l?t<l:t>l;t=0<=l?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,h;for(h=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)h.push(e.readInt16());return h})(),this.widths=(function(){var f,h,S,b;for(b=[],f=0,h=(S=this.metrics).length;f<h;f++)s=S[f],b.push(s.advance);return b}).call(this),o=this.widths[this.widths.length-1],d=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)d.push(this.widths.push(o));return d},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),Lw=[].slice,Hk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,o,a,s,u,l,d,f,h,S;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,o=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+o,u=(l=new uu(t.read(a))).readShort(),f=l.readShort(),S=l.readShort(),d=l.readShort(),h=l.readShort(),this.cache[e]=u===-1?new Kk(l,f,S,d,h):new Gk(l,u,f,S,d,h),this.cache[e]))},r.prototype.encode=function(e,t,o){var a,s,u,l,d;for(u=[],s=[],l=0,d=t.length;l<d;l++)a=e[t[l]],s.push(u.length),a&&(u=u.concat(a.encode(o)));return s.push(u.length),{table:u,offsets:s}},r})(),Gk=(function(){function r(e,t,o,a,s,u){this.raw=e,this.numberOfContours=t,this.xMin=o,this.yMin=a,this.xMax=s,this.yMax=u,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Kk=(function(){function r(e,t,o,a,s){var u,l;for(this.raw=e,this.xMin=t,this.yMin=o,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;l=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&l;)u.pos+=1&l?4:2,128&l?u.pos+=8:64&l?u.pos+=4:8&l&&(u.pos+=2)}return r.prototype.encode=function(){var e,t,o;for(t=new uu(Lw.call(this.raw.data)),e=0,o=this.glyphIDs.length;e<o;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Vk=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return lc(r,jl),r.prototype.tag="loca",r.prototype.parse=function(e){var t,o;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,s;for(s=[],o=0,a=this.length;o<a;o+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],o=0,a=this.length;o<a;o+=4)s.push(e.readUInt32());return s}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var o=new Uint32Array(this.offsets.length),a=0,s=0,u=0;u<o.length;++u)if(o[u]=a,s<t.length&&t[s]==u){++s,o[u]=a;var l=this.offsets[u],d=this.offsets[u+1]-l;d>0&&(a+=d)}for(var f=new Array(4*o.length),h=0;h<o.length;++h)f[4*h+3]=255&o[h],f[4*h+2]=(65280&o[h])>>8,f[4*h+1]=(16711680&o[h])>>16,f[4*h]=(4278190080&o[h])>>24;return f},r})(),Xk=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,o,a,s;for(t in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)o=s[t],e[t]=a[o];return e},r.prototype.glyphsFor=function(e){var t,o,a,s,u,l,d;for(a={},u=0,l=e.length;u<l;u++)a[s=e[u]]=this.font.glyf.glyphFor(s);for(s in t=[],a)(o=a[s])!=null&&o.compound&&t.push.apply(t,o.glyphIDs);if(t.length>0)for(s in d=this.glyphsFor(t))o=d[s],a[s]=o;return a},r.prototype.encode=function(e,t){var o,a,s,u,l,d,f,h,S,b,p,j,N,A,w;for(a in o=Cw.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),p={0:0},w=o.charMap)p[(d=w[a]).old]=d.new;for(j in b=o.maxGlyphID,u)j in p||(p[j]=b++);return h=(function(R){var I,k;for(I in k={},R)k[R[I]]=I;return k})(p),S=Object.keys(h).sort(function(R,I){return R-I}),N=(function(){var R,I,k;for(k=[],R=0,I=S.length;R<I;R++)l=S[R],k.push(h[l]);return k})(),s=this.font.glyf.encode(u,N,p),f=this.font.loca.encode(s.offsets,N),A={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},r})();Gn.API.PDFObject=(function(){var r;function e(){}return r=function(t,o){return(Array(o+1).join("0")+t).slice(-o)},e.convert=function(t){var o,a,s,u;if(Array.isArray(t))return"["+(function(){var l,d,f;for(f=[],l=0,d=t.length;l<d;l++)o=t[l],f.push(e.convert(o));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in s=["<<"],t)u=t[a],s.push("/"+a+" "+e.convert(u));return s.push(">>"),s.join(`
`)}return""+t},e})();const td={t1:"",t2:" Word",t3:" PDF",t4:"",t5:"",t6:""},jv={1:"",2:"",3:"",4:""},Yk={1:Kd.HEADING_1,2:Kd.HEADING_2,3:Kd.HEADING_3,4:Kd.HEADING_4};function Jk({isOpen:r,onClose:e,sections:t,docName:o}){const[a,s]=Qe.useState(""),[u,l]=Qe.useState(!1),d=Qe.useRef(null),f=()=>{if(!t||t.length===0)return"";let b="";return t.forEach(p=>{const j=p.level||1,N=jv[j]||jv[1];b+=`${N}${p.title||""}
`,p.summary&&(b+=`${p.summary}
`),b+=`
`}),b.trim()};if(Qe.useState(()=>{r&&s(f())}),r&&!a){const b=f();b!==a&&s(b)}const h=async()=>{try{const b=[];u||a!==f()?a.split(`
`).forEach(A=>{A.trim()?b.push(new au({children:[new yh(A)]})):b.push(new au({}))}):t.forEach(N=>{const A=N.level||1;b.push(new au({text:N.title||"",heading:Yk[A]||Kd.HEADING_1})),N.summary&&b.push(new au({children:[new yh(N.summary)]})),b.push(new au({}))});const p=new q6({sections:[{properties:{},children:b}]}),j=await iS.toBlob(p);aS.saveAs(j,`${o||""}.docx`)}catch(b){console.error("Word:",b),alert("Word: "+(b.message||""))}},S=async()=>{try{const b=(await cd(async()=>{const{default:ie}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:ie}},[])).default,p=document.createElement("div");p.style.cssText=`
                position: fixed;
                left: -9999px;
                top: 0;
                width: 595px;
                padding: 40px;
                background: white;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                font-size: 14px;
                line-height: 1.8;
                color: #333;
            `;const j=a.split(`
`);let N="";j.forEach(ie=>{ie.includes("")?N+=`<p style="font-size: 16px; font-weight: bold; margin: 16px 0 8px; color: #111;">${ie}</p>`:ie.trim()?N+=`<p style="margin: 8px 0; text-indent: 2em;">${ie}</p>`:N+='<div style="height: 12px;"></div>'}),p.innerHTML=N,document.body.appendChild(p);const A=await b(p,{scale:2,useCORS:!0,logging:!1});document.body.removeChild(p);const w=new Gn("p","mm","a4"),R=190,I=277,k=A.height*R/A.width;let G=k,re=10;const Q=A.toDataURL("image/png");for(w.addImage(Q,"PNG",10,re,R,k),G-=I;G>0;)re=G-k+10,w.addPage(),w.addImage(Q,"PNG",10,re,R,k),G-=I;w.save(`${o||""}.pdf`)}catch(b){console.error("PDF:",b),alert("PDF: "+(b.message||""))}};return r?y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:e,children:y.jsxs("div",{style:{background:"#fff",borderRadius:"12px",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.25)"},onClick:b=>b.stopPropagation(),children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid #e2e8f0"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(tf,{size:20,color:"#3b82f6"}),y.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:600},children:td.t1})]}),y.jsx("button",{onClick:e,style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"#666"},children:y.jsx(rf,{size:20})})]}),y.jsxs("div",{style:{display:"flex",gap:"8px",padding:"12px 20px",borderBottom:"1px solid #f0f0f0",background:"#fafafa"},children:[y.jsxs("button",{onClick:()=>l(!u),style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:u?"#3b82f6":"#fff",color:u?"#fff":"#333",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[u?y.jsx(Dx,{size:16}):y.jsx(Zd,{size:16}),u?td.t5:td.t4]}),y.jsxs("button",{onClick:h,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"#fff",color:"#333",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[y.jsx(rg,{size:16}),td.t2]}),y.jsxs("button",{onClick:S,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"#fff",color:"#333",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",fontSize:"13px",fontWeight:500},children:[y.jsx(rg,{size:16}),td.t3]})]}),y.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:u?y.jsx("textarea",{ref:d,value:a,onChange:b=>s(b.target.value),style:{width:"100%",height:"100%",minHeight:"400px",padding:"16px",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px",lineHeight:"1.8",resize:"none",fontFamily:"inherit"}}):y.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"14px",lineHeight:"1.8",color:"#333",padding:"16px",background:"#f8fafc",borderRadius:"8px",minHeight:"400px"},children:a||td.t6})})]})}):null}const rt={t1:"",t2:"",t3:"",t4:"",t5:"",t6:"",t7:"",t8:"",t9:" Prompt:",t10:"",t11:" Replay",t12:" Replay",t15:"",t16:"",t17:"",t18:"",t19:"",t20:"",t21:"",t22:"",t23:"",t24:"",t25:"",t26:"",t27:"",t28:"",t29:"",t30:"",t43:"",t45:"",t59:"",t61:"",t62:"",t63:"",t64:"",t65:"",t66:"",t67:"",t70:"",t71:" section",t73:"",t80:"",t81:"",t82:"",t83:"",t84:"",t85:"",t86:"",t87:"",t88:"1. / 2. /",t89:"",t90:"",t91:"",t92:"",t93:"",t95:"",t96:"",t97:"",t98:"A",t99:"",t100:"",t101:"",t102:"",t103:"",t104:"()",t105:"(%)",t106:"",t107:"",t108:"SOP",t109:"",t110:"",t111:"",t112:"",t113:"...",t114:"",t115:"",t116:"",t117:"...",t118:"",t119:"...",t120:"",t122:"",t123:"",t127:"",t129:"",t130:"",t131:"...",t134:"",t135:"",t136:"",t137:"",t138:"",t139:"",t140:"",t141:"",t142:"",t143:"",t144:"",t145:"",t146:"",t147:"Prompt",t148:"",t149:"",t150:"",t151:"",t152:"",t153:"",t154:"",t155:"",t156:"",t157:"",t158:"",t159:"",t160:"",t161:"",t162:"",t164:""},Jd="llm_buttons_v1",Pv="llm_buttons_migrated_v2",Iw="deposits_v1",Rw="deposits_seq_v1",eh="__REPLAY_META__",x1="shared_scene_id",th=["tab_outline","tab_records","tab_config","tab_strategy"],Dv={tab_outline:"",tab_records:"",tab_config:"",tab_strategy:""},Zk={tab_outline:["","",""],tab_records:["","",""],tab_config:["","",""],tab_strategy:["",""]},Qk={inputSource:"optional",actionExecution:"optional",executionSummary:"optional",recordLocation:"optional"},Ov=[{id:"app_btn_daily_merge",label:"",groupIds:[]},{id:"app_btn_competitor_report",label:"",groupIds:[]},{id:"app_btn_custom_write",label:"",groupIds:[]}],Fv="llm",u0=` JSON 

[
  {"id":"...","title":"","summary":"20","hint":"","level":1-4}
]


- level  1/2/3/4 1
- title 
- summary 20
- hint 1-2
-  JSON


{{text}}`.trim(),ad=` JSON
- summary: 
- detail: 
- edits: [{sectionId, field:'title'|'summary', content}]
 JSON`.trim(),jw=" Markdown ".trim();async function Gt(r,e={}){const t=await fetch(r,{headers:{"Content-Type":"application/json"},...e,body:e.body?JSON.stringify(e.body):void 0});if(!t.ok){const a=await t.text();let s=a;try{s=JSON.parse(a).error||a}catch{}throw new Error(s||"")}return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()}function eA(r){return new Promise((e,t)=>{const o=new FileReader;o.onload=()=>e(o.result.toString()),o.onerror=t,o.readAsText(r,"utf-8")})}const tA=r=>r.toString().trim().toLowerCase().endsWith(".docx"),nA=async()=>{const r=await cd(()=>import("./mammoth.browser-v_mVU7y6.js").then(e=>e.m),[]);return(r==null?void 0:r.default)||r},rA=r=>{var l;const e=(r||"").toString();if(!e.trim())return"";let t;try{t=new DOMParser().parseFromString(e,"text/html")}catch{return e.replace(/<[^>]+>/g," ").replace(/\s+\n/g,`
`).trim()}const o=[],a=(d="")=>{const f=(d||"").toString().replace(/\s+/g," ").trim();f&&o.push(f)},s=()=>{o.length&&o[o.length-1]!==""&&o.push("")},u=(d,f=0)=>{if(!d||d.nodeType===3)return;const h=d;if(!h.tagName){Array.from(h.childNodes||[]).forEach(b=>u(b,f));return}const S=h.tagName.toUpperCase();if(/^H[1-6]$/.test(S)){const b=Math.max(1,Math.min(6,Number(S.slice(1))||1)),p=(h.textContent||"").toString().trim();p&&a(`${"#".repeat(b)} ${p}`),s();return}if(S==="P"){const b=(h.textContent||"").toString().trim();b&&a(b),s();return}if(S==="LI"){const b=(h.textContent||"").toString().trim();b&&a(`${"  ".repeat(Math.max(0,f))}- ${b}`);return}if(S==="UL"||S==="OL"){Array.from(h.children||[]).forEach(b=>u(b,f+1)),s();return}if(S==="BR"){s();return}Array.from(h.childNodes||[]).forEach(b=>u(b,f))};return Array.from(((l=t.body)==null?void 0:l.childNodes)||[]).forEach(d=>u(d,0)),o.join(`
`).replace(/\n{3,}/g,`

`).trim()},Bv=async r=>{const e=await r.arrayBuffer(),o=await(await nA()).convertToHtml({arrayBuffer:e}),a=((o==null?void 0:o.value)||"").toString(),s=rA(a);return s.trim()?s:""},Pu=r=>{if(typeof r!="string"||!/[\u00C0-\u00FF]/.test(r))return r;const e=Uint8Array.from(r,o=>o.charCodeAt(0)&255),t=new TextDecoder("utf-8").decode(e);return/[\u4e00-\u9fff]/.test(t)?t:r},iA=r=>typeof r=="string"&&(/\uFFFD/.test(r)||/\?{2,}/.test(r)),Fc=(r,e="")=>{if(r==null)return e;const o=Pu((r||"").toString()).trim();return!o||iA(o)?e:o},b1=r=>{if(!r||typeof r!="object")return r;const e={...r};return typeof e.label=="string"&&(e.label=Fc(e.label,"")),typeof e.prompt=="string"&&(e.prompt=Fc(e.prompt,"")),typeof e.title=="string"&&(e.title=Fc(e.title,"")),e};function Pw(r){const e=new Set,t=[];for(let o=r.length-1;o>=0;o-=1){const a=r[o];!(a!=null&&a.id)||e.has(a.id)||(e.add(a.id),t.unshift(a))}return t}function nh(r,e){const t=Pw(e||[]),o=new Set(t.map(s=>s.id)),a=(r||[]).filter(s=>!o.has(s.id));return[...t,...a]}function oA(r){const e=[],t=[];return(r||[]).forEach(o=>{const a=Number(o==null?void 0:o.level)||1,s=Math.max(1,Math.min(4,a)),u={section:o,level:s,children:[]};for(;t.length&&t[t.length-1].level>=s;)t.pop();t.length?t[t.length-1].node.children.push(u):e.push(u),t.push({level:s,node:u})}),e}const Oc=r=>r==="script"?"script":"llm";function ld(r,e){const t=(e==null?void 0:e.dataSource)==="selected_doc"?"selected_doc":"preview",o=(e==null?void 0:e.outputTarget)==="title"?"title":"summary",a=Array.isArray(r)?r:null;if(!a)return[{id:"io_migrated_1",enabled:!0,dataSource:t,output:"titles",target:"title"},{id:"io_migrated_2",enabled:!0,dataSource:t,output:"summaries",target:o}];const s=a.map((u,l)=>{const d=typeof(u==null?void 0:u.id)=="string"&&u.id.trim()?u.id.trim():`io_${l+1}`,f=(u==null?void 0:u.enabled)!==!1,h=(u==null?void 0:u.dataSource)==="selected_doc"?"selected_doc":"preview",S=(u==null?void 0:u.output)==="summaries"?"summaries":"titles",b=(u==null?void 0:u.target)==="title"?"title":"summary";return{id:d,enabled:f,dataSource:h,output:S,target:b}}).filter(u=>u.id);return s.length?s:ld(null,e)}function cu(){return[{id:"btn_outline_extract",kind:"outline_extract",label:"",enabled:!0,precipitationMode:"llm",prompt:u0,dataSource:"preview",outputTarget:"summary",io:[{id:"io_default_1",enabled:!0,dataSource:"preview",output:"titles",target:"title"},{id:"io_default_2",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]},{id:"btn_outline_slot_1",kind:"outline_action",label:"",enabled:!1,precipitationMode:"llm",prompt:ad,io:[{id:"io_outline_slot_1",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]},{id:"btn_outline_slot_2",kind:"outline_action",label:"",enabled:!1,precipitationMode:"llm",prompt:ad,io:[{id:"io_outline_slot_2",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]},{id:"btn_outline_slot_3",kind:"outline_action",label:"",enabled:!1,precipitationMode:"llm",prompt:ad,io:[{id:"io_outline_slot_3",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]},{id:"btn_dispatch",kind:"dispatch",label:"",enabled:!0,precipitationMode:"llm",prompt:ad,io:[{id:"io_dispatch_1",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]},{id:"btn_final_generate",kind:"final_generate",label:"",enabled:!0,precipitationMode:"llm",prompt:jw,io:[{id:"io_final_1",enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]}]}function Mv(){try{const r=localStorage.getItem(Jd);if(!r)return cu();const e=JSON.parse(r);if(!Array.isArray(e))return cu();const t=e.map((l,d)=>{const f=typeof(l==null?void 0:l.id)=="string"&&l.id.trim()?l.id.trim():`btn_${d+1}`,h=(l==null?void 0:l.kind)==="dispatch"||(l==null?void 0:l.kind)==="final_generate"||(l==null?void 0:l.kind)==="outline_extract"||(l==null?void 0:l.kind)==="outline_action"?l.kind:"outline_extract",S=typeof(l==null?void 0:l.label)=="string"?l.label:"",b=!!(l!=null&&l.enabled),p=(l==null?void 0:l.dataSource)==="selected_doc"?"selected_doc":"preview",j=h==="dispatch"?ad:h==="final_generate"?jw:h==="outline_action"?ad:u0,N=typeof(l==null?void 0:l.prompt)=="string"?l.prompt:j,A=(l==null?void 0:l.outputTarget)==="title"?"title":"summary",w=ld(l==null?void 0:l.io,{dataSource:p,outputTarget:A}),R=Oc(l==null?void 0:l.precipitationMode);return{id:f,kind:h,label:S,enabled:b,prompt:N,io:w,precipitationMode:R}}).filter(l=>l.id),o=cu(),a=localStorage.getItem(Pv)==="1",s=[...t];if((a?o.filter(l=>l.kind==="outline_action"):o).forEach(l=>{s.some(d=>d.id===l.id)||s.push(l)}),!a)try{localStorage.setItem(Pv,"1"),localStorage.setItem(Jd,JSON.stringify(s))}catch{}return s.length?s:o}catch{return cu()}}function sA(){try{const r=localStorage.getItem(Iw);if(!r)return[];const e=JSON.parse(r);return Array.isArray(e)?e.map(t=>({id:typeof(t==null?void 0:t.id)=="string"&&t.id.trim()?t.id.trim():`_${Date.now()}`,name:typeof(t==null?void 0:t.name)=="string"&&t.name.trim()?Pu(t.name).trim():void 0,createdAt:typeof(t==null?void 0:t.createdAt)=="number"?t.createdAt:Date.now(),precipitationMode:Oc(t==null?void 0:t.precipitationMode),sections:Array.isArray(t==null?void 0:t.sections)?t.sections.map(o=>({...o,action:Pu(o==null?void 0:o.action),content:Pu(o==null?void 0:o.content),summary:Pu(o==null?void 0:o.summary),hint:Pu(o==null?void 0:o.hint)})):[]})).filter(t=>t.id):[]}catch{return[]}}function aA(){try{const r=localStorage.getItem(Rw),e=Number(r);return Number.isFinite(e)&&e>0?Math.floor(e):0}catch{return 0}}const lA=({onClose:r,onSave:e,onUse:t,onDelete:o,onRename:a,historyList:s,loading:u})=>y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},children:y.jsxs("div",{className:"card",style:{width:"500px",maxHeight:"80vh",display:"flex",flexDirection:"column",background:"#fff",color:"#333",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",borderRadius:"16px",overflow:"hidden",border:"1px solid rgba(0,0,0,0.05)",position:"relative"},children:[y.jsx("button",{className:"ghost icon-btn",onClick:r,style:{color:"#666",width:"28px",height:"28px",position:"absolute",top:"12px",right:"12px",zIndex:2},children:y.jsx(rf,{size:20})}),y.jsx("div",{className:"card-head",style:{justifyContent:"space-between",borderBottom:"1px solid #eee",padding:"16px 20px",background:"#fafafa"},children:y.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#111",margin:0},children:rt.t111})}),y.jsx("div",{style:{padding:"16px 20px",borderBottom:"1px solid #eee"},children:y.jsxs("button",{style:{width:"100%",borderRadius:"8px",padding:"10px",background:"#3b82f6",color:"#fff",border:"none",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onClick:e,children:[y.jsx(H1,{size:16}),rt.t112]})}),y.jsx("div",{style:{flex:1,overflowY:"auto",padding:"0"},children:u?y.jsx("div",{className:"hint text-center",style:{padding:"20px"},children:rt.t113}):s.length===0?y.jsx("div",{className:"hint text-center",style:{padding:"40px"},children:rt.t114}):y.jsx(cA,{list:s,onUse:t,onDelete:o,onRename:a})})]})}),cA=({list:r,onUse:e,onDelete:t,onRename:o})=>{const[a,s]=Qe.useState(null),[u,l]=Qe.useState(""),d=h=>{s(h.id),l(h.title||h.docName||rt.t136)},f=()=>{a&&u.trim()&&o(a,u.trim()),s(null)};return y.jsx("div",{style:{padding:"0"},children:r.map(h=>{var S,b;return y.jsxs("div",{className:"list-item",style:{cursor:"default",flexDirection:"column",alignItems:"flex-start",gap:"8px",padding:"16px 20px",borderBottom:"1px solid #f0f0f0",margin:0,borderRadius:0},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[a===h.id?y.jsx("div",{style:{display:"flex",gap:"8px",flex:1,alignItems:"center"},children:y.jsx("input",{autoFocus:!0,value:u,onChange:p=>l(p.target.value),onKeyDown:p=>p.key==="Enter"&&f(),onBlur:f,style:{flex:1,padding:"4px 8px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"14px"}})}):y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"#333"},children:h.title||h.docName||rt.t136}),y.jsx("button",{className:"ghost icon-btn small",onClick:()=>d(h),style:{width:"24px",height:"24px",color:"#666",opacity:.6},title:rt.t67,children:y.jsx(Zd,{size:14})})]}),y.jsx("div",{className:"hint",style:{fontSize:"12px",color:"#999"},children:new Date(h.timestamp).toLocaleString()})]}),y.jsxs("div",{className:"hint",style:{fontSize:"12px",color:"#666"},children:[rt.t115,((b=(S=h.template)==null?void 0:S.sections)==null?void 0:b.length)||0,rt.t116]}),y.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%",justifyContent:"flex-end",marginTop:"8px"},children:[y.jsx("button",{onClick:()=>t(h.id),style:{background:"#f8fafc",color:"#64748b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 14px",fontSize:"13px",cursor:"pointer",fontWeight:500},children:rt.t25}),y.jsx("button",{onClick:()=>e(h),style:{background:"#3b82f6",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 14px",fontSize:"13px",cursor:"pointer",fontWeight:500},children:rt.t134})]})]},h.id)})})},zv=({appButtonsConfig:r,selectedAppButtonId:e,setSelectedAppButtonId:t,depositGroups:o,updateAppButtonLabel:a,toggleAppButtonGroup:s,saveAppButtonsConfig:u,appButtonsSaving:l})=>y.jsxs("div",{className:"app-buttons-config",children:[y.jsxs("div",{className:"card-head",style:{alignItems:"center",justifyContent:"space-between"},children:[y.jsxs("div",{children:[y.jsx("div",{className:"section-title",children:rt.t1}),y.jsx("div",{className:"hint",children:rt.t2})]}),y.jsx("button",{className:"ghost small",type:"button",onClick:u,disabled:l,style:{pointerEvents:"auto"},children:l?rt.t117:rt.t66})]}),r.length===0?y.jsx("div",{className:"hint",children:rt.t3}):y.jsxs("div",{className:"app-buttons-config-grid",children:[y.jsx("div",{className:"app-buttons-left",children:r.map((d,f)=>{const h=d.id===e,S=(d.groupIds||[]).map(b=>{var p;return((p=o.find(j=>j.id===b))==null?void 0:p.name)||b});return y.jsxs("div",{className:`app-button-item ${h?"active":""}`,onClick:()=>t(d.id),children:[y.jsxs("div",{className:"app-button-row",children:[y.jsx("span",{className:"pill muted",children:f+1}),y.jsx("input",{value:d.label,onChange:b=>a(d.id,b.target.value),onClick:b=>b.stopPropagation(),placeholder:rt.t43})]}),y.jsx("div",{className:"app-button-selected-groups",children:S.length===0?y.jsx("span",{className:"hint",children:rt.t118}):S.map(b=>y.jsx("span",{className:"pill muted",children:b},b))})]},d.id)})}),y.jsxs("div",{className:"app-buttons-right",children:[y.jsx("div",{className:"section-title",style:{fontSize:"14px"},children:rt.t4}),y.jsx("div",{className:"hint",children:rt.t5}),o.length===0?y.jsx("div",{className:"hint",children:rt.t6}):y.jsx("div",{className:"app-button-group-list",children:o.map(d=>{var S;const f=r.find(b=>b.id===e),h=(S=f==null?void 0:f.groupIds)==null?void 0:S.includes(d.id);return y.jsxs("label",{className:`app-button-group-item ${h?"active":""}`,children:[y.jsx("input",{type:"checkbox",checked:!!h,onChange:()=>{f&&s(f.id,d.id)}}),y.jsx("span",{children:d.name})]},d.id)})})]})]})]}),uA=({globalButtons:r,setGlobalButtons:e,saveButtonConfig:t,showToast:o})=>y.jsxs("div",{style:{height:"100%",overflow:"auto"},children:[y.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #f0f0f0",background:"#fafafa"},children:[y.jsx("h4",{style:{margin:"0 0 4px",fontSize:"13px",fontWeight:600},children:rt.t7}),y.jsx("p",{style:{margin:0,fontSize:"12px",color:"#999"},children:rt.t8})]}),y.jsx("div",{style:{padding:"0 12px"},children:r.map(a=>y.jsxs("label",{style:{display:"block",padding:"10px 0",borderBottom:"1px solid #f0f0f0"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:"13px",fontWeight:500},children:a.label}),y.jsx("div",{style:{fontSize:"11px",color:"#999"},children:a.kind})]}),y.jsx("input",{type:"checkbox",checked:a.enabled!==!1,disabled:a.kind==="outline_extract",style:a.kind==="outline_extract"?{opacity:.6,cursor:"not-allowed"}:{},title:a.kind==="outline_extract"?rt.t157:"",onChange:s=>{if(a.kind==="outline_extract")return;const u=s.target.checked,l=r.map(d=>d.id===a.id?{...d,enabled:u}:d);e(l),t({activeButtons:l})}})]}),a.kind==="outline_extract"&&y.jsxs("div",{style:{padding:"8px 0 4px"},children:[y.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:rt.t9}),y.jsx("textarea",{value:a.prompt||"",onChange:s=>{const u=s.target.value,l=r.map(d=>d.id===a.id?{...d,prompt:u}:d);e(l),t({activeButtons:l})},style:{width:"100%",minHeight:"80px",fontSize:"12px"}})]})]},a.id))}),y.jsx("div",{style:{padding:"12px 16px",borderTop:"1px solid #f0f0f0",textAlign:"center"},children:y.jsx("button",{className:"ghost small",type:"button",style:{color:"#666"},onClick:()=>{const a=cu(),s=r.map(l=>l.kind),u=a.filter(l=>!s.includes(l.kind));if(u.length===0){o(rt.t158);return}if(window.confirm(`${rt.t159}${u.length}${rt.t160}`)){const l=u.map(f=>({...f,id:`btn_restored_${Date.now()}_${Math.random().toString(36).slice(2)}`,enabled:!0})),d=[...r,...l];e(d),t({activeButtons:d}),o(rt.t161)}},children:rt.t10})})]}),$v=({deposit:r,updateDepositMode:e})=>y.jsx("label",{className:"deposit-mode",children:y.jsxs("select",{value:Oc(r==null?void 0:r.precipitationMode),onChange:t=>e(r.id,t.target.value),children:[y.jsx("option",{value:"llm",children:rt.t11}),y.jsx("option",{value:"script",children:rt.t12})]})}),dA=({depositGroups:r,selectedDepositGroupId:e,setSelectedDepositGroupId:t,renameDepositGroup:o,replayDepositGroup:a,depositGroupReplay:s})=>r.length===0?y.jsx("p",{className:"hint",style:{padding:"20px",textAlign:"center"},children:rt.t6}):y.jsx("div",{className:"deposit-groups-list",style:{display:"flex",flexDirection:"column",gap:"8px"},children:r.map(u=>{const l=e===u.id,d=(u.depositIds||[]).length;return y.jsx("div",{className:`section deposit-group-item ${l?"selected":""}`,style:{padding:"12px 16px",borderRadius:"8px",background:l?"#e0f2fe":"#f8fafc",border:l?"2px solid #0ea5e9":"1px solid #e2e8f0",cursor:"pointer",transition:"all 0.15s ease"},onClick:()=>t(l?"":u.id),children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx("input",{type:"checkbox",checked:l,onChange:()=>t(l?"":u.id),onClick:f=>f.stopPropagation(),style:{width:"16px",height:"16px"}}),y.jsx("span",{style:{fontWeight:500,fontSize:"14px"},children:Fc(u.name,u.id)}),y.jsxs("span",{className:"pill muted",style:{fontSize:"12px"},children:[d," "]})]}),y.jsxs("div",{style:{display:"flex",gap:"6px"},children:[y.jsx("button",{type:"button",className:"ghost xsmall",onClick:f=>{f.stopPropagation(),t(u.id),o()},children:rt.t67}),y.jsx("button",{type:"button",className:"ghost xsmall",onClick:f=>{f.stopPropagation(),t(u.id),setTimeout(()=>a(),0)},disabled:s[u.id],children:s[u.id]?rt.t119:"Replay"})]})]})},u.id)})}),fA=({depositGroups:r,selectedDepositGroupId:e,deposits:t,depositEditing:o,startEditDeposit:a,applyDepositName:s,handleDepositNameKeyDown:u,replayDepositGroup:l,replayDeposit:d,depositGroupReplay:f,replayState:h,getDepositReplayStatus:S,getDepositReplayReason:b})=>{const p=r.find(N=>N.id===e);if(!p)return null;const j=(p.depositIds||[]).map((N,A)=>{const w=t.find(R=>R.id===N);return w?{...w,_groupIdx:A}:null}).filter(Boolean);return y.jsxs("div",{className:"section deposit-group-panel",children:[y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10},children:[y.jsxs("span",{children:[rt.t15,p.name]}),y.jsx("span",{className:"pill muted",children:j.length})]}),y.jsx("div",{className:"section-actions",style:{gap:6},children:y.jsx("button",{className:"ghost xsmall",type:"button",onClick:l,disabled:f[p.id],children:f[p.id]?rt.t119:"Replay"})})]}),y.jsxs("div",{className:"sections",style:{gap:6},children:[j.length===0&&y.jsx("div",{className:"hint",children:rt.t16}),j.map((N,A)=>{var w;return y.jsx("div",{className:"section",children:y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"nowrap",flex:1,minWidth:0},children:[y.jsx("span",{className:"pill muted",children:A+1}),o[`${N.id}||name`]!==void 0?y.jsx("input",{className:"deposit-name-input",value:o[`${N.id}||name`],onChange:R=>a(N.id,"name",R.target.value),onBlur:()=>void s(N.id),onKeyDown:R=>u(R,N.id),autoFocus:!0,onClick:R=>R.stopPropagation(),style:{border:"1px solid #1a73e8",padding:"2px 6px",borderRadius:"4px",fontSize:"16px",width:"200px"}}):y.jsx("span",{className:"deposit-name",onDoubleClick:R=>{R.stopPropagation(),a(N.id,"name",N.name||N.id)},title:rt.t120,style:{cursor:"text",fontWeight:500},children:N.name||rt.t144}),y.jsx("button",{className:"icon-btn tiny",type:"button",onClick:R=>{R.stopPropagation(),a(N.id,"name",N.name||N.id)},title:rt.t67,style:{width:20,height:20,padding:2,opacity:.5},children:y.jsx(Zd,{size:12})})]}),y.jsxs("div",{className:"section-actions",style:{gap:6},children:[S(N)?y.jsx("span",{className:`status ${S(N).replace(" ","-")}`,title:b(N)||rt.t122,children:S(N)}):null,y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>void d(N.id),disabled:!!((w=h==null?void 0:h[N.id])!=null&&w.running),children:"Replay"})]})]})},`${N.id}_${N._groupIdx}`)})]})]})},hA=({node:r,levelLabel:e,outlineEditing:t,sectionDocLinks:o,sectionDocDone:a,sectionDocPick:s,showOutlineMode:u,processingTab:l,selectedOutlineExec:d,sectionCollapsed:f,summaryExpanded:h,sectionMergeType:S,selectedSummaries:b,docs:p,isSectionHiddenByParent:j,updateSectionLevel:N,setOutlineEditing:A,applyOutlineUpdate:w,cancelEditOutline:R,startEditOutline:I,setSelectedOutlineExec:k,addSectionBelow:G,removeSectionById:re,hasChildSections:Q,toggleSectionCollapse:ie,clearOutlineSummary:U,setSummaryExpanded:ue,setSelectedSummaries:oe,setSectionDocPick:B,addDocToSection:te,removeDocFromSection:P,copyPreviewToSummary:be,addSummaryToSection:Ae,removeSummaryFromSection:ge,copyPreviewToSummaryAtIndex:xe,selectSectionMergeType:ke,renderOutlineNode:Fe})=>{var Be;if(j(r.index))return null;const J=r.section,C=(J==null?void 0:J.level)||1,Z=e[C]||e[1],ne=`${J.id}||title`,ye=t[ne],ce=o[J.id]||[],M=a[J.id]||{},z=s[J.id]||"",fe=z||ce[ce.length-1]||"",se=Array.isArray(J.summaries)&&J.summaries.length>0?J.summaries:J.summary||J.hint?[{id:`${J.id}_sum_0`,content:J.summary||J.hint||""}]:[],me=u&&l!=="records"&&!!fe&&(ce||[]).includes(fe);return y.jsxs("div",{className:`section outline-node level-${Number(C)||1}`,style:{position:"relative"},children:[y.jsxs("div",{className:"section-head",style:{alignItems:"center",justifyContent:"space-between",paddingRight:"100px"},children:[y.jsx("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:ye!==void 0?y.jsxs(y.Fragment,{children:[y.jsxs("select",{value:C,onChange:H=>N(J.id,H.target.value),className:"level-select",children:[y.jsx("option",{value:"1",children:rt.t17}),y.jsx("option",{value:"2",children:rt.t18}),y.jsx("option",{value:"3",children:rt.t19}),y.jsx("option",{value:"4",children:rt.t20})]}),y.jsx("input",{value:ye,onChange:H=>A(ee=>({...ee,[ne]:H.target.value})),style:{minWidth:200}}),y.jsx("button",{className:"ghost small",onClick:()=>w(J.id,"title",ye),children:rt.t21}),y.jsx("button",{className:"ghost small",onClick:()=>R(J.id,"title"),children:rt.t22})]}):y.jsxs(y.Fragment,{children:[y.jsx("span",{children:`${Z}${J.title}`}),y.jsx("button",{className:"ghost xsmall",style:{fontSize:"11px",padding:"2px 6px"},onClick:()=>I(J.id,"title",J.title||""),children:rt.t23})]})}),y.jsxs("div",{className:"section-actions btn-compact",style:{position:"absolute",right:"8px",top:"8px",display:"flex",alignItems:"center",gap:"2px"},children:[y.jsx("label",{className:"inline-check",children:y.jsx("input",{type:"checkbox",checked:!!d[J.id],onChange:H=>k(ee=>({...ee,[J.id]:H.target.checked}))})}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>G(J.id),style:{width:"20px",height:"20px",padding:0,fontSize:"14px",lineHeight:"18px",fontWeight:"bold"},title:"",children:"+"}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>re(J.id),style:{width:"20px",height:"20px",padding:0,fontSize:"14px",lineHeight:"18px",fontWeight:"bold"},title:"",children:""}),Q(J.id)&&y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ie(J.id),style:{fontSize:"11px",padding:"2px 6px",minWidth:"36px",color:f[J.id]?"#0ea5e9":"#64748b"},title:f[J.id]?"":"",children:f[J.id]?"":""})]})]}),y.jsxs("div",{className:"summaries-container",style:{display:"flex",flexDirection:"column",gap:"4px"},children:[se.length===0?y.jsxs("div",{className:"hint",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ae&&Ae(J.id),style:{width:"20px",height:"20px",padding:0,fontSize:"14px",lineHeight:"18px",fontWeight:"bold",color:"#10b981",border:"1px dashed #10b981",borderRadius:"4px"},title:"",children:"+"}),y.jsx("span",{style:{color:"#9ca3af",fontSize:"13px"},children:rt.t127})]}):se.map((H,ee)=>{const X=`${J.id}||summary||${ee}`,T=t[X],L=h[`${J.id}_${ee}`],q=`${J.id}_${ee}`,Se=(b==null?void 0:b[q])||!1;return y.jsxs("div",{className:"hint summary-item",style:{display:"flex",alignItems:"flex-start",gap:8,flexWrap:"wrap",padding:se.length>1?"6px 8px":"0",background:Se?"#dbeafe":se.length>1?ee%2===0?"#f9fafb":"#fff":"transparent",borderRadius:se.length>1?"6px":"0",border:Se?"2px solid #3b82f6":se.length>1?"1px solid #e5e7eb":"none",position:"relative"},children:[y.jsx("input",{type:"checkbox",checked:Se,onChange:Le=>{oe&&oe(Ee=>({...Ee,[q]:Le.target.checked}))},style:{width:"16px",height:"16px",flexShrink:0,marginTop:"3px",cursor:"pointer",accentColor:"#3b82f6"},title:""}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ae&&Ae(J.id,ee+1),style:{width:"18px",height:"18px",padding:0,fontSize:"12px",lineHeight:"16px",fontWeight:"bold",color:"#10b981",border:"1px dashed #10b981",borderRadius:"3px",flexShrink:0,marginTop:"2px"},title:"",children:"+"}),T!==void 0?y.jsxs(y.Fragment,{children:[y.jsx("textarea",{rows:2,value:T,onChange:Le=>A(Ee=>({...Ee,[X]:Le.target.value})),style:{minWidth:260,flex:1}}),y.jsx("button",{className:"ghost small",onClick:()=>w(J.id,"summary",T,ee),children:rt.t24}),y.jsx("button",{className:"ghost small",onClick:()=>R(J.id,"summary",ee),children:rt.t22})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`summary-text ${L?"expanded":""}`,style:{flex:1,minWidth:0,color:H.content?"inherit":"#9ca3af"},children:H.content||rt.t127}),H.content&&y.jsx("button",{className:"ghost xsmall",type:"button",style:{fontSize:"11px",padding:"2px 6px"},onClick:()=>ue(Le=>({...Le,[`${J.id}_${ee}`]:!Le[`${J.id}_${ee}`]})),children:L?rt.t142:rt.t143}),y.jsx("button",{className:"ghost xsmall",style:{fontSize:"11px",padding:"2px 6px",color:"#ef4444"},type:"button",onClick:()=>ge&&ge(J.id,ee),title:"",children:rt.t25}),y.jsx("button",{className:"ghost xsmall",style:{fontSize:"11px",padding:"2px 6px"},onClick:()=>I(J.id,"summary",H.content||"",ee),children:rt.t26})]})]},H.id||ee)}),se.length>1&&y.jsxs("div",{className:"merge-actions",style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px",padding:"4px 8px",background:"#f0fdf4",borderRadius:"6px",border:"1px dashed #86efac"},children:[y.jsxs("span",{style:{fontSize:"12px",color:"#16a34a"},children:[" ",se.length," "]}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ke&&ke(J.id,"paragraph"),style:{fontSize:"11px",padding:"2px 8px",background:(S==null?void 0:S[J.id])==="paragraph"?"#22c55e":"#dcfce7",color:(S==null?void 0:S[J.id])==="paragraph"?"#fff":"#16a34a",border:(S==null?void 0:S[J.id])==="paragraph"?"1px solid #16a34a":"1px solid #86efac",borderRadius:"4px",fontWeight:(S==null?void 0:S[J.id])==="paragraph"?"600":"400",transition:"all 0.15s ease"},title:"",children:""}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ke&&ke(J.id,"sentence"),style:{fontSize:"11px",padding:"2px 8px",background:(S==null?void 0:S[J.id])==="sentence"?"#22c55e":"#dcfce7",color:(S==null?void 0:S[J.id])==="sentence"?"#fff":"#16a34a",border:(S==null?void 0:S[J.id])==="sentence"?"1px solid #16a34a":"1px solid #86efac",borderRadius:"4px",fontWeight:(S==null?void 0:S[J.id])==="sentence"?"600":"400",transition:"all 0.15s ease"},title:"",children:""})]})]}),y.jsxs("div",{className:"link-row outline-row mixed-row",style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginTop:"4px"},children:[y.jsxs("div",{className:"link-actions",style:{display:"flex",alignItems:"center",gap:"4px"},children:[y.jsxs("select",{value:z||"",onChange:H=>B(ee=>({...ee,[J.id]:H.target.value})),style:{maxWidth:"140px",padding:"2px 6px",fontSize:"12px",height:"24px"},children:[y.jsx("option",{value:"",children:rt.t27}),p.map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]}),y.jsx("button",{className:"ghost xsmall",style:{fontSize:"11px",padding:"2px 6px",whiteSpace:"nowrap"},type:"button",onClick:()=>te(J.id),children:rt.t28})]}),ce.map(H=>{const ee=p.find(T=>T.id===H),X=me&&H===fe;return y.jsxs("span",{className:"doc-inline",style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[y.jsxs("span",{className:`pill doc-pill ${M[H]?"done":""}`,style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",borderRadius:"12px",background:M[H]?"#e6f4ea":"#f1f3f4",fontSize:"12px",border:"1px solid transparent"},children:[y.jsx("span",{style:{maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:(ee==null?void 0:ee.name)||H,children:(ee==null?void 0:ee.name)||H}),M[H]&&y.jsx("span",{className:"checkmark",style:{fontSize:"10px"}}),y.jsx("button",{type:"button",className:"pill-close",onClick:()=>P(J.id,H),"aria-label":rt.t29,style:{width:"16px",height:"16px",lineHeight:"14px",fontSize:"14px",padding:0,display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:"transparent",color:"#666",cursor:"pointer"},children:""})]}),X?y.jsx("button",{className:"ghost xsmall",type:"button",style:{fontSize:"11px",padding:"2px 6px"},onClick:()=>be(J.id,fe),children:rt.t30}):null]},H)})]}),(Be=r.children)!=null&&Be.length?y.jsx("div",{className:"outline-children",children:r.children.map(Fe)}):null]},J.id)},pA=r=>{const e=t=>{var o;return y.jsx(hA,{node:t,...r,renderOutlineNode:e},((o=t.section)==null?void 0:o.id)||t.index)};return e},mA=({data:r,setData:e,selectedSectionIndex:t,setSelectedSectionIndex:o,onCancel:a,onDiscard:s,onConfirm:u,onAIProcess:l,getScriptForSection:d,updateScriptForSection:f,isEditMode:h=!1})=>{var N,A;const[S,b]=Qe.useState("llm");if(!r)return null;const p=r.precipitationMode==="llm",j=Qe.useMemo(()=>{if(!r.sections||r.sections.length===0)return"";const w=(R,I)=>{var ue;const k=R.llmScript||{},G=R.originalScript||{},re=R.meta||{},Q=[];Q.push(`===  ${I+1}: ${R.action||R.generalizedTitle||""} ===`),(k.type||re.type)&&Q.push(`${k.type||re.type}`),(k.description||re.actionDescription)&&Q.push(`${k.description||re.actionDescription}`),(k.docName||re.docName)&&Q.push(`${k.docName||re.docName}`),k.docSelector&&Q.push(`${JSON.stringify(k.docSelector)}`),(k.targetSectionTitle||re.targetSectionTitle)&&Q.push(`${k.targetSectionTitle||re.targetSectionTitle}`),(k.targetSectionId||re.sectionId)&&Q.push(`ID${k.targetSectionId||re.sectionId}`),(k.instructions||re.instructions)&&Q.push(`${k.instructions||re.instructions}`),(k.promptContent||re.promptContent)&&Q.push(`Prompt${k.promptContent||re.promptContent}`),(k.aiGuidance||re.aiGuidance)&&Q.push(`AI${k.aiGuidance||re.aiGuidance}`),(k.specialRequirements||re.specialRequirements)&&Q.push(`${k.specialRequirements||re.specialRequirements}`),(k.inputSourceDesc||re.inputSourceDesc)&&Q.push(`${k.inputSourceDesc||re.inputSourceDesc}`),k.contextSummary&&Q.push(`${k.contextSummary}`),k.flexKeywords&&Q.push(`${k.flexKeywords}`),(k.contentStart||re.contentStart)&&Q.push(`${k.contentStart||re.contentStart}`),(k.contentEnd||re.contentEnd)&&Q.push(`${k.contentEnd||re.contentEnd}`),(k.contextBefore||re.contextBefore)&&Q.push(`${k.contextBefore||re.contextBefore}`),(k.contextAfter||re.contextAfter)&&Q.push(`${k.contextAfter||re.contextAfter}`),(k.result||re.result)&&Q.push(`${k.result||re.result}`),(ue=re.outputs)!=null&&ue.summary&&Q.push(`${re.outputs.summary}`);const ie=k.structuredScriptContent||k.rawContent||G.content||R.content;if(ie){const oe=ie.split("__REPLAY_META__")[0].trim();oe&&!Q.some(B=>B.includes(oe.substring(0,50)))&&Q.push(`

${oe}`)}if(re&&Object.keys(re).filter(oe=>re[oe]!==null&&re[oe]!==void 0&&re[oe]!=="").length>0){const oe={};["type","buttonAction","docName","sectionId","targetSectionTitle","buttonId","overwritten","source"].forEach(B=>{re[B]!==null&&re[B]!==void 0&&re[B]!==""&&(oe[B]=re[B])}),Object.keys(oe).length>0&&Q.push(`
${JSON.stringify(oe)}`)}return Q.length>1?Q.join(`
`):`===  ${I+1}: ${R.action||""} ===
`};if(t>=0){const R=r.sections[t];return R?w(R,t):""}return r.sections.map((R,I)=>w(R,I)).join(`

---

`)},[r.sections,t]);return y.jsx("div",{className:"modal-backdrop",onClick:a,children:y.jsxs("div",{className:"modal-card",onClick:w=>w.stopPropagation(),style:{width:"900px",maxWidth:"95vw",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{className:"modal-head",children:[y.jsx("h3",{children:h?" ":" "}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:a,children:""})]}),y.jsxs("div",{className:"modal-body",style:{flex:1,overflow:"auto",padding:"16px"},children:[y.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"16px"},children:[y.jsxs("div",{style:{flex:1},children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:500,color:"#374151"},children:""}),y.jsx("input",{type:"text",value:r.depositName||"",onChange:w=>e(R=>({...R,depositName:w.target.value})),placeholder:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),y.jsxs("div",{style:{width:"200px"},children:[y.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:500,color:"#374151"},children:""}),y.jsxs("select",{value:r.precipitationMode||"llm",onChange:w=>{const R=w.target.value,I=(r.sections||[]).map(k=>({...k,sectionReplayMode:R}));e(k=>({...k,precipitationMode:R,sections:I}))},style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",background:"#fff"},children:[y.jsx("option",{value:"llm",children:" Replay"}),y.jsx("option",{value:"script",children:" Replay"})]})]})]}),y.jsx("div",{style:{marginBottom:"16px",padding:"10px 14px",background:p?"#eff6ff":"#fef3c7",border:`1px solid ${p?"#bfdbfe":"#fcd34d"}`,borderRadius:"6px",fontSize:"13px"},children:p?y.jsxs(y.Fragment,{children:[y.jsx("b",{children:" Replay"}),"Replay  AI Replay"]}):y.jsxs(y.Fragment,{children:[y.jsx("b",{children:" Replay"}),"Replay "]})}),y.jsxs("div",{style:{marginBottom:"16px"},children:[y.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:500,color:"#374151"},children:[" ",((N=r.sections)==null?void 0:N.length)||0," ",y.jsx("span",{style:{fontWeight:400,color:"#6b7280",marginLeft:"8px"},children:""})]}),y.jsxs("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"8px",maxHeight:"120px",overflow:"auto"},children:[y.jsx("div",{onClick:()=>o(-1),style:{padding:"6px 10px",marginBottom:"4px",borderRadius:"4px",cursor:"pointer",background:t===-1?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"transparent",color:t===-1?"#fff":"#6b7280",fontWeight:t===-1?500:400,transition:"all 0.2s"},children:" "}),(A=r.sections)==null?void 0:A.map((w,R)=>{const I=w.sectionReplayMode||r.precipitationMode||"llm",k=I==="llm";return y.jsxs("div",{style:{padding:"6px 10px",borderRadius:"4px",background:t===R?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"transparent",color:t===R?"#fff":"#111827",fontWeight:t===R?500:400,transition:"all 0.2s",marginBottom:R<r.sections.length-1?"2px":"0",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[y.jsxs("span",{onClick:()=>o(R),style:{flex:1,cursor:"pointer",display:"flex",alignItems:"center"},children:[y.jsxs("span",{style:{marginRight:"8px",opacity:.7},children:[R+1,"."]}),y.jsx("span",{children:w.action||w.generalizedTitle||""})]}),y.jsxs("select",{value:I,onClick:G=>G.stopPropagation(),onChange:G=>{G.stopPropagation();const re=G.target.value,Q=[...r.sections||[]];Q[R]={...Q[R],sectionReplayMode:re},e(ie=>({...ie,sections:Q}))},style:{padding:"2px 6px",fontSize:"10px",borderRadius:"3px",border:`1px solid ${k?"#93c5fd":"#fcd34d"}`,background:t===R?"rgba(255,255,255,0.9)":k?"#eff6ff":"#fffbeb",color:k?"#1d4ed8":"#b45309",cursor:"pointer",minWidth:"80px"},title:k?"ReplayAI ":"Replay",children:[y.jsx("option",{value:"llm",children:" "}),y.jsx("option",{value:"script",children:" "})]}),y.jsx("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"3px",background:t===R?"rgba(255,255,255,0.2)":r.validationMode==="strict"?"#fef3c7":"#f0fdf4",color:t===R?"#fff":r.validationMode==="strict"?"#b45309":"#059669",opacity:.9},title:r.validationMode==="strict"?"":"",children:r.validationMode==="strict"?"":""})]},R)})]})]}),y.jsxs("div",{style:{marginBottom:"16px"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsxs("select",{value:S,onChange:w=>b(w.target.value),style:{padding:"4px 12px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px",fontWeight:500,background:S==="llm"?"#eff6ff":"#f0fdf4",color:"#374151",cursor:"pointer"},children:[y.jsx("option",{value:"script",children:" "}),y.jsx("option",{value:"llm",children:" "})]}),y.jsx("span",{style:{fontWeight:400,color:"#6b7280",fontSize:"13px"},children:t>=0?` ${t+1}`:S==="llm"?"":p?"AI ":"Replay "})]}),S==="script"&&y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx("span",{style:{fontSize:"13px",color:"#6b7280"},children:"Replay"}),y.jsxs("select",{value:r.validationMode||"none",onChange:w=>e(R=>({...R,validationMode:w.target.value})),title:r.validationMode==="strict"?" pass":"",style:{padding:"4px 10px",border:`1px solid ${r.validationMode==="strict"?"#f59e0b":"#d1d5db"}`,borderRadius:"4px",fontSize:"13px",background:r.validationMode==="strict"?"#fffbeb":"#fff",color:r.validationMode==="strict"?"#b45309":"#374151",cursor:"pointer"},children:[y.jsx("option",{value:"none",children:" "}),y.jsx("option",{value:"strict",children:" "})]})]})]}),S==="script"?y.jsx("textarea",{value:t>=0?d(r.structuredScript,t):r.structuredScript||"",onChange:w=>{if(t>=0){const R=f(r.structuredScript,t,w.target.value);e(I=>({...I,structuredScript:R}))}else e(R=>({...R,structuredScript:w.target.value}))},placeholder:"Replay ...",style:{width:"100%",height:"220px",padding:"12px",border:`1px solid ${r.structuredScript?"#a7f3d0":"#d1d5db"}`,borderRadius:"6px",fontSize:"13px",background:r.structuredScript?"#f0fdf4":"#fff",color:"#1f2937",fontFamily:'Consolas, Monaco, "Courier New", monospace',resize:"vertical",lineHeight:"1.5"}}):y.jsxs("div",{style:{position:"relative"},children:[y.jsx("textarea",{value:r.llmRecordContent||(r.autoProcessing?"":j),onChange:w=>{e(R=>({...R,llmRecordContent:w.target.value}))},placeholder:r.autoProcessing?" AI ...":" AI ...",disabled:r.autoProcessing,style:{width:"100%",height:"220px",padding:"12px",border:`1px solid ${r.llmRecordContent?"#93c5fd":"#bfdbfe"}`,borderRadius:"6px",fontSize:"13px",background:r.autoProcessing?"#f3f4f6":"#eff6ff",color:r.autoProcessing?"#9ca3af":"#1e40af",fontFamily:'Consolas, Monaco, "Courier New", monospace',resize:"vertical",lineHeight:"1.5"}}),r.autoProcessing&&y.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(255, 255, 255, 0.95)",padding:"16px 24px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#667eea"},children:[y.jsx("span",{style:{fontSize:"20px"},children:""}),y.jsx("span",{children:"AI ..."})]})]})]}),y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"16px"},children:[y.jsxs("label",{style:{display:"block",marginBottom:"6px",fontWeight:500,color:"#374151"},children:["",y.jsx("span",{style:{fontWeight:400,color:"#6b7280",marginLeft:"8px"},children:" AI "})]}),y.jsx("textarea",{value:r.userRequirements||"",onChange:w=>e(R=>({...R,userRequirements:w.target.value})),placeholder:"2...",style:{width:"100%",height:"50px",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",resize:"vertical"}})]}),y.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[y.jsx("button",{onClick:()=>l(S),disabled:r.isProcessing,style:{background:r.isProcessing?"#9ca3af":S==="llm"?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 20px",fontSize:"14px",cursor:r.isProcessing?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:r.isProcessing?" AI ...":S==="llm"?r.llmRecordContent?" AI ":" ReplayAI ":r.structuredScript?" AI ":" Replay "}),y.jsx("span",{style:{color:"#6b7280",fontSize:"13px"},children:S==="llm"?r.llmRecordContent?"":"":r.structuredScript?"":""})]})]})]}),y.jsxs("div",{className:"modal-foot",style:{borderTop:"1px solid #e5e7eb",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:p?" ReplayAI ":" Replay"}),y.jsxs("div",{style:{display:"flex",gap:"12px"},children:[y.jsx("button",{className:"ghost small",type:"button",onClick:a,style:{padding:"8px 16px"},children:""}),!h&&y.jsx("button",{className:"ghost small",type:"button",onClick:s,style:{padding:"8px 16px",color:"#dc2626"},children:""}),y.jsx("button",{type:"button",onClick:u,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 20px",fontSize:"14px",fontWeight:500,cursor:"pointer",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease"},children:h?" ":" "})]})]})]})})},gA=({show:r,onClose:e,depositGroups:t,selectedGroupIds:o,setSelectedGroupIds:a,selectedDepositCount:s,onConfirm:u})=>{if(!r)return null;const l=(d,f)=>{a(f?h=>[...h,d]:h=>h.filter(S=>S!==d))};return y.jsx("div",{className:"modal-backdrop",onClick:e,children:y.jsxs("div",{className:"modal-card",onClick:d=>d.stopPropagation(),style:{width:"450px",maxWidth:"90vw"},children:[y.jsxs("div",{className:"modal-head",children:[y.jsx("h3",{children:" "}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:e,children:""})]}),y.jsxs("div",{className:"modal-body",style:{padding:"16px",maxHeight:"400px",overflow:"auto"},children:[y.jsxs("p",{style:{marginBottom:"12px",color:"#6b7280",fontSize:"13px"},children:[" ",s," "]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map((d,f)=>{const h=o.includes(d.id);return y.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",background:h?"#eff6ff":"#f9fafb",border:h?"1px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",transition:"all 0.15s ease"},children:[y.jsx("input",{type:"checkbox",checked:h,onChange:S=>l(d.id,S.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),y.jsxs("span",{style:{flex:1,fontWeight:500,color:"#374151"},children:[f+1,". ",d.name]}),y.jsxs("span",{style:{fontSize:"12px",color:"#9ca3af"},children:[(d.depositIds||[]).length," "]})]},d.id)})}),t.length===0&&y.jsx("p",{style:{textAlign:"center",color:"#9ca3af",padding:"20px"},children:""})]}),y.jsxs("div",{className:"modal-foot",style:{borderTop:"1px solid #e5e7eb",padding:"12px 16px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[y.jsx("button",{className:"ghost small",type:"button",onClick:e,style:{padding:"8px 16px"},children:""}),y.jsx("button",{type:"button",onClick:u,disabled:o.length===0,style:{background:o.length===0?"#d1d5db":"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 20px",fontSize:"14px",fontWeight:500,cursor:o.length===0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:""})]})]})})},yA=(r={})=>{const{duration:e=3e3}=r,[t,o]=Qe.useState(""),a=Qe.useRef(null),s=Qe.useCallback(()=>{o(""),a.current&&(clearTimeout(a.current),a.current=null)},[]),u=Qe.useCallback((l,d=e)=>{a.current&&clearTimeout(a.current),o(l),d>0&&(a.current=setTimeout(()=>{o(""),a.current=null},d))},[e]);return{toast:t,showToast:u,hideToast:s}};function vA({onSwitch:r}){var Re,Je,et,xt,it,yt,wt,_t,St,En,mn,_r,wn,Jr,so,Nr,gn,Jt,mo,ur,Hr,Bi,Ro,xo,to,No,jo,qi,Qr,yi,Wi,vi,ao,lo,Ri;const[e,t]=Qe.useState(null),[o,a]=Qe.useState([]),[s,u]=Qe.useState(null),[l,d]=Qe.useState(null),[f,h]=Qe.useState(!1),[S,b]=Qe.useState(!1),[p,j]=Qe.useState(!1),{toast:N,showToast:A}=yA({duration:1800}),[w,R]=Qe.useState(!0),[I,k]=Qe.useState("outline"),[G,re]=Qe.useState("deposits"),[Q,ie]=Qe.useState([]),[U,ue]=Qe.useState({}),[oe,B]=Qe.useState({}),[te,P]=Qe.useState(""),[be,Ae]=Qe.useState("doc"),[ge,xe]=Qe.useState(()=>{try{const g=localStorage.getItem("dispatch_input_height");if(g)return Number(g)||60}catch{}return 60});Qe.useEffect(()=>{ge&&ge!==60&&localStorage.setItem("dispatch_input_height",String(ge))},[ge]);const[ke,Fe]=Qe.useState({}),[J,C]=Qe.useState({}),[Z,ne]=Qe.useState({}),[ye,ce]=Qe.useState({}),[M,z]=Qe.useState(""),[fe,he]=Qe.useState({}),[se,me]=Qe.useState({}),[Be,H]=Qe.useState({}),[ee,X]=Qe.useState({}),[T,L]=Qe.useState({}),[q,Se]=Qe.useState({}),[Le,Ee]=Qe.useState(!1),[qe,dt]=Qe.useState(!1),ot={"preview-panel":{left:20,top:20,width:600,height:360},"document-list-panel":{left:20,top:396,width:600,height:376},"processing-panel":{left:636,top:20,width:550,height:376},"operations-panel":{left:636,top:412,width:550,height:360}},[lt,Nt]=Qe.useState(()=>{let g=null;try{const $=localStorage.getItem("layout_panel_positions");$&&(g=JSON.parse($))}catch($){console.warn("Failed to load layout",$)}const x=$=>$&&$.width>100&&$.height>100;if(g){if(g["input-panel"]&&!g["input-form-panel"]){console.log("[Layout Migration] 45...");const E=g["input-panel"],ae=Math.floor(E.height/2)-10;g["input-form-panel"]={left:E.left,top:E.top,width:E.width,height:ae},g["document-list-panel"]={left:E.left,top:E.top+ae+20,width:E.width,height:ae},delete g["input-panel"];try{localStorage.setItem("layout_panel_positions",JSON.stringify(g)),console.log("[Layout Migration] ")}catch(de){console.warn("[Layout Migration] :",de)}}if(g["input-form-panel"]){console.log("[Layout Migration] Removing input-form-panel and expanding document-list-panel...");const E=g["input-form-panel"],ae=g["document-list-panel"];E&&ae&&(g["document-list-panel"]={left:ae.left,top:E.top,width:ae.width,height:ae.top-E.top+ae.height}),delete g["input-form-panel"];try{localStorage.setItem("layout_panel_positions",JSON.stringify(g)),console.log("[Layout Migration 2] Completed")}catch(de){console.warn("[Layout Migration 2] Save failed:",de)}}const $={...ot};return Object.keys(ot).forEach(E=>{g[E]&&x(g[E])&&($[E]=g[E])}),$}console.log("[Panel Init] DEFAULT_LAYOUT:",ot);const K={...ot};return console.log("[Panel Init] ?",K),K}),[Ft,Zt]=Qe.useState(()=>{try{const g=localStorage.getItem("layout_size");if(g){const x=JSON.parse(g);if(x&&Number(x.width)>0&&Number(x.height)>0)return{width:Number(x.width),height:Number(x.height)}}}catch{}return{width:1800,height:1200}}),Rn={"input-form-panel":{left:10,top:10,width:560,height:400},"document-list-panel":{left:10,top:10,width:560,height:300},"document-replay-ui":{left:10,top:320,width:560,height:46},"preview-textarea":{left:10,top:10,width:420,height:250},"preview-toolbar":{left:10,top:270,width:420,height:50},"processing-panel":{left:10,top:60,width:1060,height:720},"processing-tabs":{left:10,top:10,width:560,height:44},"processing-records-toolbar":{left:10,top:60,width:560,height:80},"processing-records-list":{left:10,top:150,width:1060,height:610},"operations-panel":{left:10,top:10,width:1100,height:300}},[$t,Rr]=Qe.useState(()=>{try{const g=localStorage.getItem("layout_content_blocks");if(g){const x=JSON.parse(g);return{...Rn,...x}}}catch(g){console.warn("Failed to load content block positions",g)}return Rn}),An=g=>{if(!g||typeof g!="object")return{...Cc};const x={...g};x["input-panel"]&&!x["input-form-panel"]&&(x["input-form-panel"]=x["input-panel"]||[],delete x["input-panel"]);const K={...Cc};if(Object.keys(Cc).forEach($=>{Array.isArray(x[$])&&(K[$]=x[$])}),K["input-form-panel"]&&(K["input-form-panel"]=K["input-form-panel"].filter($=>$.id!=="btn_input_import_text")),Array.isArray(K["processing-tabs"])){const $=Cc["processing-tabs"]||[],E=new Map(K["processing-tabs"].map(Pe=>[Pe.kind,Pe])),ae=new Map($.map(Pe=>[Pe.kind,Pe]));let de=!1,D=$.map(Pe=>{var $e;const Ue=E.get(Pe.kind);if(!Ue)return Pe;const je=typeof(Ue==null?void 0:Ue.label)=="string"?Fc(Ue.label,""):"";return($e=Zk[Pe.kind])!=null&&$e.includes(je)&&(de=!0),{...Ue,label:Dv[Pe.kind]||Pe.label}});de&&(D=D.map(Pe=>{const Ue=ae.get(Pe.kind);return Ue?{...Pe,left:Ue.left,top:Ue.top,width:Ue.width,height:Ue.height}:Pe})),K["processing-tabs"]=D.concat(K["processing-tabs"].filter(Pe=>!$.some(Ue=>Ue.kind===Pe.kind)))}if(Object.keys(K).forEach($=>{if(!Array.isArray(K[$]))return;const E=Cc[$]||[],ae=new Map(E.map(D=>[D.kind,D])),de=new Map(E.map(D=>[D.id,D]));K[$]=K[$].map(D=>{var $e,De;const Pe=b1(D),Ue=(($e=de.get(D.id))==null?void 0:$e.label)||((De=ae.get(D.kind))==null?void 0:De.label)||Pe.label||D.label||"",je=Fc(Pe.label,Ue);return{...Pe,label:je}})}),Array.isArray(K["processing-records-toolbar"])){const $={group_new:{left:12,top:44},group_update:{left:122,top:44}},E=Cc["processing-records-toolbar"]||[],ae=new Map(K["processing-records-toolbar"].map(D=>[D.kind,D]));Object.entries($).every(([D,Pe])=>{const Ue=ae.get(D);return Ue&&Number(Ue.left)===Pe.left&&Number(Ue.top)===Pe.top})&&(K["processing-records-toolbar"]=K["processing-records-toolbar"].map(D=>{const Pe=E.find(Ue=>Ue.kind===D.kind);return Pe?{...D,left:Pe.left,top:Pe.top,width:Pe.width,height:Pe.height}:D}))}return K},[Zn,or]=Qe.useState(()=>{let g=cp();return g?(g["input-panel"]&&!g["input-form-panel"]&&(console.log("[Button Migration] 45..."),g["input-form-panel"]=g["input-panel"]||[],g["document-list-panel"]=Cc["document-list-panel"]||[],delete g["input-panel"],console.log("[Button Migration] ")),An(g)):Cc}),[jn,dn]=Qe.useState(()=>{try{const g=localStorage.getItem("global-buttons-config");if(g){const K=JSON.parse(g);if(K.activeButtons)return console.log("[GlobalButtons] Loaded from new format:",K.activeButtons.length,"buttons"),K.activeButtons.map(E=>{const ae=b1(E);return ae.label===""&&!ae.kind?(console.log("[GlobalButtons] Auto-fixing missing kind for outline_extract button"),{...ae,kind:"outline_extract"}):ae})}const x=cp();if(x&&Object.keys(x).length>0){console.log("[GlobalButtons] Migrating from old format..."),Sx(x,"app-button-config"),Ax("app-button-config",3);const K=_x(x,lt);return K.activeButtons=(K.activeButtons||[]).map($=>b1($)),localStorage.setItem("global-buttons-config",JSON.stringify(K)),console.log("[GlobalButtons] Migration complete:",K.activeButtons.length,"buttons"),K.activeButtons}}catch(g){console.warn("[GlobalButtons] Failed to load config:",g)}return[]}),[fi,Wn]=Qe.useState(()=>{try{const g=localStorage.getItem("global_buttons_backup");return g?JSON.parse(g):[]}catch{return[]}}),[Un,qr]=Qe.useState(()=>{try{const g=localStorage.getItem("deleted_buttons_config");return g?JSON.parse(g):[]}catch{return[]}}),[yn,kn]=Qe.useState(()=>{try{const g=localStorage.getItem("layout_deleted_blocks");return g?JSON.parse(g):[]}catch{return[]}}),[li,Hs]=Qe.useState(!1);Qe.useEffect(()=>{Hs(!1)},[qe]),Qe.useEffect(()=>{Gt("/api/config/all").then(g=>{let x=!1;if(g.layout&&Object.keys(g.layout).length>0&&(Nt(K=>({...K,...g.layout})),x=!0),g.globalButtons&&g.globalButtons.activeButtons){const K=g.globalButtons.activeButtons.map($=>$.label===""&&!$.kind?(console.log("[GlobalButtons] Auto-fixing missing kind for outline_extract button (backend)"),{...$,kind:"outline_extract"}):$);K.some($=>$.id==="btn_input_upload_file")||(console.log("[GlobalButtons] Restoring missing upload_file button"),K.push({id:"btn_input_upload_file",kind:"upload_file",label:"",x:136,y:408,width:100,height:36,enabled:!0})),dn(K),x=!0}else if(g.buttons&&g.buttons.activeButtons){const K=g.buttons.activeButtons.map($=>$.label===""&&!$.kind?(console.log("[GlobalButtons] Auto-fixing missing kind for outline_extract button (backend)"),{...$,kind:"outline_extract"}):$);K.some($=>$.id==="btn_input_upload_file")||(console.log("[GlobalButtons] Restoring missing upload_file button"),K.push({id:"btn_input_upload_file",kind:"upload_file",label:"",x:136,y:408,width:100,height:36,enabled:!0})),dn(K),x=!0}if(g.contentBlocks&&Object.keys(g.contentBlocks).length>0&&(Rr(K=>({...K,...g.contentBlocks})),x=!0),g.deletedBlocks&&Array.isArray(g.deletedBlocks)&&(kn(g.deletedBlocks),x=!0),Array.isArray(g.llmButtons)&&g.llmButtons.length>0)try{localStorage.setItem(Jd,JSON.stringify(g.llmButtons)),xi(Mv()),x=!0}catch{}if(g.headerTitles&&typeof g.headerTitles=="object"&&(Wr(K=>({...K,...g.headerTitles})),x=!0),g.layoutSize&&Number(g.layoutSize.width)>0&&Number(g.layoutSize.height)>0&&(Zt({width:Number(g.layoutSize.width),height:Number(g.layoutSize.height)}),x=!0),console.log("Loaded config from backend, hasServerData:",x),!x){console.log("Server config empty, syncing local config to server...");const K=localStorage.getItem("layout_panel_positions"),$=localStorage.getItem("global-buttons-config"),E=localStorage.getItem("layout_content_blocks"),ae=localStorage.getItem("layout_deleted_blocks"),de=localStorage.getItem("workbench_header_titles"),D=localStorage.getItem("layout_size"),Pe=localStorage.getItem(Jd);if(K||$||E||de||D||Pe){const Ue={layout:K?JSON.parse(K):lt,globalButtons:$?JSON.parse($):{activeButtons:jn},contentBlocks:E?JSON.parse(E):$t,deletedBlocks:ae?JSON.parse(ae):yn,headerTitles:de?JSON.parse(de):Ln,layoutSize:D?JSON.parse(D):Ft,llmButtons:Pe?JSON.parse(Pe):er};Gt("/api/config/save",{method:"POST",body:Ue}).then(()=>console.log("Synced local config to server"))}}}).catch(g=>console.warn("Failed to load backend config, using local storage",g))},[]);const[Do,Zo]=Qe.useState(null),[ps,Mn]=Qe.useState(null),[ms,Is]=Qe.useState(null),[Yi,uo]=Qe.useState(null),[ni,ki]=Qe.useState(null),[gr,gs]=Qe.useState(null),[Rs,Me]=Qe.useState([]),[He,ht]=Qe.useState(()=>sA()),[qt,hn]=Qe.useState(()=>aA()),[Xt,cn]=Qe.useState({}),[Yt,Xn]=Qe.useState({}),[hi,wi]=Qe.useState({}),[So,jr]=Qe.useState({}),[yo,io]=Qe.useState(""),[Vr,On]=Qe.useState(""),[wr,pi]=Qe.useState([]),[Xr,Yr]=Qe.useState(""),[Mi,sr]=Qe.useState({}),[_i,Ni]=Qe.useState(!1),[kr,To]=Qe.useState(Ov),[Co,Qo]=Qe.useState(!1),[Ar,Ji]=Qe.useState({dirPath:"",autoLoadFiles:!0}),[Ei,fo]=Qe.useState(!1),[ys,ss]=Qe.useState(!1),[as,ar]=Qe.useState(""),[Ln,Wr]=Qe.useState(()=>{var K,$;const g={eyebrow:{text:"EXPERIENCE STUDIO",style:{},position:{left:0,top:0},width:200,height:30},title:{text:"",style:{},position:{left:0,top:24},width:200,height:40}},x=(E,ae)=>Fc(E,ae);try{const E=localStorage.getItem("workbench_header_titles");if(E){const ae=JSON.parse(E);return{eyebrow:{...g.eyebrow,...(ae==null?void 0:ae.eyebrow)||{},text:x((K=ae==null?void 0:ae.eyebrow)==null?void 0:K.text,g.eyebrow.text)},title:{...g.title,...(ae==null?void 0:ae.title)||{},text:x(($=ae==null?void 0:ae.title)==null?void 0:$.text,g.title.text)}}}}catch(E){console.warn("Failed to load header titles",E)}return g}),[vs,ws]=Qe.useState(null),[Oi,xr]=Qe.useState(null),[ri,$r]=Qe.useState(null),xs=g=>{var E;const K={"input-form-panel":rt.t149,"document-list-panel":rt.t150,"processing-panel":rt.t151,"preview-panel":rt.t152,"operations-panel":rt.t153}[g]||g;return Fc((E=lt[g])==null?void 0:E.customTitle,"")||K},Zi=Qe.useRef(null),kt=Qe.useRef(null),$i=Qe.useRef(null),vo=Qe.useRef(null);Qe.useEffect(()=>{if(f)return;const g=jn.find($=>$.kind==="outline_extract");let x=!1,K=[...jn];if(g)g.enabled===!1&&(K=K.map($=>$.id===g.id?{...$,enabled:!0}:$),x=!0);else{console.log("Guardian: Restoring missing outline_extract button");const $=cu().find(E=>E.kind==="outline_extract");$&&(K=[{...$,id:`btn_guardian_${Date.now()}`,enabled:!0},...K],x=!0)}x&&(dn(K),localStorage.setItem("global-buttons-config",JSON.stringify({activeButtons:K})))},[jn,f]);const[Qi,pn]=Qe.useState({text:"",start:0,end:0}),[Pr,Aa]=Qe.useState({}),[Na,rr]=Qe.useState({}),[Nn,mi]=Qe.useState([]),[na,Oo]=Qe.useState(!1),[da,ls]=Qe.useState(!1),[cs,Tt]=Qe.useState(!1),[on,Ht]=Qe.useState(!1),[fn,rn]=Qe.useState(null),[un,lr]=Qe.useState(-1),[Qn,Fn]=Qe.useState(null),[cr,Bt]=Qe.useState(!1),[Mt,mr]=Qe.useState([]),[Kn,Fr]=Qe.useState(null),[er,xi]=Qe.useState(()=>Mv()),Ti=er.find(g=>g.kind==="dispatch");er.find(g=>g.kind==="final_generate"),er.filter(g=>g.kind==="outline_action").slice(0,3);const O=Object.keys(fe||{}).filter(g=>fe[g]),le=(Qi.text||"").toString().trim().length>0;w&&I==="outline"&&O.length>0;const Ce=g=>{try{return structuredClone(g)}catch{return JSON.parse(JSON.stringify(g))}},Oe=(g,x)=>{try{const K=JSON.stringify(x||{});return`${(g||"").toString()}

${eh}
${K}`}catch{return(g||"").toString()}},Xe=g=>{const x=(g||"").toString(),K=x.indexOf(eh);if(K===-1)return null;const $=x.slice(K+eh.length).trim();try{const E=JSON.parse($);return E&&typeof E=="object"?E:null}catch{return null}},gt=1,vt=(g,x=600)=>{const K=(g??"").toString();return K.length<=x?K:`${K.slice(0,x)}...`},ln=g=>{if(!g)return"";if(typeof g=="string")return g;if(typeof g!="object")return String(g);const x=(g.kind||"").toString();return x==="manual_text"?`${g.length??0}`:x==="upload_file"?`${g.docName||rt.t135}`:x==="doc_preview"?`${g.docName||""}`:x==="doc_resource"?`${g.docName||""}`:x==="selection"?`${g.docName||""} ${g.start??0}-${g.end??0}`:x==="outline_selected"?`${Array.isArray(g.sectionIds)?g.sectionIds.length:g.count??0}`:x==="doc_link_pick"?`${g.sectionId||""} ${g.docName||""}`:x?`${x}`:JSON.stringify(g)},In=g=>{if(!g)return"";if(typeof g=="string")return g;if(typeof g!="object")return String(g);const x=(g.kind||g||"").toString(),K=()=>g.sectionTitle||g.sectionId||"";return x==="outline_apply"?`${g.count??0}`:x==="outline_section_summary"?`${K()}`:x==="outline_section_summary_batch"?`${g.count??(Array.isArray(g.sectionIds)?g.sectionIds.length:0)}`:x==="outline_section_title"?`${K()}`:x==="outline_section_docs"?`${K()}`:x==="dispatch_result"?"":x==="final_preview"?"":x?`${x}`:JSON.stringify(g)},yr=(g,x=[])=>{var de,D,Pe,Ue,je;const K=g&&typeof g=="object"?g:{},$=Array.isArray(K.inputs)?K.inputs:[],E=Array.isArray(K.destinations)?K.destinations:[],ae=[];if(K.type==="add_doc"){const $e=((de=$.find(De=>De.kind==="upload_file"))==null?void 0:de.docName)||rt.t135;ae.push(""+$e)}else if(K.type==="insert_to_summary_multi"){const $e=$.find(ct=>ct.kind==="selection"),De=($e==null?void 0:$e.docName)||K.docName||"",Ye=Array.isArray(K.targetSummaries)?K.targetSummaries:[];if(ae.push(" (insert_to_summary_multi)"),ae.push(`${De}`),$e){const ct=$e.textHead||((D=$e.textExcerpt)==null?void 0:D.slice(0,30))||"",Dt=$e.textTail||((Pe=$e.textExcerpt)==null?void 0:Pe.slice(-30))||"";ae.push(`${ct}......${Dt}${$e.textLength||0}`),$e.contextBefore&&ae.push(`...${$e.contextBefore}`),$e.contextAfter&&ae.push(`${$e.contextAfter}...`)}Ye.length>0&&(ae.push(` ${Ye.length} `),Ye.forEach((ct,Dt)=>{const mt=ct.sectionLevel===1?"":ct.sectionLevel===2?"":"";ae.push(`  ${Dt+1}. ${mt}${ct.sectionTitle}[${ct.summaryIndex}]${ct.hadContentBefore?"":""}`)})),(Ue=K.outputs)!=null&&Ue.summary&&ae.push(`${K.outputs.summary}`)}else if(K.type==="dispatch_multi_summary"){const $e=Array.isArray(K.targetSummaries)?K.targetSummaries:[];ae.push(" (dispatch_multi_summary)"),ae.push(`${K.instructions||K.promptContent||""}`),$e.length>0&&(ae.push(` ${$e.length} `),$e.forEach((De,Ye)=>{const ct=De.sectionLevel===1?"":De.sectionLevel===2?"":"",Dt=De.originalContentExcerpt?`${De.originalContentExcerpt.slice(0,30)}...`:"";ae.push(`  ${Ye+1}. ${ct}${De.sectionTitle}[${De.summaryIndex}]${Dt}`)})),(je=K.outputs)!=null&&je.summary&&ae.push(`${K.outputs.summary}`)}else{const $e=(K.record||K.process||rt.t71).toString().slice(0,50);if(ae.push(""+$e),$.length){const De=$.map(ln).filter(Boolean).join("");ae.push(""+De)}if(K.process){let De=(K.process||"").toString();ae.push(""+De)}if(K.outputs&&K.outputs.summary&&ae.push(""+(K.outputs.summary||"").toString()),E.length){const De=E.map(In).filter(Boolean).join("");ae.push(""+De)}}return Array.isArray(x)&&x.length&&(ae.push(""),ae.push(...x.filter(Boolean))),ae.join(`
`).trim()},br=g=>{if(g!=null&&g.precipitationMode)return Oc(g.precipitationMode);const x=g==null?void 0:g.buttonId;if(x){const K=er.find($=>$.id===x);if(K!=null&&K.precipitationMode)return Oc(K.precipitationMode)}return Fv},Yn=(g,x,K)=>{var de,D,Pe,Ue,je,$e,De,Ye,ct,Dt;({...x||{}});const $={sceneId:(s==null?void 0:s.id)||null,loadedDocs:Array.isArray(o)?o.map(mt=>({id:mt.id,name:mt.name})).slice(0,10):[],loadedDocsCount:Array.isArray(o)?o.length:0,hasOutline:!!((D=(de=s==null?void 0:s.customTemplate)==null?void 0:de.sections)!=null&&D.length||(Ue=(Pe=s==null?void 0:s.template)==null?void 0:Pe.sections)!=null&&Ue.length),outlineSectionsCount:(($e=(je=s==null?void 0:s.customTemplate)==null?void 0:je.sections)==null?void 0:$e.length)||((Ye=(De=s==null?void 0:s.template)==null?void 0:De.sections)==null?void 0:Ye.length)||0,outlineSectionTitles:(((ct=s==null?void 0:s.customTemplate)==null?void 0:ct.sections)||((Dt=s==null?void 0:s.template)==null?void 0:Dt.sections)||[]).slice(0,10).map(mt=>mt.title||""),timestamp:Date.now()},E={v:gt,ts:Date.now(),buttonAction:(x==null?void 0:x.buttonAction)||(x==null?void 0:x.type)||g,buttonLabel:(x==null?void 0:x.buttonLabel)||"",buttonId:(x==null?void 0:x.buttonId)||"",type:(x==null?void 0:x.type)||g,precipitationMode:br(x),docName:(x==null?void 0:x.docName)||"",selectedDocName:(x==null?void 0:x.selectedDocName)||"",docId:(x==null?void 0:x.docId)||"",outlineId:(x==null?void 0:x.outlineId)||"",outlineTitle:(x==null?void 0:x.outlineTitle)||"",sectionId:(x==null?void 0:x.sectionId)||"",targetSectionIds:(x==null?void 0:x.targetSectionIds)||[],targetSectionId:(x==null?void 0:x.targetSectionId)||(x==null?void 0:x.sectionId)||"",targetSectionTitle:(x==null?void 0:x.targetSectionTitle)||"",docSelector:(x==null?void 0:x.docSelector)||null,intentDescription:(x==null?void 0:x.intentDescription)||g,expectedResult:(x==null?void 0:x.expectedResult)||"",record:(x==null?void 0:x.record)||"",overwritten:x==null?void 0:x.overwritten,source:(x==null?void 0:x.source)||"",inputs:Array.isArray(x==null?void 0:x.inputs)?x.inputs.map(mt=>({kind:mt.kind,docName:mt.docName||"",contextSummary:mt.contextSummary||mt.docName||"",sourceType:mt.sourceType||mt.kind,text:mt.text,textExcerpt:mt.textExcerpt?vt(mt.textExcerpt,200):void 0,textLength:mt.textLength,textHead:mt.textHead,textTail:mt.textTail,contextBefore:mt.contextBefore?vt(mt.contextBefore,80):void 0,contextAfter:mt.contextAfter?vt(mt.contextAfter,80):void 0,contentFeatures:mt.contentFeatures||null,selectionStart:mt.start,selectionEnd:mt.end,summaryKeys:mt.summaryKeys,targetDescriptions:mt.targetDescriptions})):[],inputKind:(x==null?void 0:x.inputKind)||"",inputSourceType:(x==null?void 0:x.inputSourceType)||(x==null?void 0:x.inputKind)||"",destinations:Array.isArray(x==null?void 0:x.destinations)?x.destinations.map(mt=>typeof mt=="string"?mt:typeof mt=="object"?{kind:mt.kind,sectionTitle:mt.sectionTitle||mt.label||"",sectionId:mt.sectionId,sectionLevel:mt.sectionLevel,summaryIndex:mt.summaryIndex,hadContentBefore:mt.hadContentBefore,originalContentExcerpt:mt.originalContentExcerpt,count:mt.count}:mt):[],targetSummaries:Array.isArray(x==null?void 0:x.targetSummaries)?x.targetSummaries.map(mt=>({sectionId:mt.sectionId,summaryIndex:mt.summaryIndex,sectionTitle:mt.sectionTitle,sectionLevel:mt.sectionLevel,summaryKey:mt.summaryKey,hadContentBefore:mt.hadContentBefore,originalContentExcerpt:mt.originalContentExcerpt,originalContentLength:mt.originalContentLength,contentFeatures:mt.contentFeatures})):[],selectedSectionTitles:(x==null?void 0:x.selectedSectionTitles)||[],isMultiSummaryMode:(x==null?void 0:x.isMultiSummaryMode)||!1,outputs:x!=null&&x.outputs&&typeof x.outputs=="object"?{summary:x.outputs.summary||"",usedModel:x.outputs.usedModel||"",detailExcerpt:x.outputs.detailExcerpt?vt(x.outputs.detailExcerpt,100):void 0,outputContent:x.outputs.outputContent||"",outputContentExcerpt:x.outputs.outputContent?vt(x.outputs.outputContent,500):void 0,edits:Array.isArray(x.outputs.edits)?x.outputs.edits:[],editsCount:x.outputs.editsCount,status:x.outputs.status||"done",targetSections:x.outputs.targetSections||[],generatedSections:x.outputs.generatedSections||[]}:x==null?void 0:x.outputs,process:x!=null&&x.process?vt(x.process,100):void 0,actionDescription:(x==null?void 0:x.actionDescription)||"",instructions:(x==null?void 0:x.instructions)||"",promptContent:(x==null?void 0:x.promptContent)||(x==null?void 0:x.instructions)||"",inputSourceDesc:(x==null?void 0:x.inputSourceDesc)||"",outputTargetDesc:(x==null?void 0:x.outputTargetDesc)||"",inputContent:(x==null?void 0:x.inputContent)||"",inputContentExcerpt:x!=null&&x.inputContent?vt(x.inputContent,500):void 0,targetSectionsDetail:(x==null?void 0:x.targetSectionsDetail)||[],aiGuidance:(x==null?void 0:x.aiGuidance)||"",specialRequirements:(x==null?void 0:x.specialRequirements)||"",afterSection:(x==null?void 0:x.afterSection)||null,newSection:(x==null?void 0:x.newSection)||null,targetSection:(x==null?void 0:x.targetSection)||null,removedSections:(x==null?void 0:x.removedSections)||[],context:$},ae=yr(E,K);Ka(g,Oe(ae,E))},Ui=async g=>{const x=(g||"").toString().trim();if(!x)throw new Error("");const K=await Gt("/api/multi/replay/read-file",{method:"POST",body:{fileName:x}});if(K.error)throw new Error(K.error);let $=K.content;if(K.needsParsing&&K.ext===".docx"){const D=atob(K.content),Pe=new Uint8Array(D.length);for(let $e=0;$e<D.length;$e++)Pe[$e]=D.charCodeAt($e);const Ue=new Blob([Pe],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),je=new File([Ue],x,{type:Ue.type});$=await Bv(je)}const E=await Gt("/api/docs",{method:"POST",body:{name:x,content:($??"").toString()}}),ae=E==null?void 0:E.doc,de=!!(E!=null&&E.overwritten);if(a(D=>nh(D,[ae])),d(ae.id),z(ae.content||""),s)try{const D=Array.from(new Set([ae.id,...s.docIds||[]])),{scene:Pe}=await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{docIds:D}});u(Pe)}catch{}return{doc:ae,overwritten:de,text:$}},eo=async g=>(await Ui(g)).doc,Ci=g=>{const x=g&&typeof g=="object"?g:{},K=x.kind==="regex"?"regex":"keywords",$=x.mode==="multi"?"multi":"single",E=x.pick==="first"?"first":"newest",ae=(x.extension||"").toString().trim(),de=Array.isArray(x.keywords)?x.keywords.map(je=>(je||"").toString()).filter(Boolean):[],D=(x.pattern||"").toString(),Pe=(x.flags||"i").toString()||"i",Ue=(x.description||"").toString();return{kind:K,mode:$,pick:E,extension:ae,keywords:de,pattern:D,flags:Pe,description:Ue}},Lo=(g,x)=>{const K=Ci(x),$=(g||"").toString();if(!$)return!1;const E=$.toLowerCase();if(K.extension&&!E.endsWith(K.extension.toLowerCase()))return!1;if(K.kind==="regex"){if(!K.pattern.trim())return!1;try{return new RegExp(K.pattern,K.flags||"i").test($)}catch{return!1}}return K.keywords.length?K.keywords.every(ae=>E.includes((ae||"").toString().toLowerCase())):!0},wo=async()=>{const g=await Gt("/api/multi/replay/files");if(g.error)throw new Error(g.error);if(!g.files||!g.files.length)throw g.dirPath?new Error(""):new Error(" Replay ");return g.files.map(x=>({name:x.name,kind:"file",ext:x.ext}))},Io=async g=>{var de;const x=Ci(g),K=await wo();let $=K.filter(D=>Lo((D==null?void 0:D.name)||"",x));if(!$.length&&x.description){const D=x.description.trim();$=K.filter(Pe=>{const Ue=((Pe==null?void 0:Pe.name)||"").trim(),je=Ue.replace(/\.[^.]+$/,"");return Ue===D||je===D||Ue===D.replace(/\.[^.]+$/,"")})}if(!$.length&&((de=x.keywords)==null?void 0:de.length)>=1){const D=x.keywords.length===1?1:Math.max(1,Math.ceil(x.keywords.length*.6));$=K.filter(Pe=>{const Ue=((Pe==null?void 0:Pe.name)||"").toLowerCase();return x.keywords.filter($e=>Ue.includes(($e||"").toLowerCase())).length>=D})}if(!$.length&&x.description){const D=x.description.replace(/\.[^.]+$/,"").replace(/[()\[\]]/g,"").trim();D.length>=2&&($=K.filter(Pe=>((Pe==null?void 0:Pe.name)||"").toLowerCase().replace(/[()\[\]]/g,"").includes(D.toLowerCase())))}if(!$.length){const D=x.description?""+x.description+"":"",Pe=x.kind==="regex"?"regex="+(x.pattern||"()"):"keywords="+((x.keywords||[]).join("")||"()")+(x.extension?" ext="+x.extension:""),Ue=K.slice(0,5).map(je=>je.name).join(", ");throw new Error(""+D+""+Pe+""+(Ue||"()"))}let E=$;if(x.mode!=="multi"){const D=$.slice().sort((Pe,Ue)=>((Pe==null?void 0:Pe.name)||"").localeCompare((Ue==null?void 0:Ue.name)||"","zh-CN"));E=D[0]?[D[0]]:[$[0]]}else E=$.sort((D,Pe)=>((D==null?void 0:D.name)||"").localeCompare((Pe==null?void 0:Pe.name)||"","zh-CN"));const ae=[];for(const D of E){const Pe=await Ui(D.name);ae.push({name:D.name,overwritten:!!Pe.overwritten})}return{count:ae.length,names:ae.map(D=>D.name),overwrittenAny:ae.some(D=>D.overwritten)}},Ea=async({btn:g,preferDocName:x})=>{var Dt,mt,tt;if(!(s!=null&&s.id))throw new Error("scene ");const $=ld(g==null?void 0:g.io,{dataSource:g==null?void 0:g.dataSource,outputTarget:g==null?void 0:g.outputTarget}).filter(ft=>ft.enabled);if(!$.some(ft=>ft.output==="titles"))throw new Error("");let E=null;if(x){const ft=Br(x);ft?E=o.find(Qt=>Qt.id===ft):Ar!=null&&Ar.dirPath&&(E=await eo(x))}if(E||(E=o.find(ft=>ft.id===l)||null),!E)throw new Error("");const ae=E!=null&&E.id&&E.id===l&&(M||"").toString().trim()?M:(E.content||"").toString(),D=Array.from(new Set($.map(ft=>ft.dataSource))).map(ft=>ft==="selected_doc"?`
${E.content||""}`.trim():`
${ae}`.trim()),Pe=`${E.name||""}

${D.join(`

---

`)}`.trim();if(!Pe.trim())throw new Error("");const Ue=await Gt("/api/template/auto",{method:"POST",body:{text:Pe,prompt:(g==null?void 0:g.prompt)||""}});if(!(Ue!=null&&Ue.template))throw new Error("template");if((Ue==null?void 0:Ue.usedModel)===!1)if(Ue!=null&&Ue.blocked)A("");else throw new Error(" QWEN_API_KEY server.js ");const je=$.some(ft=>ft.output==="summaries"&&ft.target==="summary"),$e=$.some(ft=>ft.output==="summaries"&&ft.target==="title"),De=$.some(ft=>ft.output==="titles"&&ft.target==="summary"),Ye={...Ue.template,sections:(((Dt=Ue.template)==null?void 0:Dt.sections)||[]).map(ft=>{const Qt=((ft==null?void 0:ft.title)||"").toString(),_n=((ft==null?void 0:ft.summary)||"").toString().trim(),ut=$e&&_n?`${Qt} - ${_n}`:Qt,xn=[];De&&Qt&&xn.push(Qt),je&&_n&&xn.push(_n);const ei=xn.join(`
`).trim();return{...ft,title:ut,summary:ei}})},ct=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:Ye}});t(ct.template),u(ct.scene),R(!0);try{const ft={id:`outline_${Date.now()}`,template:ct.template,timestamp:Date.now(),docName:E.name||"",title:E.name||"",sectionMergeType:void 0};await Gt("/api/multi/outlines",{method:"POST",body:ft}),mi(Qt=>[ft,...Qt])}catch(ft){console.error("",ft)}return((tt=(mt=ct==null?void 0:ct.template)==null?void 0:mt.sections)==null?void 0:tt.length)||0};Qe.useEffect(()=>{try{localStorage.setItem(Jd,JSON.stringify(er))}catch{}Gt("/api/config/save",{method:"POST",body:{llmButtons:er}}).catch(g=>{console.warn("",g)})},[er]),Qe.useEffect(()=>{try{localStorage.setItem(Iw,JSON.stringify(He)),localStorage.setItem(Rw,String(qt||0))}catch{}},[He,qt]),Qe.useEffect(()=>{if((qt||0)>0||!He.length)return;const g=He.reduce((x,K)=>{const $=/_(\d+)$/.exec((K==null?void 0:K.id)||""),E=$?Number($[1]):0;return Number.isFinite(E)&&E>x?E:x},0);g>0&&hn(g)},[qt,He]),Qe.useEffect(()=>{if(!e||!e.sections||!e.sections.length)return;const x=setTimeout(async()=>{try{await Gt("/api/outline/cache",{method:"POST",body:{template:e}})}catch(K){console.log("",K)}},500);return()=>clearTimeout(x)},[e]),Qe.useEffect(()=>{(async()=>{try{const ae=await Gt("/api/layout");ae!=null&&ae.layout&&(Nt(ae.layout),Zo(ae.layout))}catch(ae){console.error(":",ae);const de=bx();de&&(Nt(de),Zo(de))}try{const ae=await Gt("/api/buttons");if(ae!=null&&ae.buttons&&W1(ae.buttons)){const de=An(ae.buttons);or(de),Mn(de)}}catch(ae){console.error(":",ae);const de=cp();if(de){const D=An(de);or(D),Mn(D)}}let x=null;try{const ae=await Gt("/api/outline/cache");ae!=null&&ae.template&&(x=ae.template)}catch(ae){console.log("",ae)}const K=await Gt("/api/template");t(x||K.template);const $=await Gt("/api/docs"),E=await ha();E&&(u(E),ne(E.sectionDocLinks||{})),a($.docs||[]),($.docs||[]).length&&d($.docs[0].id),await es(!0),await bs(!0);try{const ae=await Gt("/api/multi/app-buttons"),de=Bl(ae);de.length&&To(de)}catch(ae){console.error("",ae)}try{const ae=await Gt("/api/multi/replay/config");ae&&Ji({dirPath:ae.dirPath||"",autoLoadFiles:ae.autoLoadFiles!==!1})}catch(ae){console.error(" Replay ",ae)}try{const ae=await Gt("/api/multi/outlines");Array.isArray(ae)&&mi(ae)}catch(ae){console.error("",ae)}})().catch(x=>A(x.message))},[]),Qe.useEffect(()=>{s!=null&&s.sectionDocLinks&&ne(s.sectionDocLinks)},[s]),Qe.useEffect(()=>{s!=null&&s.id&&localStorage.setItem(x1,s.id)},[s==null?void 0:s.id]),Qe.useEffect(()=>{const g=o.find(x=>x.id===l);z((g==null?void 0:g.content)||""),pn({text:"",start:0,end:0})},[l,o]);const ra=g=>{uo(g.id),Fr({...g,precipitationMode:Oc(g==null?void 0:g.precipitationMode),io:ld(g==null?void 0:g.io,{dataSource:g==null?void 0:g.dataSource,outputTarget:g==null?void 0:g.outputTarget})})},[Ha,Pl]=Qe.useState(!1),Dl=()=>{const x={id:`btn_${Date.now()}`,kind:"outline_extract",label:"",enabled:!0,precipitationMode:Fv,prompt:u0,io:[{id:`io_${Date.now()}_1`,enabled:!0,dataSource:"preview",output:"titles",target:"title"},{id:`io_${Date.now()}_2`,enabled:!0,dataSource:"preview",output:"summaries",target:"summary"}]};xi(K=>[...K,x]),ra(x)},ia=g=>{const x=[...yn,g],K=[...new Set(x)];kn(K),localStorage.setItem("layout_deleted_blocks",JSON.stringify(K))},fl=g=>{const x=yn.filter(K=>K!==g);kn(x),localStorage.setItem("layout_deleted_blocks",JSON.stringify(x))},Ga=g=>{if(!confirm(""))return;const x=yn.filter(K=>K!==g);kn(x),localStorage.setItem("layout_deleted_blocks",JSON.stringify(x))},Ka=(g,x)=>{Le&&Me(K=>[...K,{id:`sec_${Date.now()}_${K.length+1}`,action:g,content:x,requirements:{...Qk}}])},Fo=()=>{Ee(!0),Me([]),A("")},Va=()=>{if(!Le)return;if(S||f){A("");return}if(Rs.length===0){Ee(!1),A("");return}const g=hl(Rs),x=[...Rs];rn({sections:x,userRequirements:"",structuredScript:g,llmRecordContent:"",aiOptimizedContent:null,isProcessing:!0,depositName:"",precipitationMode:"llm",autoProcessing:!0}),lr(-1),Ht(!0),setTimeout(()=>{us(x,"llm",!0)},100)},hl=g=>{if(!g||g.length===0)return"";const x=[];return x.push(""),x.push(""),g.forEach((K,$)=>{var de;x.push(`===  ${$+1}: ${K.action||""} ===`);const E=K.content||"",ae=E.match(/__REPLAY_META__\n(.+)/s);if(ae)try{const D=JSON.parse(ae[1]),Pe=D.type||D.buttonAction||"";if(x.push(`${Pe}`),Pe==="insert_to_summary"||Pe==="fill_summary"){const je=D.inputs||[],$e=je.find(_n=>_n.kind==="selection"),De=je.find(_n=>_n.kind==="outline_selected"),Ye=D.docName||($e==null?void 0:$e.docName)||"";x.push(`${Ye}`);const ct=($e==null?void 0:$e.textExcerpt)||($e==null?void 0:$e.text)||"";ct&&(x.push(`${ct.slice(0,150)}${ct.length>150?"...":""}`),x.push(`"${ct.slice(0,100)}${ct.length>100?"...":""}"`));const Dt=($e==null?void 0:$e.contextBefore)||"",mt=($e==null?void 0:$e.contextAfter)||"";(Dt||mt)&&(x.push(""),Dt&&x.push(`  : "${Dt}"`),mt&&x.push(`  : "${mt}"`));const tt=D.outputs||{},ft=tt.targetSections||[],Qt=D.destinations||[];if(ft.length>0){const _n=ft.map(ut=>ut.title||"").join("");x.push(`${_n}`)}else if(Qt.length>0){const _n=Qt.map(ut=>ut.sectionTitle||ut.kind||"").filter(Boolean).join("");_n&&x.push(`${_n}`)}tt.summary&&x.push(`${tt.summary}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="add_doc"||Pe==="upload_doc"){x.push(`${D.docName||""}`);const je=D.outputs||{};je.summary&&x.push(`${je.summary}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="outline_extract"){D.actionDescription&&x.push(`${D.actionDescription}`),x.push(`${D.selectedDocName||D.docName||""}`);const je=D.inputContentExcerpt||"";if(je){const Ye=je.length>200?je.substring(0,200)+"...":je;x.push(`${Ye}`)}const De=(D.outputs||{}).generatedSections||[];if(De.length>0)x.push(` ${De.length} `),De.slice(0,10).forEach((Ye,ct)=>{const Dt=Ye.levelText||`${Ye.level}`;if(x.push(`  ${ct+1}. [${Dt}] ${Ye.title}`),Ye.summary){const mt=Ye.summary.length>80?Ye.summary.substring(0,80)+"...":Ye.summary;x.push(`     ${mt}`)}}),De.length>10&&x.push(`  ...  ${De.length-10} `);else{const Ye=D.context||{};Ye.outlineSectionsCount&&x.push(` ${Ye.outlineSectionsCount} `),(de=Ye.outlineSectionTitles)!=null&&de.length&&x.push(`${Ye.outlineSectionTitles.slice(0,5).join("")}${Ye.outlineSectionTitles.length>5?"...":""}`)}D.aiGuidance&&x.push(`AI${D.aiGuidance}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="add_outline_section"){D.actionDescription&&x.push(`${D.actionDescription}`);const je=D.afterSection;if(je){if(x.push(`${je.levelText||`${je.level}`}${je.title}`),je.summary){const De=je.summary.length>100?je.summary.substring(0,100)+"...":je.summary;x.push(`  ${De}`)}}else x.push("");const $e=D.newSection;$e&&(x.push(`${$e.levelText||`${$e.level}`}${$e.title}`),$e.summary&&x.push(`  ${$e.summary}`)),D.aiGuidance&&x.push(`AI${D.aiGuidance}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="delete_outline_section"){D.actionDescription&&x.push(`${D.actionDescription}`);const je=D.targetSection;if(je&&(x.push(`${je.levelText||`${je.level}`}${je.title}`),je.summary)){const De=je.summary.length>100?je.summary.substring(0,100)+"...":je.summary;x.push(`  ${De}`)}const $e=D.removedSections||[];$e.length>0&&(x.push(` ${$e.length} `),$e.slice(0,8).forEach((De,Ye)=>{x.push(`  ${Ye+1}. [${De.levelText||`${De.level}`}] ${De.title}`)}),$e.length>8&&x.push(`  ...  ${$e.length-8} `)),D.aiGuidance&&x.push(`AI${D.aiGuidance}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="restore_history_outline"){x.push(`${D.outlineTitle||D.outlineId||""}`);const je=D.outputs||{};je.summary&&x.push(`${je.summary}`),x.push(`${D.specialRequirements||""}`)}else if(Pe==="dispatch"||Pe==="execute_instruction"){const je=D.actionDescription||"";je&&x.push(`${je}`);const $e=D.promptContent||D.instructions||D.process||"";$e&&x.push(`${$e}`);const De=D.inputSourceDesc||"",Ye=D.inputKind||"";if(De)x.push(`${De}`);else if(Ye){const ut={doc:"",result:"",batch_outline:"",outline_selected_batch:"",outline_unprocessed_docs:""};x.push(`${ut[Ye]||Ye}`)}const ct=D.inputContent||D.inputContentExcerpt||"";if(ct){const ut=ct.length>300?ct.substring(0,300)+"...":ct;x.push(`${ut}`)}const Dt=D.targetSectionsDetail||[];if(Dt.length>0)x.push(` ${Dt.length} `),Dt.forEach((ut,xn)=>{const ei=ut.levelText||`${ut.level||1}`;if(x.push(`  ${xn+1}. ${ei}${ut.title}`),ut.originalSummary){const ci=ut.originalSummary.length>100?ut.originalSummary.substring(0,100)+"...":ut.originalSummary;x.push(`     ${ci}`)}});else{const ut=D.selectedSectionTitles||[];ut.length>0&&x.push(`${ut.join("")}`)}const mt=D.outputTargetDesc||"";mt&&x.push(`${mt}`);const tt=D.outputs||{},ft=tt.edits||[];if(ft.length>0)x.push(` ${ft.length} `),ft.forEach((ut,xn)=>{const ei=ut.newValueExcerpt||ut.newValue||"",ci=ei.length>150?ei.substring(0,150)+"...":ei;x.push(`  ${xn+1}. : ${ut.field||"summary"}`),x.push(`     : ${ci}`)});else if(tt.outputContent){const ut=tt.outputContent.length>300?tt.outputContent.substring(0,300)+"...":tt.outputContent;x.push(`${ut}`)}else tt.summary&&x.push(`${tt.summary}`);const Qt=D.aiGuidance||"";Qt&&x.push(`AI${Qt}`);const _n=D.specialRequirements||"";_n&&_n!==""&&x.push(`${_n}`)}else{D.docName&&x.push(`${D.docName}`),D.outlineTitle&&x.push(`${D.outlineTitle}`),D.process&&x.push(`${D.process}`);const je=D.outputs||{};je.summary&&x.push(`${je.summary}`),x.push(`${D.specialRequirements||""}`)}const Ue=D.context||{};Ue.loadedDocsCount>0&&x.push(` ${Ue.loadedDocsCount} `)}catch{x.push(`${E.slice(0,200)}...`)}else x.push(`${E.slice(0,200)}...`);x.push("")}),x.push("---"),x.push(": AI "),x.join(`
`)},cc=(g,x)=>{if(!g||x<0)return g||"";const K=/(\[\d+\][^\[]*?)(?=\[\d+\]|===\s*Replay|===\s*|$)/gs,$=[...g.matchAll(K)];if($.length>0&&x<$.length)return $[x][1].trim();const E=/(===\s*\s*\d+[:][^=]*?===[\s\S]*?)(?====\s*|===\s*Replay|===\s*|---\n|$)/g,ae=[...g.matchAll(E)];return ae.length>0&&x<ae.length?ae[x][1].trim():g},uc=(g,x,K)=>{if(!g||x<0)return K;const $=/(\[\d+\][^\[]*?)(?=\[\d+\]|===\s*Replay|===\s*|$)/gs,E=[...g.matchAll($)];if(E.length>0&&x<E.length){const D=[];let Pe=0;return E.forEach((Ue,je)=>{je===x?(D.push(g.slice(Pe,Ue.index)),D.push(K)):D.push(g.slice(Pe,Ue.index+Ue[1].length)),Pe=Ue.index+Ue[1].length}),D.push(g.slice(Pe)),D.join("")}const ae=/(===\s*\s*\d+[:][^=]*?===[\s\S]*?)(?====\s*|===\s*Replay|===\s*|---\n|$)/g,de=[...g.matchAll(ae)];if(de.length>0&&x<de.length){const D=[];let Pe=0;return de.forEach((Ue,je)=>{je===x?(D.push(g.slice(Pe,Ue.index)),D.push(K+`

`)):D.push(g.slice(Pe,Ue.index+Ue[1].length)),Pe=Ue.index+Ue[1].length}),D.push(g.slice(Pe)),D.join("")}return K},us=async(g,x="llm",K=!1)=>{var $;if(!g||g.length===0){console.warn("[processDepositWithAIWithSections] sections "),rn(E=>({...E,isProcessing:!1,autoProcessing:!1})),A(" ");return}console.log("[processDepositWithAIWithSections]  AI , sections:",g.length),rn(E=>({...E,isProcessing:!0}));try{const ae=`**** Replay 

** - **
1. ****
2. "68""xxx"
3. "373"""
4. 


${g.map((Ue,je)=>`${je+1}${Ue.action||""}
${Ue.content||""}`).join(`

---

`)}

 - 
1. ****"68"  "{{}}"
2. ****
3. ****
4. ****
5. ****






===  1:  ===
 insert_to_summary_multi, dispatch 


XXXX




AI

===  2: ... ===
...

Replay 
`;console.log("[processDepositWithAIWithSections]  AI ...");const de=new AbortController,D=setTimeout(()=>de.abort(),6e4),Pe=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:ae}],maxTokens:3e3}),signal:de.signal});if(clearTimeout(D),Pe.ok){const Ue=await Pe.json();if(console.log("[processDepositWithAIWithSections] AI :",{usedModel:Ue.usedModel,contentLength:($=Ue.content)==null?void 0:$.length}),(Ue==null?void 0:Ue.usedModel)===!1||(Ue==null?void 0:Ue.content)===null){rn(je=>({...je,isProcessing:!1,autoProcessing:!1})),A(" AI QWEN_API_KEY");return}if(Ue!=null&&Ue.content){const je=Ue.content.trim(),$e=je.match(/(.+)/),De=$e?$e[1].trim():"";rn(Ye=>({...Ye,llmRecordContent:je,depositName:De||Ye.depositName,isProcessing:!1,autoProcessing:!1})),A(" ");return}}rn(Ue=>({...Ue,isProcessing:!1,autoProcessing:!1})),A(" AI ")}catch(E){console.error("[processDepositWithAIWithSections] :",E),rn(ae=>({...ae,isProcessing:!1,autoProcessing:!1})),E.name==="AbortError"?A(" AI "):A(" AI ")}},oa=async(g="llm",x=!1)=>{var K,$;if(fn){rn(E=>({...E,isProcessing:!0}));try{const E=fn.sections.map((ct,Dt)=>`${Dt+1}${ct.action||""}
${ct.content||""}`).join(`

---

`),ae=((K=fn.userRequirements)==null?void 0:K.trim())||"",de=fn.accumulatedRequirements||"",D=de?ae?`${de}

${ae}`:de:ae||"";let Pe,Ue,je;g==="llm"?(Ue=fn.llmRecordContent||"",je=Ue&&Ue.length>0,x&&!je?Pe=`**** Replay 

** - **
1. ****
2. "68""xxx"
3. "373"""
4. 


${E}

 - 
1. ****"68"  "{{}}"
2. ****
3. ****
4. ****
5. ****






===  1:  ===
 insert_to_summary_multi, dispatch 


XXXX




AI

===  2: ... ===
...

Replay 
`:Pe=`

** - **
1. "XXX = A + B + C"
2. 
3. "' XXX 'XXX =  +  +  + "
   
    {{}} 
   {{}} = {{}} + {{}} + {{}} + {{}}
4. 


${E}

${je?`
${Ue}
`:""}

${D}

 - 
1. ****
2. ****
3. 
4.  AI 
5. 






===  1:  ===



 {{}} /
{{}} = {{1}} + {{2}} + ...




AI1.  2.  3. 

===  2: ... ===
...`):(Ue=fn.structuredScript||"",je=Ue&&!Ue.includes(": AI "),Pe=`

** Replay **


${E}

${je?`
${Ue}
`:""}

${D}

 - 
1. ****
2. ********
3.  {{}}{{}}
4.  Replay
5. ""






===  ===

[1] 
- :  add_doc, outline_extract, insert_to_summary
- : 
- : 
- : 
- : 
- :   
- : 
- AI:  Replay AI 
- : 

[2] ...

=== Replay  ===


===  ===
 Replay `);const $e=new AbortController,De=setTimeout(()=>$e.abort(),6e4);let Ye;try{Ye=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:Pe}],maxTokens:3e3}),signal:$e.signal})}catch(ct){if(clearTimeout(De),ct.name==="AbortError"){console.error("AI "),rn(Dt=>({...Dt,isProcessing:!1,autoProcessing:!1})),A(" AI ");return}throw ct}if(clearTimeout(De),Ye.ok){const ct=await Ye.json();if((ct==null?void 0:ct.usedModel)===!1||(ct==null?void 0:ct.content)===null){rn(Dt=>({...Dt,isProcessing:!1,autoProcessing:!1})),A(" AI QWEN_API_KEY");return}if(ct!=null&&ct.content){const Dt=ct.content.trim(),mt=Dt.match(/(.+)/),tt=mt?mt[1].trim():"",ft=!x&&(($=fn.userRequirements)!=null&&$.trim())?fn.accumulatedRequirements?`${fn.accumulatedRequirements}
${fn.userRequirements.trim()}`:fn.userRequirements.trim():fn.accumulatedRequirements||"";g==="llm"?(rn(Qt=>({...Qt,llmRecordContent:Dt,depositName:tt||Qt.depositName,accumulatedRequirements:ft,userRequirements:x?Qt.userRequirements:"",isProcessing:!1,autoProcessing:!1,optimizeCount:(Qt.optimizeCount||0)+1})),A(x?" ":" ")):(rn(Qt=>({...Qt,structuredScript:Dt,depositName:tt||Qt.depositName,accumulatedRequirements:ft,userRequirements:x?Qt.userRequirements:"",isProcessing:!1,autoProcessing:!1,optimizeCount:(Qt.optimizeCount||0)+1})),x||A(" "));return}}rn(ct=>({...ct,isProcessing:!1,autoProcessing:!1})),A(" AI ")}catch(E){console.error("AI ",E),rn(ae=>({...ae,isProcessing:!1,autoProcessing:!1})),A(" AI ")}}},fa=async()=>{var ut,xn,ei,ci,zi;if(!fn)return;const g=!!Qn,x=g?null:He.length+1;let K;g?K=Qn:(K=`_${x}`,He.some(Ct=>Ct.id===K)&&(K=`_${x}_${Date.now()}`));const $=fn.precipitationMode||"llm",E=g?K:`${x}`,ae=((ut=fn.depositName)==null?void 0:ut.trim())||E,de=((xn=fn.structuredScript)==null?void 0:xn.trim())||"",D=Ct=>{if(!Ct)return[];const tr=[],Ke=(sn,bt)=>{const Kt=new RegExp(`-\\s*${bt}[:]\\s*(.*?)(?=-\\s*\\w||$)`,"s"),Bn=sn.match(Kt);if(Bn)return Bn[1].trim();const Jn=new RegExp(`${bt}\\s*(.*?)(?=|===|$)`,"s"),Sr=sn.match(Jn);return Sr?Sr[1].trim():""},We=/\[(\d+)\]\s*([^\n]+)([\s\S]*?)(?=\[\d+\]|===\s*Replay|===\s*|$)/g;let Et;for(;(Et=We.exec(Ct))!==null;){const sn=parseInt(Et[1]),bt=Et[2].trim(),Kt=Et[3].trim();tr.push({stepNum:sn,title:bt,type:Ke(Kt,""),description:Ke(Kt,""),condition:Ke(Kt,""),contentDescription:Ke(Kt,""),contextBefore:Ke(Kt,""),contextAfter:Ke(Kt,""),targetTitle:Ke(Kt,""),aiGuidance:Ke(Kt,"AI")||Ke(Kt,"AI")||Ke(Kt,""),fallbackParams:Ke(Kt,""),rawContent:Kt})}if(tr.length===0){const sn=/===\s*\s*(\d+)[:]\s*([^=\n]+?)\s*===([\s\S]*?)(?====\s*|===\s*Replay|===\s*|---|\n\n\n|$)/g;for(;(Et=sn.exec(Ct))!==null;){const bt=parseInt(Et[1]),Kt=Et[2].trim(),Bn=Et[3].trim();tr.push({stepNum:bt,title:Kt,type:Ke(Bn,"")||Ke(Bn,""),description:Ke(Bn,"")||Ke(Bn,"Prompt"),condition:Ke(Bn,""),contentDescription:Ke(Bn,""),contextBefore:Ke(Bn,""),contextAfter:Ke(Bn,""),targetTitle:Ke(Bn,"")||Ke(Bn,""),aiGuidance:Ke(Bn,"AI")||Ke(Bn,"AI")||Ke(Bn,""),inputSource:Ke(Bn,""),outputTarget:Ke(Bn,""),outputContent:Ke(Bn,""),specialRequirements:Ke(Bn,""),rawContent:Bn})}}return tr},Pe=((ei=fn.llmRecordContent)==null?void 0:ei.trim())||"",Ue=D(de),je=D(Pe),De=(Ct=>{if(!Ct)return"";const tr=/AI\s*([\s\S]*?)(?=[^A]|AI|\[|\n\n\n|---\n|===|$)/s,Ke=Ct.match(tr);return Ke?Ke[1].trim():""})(Pe);console.log("[saveDeposit]  llmRecordContent  aiGuidance:",(De==null?void 0:De.substring(0,200))||"()");const Ye=Ue.map((Ct,tr)=>{const Ke=je[tr]||{};return{...Ct,aiGuidance:Ke.aiGuidance||Ct.aiGuidance||(tr===0?De:""),description:Ct.description||Ke.description||"",specialRequirements:Ke.specialRequirements||Ct.specialRequirements||"",condition:Ke.condition||Ct.condition||"",contentDescription:Ke.contentDescription||Ct.contentDescription||""}});let ct=Ye.length>0?Ye:je;ct.length===0&&De&&(ct=[{stepNum:1,aiGuidance:De}]),console.log("[saveDeposit] :",{structuredStepsCount:Ue.length,llmRecordStepsCount:je.length,mergedStepsCount:ct.length,directAiGuidance:(De==null?void 0:De.substring(0,100))||"()",firstStepAiGuidance:((zi=(ci=ct[0])==null?void 0:ci.aiGuidance)==null?void 0:zi.substring(0,100))||"()"});const Dt=$==="llm",mt=Ct=>{if(!Ct)return null;const tr=Ct.match(/__REPLAY_META__\n(.+)/s);if(tr)try{return JSON.parse(tr[1])}catch{}return null},tt=(Ct,tr,Ke)=>{const We=tr||{};return{...We,type:(Ct==null?void 0:Ct.type)||We.type||Ke.action,buttonAction:(Ct==null?void 0:Ct.type)||We.buttonAction||"dispatch",intentDescription:(Ct==null?void 0:Ct.description)||We.intentDescription||Ke.action,inputSourceDesc:(Ct==null?void 0:Ct.inputSource)||We.inputSourceDesc||"",outputTargetDesc:(Ct==null?void 0:Ct.outputTarget)||We.outputTargetDesc||"",targetTitle:(Ct==null?void 0:Ct.targetTitle)||We.targetTitle||"",contentDescription:(Ct==null?void 0:Ct.contentDescription)||We.contentDescription||"",contextBefore:(Ct==null?void 0:Ct.contextBefore)||We.contextBefore||"",contextAfter:(Ct==null?void 0:Ct.contextAfter)||We.contextAfter||"",aiGuidance:(Ct==null?void 0:Ct.aiGuidance)||We.aiGuidance||"",specialRequirements:(Ct==null?void 0:Ct.specialRequirements)||We.specialRequirements||"",generatedByLLM:!0,generatedAt:Date.now()}},ft=(Ct,tr)=>{if(!Ct)return null;const Ke=new RegExp(`(\\[${tr}\\][^\\[]*?)(?=\\[\\d+\\]|===\\s*Replay|===\\s*|$)`,"s"),We=Ct.match(Ke);if(We)return We[1].trim();const Et=new RegExp(`(===\\s*\\s*${tr}[:][^=]*?===.*?)(?====\\s*|===\\s*Replay|===\\s*|---|


|$)`,"s"),sn=Ct.match(Et);return sn?sn[1].trim():null},Qt=fn.sections.map((Ct,tr)=>{var Sr,bo;const Ke=ct[tr]||null,We=mt(Ct.content)||Ct.meta,Et=ft(de,tr+1),sn=Et||(Ke==null?void 0:Ke.rawContent)||Ct.content;let bt=We;Dt&&Ke&&(bt=tt(Ke,We,Ct));const Kt=bt?`${sn}

${eh}
${JSON.stringify(bt)}`:sn,Bn={action:Ct.action,buttonLabel:Ct.buttonLabel,content:Kt,meta:bt,rawContent:Ct.content};let Jn=null;return Dt&&(Jn={title:(Ke==null?void 0:Ke.title)||Ct.action||"",type:(Ke==null?void 0:Ke.type)||(We==null?void 0:We.type)||"",description:(Ke==null?void 0:Ke.description)||(We==null?void 0:We.actionDescription)||"",condition:(Ke==null?void 0:Ke.condition)||"",contentDescription:(Ke==null?void 0:Ke.contentDescription)||"",contextBefore:(Ke==null?void 0:Ke.contextBefore)||(We==null?void 0:We.contextBefore)||"",contextAfter:(Ke==null?void 0:Ke.contextAfter)||(We==null?void 0:We.contextAfter)||"",targetTitle:(Ke==null?void 0:Ke.targetTitle)||(We==null?void 0:We.outputTargetDesc)||"",aiGuidance:(Ke==null?void 0:Ke.aiGuidance)||(We==null?void 0:We.aiGuidance)||"",inputSource:(Ke==null?void 0:Ke.inputSource)||(We==null?void 0:We.inputSourceDesc)||"",outputTarget:(Ke==null?void 0:Ke.outputTarget)||(We==null?void 0:We.outputTargetDesc)||"",specialRequirements:(Ke==null?void 0:Ke.specialRequirements)||(We==null?void 0:We.specialRequirements)||"",structuredScriptContent:Et||(Ke==null?void 0:Ke.rawContent)||"",rawContent:(Ke==null?void 0:Ke.rawContent)||"",actionDescription:(We==null?void 0:We.actionDescription)||(Ke==null?void 0:Ke.description)||"",instructions:(We==null?void 0:We.instructions)||(We==null?void 0:We.promptContent)||"",promptContent:(We==null?void 0:We.promptContent)||(We==null?void 0:We.instructions)||"",inputKind:(We==null?void 0:We.inputKind)||"",inputSourceType:(We==null?void 0:We.inputSourceType)||(We==null?void 0:We.inputKind)||"",inputSourceDesc:(We==null?void 0:We.inputSourceDesc)||"",inputContent:(We==null?void 0:We.inputContent)||"",inputContentExcerpt:(We==null?void 0:We.inputContentExcerpt)||"",inputContentIsReference:!0,inputs:(We==null?void 0:We.inputs)||[],targetSectionsDetail:(We==null?void 0:We.targetSectionsDetail)||[],selectedSectionIds:(We==null?void 0:We.selectedSectionIds)||[],selectedSectionTitles:(We==null?void 0:We.selectedSectionTitles)||[],outlineSegmentsMeta:(We==null?void 0:We.outlineSegmentsMeta)||[],destinations:(We==null?void 0:We.destinations)||[],outputs:(We==null?void 0:We.outputs)||{},outputContent:(Ke==null?void 0:Ke.outputContent)||((Sr=We==null?void 0:We.outputs)==null?void 0:Sr.outputContent)||"",outputTargetDesc:(We==null?void 0:We.outputTargetDesc)||"",afterSection:(We==null?void 0:We.afterSection)||null,newSection:(We==null?void 0:We.newSection)||null,targetSection:(We==null?void 0:We.targetSection)||null,removedSections:(We==null?void 0:We.removedSections)||[],generatedSections:((bo=We==null?void 0:We.outputs)==null?void 0:bo.generatedSections)||[],docName:(We==null?void 0:We.docName)||"",selectedDocName:(We==null?void 0:We.selectedDocName)||"",originalScriptContent:Kt,originalScriptRawContent:Ct.content,replayMeta:bt}),{...Ct,content:Kt,meta:bt,llmScript:Jn,originalScript:Bn,lastReplayStatus:null,lastReplayMode:null,lastReplayTime:null,lastReplayError:null}}),_n={id:K,name:ae,title:ae,createdAt:Date.now(),precipitationMode:$,validationMode:fn.validationMode||"none",sections:Qt,structuredScript:Dt?de:null,llmRecordContent:Dt&&fn.llmRecordContent||"",accumulatedRequirements:Dt&&fn.accumulatedRequirements||"",optimizeCount:Dt&&fn.optimizeCount||0,summary:Dt&&dc(de,"")||"",replayGuidance:Dt&&dc(de,"Replay ")||"",supportsScriptFallback:!0};if(g){ht(Ct=>Ct.map(tr=>tr.id===K?_n:tr)),A(`${$==="llm"?" Replay":" Replay"}`);try{await Gt(`/api/multi/precipitation/records/${K}`,{method:"PUT",body:_n})}catch(Ct){console.error("",Ct);try{await Gt("/api/multi/precipitation/records",{method:"POST",body:_n})}catch(tr){console.error("",tr)}}}else{ht(Ct=>[...Ct,_n]),A(`${$==="llm"?" Replay":" Replay"}`);try{await Gt("/api/multi/precipitation/records",{method:"POST",body:_n})}catch(Ct){console.error("",Ct)}}g||(Ee(!1),Me([])),Ht(!1),rn(null),Fn(null)},dc=(g,x)=>{if(!g)return"";const K=new RegExp(`${x}(.+?)(?=\\n|$)`),$=g.match(K);return $?$[1].trim():""},js=()=>{Ht(!1),rn(null),lr(-1),Fn(null)},Ta=g=>{var $;const x=He.find(E=>E.id===g);if(!x){A("");return}let K=x.structuredScript||"";!K&&(($=x.sections)==null?void 0:$.length)>0&&(K=x.sections.map((E,ae)=>{const de=E.llmScript||{},D=[`[${ae+1}] ${E.action||de.description||""}`];return de.description&&D.push(`- : ${de.description}`),(de.instructions||de.promptContent)&&D.push(`- : ${de.instructions||de.promptContent}`),de.inputSourceDesc&&D.push(`- : ${de.inputSourceDesc}`),(de.targetTitle||de.outputTargetDesc)&&D.push(`- : ${de.targetTitle||de.outputTargetDesc}`),de.aiGuidance&&D.push(`- AI : ${de.aiGuidance}`),de.specialRequirements&&D.push(`- : ${de.specialRequirements}`),E.content&&!de.description&&D.push(`- : ${E.content.substring(0,200)}${E.content.length>200?"...":""}`),D.join(`
`)}).join(`

---

`)),rn({sections:x.sections||[],depositName:x.name||x.id,precipitationMode:x.precipitationMode||"llm",validationMode:x.validationMode||"none",structuredScript:K,llmRecordContent:x.llmRecordContent||"",userRequirements:"",accumulatedRequirements:x.accumulatedRequirements||"",optimizeCount:x.optimizeCount||0,isProcessing:!1}),Fn(g),lr(-1),Ht(!0)},Ol=()=>{ls(!0)},Fl=async()=>{var g,x;if(!e||!e.sections.length){A("");return}Oo(!0);try{const K={id:`outline_${Date.now()}`,template:Ce(e),timestamp:Date.now(),docName:((g=o.find($=>$.id===l))==null?void 0:g.name)||"",title:((x=o.find($=>$.id===l))==null?void 0:x.name)||"",sectionMergeType:Object.keys(q).length>0?{...q}:void 0};await Gt("/api/multi/outlines",{method:"POST",body:K}),mi($=>[K,...$]),A("")}catch(K){console.error("",K),A("")}finally{Oo(!1)}},Ca=async g=>{if(g!=null&&g.template){Oo(!0);try{const x=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:g.template}});t(x.template),u(x.scene),R(!0),g.sectionMergeType&&typeof g.sectionMergeType=="object"?Se(g.sectionMergeType):Se({}),Yn("",{type:"restore_history_outline",outlineId:g.id,outlineTitle:g.title||g.docName,process:`${g.title||g.docName}`,destinations:[{kind:"outline_panel"}],outputs:{summary:`${g.title||g.docName}`}}),A(""),ls(!1)}catch(x){console.error("",x),A("")}finally{Oo(!1)}}},Gs=async g=>{if(confirm("")){Oo(!0);try{await Gt(`/api/multi/outlines/${g}`,{method:"DELETE"}),mi(x=>x.filter(K=>K.id!==g)),A("")}catch(x){console.error("",x),A("")}finally{Oo(!1)}}},Ps=async(g,x)=>{Oo(!0);try{await Gt(`/api/multi/outlines/${g}`,{method:"PATCH",body:{title:x}}),mi(K=>K.map($=>$.id===g?{...$,title:x}:$)),A("")}catch(K){console.error("",K),A("")}finally{Oo(!1)}},es=async(g=!1)=>{try{const x=await Gt("/api/multi/precipitation/records");if(Array.isArray(x)){const K=x.map(E=>({...E,precipitationMode:Oc(E==null?void 0:E.precipitationMode),sections:Array.isArray(E==null?void 0:E.sections)?E.sections:[]}));ht(K);const $=x.reduce((E,ae)=>{const de=/_(\d+)$/.exec((ae==null?void 0:ae.id)||""),D=de?Number(de[1]):0;return Number.isFinite(D)&&D>E?D:E},0);$>0&&hn($)}return!0}catch(x){return console.error("",x),g||A(""),!1}},La=g=>{if(!g)return null;const x=typeof g.id=="string"&&g.id.trim()?g.id.trim():`group_${Date.now()}`,K=typeof g.name=="string"&&g.name.trim()?g.name.trim():x,$=Array.isArray(g.depositIds)?Array.from(new Set(g.depositIds.filter(Boolean))):[],E=typeof g.createdAt=="number"?g.createdAt:Date.now();return{...g,id:x,name:K,depositIds:$,createdAt:E}},bs=async(g=!1)=>{try{const x=await Gt("/api/multi/precipitation/groups");if(Array.isArray(x)){const K=x.map(La).filter(Boolean);pi(K),Xr&&!K.some($=>$.id===Xr)&&Yr("")}return!0}catch(x){return console.error("",x),g||A(""),!1}},ha=async()=>{var K;const g=localStorage.getItem(x1);if(g)try{const $=await Gt(`/api/scene/${g}`);if($!=null&&$.scene)return $.scene}catch{}const x=await Gt("/api/scene",{method:"POST",body:{docIds:[]}});return(K=x==null?void 0:x.scene)!=null&&K.id&&localStorage.setItem(x1,x.scene.id),(x==null?void 0:x.scene)||null},Ds=()=>He.filter(g=>Xt==null?void 0:Xt[g.id]).map(g=>g.id),pa=async()=>{const g=Ds();if(!g.length){A("");return}const x=`_${wr.length+1}`,K=window.prompt(rt.t164,x);if(K===null)return;const $=K.trim()||x,E={id:`group_${Date.now()}`,name:$,depositIds:g,createdAt:Date.now()};pi(ae=>[...ae,E]),Yr(E.id),re("groups");try{await Gt("/api/multi/precipitation/groups",{method:"POST",body:E}),A("")}catch(ae){console.error("",ae),A(""),await bs(!0)}},ho=async(g,x,K)=>{if(!g)return;const $={...x};Array.isArray($.depositIds)&&($.depositIds=$.depositIds.filter(Boolean)),pi(E=>E.map(ae=>ae.id===g?{...ae,...$}:ae));try{await Gt(`/api/multi/precipitation/groups/${g}`,{method:"PATCH",body:$}),K&&A(K)}catch(E){console.error("",E),A(""),await bs(!0)}},Xa=async()=>{const g=wr.find($=>$.id===Xr);if(!g){A("");return}const x=window.prompt("",g.name);if(x===null)return;const K=x.trim()||g.name;await ho(g.id,{name:K},"")},ma=async()=>{if(!Ds().length){A("");return}if(wr.length===0){A("");return}mr([]),Bt(!0)},sa=async()=>{const g=Ds();if(!g.length){A("");return}if(!Mt.length){A("");return}for(const K of Mt){const $=wr.find(E=>E.id===K);if($){const E=Array.from(new Set([...$.depositIds||[],...g]));await ho($.id,{depositIds:E})}}const x=Mt.map(K=>{var $;return($=wr.find(E=>E.id===K))==null?void 0:$.name}).filter(Boolean).join("");A(`${x}`),Bt(!1),mr([]),Mt.length===1&&Yr(Mt[0])},pl=async()=>{const g=wr.find(x=>x.id===Xr);if(!g){A("");return}if(confirm(' "'+g.name+'" ')){pi(x=>x.filter(K=>K.id!==g.id)),Xr===g.id&&Yr("");try{await Gt(`/api/multi/precipitation/groups/${g.id}`,{method:"DELETE"}),A("")}catch(x){console.error("delete deposit group failed",x),A(""),await bs(!0)}}},Ia=async()=>{var K,$;const g=wr.find(E=>E.id===Xr);if(!g){A("");return}if(Mi[g.id])return;if(sr(E=>({...E,[g.id]:!0})),A(`Replay${g.name}`),console.log("[Replay] ..."),!e||!e.sections||e.sections.length===0){console.log("[Replay] ..."),A("...");try{const E=await Gt("/api/template");(($=(K=E==null?void 0:E.template)==null?void 0:K.sections)==null?void 0:$.length)>0&&(t(E.template),console.log("[Replay] ",E.template.sections.length,""),await new Promise(ae=>setTimeout(ae,200)))}catch(E){console.error("[Replay] :",E),A("Replay ")}}const x=g.depositIds||[];for(let E=0;E<x.length;E++){const ae=x[E],de=He.find(D=>D.id===ae);if(!de){console.warn(`[Replay]  ${ae} `);continue}console.log(`[Replay]  ${E+1}/${x.length}: ${de.name}`),A(` ${E+1}/${x.length}: ${de.name}`),await Xc(ae),console.log(`[Replay]  ${E+1}/${x.length}: ${de.name}`)}sr(E=>({...E,[g.id]:!1})),A("Replay")},Bl=g=>!g||!Array.isArray(g.buttons)?Ov:g.buttons.map((x,K)=>{if(!x||typeof x!="object")return null;const $=typeof x.id=="string"&&x.id.trim()?x.id.trim():`app_btn_${K}`,E=typeof x.label=="string"?Pu(x.label).trim():"";if(!E)return null;const ae=Array.isArray(x.groupIds)?x.groupIds.filter(Boolean):[];return{id:$,label:E,groupIds:ae}}).filter(Boolean),ml=(g,x)=>{To(K=>K.map($=>$.id===g?{...$,label:x}:$))},ga=(g,x)=>{To(K=>K.map($=>{if($.id!==g)return $;const E=Array.isArray($.groupIds)?$.groupIds:[],de=E.includes(x)?E.filter(D=>D!==x):[...E,x];return{...$,groupIds:de}}))},Ra=async()=>{Qo(!0);try{const g=new Set(wr.map(K=>K.id)),x=kr.map(K=>({...K,groupIds:(K.groupIds||[]).filter($=>g.has($))}));To(x),await Gt("/api/multi/app-buttons",{method:"POST",body:{buttons:x}}),A("")}catch(g){console.error("",g),A("")}finally{Qo(!1)}},ja=async()=>{fo(!0);try{await Gt("/api/multi/replay/config",{method:"POST",body:{dirPath:Ar.dirPath,autoLoadFiles:Ar.autoLoadFiles}}),A("Replay ")}catch(g){console.error(" Replay ",g),A(" Replay ")}finally{fo(!1)}},gl=async()=>{try{const g={globalButtons:{activeButtons:jn,deletedButtons:Un,version:"2.0",savedAt:Date.now()}};localStorage.setItem("global-buttons-config",JSON.stringify(g.globalButtons)),await Gt("/api/config/save",{method:"POST",body:g}),A("")}catch(g){console.error("",g),A("")}},Pa=(g,x)=>{if(!qe)return;g.preventDefault(),g.stopPropagation();const K=g.clientX,$=g.clientY,E=Ln[x].position||{left:0,top:0};xr({titleKey:x,startX:K,startY:$,startPos:E})};Qe.useEffect(()=>{if(!Oi)return;const g=K=>{const $=K.clientX-Oi.startX,E=K.clientY-Oi.startY;Wr(ae=>({...ae,[Oi.titleKey]:{...ae[Oi.titleKey],position:{left:Oi.startPos.left+$,top:Oi.startPos.top+E}}}))},x=()=>{xr(null)};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)}},[Oi]);const Ya=(g,x,K)=>{if(!qe)return;g.preventDefault(),g.stopPropagation();const $=g.clientX,E=g.clientY,ae={width:Ln[x].width||200,height:Ln[x].height||30};$r({titleKey:x,startX:$,startY:E,startSize:ae,direction:K})};Qe.useEffect(()=>{if(!ri)return;const g=K=>{const $=K.clientX-ri.startX,E=K.clientY-ri.startY;Wr(ae=>{const de=Math.max(50,ri.startSize.width+$),D=Math.max(20,ri.startSize.height+E);return{...ae,[ri.titleKey]:{...ae[ri.titleKey],width:de,height:D}}})},x=()=>{$r(null)};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)}},[ri]),Qe.useEffect(()=>{if(!gr)return;const g=K=>{const $=K.clientX-gr.startX,E=K.clientY-gr.startY;if(gr.panelId){const{panelId:ae,buttonId:de,dragType:D}=gr;let Pe=gr.originalLeft,Ue=gr.originalTop,je=gr.originalWidth,$e=gr.originalHeight;D==="move"?(Pe=gr.originalLeft+$,Ue=gr.originalTop+E):D==="resize-e"?je=Math.max(40,gr.originalWidth+$):D==="resize-s"?$e=Math.max(20,gr.originalHeight+E):D==="resize-se"&&(je=Math.max(40,gr.originalWidth+$),$e=Math.max(20,gr.originalHeight+E)),or(De=>{const ct=(De[ae]||[]).map(Dt=>Dt.id===de?{...Dt,left:Pe,top:Ue,width:je,height:$e}:Dt);return{...De,[ae]:ct}});return}if(gr.action==="move")Y(gr.buttonId,{x:gr.startPos.x+$,y:gr.startPos.y+E});else if(gr.action==="resize"){const ae=Math.max(50,gr.startSize.width+$),de=Math.max(20,gr.startSize.height+E);Y(gr.buttonId,{width:ae,height:de})}},x=()=>{gs(null)};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x)}},[gr,jn]),Qe.useEffect(()=>{Ln&&(Ln.eyebrow||Ln.title)&&(localStorage.setItem("workbench_header_titles",JSON.stringify(Ln)),console.log("[HeaderTitles] Auto-saved to localStorage:",Ln))},[Ln]);const Fi=(g,x,K,$="move")=>{var D;if(!qe)return;const E=(D=Zn[x])==null?void 0:D.find(Pe=>Pe.id===K);if(!E)return;const ae=g.clientX,de=g.clientY;gs({panelId:x,buttonId:K,dragType:$,startX:ae,startY:de,originalLeft:E.left,originalTop:E.top,originalWidth:E.width,originalHeight:E.height}),g.preventDefault()},ds=(g,x)=>{cn(K=>{const $={...K};return x?$[g]=!0:delete $[g],$})},gi=()=>cn({}),Li=async g=>{const x=(g||[]).map(K=>K.id);if(x.length)try{await Gt("/api/multi/precipitation/records/order",{method:"POST",body:{order:x}})}catch(K){console.error("",K),A("")}},po=(g,x,K)=>{const $=[...g||[]],E=$.findIndex(D=>D.id===x),ae=$.findIndex(D=>D.id===K);if(E===-1||ae===-1||E===ae)return g;const[de]=$.splice(E,1);return $.splice(ae,0,de),$},ko=(g,x,K)=>{const $=[...g||[]],E=$.findIndex(D=>D.id===x);if(E===-1)return g;const ae=Math.max(0,Math.min(K,$.length-1)),[de]=$.splice(E,1);return $.splice(ae,0,de),$},Ks=g=>{let x=null;ht(K=>(x=g(K),x)),x&&Li(x)},fc=()=>{cn(()=>{const g={};return He.forEach(x=>{g[x.id]=!0}),g})},Ja=async g=>{const x=Array.from(new Set((g||[]).filter(Boolean)));if(!x.length||!window.confirm(`${x.length} `))return;const $=await Promise.allSettled(x.map(D=>Gt(`/api/multi/precipitation/records/${D}`,{method:"DELETE"}))),E=x.filter((D,Pe)=>$[Pe].status==="fulfilled"),ae=x.filter((D,Pe)=>$[Pe].status!=="fulfilled");if(E.length&&(ht(D=>D.filter(Pe=>!E.includes(Pe.id))),pi(D=>D.map(Pe=>({...Pe,depositIds:(Pe.depositIds||[]).filter(Ue=>!E.includes(Ue))}))),ue(D=>{const Pe={...D};return E.forEach(Ue=>delete Pe[Ue]),Pe}),wi(D=>{const Pe={...D};return E.forEach(Ue=>delete Pe[Ue]),Pe}),cn(D=>{const Pe={...D};return E.forEach(Ue=>delete Pe[Ue]),Pe})),ae.length){console.error("",ae),A(`${ae.length}/${x.length}`),await es(!0),await bs(!0);return}await es(!1)&&A("")},Da=()=>void Ja(Object.keys(Xt||{}).filter(g=>Xt[g])),ya=(g,x,K)=>{Xn($=>({...$,[`${g}||${x}`]:(K??"").toString()}))},yl=(g,x)=>{ya(g,"order",String(x))},_s=(g,x)=>{Xn(K=>{const $={...K};return delete $[`${g}||${x}`],$})},hc=async g=>{const x=`${g}||name`,$=(Yt[x]??"").toString().trim()||g;try{await Gt(`/api/multi/precipitation/records/${g}`,{method:"PATCH",body:{name:$,title:$}}),ht(E=>E.map(ae=>ae.id===g?{...ae,name:$,title:$}:ae)),_s(g,"name"),A("")}catch(E){console.error("",E),A("")}},Ml=async(g,x)=>{const K=Oc(x),$=He.find(de=>de.id===g);if(!$){A("");return}const E=($.sections||[]).map(de=>({...de,sectionReplayMode:K})),ae={...$,precipitationMode:K,sections:E,updatedAt:Date.now()};ht(de=>de.map(D=>D.id===g?ae:D));try{await Gt(`/api/multi/precipitation/records/${g}`,{method:"PUT",body:ae});const de=K==="llm"?" Replay":" Replay",D=E.length;A(`${de}${D}`)}catch(de){console.error("",de),A(""),await es(!0)}},Za=()=>{const g=Zn["processing-tabs"]||[],x=Cc["processing-tabs"]||[],K=new Map(g.filter($=>th.includes($==null?void 0:$.kind)).map($=>[$.kind,$]));return th.map($=>K.get($)||x.find(E=>E.kind===$)).filter(Boolean)},Qa={tab_outline:{bg:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",inactiveBg:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",color:"#1e40af",activeColor:"#ffffff",border:"#3b82f6",shadow:"rgba(59, 130, 246, 0.4)"},tab_records:{bg:"linear-gradient(135deg, #10b981 0%, #059669 100%)",inactiveBg:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)",color:"#047857",activeColor:"#ffffff",border:"#10b981",shadow:"rgba(16, 185, 129, 0.4)"},tab_config:{bg:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",inactiveBg:"linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)",color:"#6d28d9",activeColor:"#ffffff",border:"#8b5cf6",shadow:"rgba(139, 92, 246, 0.4)"},tab_strategy:{bg:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",inactiveBg:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:"#b45309",activeColor:"#ffffff",border:"#f59e0b",shadow:"rgba(245, 158, 11, 0.4)"}},zc=()=>Za().map(x=>{const K=Fc(x.label,""),$={...x,label:Dv[x.kind]||K||x.label},E=x.kind==="tab_outline"&&I==="outline"||x.kind==="tab_config"&&I==="config"||x.kind==="tab_records"&&I==="records"||x.kind==="tab_strategy"&&I==="strategy",ae=Qa[x.kind]||Qa.tab_outline;return{...$,style:{...$.style||{},background:E?ae.bg:ae.inactiveBg,color:E?ae.activeColor:ae.color,border:E?"none":`1px solid ${ae.border}40`,borderRadius:"14px",boxShadow:E?`0 4px 14px ${ae.shadow}`:"0 1px 3px rgba(0,0,0,0.08)",fontWeight:E?700:600,transition:"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)",transform:E?"translateY(-1px)":"none"}}}),vl=g=>{const x=`${g}||order`,K=(Yt[x]??"").toString().trim(),$=Number.parseInt(K,10);if(!Number.isFinite($)){_s(g,"order");return}Ks(E=>ko(E,g,Math.max(0,$-1))),_s(g,"order")},$c=(g,x)=>{g.key==="Enter"&&(g.preventDefault(),vl(x))},Uc=g=>x=>{io(g),On("");try{x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",g)}catch{}},qc=g=>x=>{!yo||yo===g||(x.preventDefault(),On(g))},Wc=g=>x=>{var $,E;x.preventDefault();const K=yo||((E=($=x.dataTransfer)==null?void 0:$.getData)==null?void 0:E.call($,"text/plain"));!K||K===g||(Ks(ae=>po(ae,K,g)),io(""),On(""))},Hc=()=>{io(""),On("")},Gc=()=>{const g=Za();if(!g.length)return null;const x={};return g.forEach(K=>{K!=null&&K.kind&&(x[K.kind]=K)}),th.slice(0,-1).map((K,$)=>{const E=x[K],ae=x[th[$+1]];if(!E||!ae)return null;const de=E.left+E.width,D=ae.left,Pe=de+(D-de)/2,Ue=E.top+(E.height-16)/2;return y.jsx("span",{className:"tab-seq-arrow",style:{left:`${Math.max(0,Pe-10)}px`,top:`${Math.max(0,Ue)}px`},children:"-->"},`tab-seq-${K}`)})},aa=new Set(["batch_replay","select_all","delete_selected","clear_selection","group_new","group_update"]),wl=new Set(["group_rename","group_delete","group_replay"]),Bo=g=>{const x=wr.find(D=>D.id===Xr)||null,$=Ds().length>0,E=He.length>0&&Object.keys(Xt||{}).filter(D=>Xt[D]).length===He.length,ae=Zn["processing-records-toolbar"]||[];return(g?ae.filter(D=>g.has(D.kind)):ae).map(D=>{let Pe=!1;switch(D.kind){case"batch_replay":case"delete_selected":case"clear_selection":Pe=!$;break;case"select_all":Pe=He.length===0;break;case"group_new":Pe=!$;break;case"group_update":Pe=!$;break;case"group_rename":case"group_delete":case"group_replay":Pe=!x;break}D.kind==="batch_replay"&&_i&&(Pe=!0),D.kind==="group_replay"&&x&&Mi[x.id]&&(Pe=!0);let Ue=D.label;return D.kind==="select_all"&&(Ue=E?"":""),{...D,label:Ue,disabled:Pe}})},Ss=g=>{var de;const x=((de=Pr==null?void 0:Pr[g==null?void 0:g.id])==null?void 0:de.bySection)||{},K=((g==null?void 0:g.sections)||[]).map(D=>{var Pe;return(Pe=x==null?void 0:x[D.id])==null?void 0:Pe.status}).filter(Boolean);if(!K.length)return"";if(K.every(D=>D==="done"))return"done";if(K.every(D=>D==="fail"))return"fail";if(K.every(D=>D==="pass"))return"pass";const $=K.some(D=>D==="done"),E=K.some(D=>D==="pass"),ae=K.some(D=>D==="fail");return $&&!ae?"partial done":E&&!ae&&!$?"pass":"partial done"},zl=g=>{var $;const x=(($=Pr==null?void 0:Pr[g==null?void 0:g.id])==null?void 0:$.bySection)||{},K=((g==null?void 0:g.sections)||[]).map(E=>{const ae=x==null?void 0:x[E.id];if(!ae||ae.status==="done"||ae.status==="running")return null;const de=(E.action||E.id||"").toString(),D=(ae.message||"").toString().trim();return D?`${de}${ae.status} - ${D}`:`${de}${ae.status}`}).filter(Boolean);return K.length?K.length<=3?K.join(""):`${K.slice(0,3).join("")}  ${K.length} `:""},Oa=()=>y.jsx(dA,{depositGroups:wr,selectedDepositGroupId:Xr,setSelectedDepositGroupId:Yr,renameDepositGroup:Xa,replayDepositGroup:Ia,depositGroupReplay:Mi}),hu=()=>y.jsx(fA,{depositGroups:wr,selectedDepositGroupId:Xr,deposits:He,depositEditing:Yt,startEditDeposit:ya,applyDepositName:hc,handleDepositNameKeyDown:el,replayDepositGroup:Ia,replayDeposit:Vc,depositGroupReplay:Mi,replayState:Pr,getDepositReplayStatus:Ss,getDepositReplayReason:zl}),$l=(g,x)=>{ht(K=>K.map($=>$.id===g?{...$,sections:($.sections||[]).filter(E=>E.id!==x)}:$)),wi(K=>{const $={...K};return $[g]&&($[g]={...$[g]||{}},delete $[g][x]),$}),_s(g,`${x}||action`),_s(g,`${x}||exec`),_s(g,`${x}||summary`),_s(g,`${x}||location`),_s(g,`${x}||req_input`),_s(g,`${x}||req_exec`),_s(g,`${x}||req_summary`),_s(g,`${x}||req_location`),A(" section")},Ul=async(g,x)=>{var K;try{const $=Xe((x==null?void 0:x.content)||"")||{},E=(((K=$==null?void 0:$.docSelector)==null?void 0:K.description)||"").toString(),ae=window.prompt("202410 .txt ",E);if(ae===null)return;const de=ae.toString().trim();if(!de){A("");return}const D=await Gt("/api/replay/file-selector",{method:"POST",body:{description:de,exampleName:(($==null?void 0:$.docName)||"").toString()}}),Pe=D==null?void 0:D.selector;if(!Pe||typeof Pe!="object"){A("");return}const Ue={...$||{},type:"add_doc",source:"upload",docSelector:Pe},je=Pe.kind==="regex"?`regex=${(Pe.pattern||"").toString()}`:`keywords=${Array.isArray(Pe.keywords)?Pe.keywords.join("??"):""}${Pe.extension?` ext=${Pe.extension}`:""}`,$e=`${Pe.mode==="multi"?"":""}`,De=[`${de}`,`${je}`].join(`
`),Ye=Oe([$e,De].join(`
`),Ue),Dt=(He||[]).find(ft=>ft.id===g);if(!Dt){A("");return}const mt=(Dt.sections||[]).map(ft=>ft.id!==x.id?ft:{...ft,content:Ye,llmScript:{...ft.llmScript||{},docSelector:Pe,flexKeywords:de}}),tt={...Dt,sections:mt,updatedAt:Date.now()};ht(ft=>ft.map(Qt=>Qt.id===g?tt:Qt));try{const ft=await Gt(`/api/multi/precipitation/records/${g}`,{method:"PUT",body:tt});console.log("[] :",ft),A((D==null?void 0:D.usedModel)===!1?"":"")}catch(ft){console.error("[] :",ft),A("")}}catch($){console.error($),A(($==null?void 0:$.message)||"")}},Ii=(g,x)=>{const K=`${g}_${x}`;rr($=>({...$,[K]:!$[K]}))},pc=async(g,x,K)=>{const $=He.find(de=>de.id===g);if(!$){A("");return}const E=($.sections||[]).map(de=>de.id!==x?de:{...de,sectionReplayMode:K}),ae={...$,sections:E,updatedAt:Date.now()};ht(de=>de.map(D=>D.id===g?ae:D));try{await Gt(`/api/multi/precipitation/records/${g}`,{method:"PUT",body:ae}),A(`${K==="llm"?" ":" "} Replay`)}catch(de){console.error(" section replay ",de),A("")}},xl=async(g,x)=>{var ae;const K=He.find(de=>de.id===g);if(!K){A("");return}const $=(ae=K.sections)==null?void 0:ae.find(de=>de.id===x);if(!$){A("");return}Bs(g,x,"running","");const E=wc();try{const de=$.sectionReplayMode||K.precipitationMode||"llm",D={...K,precipitationMode:de},Pe=await Kl(D,$);Bs(g,x,Pe.status,Pe.message||"",Pe.replayMode||"script"),A(` Replay ${Pe.status==="done"?"":""}`)}catch(de){await la(E),Bs(g,x,"fail",(de==null?void 0:de.message)||"Replay ",null),A(` Replay : ${(de==null?void 0:de.message)||""}`)}},el=(g,x)=>{g.key==="Enter"&&(g.preventDefault(),hc(x))},mc=async()=>{var x,K;const g=Object.keys(Xt||{}).filter($=>Xt[$]);if(!g.length){A(" Replay ");return}if(!_i){Ni(!0);try{if(console.log("[Replay] ..."),!e||!e.sections||e.sections.length===0){console.log("[Replay] ..."),A("...");try{const $=await Gt("/api/template");((K=(x=$==null?void 0:$.template)==null?void 0:x.sections)==null?void 0:K.length)>0?(t($.template),console.log("[Replay] ",$.template.sections.length,""),await new Promise(E=>setTimeout(E,200))):console.warn("[Replay] ")}catch($){console.error("[Replay] :",$),A("Replay ")}}else console.log("[Replay] ",e.sections.length,"");for(let $=0;$<g.length;$++){const E=g[$],ae=He.find(D=>D.id===E),de=(ae==null?void 0:ae.name)||E;console.log(`[Replay]  ${$+1}/${g.length}: ${de}`),A(` ${$+1}/${g.length}: ${de}`),await Xc(E),console.log(`[Replay]  ${$+1}/${g.length}: ${de}`)}A(" Replay ")}finally{Ni(!1)}}},gc=async g=>{const x=g instanceof HTMLFormElement?g:kt.current;if(x)try{const K=new FormData(x),$=(K.get("name")||"").toString().trim()||"",E=(K.get("content")||"").toString();if(!E.trim()){A("");return}if(typeof E!="string"){A("content ");return}const ae=await Gt("/api/docs",{method:"POST",body:{name:$,content:E}}),de=ae==null?void 0:ae.doc;if(a(D=>nh(D,[de])),d(de.id),Yn("",{type:"add_doc",docName:(de==null?void 0:de.name)||$,source:"manual",overwritten:!!(ae!=null&&ae.overwritten),inputs:[{kind:"manual_text",length:(E||"").toString().length}],process:ae!=null&&ae.overwritten?"":"",outputs:{summary:""+((de==null?void 0:de.name)||$)+(ae!=null&&ae.overwritten?"":"")},destinations:[{kind:"docs_list"}]}),s){const D=Array.from(new Set([de.id,...s.docIds||[]])),{scene:Pe}=await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{docIds:D}});u(Pe)}x.reset(),A("")}catch(K){console.error(K),A(K.message||"")}};async function yc(g){await gc(g.target)}function tl(g){if(!g)return"";if(typeof g!="string")return String(g);const x=g.trim();if(x.startsWith("{")||x.startsWith("["))try{const K=JSON.parse(x);if(typeof K=="string")return K;if(K.detail&&typeof K.detail=="string")return K.detail;if(K.content&&typeof K.content=="string")return K.content;if(K.summary&&typeof K.summary=="string")return K.summary;const $=Object.values(K).find(E=>typeof E=="string");if($)return $}catch{return x}return x}async function nl(g){const x=g==null?void 0:g.target,K=Array.from((x==null?void 0:x.files)||[]);if(!K.length)return;const $=[],E=[];try{for(const de of K)try{const D=(de==null?void 0:de.name)||"",Pe=tA(D),Ue=Pe?await Bv(de):await eA(de),je=typeof Ue=="string"?Ue:String(Ue??""),$e=await Gt("/api/docs",{method:"POST",body:{name:D,content:je}}),De=$e==null?void 0:$e.doc;$.push(De),Yn("",{type:"add_doc",docName:(De==null?void 0:De.name)||D,source:"upload",overwritten:!!($e!=null&&$e.overwritten),inputs:[{kind:"upload_file",docName:(De==null?void 0:De.name)||D,length:je.length,format:Pe?"docx":"text"}],process:(Pe?" Word(.docx) ":"")+($e!=null&&$e.overwritten?"":""),outputs:{summary:""+((De==null?void 0:De.name)||D)+($e!=null&&$e.overwritten?"":"")},destinations:[{kind:"docs_list"}]})}catch(D){console.error(D),E.push({name:(de==null?void 0:de.name)||"(unknown)",error:(D==null?void 0:D.message)||""})}const ae=Pw($);if(ae.length&&(a(de=>nh(de,ae)),d(ae[0].id),s)){const de=ae.map(Ue=>Ue.id),D=Array.from(new Set([...de,...s.docIds||[]])),{scene:Pe}=await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{docIds:D}});u(Pe)}if(ae.length&&E.length)A(` ${ae.length}  ${E.length} `);else if(ae.length)A(` ${ae.length} `);else{const de=E[0];A(de!=null&&de.error?`${de.error}`:"")}}catch(ae){console.error(ae),A((ae==null?void 0:ae.message)||"")}finally{Zi.current&&(Zi.current.value="")}}async function Kc(g){var je;console.log("[autoTemplate] Called with buttonConfig:",g);let x=s;if(!x)try{x=(await Gt("/api/scene",{method:"POST",body:{docIds:l?[l]:[]}})).scene,u(x),A("")}catch($e){console.error("[autoTemplate] Scene creation failed:",$e),A("");return}let K=g;if(K&&!K.io){const $e=cu(),De=$e.find(Ye=>Ye.kind===K.kind)||$e[0];K={...De,...K,io:De.io}}K||(K=cu()[0]);const $=K;console.log("[autoTemplate] Using resolved config:",$);const E=o.find($e=>$e.id===l);if(!E)return console.warn("[autoTemplate] No document selected"),A("");const de=ld($==null?void 0:$.io,{dataSource:$==null?void 0:$.dataSource,outputTarget:$==null?void 0:$.outputTarget}).filter($e=>$e.enabled);if(!de.some($e=>$e.output==="titles")){A("");return}const D=Array.from(new Set(de.map($e=>$e.dataSource))),Pe=D.map($e=>$e==="selected_doc"?`
${E.content||""}`.trim():`
${M||""}`.trim()),Ue=`${E.name||""}

${Pe.join(`

---

`)}`.trim();if(!Ue.trim())return A("");console.log("[autoTemplate] Sending to API, text length:",Ue.length),h(!0);try{const $e=await Gt("/api/template/auto",{method:"POST",body:{text:Ue,prompt:$.prompt||""}});console.log("[autoTemplate] API response:",$e);const De=de.some(tt=>tt.output==="summaries"&&tt.target==="summary"),Ye=de.some(tt=>tt.output==="summaries"&&tt.target==="title"),ct=de.some(tt=>tt.output==="titles"&&tt.target==="summary"),Dt={...$e.template,sections:(((je=$e.template)==null?void 0:je.sections)||[]).map(tt=>{const ft=((tt==null?void 0:tt.title)||"").toString(),Qt=((tt==null?void 0:tt.summary)||"").toString().trim(),_n=Ye&&Qt?`${ft} - ${Qt}`:ft,ut=[];ct&&ft&&ut.push(ft),De&&Qt&&ut.push(Qt);const xn=ut.join(`
`).trim();return{...tt,title:_n,summary:xn}})},mt=await Gt(`/api/scene/${x.id}/apply-template`,{method:"POST",body:{template:Dt}});t(mt.template),u(mt.scene),R(!0),Yn("",{type:"outline_extract",actionDescription:`${E.name}`,buttonId:$.id,buttonLabel:$.label,prompt:$.prompt,io:de,selectedDocName:E.name,selectedDocId:E.id,inputContentExcerpt:(E.content||"").toString().substring(0,500),inputContentLength:(E.content||"").toString().length,inputs:D.map(tt=>tt==="selected_doc"?{kind:"doc_resource",docName:E.name,docId:E.id,length:(E.content||"").toString().length,contentExcerpt:(E.content||"").toString().substring(0,300)}:{kind:"doc_preview",docName:E.name,length:(M||"").toString().length,contentExcerpt:(M||"").toString().substring(0,300)}),process:" 1-3 /",outputs:{summary:" "+mt.template.sections.length+(($e==null?void 0:$e.usedModel)===!1?$e!=null&&$e.blocked?"":"":""),sectionsCount:mt.template.sections.length,usedModel:($e==null?void 0:$e.usedModel)!==!1,generatedSections:(mt.template.sections||[]).map(tt=>({id:tt.id,level:tt.level,levelText:tt.level===1?"":tt.level===2?"":tt.level===3?"":`${tt.level}`,title:tt.title||"",summary:tt.summary||"",hint:tt.hint||""})),sectionsSample:(mt.template.sections||[]).slice(0,8).map(tt=>({id:tt.id,level:tt.level,title:vt(tt.title||"",80),summaryExcerpt:vt(tt.summary||tt.hint||"",120)}))},destinations:[{kind:"outline_apply",count:mt.template.sections.length}],outputTarget:"",aiGuidance:"1-3Replay ",specialRequirements:""}),A(($e==null?void 0:$e.usedModel)===!1?$e!=null&&$e.blocked?"":" QWEN_API_KEY":"")}catch($e){A($e.message)}finally{h(!1)}}const pu=async()=>{var K;if(!(s!=null&&s.id)){A("scene ");return}if(!window.confirm(""))return;const x=((e==null?void 0:e.sections)||[]).length;h(!0);try{const $={id:"template_empty",name:"",sections:[]};try{await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{sectionDocLinks:{}}})}catch{}const E=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:$}});E!=null&&E.scene&&u(E.scene),E!=null&&E.template&&t(E.template),ne(((K=E==null?void 0:E.scene)==null?void 0:K.sectionDocLinks)||{}),ce({}),he({}),me({}),H({}),C({}),Yn("",{type:"outline_clear",inputs:[{kind:"outline_selected",count:x,sectionIds:((e==null?void 0:e.sections)||[]).map(ae=>ae.id)}],process:"",outputs:{summary:` ${x} `,clearedCount:x},destinations:[{kind:"outline_apply",count:0}]}),A("")}catch($){console.error($),A(($==null?void 0:$.message)||"")}finally{h(!1)}},Nd=async g=>{if(!(g!=null&&g.enabled)||!s||!e)return;const x=(e.sections||[]).filter(Ye=>fe[Ye.id]);if(!x.length){A("");return}const $=ld(g==null?void 0:g.io,{dataSource:g==null?void 0:g.dataSource,outputTarget:g==null?void 0:g.outputTarget}).filter(Ye=>Ye.enabled),E=$.some(Ye=>Ye.output==="summaries"&&Ye.target==="summary"),ae=$.some(Ye=>Ye.output==="summaries"&&Ye.target==="title");if(!E&&!ae){A("/");return}const de=o.find(Ye=>Ye.id===l)||null;if(!de){A("");return}const D=de!=null&&de.id&&de.id===l&&(M||"").toString().trim()?M:(de.content||"").toString(),Pe=Array.from(new Set($.map(Ye=>Ye.dataSource))),Ue=Pe.map(Ye=>Ye==="selected_doc"?`
${de.content||""}`.trim():`
${D}`.trim()),je=`${de.name||""}

${Ue.join(`

---

`)}`.trim();if(!je.trim()){A("");return}const $e=(((g==null?void 0:g.label)||"").toString().trim()||"").toString(),De=x.map((Ye,ct)=>({sectionId:Ye.id,field:"summary",label:(Ye.title||`${ct+1}`).toString(),content:(Ye.summary||Ye.hint||"").toString()}));h(!0);try{const Ye=await Gt("/api/dispatch",{method:"POST",body:{sceneId:s.id,instructions:$e,docContent:je,outlineSegments:De,systemPrompt:g==null?void 0:g.prompt}});if((Ye==null?void 0:Ye.usedModel)===!1)throw new Error("QWEN_API_KEY `server.js` ");const ct=tl(Ye.summary||"")||"",Dt=tl(Ye.detail||"")||"";if(Dt.trim()){const mt=x.map(tt=>tt.id);t(tt=>{if(!tt)return tt;const ft=tt.sections.map(_n=>mt.includes(_n.id)?{..._n,title:ae?Dt:_n.title,summary:E?Dt:_n.summary}:_n),Qt={...tt,sections:ft};return s!=null&&s.customTemplate&&u({...s,customTemplate:Qt}),Qt})}Yn("",{type:"outline_action",buttonId:g==null?void 0:g.id,buttonLabel:g==null?void 0:g.label,prompt:g==null?void 0:g.prompt,selectedSectionIds:x.map(mt=>mt.id),inputs:[{kind:"outline_selected",sectionIds:x.map(mt=>mt.id)},...Pe.map(mt=>({kind:mt==="selected_doc"?"selected_doc":"preview",length:je.length}))],process:"",outputs:{summary:ct,detailLength:Dt.length},destinations:[{kind:"outline_section_summary_batch",sectionIds:x.map(mt=>mt.id),count:x.length}]}),A(ct)}catch(Ye){console.error(Ye),A((Ye==null?void 0:Ye.message)||"")}finally{h(!1)}};async function ql(){var Ue,je;if(!s)return;const g=er.find($e=>$e.kind==="dispatch");if(g&&!g.enabled){A("");return}const x=((Ue=$i.current)==null?void 0:Ue.value)||"";if(!x.trim()){A("");return}$i.current&&($i.current.value="");let $=((je=o.find($e=>$e.id===l))==null?void 0:je.content)||"",E=[];const ae=[];let de=be==="result"?"result":"doc",D=[],Pe=null;if(be==="batch_outline"){const $e=((e==null?void 0:e.sections)||[]).filter(Ye=>fe[Ye.id]);if(!$e.length){A("");return}D=$e.map(Ye=>Ye.id),ae.push({kind:"outline_selected",sectionIds:D}),de="outline_selected_batch",E=$e.map((Ye,ct)=>({sectionId:Ye.id,field:"summary",content:`${Ye.title}
${Ye.summary||Ye.hint||""}`,label:`${ct+1}`})),$=E.map(Ye=>`${Ye.label} | ID=${Ye.sectionId}
${Ye.content}`).join(`

`)}else if(w){const $e=Object.keys(ee||{}).filter(De=>ee[De]);if($e.length>0){const De=$e.map(ct=>{const[Dt,mt]=ct.split("_"),tt=parseInt(mt,10),ft=((e==null?void 0:e.sections)||[]).find(Qt=>Qt.id===Dt);return{sectionId:Dt,sumIdx:tt,section:ft,key:ct}}).filter(ct=>ct.section);if(!De.length){A("");return}de="outline_summaries_multi",D=[...new Set(De.map(ct=>ct.sectionId))],E=De.map((ct,Dt)=>{const mt=ct.section;let tt="";return Array.isArray(mt.summaries)&&mt.summaries[ct.sumIdx]?tt=mt.summaries[ct.sumIdx].content||"":ct.sumIdx===0&&(tt=mt.summary||mt.hint||""),{sectionId:ct.sectionId,summaryIndex:ct.sumIdx,summaryKey:ct.key,field:"summary",content:tt,label:`${Dt+1}${mt.title||""}[${ct.sumIdx}]`}}),ae.push({kind:"outline_summaries_selected",summaryKeys:$e,sectionIds:D}),$=E.map(ct=>`${ct.label} | ID=${ct.sectionId}_${ct.summaryIndex}
${ct.content}`).join(`

`)}else{const De=((e==null?void 0:e.sections)||[]).filter(mt=>fe[mt.id]);if(!De.length){A("");return}if(D=De.map(mt=>mt.id),ae.push({kind:"outline_selected",sectionIds:D}),!(De.length>0)){A("");return}let ct=[],Dt=[];if(De.forEach(mt=>{const tt=Z[mt.id]||[],ft=se[mt.id]||{},Qt=tt.filter(_n=>!ft[_n]);Qt.length?ct.push({sec:mt,unprocessed:Qt}):Dt.push(mt)}),ct.length&&Dt.length){A("");return}if(ct.length){de="outline_unprocessed_docs";const tt=ct.flatMap(ft=>ft.unprocessed).map(ft=>o.find(Qt=>Qt.id===ft)).filter(Boolean);if(!tt.length){A("");return}tt.forEach(ft=>ae.push({kind:"doc_resource",docName:ft.name,length:(ft.content||"").toString().length})),$=tt.map((ft,Qt)=>`${Qt+1}${ft.name}
${ft.content}`).join(`

---

`),E=ct.map((ft,Qt)=>({sectionId:ft.sec.id,field:"summary",content:ft.sec.summary||ft.sec.hint||ft.sec.title||"",label:`${Qt+1}`}))}else de="outline_summaries",E=De.map((tt,ft)=>({sectionId:tt.id,field:"summary",content:tt.summary||tt.hint||tt.title||"",label:`${ft+1}`})),$=E.map(tt=>`${tt.label} | ID=${tt.sectionId}
${tt.content}`).join(`

`)}}else if(be==="result"){de="result";const $e=Object.entries(ke).filter(([,Ye])=>typeof Ye=="string"&&Ye.trim());if(!$e.length){A("");return}Pe=$e.map(([Ye,ct])=>({key:Ye,length:(ct||"").toString().trim().length,text:vt((ct||"").toString().trim(),2200)})),ae.push(`${$e.length}`),$=$e.map(([Ye,ct],Dt)=>{const mt=Ye.includes("detail")?"":"/";return`${Dt+1}${mt}
${ct.trim()}`}).join(`

`)}else{if(de="doc",!$.trim()){A("");return}const $e=o.find(De=>De.id===l);$e&&ae.push({kind:"doc_resource",docName:$e.name,length:($e.content||"").toString().length})}ie($e=>[...$e,{role:"user",text:x}]),b(!0);try{const $e=await Gt("/api/dispatch",{method:"POST",body:{sceneId:s.id,instructions:x,docContent:$,outlineSegments:E,systemPrompt:g==null?void 0:g.prompt}}),De=($e==null?void 0:$e.usedModel)!==!1,Ye=tl($e.summary||"")||(De?"":""),ct=tl($e.detail||"");ie(Ke=>[...Ke,{role:"system",text:Ye,detail:ct}]),P(ct||Ye),Fe({}),A(Ye||""),$i.current&&($i.current.value="");let Dt=0;const mt=(Ke,We)=>{if(!Ke)return null;const Et=String(Ke).trim(),sn=Et.match(/ID\s*=\s*(.+)/i);if(sn)return sn[1].trim();const bt=Et.match(/\d+\s*[:]\s*(.+)/);if(bt)return bt[1].trim();const Kt=Et.match(/\|\s*ID\s*=\s*(.+)/i);if(Kt)return Kt[1].trim();const Bn=Et.match(/(\d+)/);if(Bn){const Sr=parseInt(Bn[1],10)-1;if(Sr>=0&&Sr<We.length)return We[Sr]}if(/^\d+$/.test(Et)){const Sr=parseInt(Et,10)-1;if(Sr>=0&&Sr<We.length)return We[Sr]}const Jn=Et.match(/(\d+)/);if(Jn){const Sr=parseInt(Jn[1],10)-1;if(Sr>=0&&Sr<We.length)return We[Sr]}return Et},tt=de==="outline_summaries_multi",ft=E.map(Ke=>tt?Ke.summaryKey:Ke.sectionId);Array.isArray($e.edits)&&$e.edits.length&&(Dt=$e.edits.length,t(Ke=>{if(!Ke)return Ke;if(tt){const sn=Ke.sections.map(Kt=>{const Bn=$e.edits.filter(Jn=>{const Sr=mt(Jn.sectionId,ft);return Sr&&Sr.startsWith(Kt.id+"_")});if(!Bn.length)return Kt;if(Array.isArray(Kt.summaries)&&Kt.summaries.length>0){const Jn=Kt.summaries.map((bo,Mo)=>{const Po=Bn.find(Wo=>mt(Wo.sectionId,ft)===`${Kt.id}_${Mo}`);return Po&&Po.field==="summary"&&Po.content?{...bo,content:Po.content}:bo}),Sr=Jn.map(bo=>bo.content||"").filter(Boolean).join(`

`);return{...Kt,summaries:Jn,summary:Sr}}else{const Jn=Bn.find(Sr=>mt(Sr.sectionId,ft)===`${Kt.id}_0`);return Jn&&Jn.field==="summary"&&Jn.content?{...Kt,summary:Jn.content}:Kt}}),bt={...Ke,sections:sn};return s!=null&&s.customTemplate&&u({...s,customTemplate:bt}),bt}const We=Ke.sections.map(sn=>{const bt=$e.edits.find(Kt=>mt(Kt.sectionId,ft)===sn.id||Kt.sectionId===sn.id);return bt?{...sn,title:bt.field==="title"&&bt.content?bt.content:sn.title,summary:bt.field==="summary"&&bt.content?bt.content:sn.summary}:sn}),Et={...Ke,sections:We};return s!=null&&s.customTemplate&&u({...s,customTemplate:Et}),Et}));const Qt=new Set;Array.isArray($e.edits)&&$e.edits.forEach(Ke=>{const We=mt(Ke.sectionId,ft);We&&Qt.add(We),Ke.sectionId&&Qt.add(Ke.sectionId)});let _n=0;if(w&&ct){const We=Object.keys(fe).filter(Et=>fe[Et]).filter(Et=>!Qt.has(Et));We.length&&(_n=We.length,t(Et=>{if(!Et)return Et;const sn=Et.sections.map(Kt=>We.includes(Kt.id)?{...Kt,summary:ct}:Kt),bt={...Et,sections:sn};return s!=null&&s.customTemplate&&u({...s,customTemplate:bt}),bt}))}const ut=[{kind:"dispatch_result"}];w&&_n&&ut.push({kind:"dispatch_apply",count:_n}),Dt&&ut.push(`/ edits ${Dt}`);const xn=(()=>{var Et;const Ke=[],We=sn=>{const bt=((e==null?void 0:e.sections)||[]).find(Bn=>Bn.id===sn);return bt?`${bt.level===1?"":bt.level===2?"":bt.level===3?"":`${bt.level}`}${bt.title}`:sn};if(de==="doc"){const sn=(Et=o.find(bt=>bt.id===l))==null?void 0:Et.name;Ke.push(`${sn||""}`)}else if(de==="result")Ke.push("");else if(de==="outline_selected_batch"){const sn=D.map(We);Ke.push(`${sn.join("")}`)}else if(de==="outline_summaries"){const sn=D.map(We);Ke.push(`${sn.join("")}`)}else if(de==="outline_unprocessed_docs"){const sn=D.map(We);Ke.push(`${sn.join("")}`)}else if(de==="batch_outline"){const sn=D.map(We);Ke.push(`${sn.join("")}`)}return Ke.join("")||""})(),ei=(()=>{const Ke=[];if(w&&_n){const We=D.map(Et=>{const sn=((e==null?void 0:e.sections)||[]).find(Kt=>Kt.id===Et);return sn?`${sn.level===1?"":sn.level===2?"":sn.level===3?"":`${sn.level}`}${sn.title}`:Et});Ke.push(`${We.join("")}`)}if(Dt&&Array.isArray($e.edits)){const We=$e.edits.map(Et=>{const sn=E.find(Kt=>Kt.sectionId===Et.sectionId),bt=((e==null?void 0:e.sections)||[]).find(Kt=>Kt.id===Et.sectionId);return bt?`${bt.level===1?"":bt.level===2?"":bt.level===3?"":`${bt.level}`}${bt.title}${Et.field==="title"?"":""}`:`${Et.sectionId}${Et.field||"summary"}`});Ke.push(`${We.join("")}`)}return Ke.push(""),Ke.join("")})(),ci=de==="result"&&Array.isArray(Pe)&&Pe.length?Pe.map((Ke,We)=>`${We+1}${(Ke==null?void 0:Ke.key)||""}
${(Ke==null?void 0:Ke.text)||""}`).join(`

`):E&&E.length>0?E.map((Ke,We)=>`${Ke.label||`${We+1}`}
${Ke.content||""}`).join(`

`):"",zi=D.map(Ke=>{const We=((e==null?void 0:e.sections)||[]).find(sn=>sn.id===Ke);if(!We)return{id:Ke,found:!1};const Et=We.level===1?"":We.level===2?"":We.level===3?"":`${We.level}`;return{id:We.id,level:We.level,levelText:Et,title:We.title,originalSummary:We.summary||"",originalHint:We.hint||"",found:!0}}),Ct=de==="outline_summaries_multi",tr=Ct?E.map(Ke=>{const We=((e==null?void 0:e.sections)||[]).find(Kt=>Kt.id===Ke.sectionId),Et=Ke.content||"",sn=Et.slice(0,50).trim(),bt=Et.slice(-50).trim();return{sectionId:Ke.sectionId,summaryIndex:Ke.summaryIndex,summaryKey:Ke.summaryKey,sectionTitle:(We==null?void 0:We.title)||"",sectionLevel:(We==null?void 0:We.level)||1,originalContent:Et,originalContentExcerpt:Et.length>200?Et.substring(0,200)+"...":Et,originalContentLength:Et.length,contentFeatures:{startsWith:sn,endsWith:bt,charCount:Et.length,lineCount:Et.split(`
`).length,hasNumbers:/\d/.test(Et),hasDates:/\d{4}|\d{1,2}|\d{1,2}/.test(Et),isEmpty:!Et.trim()}}}):[];if(Yn("",{type:Ct?"dispatch_multi_summary":"dispatch",actionDescription:Ct?` ${E.length} ${x}`:`${x}`,promptContent:x,instructions:x,inputKind:de,inputSourceType:de,inputSourceDesc:xn,inputContent:ci,inputContentExcerpt:ci.length>500?ci.substring(0,500)+"...":ci,selectedSectionTitles:D.map(Ke=>{const We=((e==null?void 0:e.sections)||[]).find(Et=>Et.id===Ke);return(We==null?void 0:We.title)||Ke}),selectedSectionIds:D,inputs:ae,isMultiSummaryMode:Ct,targetSummaries:tr,targetSectionsDetail:zi,outlineSegmentsMeta:(E||[]).map(Ke=>({sectionTitle:Ke.label||Ke.title||"",sectionId:Ke.sectionId,summaryIndex:Ke.summaryIndex,summaryKey:Ke.summaryKey,field:Ke.field,originalContent:Ke.content||""})),outputTargetDesc:ei,process:`${x}`,outputs:{summary:Ye,usedModel:De,outputContent:ct||Ye,outputContentExcerpt:ct?ct.substring(0,500):Ye,detailExcerpt:ct,edits:Array.isArray($e.edits)?$e.edits.map(Ke=>({sectionId:Ke.sectionId,field:Ke.field||"summary",newValue:Ke.newValue,newValueExcerpt:(Ke.newValue||"").substring(0,200)})):[],editsCount:Array.isArray($e.edits)?$e.edits.length:0,status:"done"},destinations:ut,aiGuidance:Ct?`${x} ${tr.length} ${tr.map(Ke=>`${Ke.sectionLevel}${Ke.sectionTitle}[${Ke.summaryIndex}]`).join("")}Replay `:`${x}Replay `,specialRequirements:Ct?` ${tr.length} `:""}),w){const Ke=Object.keys(fe).filter(We=>fe[We]);me(We=>{const Et={...We};return Ke.forEach(sn=>{(Z[sn]||[]).forEach(Kt=>{Et[sn]||(Et[sn]={}),Et[sn][Kt]=!0})}),Et})}}catch($e){A($e.message),ie(De=>[...De,{role:"system",text:`${$e.message}`}])}finally{b(!1)}}async function vc(g){var x;try{await Gt(`/api/docs/${g}`,{method:"DELETE"});const K=o.filter($=>$.id!==g);if(a(K),ne($=>{const E={...$};return Object.keys(E).forEach(ae=>{E[ae]=(E[ae]||[]).filter(de=>de!==g),E[ae].length||delete E[ae]}),E}),s){const $=(s.docIds||[]).filter(ae=>ae!==g),E={...s,docIds:$};u(E)}l===g&&d(((x=K[0])==null?void 0:x.id)||null),A("")}catch(K){console.error(K),A(K.message||"")}}const Wl=async()=>{if(o.length&&confirm(""))try{for(const g of o)await Gt(`/api/docs/${g.id}`,{method:"DELETE"});a([]),d(null),ne({}),ce({}),me({}),s&&u({...s,docIds:[]}),A("")}catch(g){console.error(g),A(g.message||"")}};Qe.useEffect(()=>{if(!kr.length){ar("");return}ar(g=>g&&kr.some(x=>x.id===g)?g:kr[0].id)},[kr]),o.find(g=>g.id===l);const bl={1:"",2:"",3:"",4:"",5:""};Object.keys(oe).length;const _l=(g,x,K,$=null)=>{const E=$!==null?`${g}||${x}||${$}`:`${g}||${x}`;C(ae=>({...ae,[E]:K??""}))},mu=g=>{var D;const x=ye[g]||l;if(!x){A("");return}const K=Z[g]||[];if(K.includes(x))return;const $={...Z,[g]:[...K,x]};ne($),rl($);const E=((e==null?void 0:e.sections)||[]).find(Pe=>Pe.id===g),ae=((D=o.find(Pe=>Pe.id===x))==null?void 0:D.name)||x,de=E?E.level===1?"":E.level===2?"":E.level===3?"":`${E.level}`:"";Yn("",{type:"outline_link_doc",sectionId:g,docId:x,docName:ae,targetSectionTitle:(E==null?void 0:E.title)||"",targetSection:E?{id:E.id,level:E.level,levelText:de,title:E.title||"",summary:(E.summary||E.hint||"").substring(0,100)}:null,inputs:[{kind:"doc_link_pick",sectionId:g,docName:ae,contextSummary:`${ae}${de}${(E==null?void 0:E.title)||g}`}],actionDescription:`${ae}${de}${(E==null?void 0:E.title)||""}`,process:"/",outputs:{summary:`${ae}`,targetSectionTitle:(E==null?void 0:E.title)||"",targetSectionLevel:(E==null?void 0:E.level)||1},destinations:[{kind:"outline_section_docs",sectionId:g,sectionTitle:(E==null?void 0:E.title)||""}],aiGuidance:`${de}${(E==null?void 0:E.title)||""}${ae}`},[E?`${E.title||""}${Number(E.level)||1}`:`${g}`])},gu=(g,x)=>{var $e;const K=x||ye[g]||l,$=o.find(De=>De.id===K),E=K&&K===l?M||($==null?void 0:$.content)||"":($==null?void 0:$.content)||"";t(De=>{if(!De)return De;const Ye=De.sections.map(Dt=>{if(Dt.id!==g)return Dt;const mt=Array.isArray(Dt.summaries)?[...Dt.summaries]:[];if(mt.length>0){const tt=`${Dt.id}_sum_copy_${Date.now()}`;mt.push({id:tt,content:E});const ft=mt.map(Qt=>Qt.content).filter(Boolean).join(`

`);return{...Dt,summaries:mt,summary:ft}}else return{...Dt,summary:E}}),ct={...De,sections:Ye};return s!=null&&s.customTemplate&&u({...s,customTemplate:ct}),ct});const ae=((e==null?void 0:e.sections)||[]).find(De=>De.id===g),de=($==null?void 0:$.name)||K||"",D=ae?ae.level===1?"":ae.level===2?"":ae.level===3?"":`${ae.level}`:"",Pe=(E||"").toString(),Ue=Pe.substring(0,100),je=Pe.length>100?Pe.substring(Pe.length-100):"";Yn("",{type:"copy_full_to_summary",sectionId:g,docId:K,docName:de,targetSectionTitle:(ae==null?void 0:ae.title)||"",targetSection:ae?{id:ae.id,level:ae.level,levelText:D,title:ae.title||"",originalSummary:(ae.summary||ae.hint||"").substring(0,100)}:null,inputs:[{kind:K&&K===l?"doc_preview":"doc_resource",docName:de,contextSummary:`${de}`,textLength:Pe.length,textExcerptStart:Ue,textExcerptEnd:je,contentFeatures:{totalLength:Pe.length,lineCount:Pe.split(`
`).length,hasTitle:Pe.includes("")||Pe.includes("")||Pe.includes("1."),firstLine:(($e=Pe.split(`
`)[0])==null?void 0:$e.substring(0,50))||""}}],actionDescription:`${de}${D}${(ae==null?void 0:ae.title)||""}`,process:"",outputs:{summary:`${Pe.length}`,targetSectionTitle:(ae==null?void 0:ae.title)||"",newSummaryLength:Pe.length},destinations:[{kind:"outline_section_summary",sectionId:g,sectionTitle:(ae==null?void 0:ae.title)||""}],aiGuidance:`${D}${(ae==null?void 0:ae.title)||""}${de}Replay `},[ae?`${ae.title||""}${Number(ae.level)||1}`:`${g}`]),A(E.toString().trim().length?"":"")},Wu=(g,x)=>{var D;const $=(Z[g]||[]).filter(Pe=>Pe!==x),E={...Z,[g]:$};$.length||delete E[g],ne(E),rl(E),me(Pe=>{const Ue={...Pe};return Ue[g]&&(delete Ue[g][x],Object.keys(Ue[g]).length||delete Ue[g]),Ue});const ae=((e==null?void 0:e.sections)||[]).find(Pe=>Pe.id===g),de=((D=o.find(Pe=>Pe.id===x))==null?void 0:D.name)||x;Yn("",{type:"outline_unlink_doc",sectionId:g,docId:x,docName:de,inputs:[{kind:"doc_link_pick",sectionId:g,docName:de}],process:"",outputs:{summary:`${de}`},destinations:[{kind:"outline_section_docs",sectionId:g}]},[ae?`${ae.title||""}${Number(ae.level)||1}`:`${g}`])},rl=async g=>{if(!s)return null;try{const{scene:x}=await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{sectionDocLinks:g}});return u(x),ne((x==null?void 0:x.sectionDocLinks)||{}),x}catch(x){console.error(x),A(x.message||"")}return null},Hu=async()=>{if(l)try{const{doc:g}=await Gt(`/api/docs/${l}`,{method:"PATCH",body:{content:M}});a(x=>x.map(K=>K.id===g.id?g:K)),A("")}catch(g){console.error(g),A(g.message||"")}},yu=(g,x,K=null)=>{const $=K!==null?`${g}||${x}||${K}`:`${g}||${x}`;C(E=>{const ae={...E};return delete ae[$],ae})},vu=(g,x,K,$=null)=>{const E=e==null?void 0:e.sections.find(de=>de.id===g);E!=null&&E.summary;const ae=(E==null?void 0:E.title)||"";if(t(de=>{if(!de)return de;const D=de.sections.map(Ue=>{if(Ue.id!==g)return Ue;if(x==="summary"&&$!==null){const je=Array.isArray(Ue.summaries)?[...Ue.summaries]:Ue.summary||Ue.hint?[{id:`${Ue.id}_sum_0`,content:Ue.summary||Ue.hint||""}]:[];$>=0&&$<je.length&&(je[$]={...je[$],content:K});const $e=je.map(De=>De.content).filter(Boolean).join(`

`);return{...Ue,summaries:je,summary:$e}}return{...Ue,[x]:K}}),Pe={...de,sections:D};return u(Ue=>Ue&&(Ue.customTemplate||de.id==="template_auto"||de.id==="template_empty"?{...Ue,customTemplate:Pe}:Ue)),Pe}),yu(g,x,$),x==="summary"){const de=((e==null?void 0:e.sections)||[]).find(D=>D.id===g);Yn("",{type:"edit_outline_summary",sectionTitle:(de==null?void 0:de.title)||"",sectionId:g,inputs:[{kind:"manual_edit",sourceType:"user_edit"}],process:"",outputs:{summary:"",status:"done"},destinations:[{kind:"outline_section_summary",sectionTitle:(de==null?void 0:de.title)||"",sectionId:g}]},[de?`${de.title||""}${Number(de.level)||1}`:`${g}`])}else if(x==="title"){const de=((e==null?void 0:e.sections)||[]).find(D=>D.id===g);Yn("",{type:"edit_outline_title",sectionTitle:ae||"",sectionId:g,inputs:[{kind:"manual_edit",sourceType:"user_edit"}],process:"",outputs:{summary:"",status:"done"},destinations:[{kind:"outline_section_title",sectionTitle:ae||"",sectionId:g}]},[de?`${ae||""}`:`${g}`])}},ts=(g,x=null)=>{const K=e==null?void 0:e.sections.find($=>$.id===g);K&&(t($=>{if(!$)return $;const E=$.sections.map(de=>{if(de.id!==g)return de;const D=Array.isArray(de.summaries)?[...de.summaries]:de.summary||de.hint?[{id:`${de.id}_sum_0`,content:de.summary||de.hint||""}]:[],Ue={id:`${de.id}_sum_${Date.now()}`,content:""};return x!==null&&x>=0&&x<=D.length?D.splice(x,0,Ue):D.push(Ue),{...de,summaries:D}}),ae={...$,sections:E};return u(de=>de&&(de.customTemplate||$.id==="template_auto"||$.id==="template_empty"?{...de,customTemplate:ae}:de)),ae}),Yn("",{type:"add_summary_to_section",sectionId:g,sectionTitle:(K==null?void 0:K.title)||"",insertAtIndex:x,process:"",outputs:{summary:""}},[`${(K==null?void 0:K.title)||""}${Number(K==null?void 0:K.level)||1}`]))},Os=(g,x)=>{const K=e==null?void 0:e.sections.find($=>$.id===g);K&&(t($=>{if(!$)return $;const E=$.sections.map(de=>{if(de.id!==g)return de;const D=Array.isArray(de.summaries)?[...de.summaries]:de.summary||de.hint?[{id:`${de.id}_sum_0`,content:de.summary||de.hint||""}]:[];x>=0&&x<D.length&&D.splice(x,1);const Pe=D.map(Ue=>Ue.content).filter(Boolean).join(`

`);return{...de,summaries:D,summary:Pe}}),ae={...$,sections:E};return u(de=>de&&(de.customTemplate||$.id==="template_auto"||$.id==="template_empty"?{...de,customTemplate:ae}:de)),ae}),Yn("",{type:"remove_summary_from_section",sectionId:g,sectionTitle:(K==null?void 0:K.title)||"",summaryIndex:x,process:"",outputs:{summary:""}},[`${(K==null?void 0:K.title)||""}${Number(K==null?void 0:K.level)||1}`]))},ks=(g,x)=>{const K=q[g];Se(K===x?$=>{const E={...$};return delete E[g],E}:$=>({...$,[g]:x}))},va=(g,x="paragraph")=>{const K=e==null?void 0:e.sections.find(D=>D.id===g);if(!K)return;const $=Array.isArray(K.summaries)?[...K.summaries]:K.summary||K.hint?[{id:`${K.id}_sum_0`,content:K.summary||K.hint||""}]:[];if($.length<2)return;const E=x==="sentence"?"":`

`,ae=$.map(D=>(D.content||"").trim()).filter(Boolean).join(E),de={id:`${g}_sum_merged_${Date.now()}`,content:ae};t(D=>{if(!D)return D;const Pe=D.sections.map(je=>je.id!==g?je:{...je,summaries:[de],summary:ae}),Ue={...D,sections:Pe};return u(je=>je&&(je.customTemplate||D.id==="template_auto"||D.id==="template_empty"?{...je,customTemplate:Ue}:je)),Ue}),Yn("",{type:"merge_summaries_in_section",sectionId:g,sectionTitle:(K==null?void 0:K.title)||"",mergeType:x,originalCount:$.length,process:` ${$.length} ${x==="sentence"?"":""}`,outputs:{summary:""}},[`${(K==null?void 0:K.title)||""}${Number(K==null?void 0:K.level)||1}`])},Hl=g=>{const x=e==null?void 0:e.sections.find($=>$.id===g),K=(x==null?void 0:x.summary)||(x==null?void 0:x.hint)||"";t($=>{if(!$)return $;const E=$.sections.map(de=>de.id===g?{...de,summary:"",hint:""}:de),ae={...$,sections:E};return u(de=>de&&(de.customTemplate||$.id==="template_auto"||$.id==="template_empty"?{...de,customTemplate:ae}:de)),ae}),H($=>({...$,[g]:!1})),yu(g,"summary"),Yn("",{type:"clear_outline_summary",sectionId:g,inputs:[{kind:"outline_selected",sectionIds:[g]}],process:"/",outputs:{summary:`${(K||"").toString().length}`,beforeExcerpt:vt(K||"",260)},destinations:[{kind:"outline_section_summary",sectionId:g}]},[x?`${x.title||""}${Number(x.level)||1}`:`${g}`]),A("")},ns=(g,x)=>{const K=Number(x)||1;t($=>{if(!$)return $;const E=$.sections.map(de=>de.id===g?{...de,level:Math.max(1,Math.min(4,K))}:de),ae={...$,sections:E};return u(de=>de&&(de.customTemplate||$.id==="template_auto"||$.id==="template_empty"?{...de,customTemplate:ae}:de)),ae})},rs=g=>{t(x=>{if(!x)return x;const K=g(x.sections||[]),$={...x,sections:K};return u(E=>E&&(E.customTemplate||x.id==="template_auto"||x.id==="template_empty"?{...E,customTemplate:$}:E)),$})},Ed=g=>{const K=((e==null?void 0:e.sections)||[]).find(de=>de.id===g),$=(K==null?void 0:K.level)||1,E=$===1?"":$===2?"":$===3?"":`${$}`,ae={id:`sec_local_${Date.now()}_${Math.floor(Math.random()*1e3)}`,title:"",summary:"",hint:"",level:$};rs(de=>{var De,Ye;if(!de.length)return[ae];const D=de.findIndex(ct=>ct.id===g);if(D===-1)return[...de,ae];const Pe=Math.max(1,Math.min(4,Number((De=de[D])==null?void 0:De.level)||1));let Ue=D+1;for(;Ue<de.length&&!(Math.max(1,Math.min(4,Number((Ye=de[Ue])==null?void 0:Ye.level)||1))<=Pe);)Ue++;const je=de.slice(0,Ue),$e=de.slice(Ue);return[...je,ae,...$e]}),Yn("",{type:"add_outline_section",actionDescription:K?`${E}${K.title}`:"",afterSectionId:g,afterSection:K?{id:K.id,level:K.level,levelText:E,title:K.title||"",summary:K.summary||""}:null,inputs:[{kind:"outline_position",afterSectionId:g}],newSection:{id:ae.id,level:ae.level,levelText:E,title:ae.title,summary:ae.summary},process:"",outputs:{summary:`${(K==null?void 0:K.title)||""}`,newSectionId:ae.id,newSectionTitle:ae.title},destinations:["/"],outputTarget:"",aiGuidance:`Replay ${(K==null?void 0:K.title)||""}`,specialRequirements:""})},Td=g=>{var Pe,Ue;const x=(e==null?void 0:e.sections)||[],K=x.findIndex(je=>je.id===g);if(K===-1)return;const $=Math.max(1,Math.min(3,Number((Pe=x[K])==null?void 0:Pe.level)||1)),E=[x[K].id];for(let je=K+1;je<x.length&&!(Math.max(1,Math.min(3,Number((Ue=x[je])==null?void 0:Ue.level)||1))<=$);je+=1)E.push(x[je].id);const ae=x.filter(je=>E.includes(je.id));rs(je=>(je||[]).filter($e=>!E.includes($e.id))),ne(je=>{const $e={...je};return E.forEach(De=>delete $e[De]),rl($e),$e}),ce(je=>{const $e={...je};return E.forEach(De=>delete $e[De]),$e}),he(je=>{const $e={...je};return E.forEach(De=>delete $e[De]),$e}),me(je=>{const $e={...je};return E.forEach(De=>delete $e[De]),$e}),H(je=>{const $e={...je};return E.forEach(De=>delete $e[De]),$e}),C(je=>{const $e={...je};return E.forEach(De=>{delete $e[`${De}||title`],delete $e[`${De}||summary`]}),$e});const de=x[K],D=$===1?"":$===2?"":$===3?"":`${$}`;Yn("",{type:"delete_outline_section",actionDescription:`${D}${(de==null?void 0:de.title)||""}`,sectionId:g,removedIds:E,baseLevel:$,inputs:[{kind:"outline_selected",sectionIds:[g]}],targetSection:{id:de==null?void 0:de.id,level:de==null?void 0:de.level,levelText:D,title:(de==null?void 0:de.title)||"",summary:(de==null?void 0:de.summary)||"",hint:(de==null?void 0:de.hint)||""},removedSections:ae.map(je=>({id:je.id,level:je.level,levelText:je.level===1?"":je.level===2?"":je.level===3?"":`${je.level}`,title:je.title||"",summary:je.summary||"",hint:je.hint||""})),process:`${$}`,outputs:{summary:`${(de==null?void 0:de.title)||g}${E.length}`,deletedCount:E.length,removedSample:ae.slice(0,8).map(je=>({id:je.id,level:je.level,title:vt(je.title||"",80)}))},destinations:["/"],outputTarget:"",aiGuidance:`Replay ${(de==null?void 0:de.title)||""}`,specialRequirements:""},[])};oA((e==null?void 0:e.sections)||[]);const Fs=()=>{const g=vo.current;if(!g)return;const x=Number(g.selectionStart??0),K=Number(g.selectionEnd??0);if(!Number.isFinite(x)||!Number.isFinite(K)||K<=x){pn({text:"",start:0,end:0});return}const $=(g.value||"").slice(x,K);if(!$.toString().trim()){pn({text:"",start:0,end:0});return}pn({text:$,start:x,end:K})},Gl=()=>{const g=vo.current;if(!g)return null;const x=Number(g.selectionStart??0),K=Number(g.selectionEnd??0);if(!Number.isFinite(x)||!Number.isFinite(K)||K<=x)return null;const $=(g.value||"").slice(x,K);return $.toString().trim()?{text:$,start:x,end:K}:null},il=async()=>{var Qt,_n;const g=Gl(),K=(Qi.text||(g==null?void 0:g.text)||"").toString().trim();if(!K){A("");return}if(!w||I!=="outline"){A("");return}const $=o.find(ut=>ut.id===l),E=($==null?void 0:$.name)||"",ae=Object.keys(ee||{}).filter(ut=>ee[ut]);if(ae.length>0){const ut=ae.map(bt=>{const[Kt,Bn]=bt.split("_"),Jn=parseInt(Bn,10),Sr=((e==null?void 0:e.sections)||[]).find(bo=>bo.id===Kt);return{sectionId:Kt,sumIdx:Jn,section:Sr,key:bt}}).filter(bt=>bt.section);if(!ut.length){A("");return}const xn=(()=>{const bt=e;if(!bt||!Array.isArray(bt.sections))return null;const Kt=bt.sections.map(Bn=>{const Jn=ut.filter(Sr=>Sr.sectionId===Bn.id);if(!Jn.length)return Bn;if(Array.isArray(Bn.summaries)&&Bn.summaries.length>0){const Sr=Bn.summaries.map((Mo,Po)=>Jn.find(Fa=>Fa.sumIdx===Po)?{...Mo,content:K}:Mo),bo=Sr.map(Mo=>Mo.content||"").filter(Boolean).join(`

`);return{...Bn,summaries:Sr,summary:bo}}else return Jn.find(bo=>bo.sumIdx===0)?{...Bn,summary:K}:Bn});return{...bt,sections:Kt}})();if(xn&&(t(xn),u(bt=>bt&&{...bt,customTemplate:xn}),s!=null&&s.id))try{const bt=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:xn}});bt!=null&&bt.template&&t(bt.template),bt!=null&&bt.scene&&u(bt.scene)}catch(bt){console.error(bt),A((bt==null?void 0:bt.message)||"")}const ei=($==null?void 0:$.content)||"",ci=(g==null?void 0:g.start)??Qi.start,zi=(g==null?void 0:g.end)??Qi.end,Ct=ei.slice(Math.max(0,ci-100),ci).trim(),tr=ei.slice(zi,zi+100).trim(),Ke=K.slice(0,50).trim(),We=K.slice(-50).trim(),Et=ut.map(bt=>{var Jn;const Kt=bt.section;let Bn="";return Array.isArray(Kt==null?void 0:Kt.summaries)&&Kt.summaries.length>0?Bn=(((Jn=Kt.summaries[bt.sumIdx])==null?void 0:Jn.content)||"").toString().trim():Bn=((Kt==null?void 0:Kt.summary)||"").toString().trim(),{sectionId:bt.sectionId,summaryIndex:bt.sumIdx,sectionTitle:(Kt==null?void 0:Kt.title)||"",sectionLevel:(Kt==null?void 0:Kt.level)||1,summaryKey:bt.key,hadContentBefore:!!Bn,originalContentExcerpt:vt(Bn,100),originalContentLength:Bn.length}}),sn=Et.map(bt=>`${bt.sectionLevel===1?"":bt.sectionLevel===2?"":""}${bt.sectionTitle}[${bt.summaryIndex}]`);Yn("",{type:"insert_to_summary_multi",intentDescription:`${E} ${ut.length} `,docName:E,docId:($==null?void 0:$.id)||"",selection:{start:ci,end:zi},targetSummaries:Et,targetSectionIds:[...new Set(ut.map(bt=>bt.sectionId))],selectedSectionTitles:[...new Set(Et.map(bt=>bt.sectionTitle))],targetSectionsDetail:Et.map(bt=>({id:bt.sectionId,title:bt.sectionTitle,level:bt.sectionLevel,summaryIndex:bt.summaryIndex})),inputs:[{kind:"selection",docName:E,contextSummary:`${E}`,sourceType:"selection",text:K,textExcerpt:vt(K,200),textLength:K.length,textHead:Ke,textTail:We,contextBefore:vt(Ct,80),contextAfter:vt(tr,80),contentFeatures:{startsWith:Ke,endsWith:We,charCount:K.length,lineCount:K.split(`
`).length,hasNumbers:/\d/.test(K),hasDates:/\d{4}|\d{1,2}|\d{1,2}/.test(K)}},{kind:"outline_summaries_selected",contextSummary:`${ut.length}`,sourceType:"outline_summaries_selected",summaryKeys:ae,targetDescriptions:sn}],process:` ${ut.length} `,outputs:{summary:` ${ut.length} ${K.length}`,usedModel:"",status:"done",targetSummaries:Et,writtenContent:K,writtenContentExcerpt:vt(K,200)},destinations:Et.map(bt=>({kind:"outline_section_summary_item",sectionId:bt.sectionId,sectionTitle:bt.sectionTitle,sectionLevel:bt.sectionLevel,summaryIndex:bt.summaryIndex,hadContentBefore:bt.hadContentBefore,originalContentExcerpt:bt.originalContentExcerpt})),aiGuidance:`${sn.join("")}${E}${Ke}${We}${K.length}Replay`,specialRequirements:` ${ut.length} `},["",` ${ut.length} `]),X({}),pn({text:"",start:0,end:0}),A(` ${ut.length} `);return}const de=Object.keys(fe||{}).filter(ut=>fe[ut]);if(!de.length){A("");return}const D=((e==null?void 0:e.sections)||[]).filter(ut=>de.includes(ut.id)),Pe=D.map(ut=>{const xn=Number(ut.level)||1;return`- ${bl[xn]||bl[1]||""}${(ut.title||"").toString()}`}),Ue=[],je=[];D.forEach(ut=>{((ut==null?void 0:ut.summary)||"").toString().trim().length?Ue.push(ut.id):je.push(ut.id)});const $e=(()=>{const ut=e;if(!ut||!Array.isArray(ut.sections))return null;const xn=(ut.sections||[]).map(ei=>de.includes(ei.id)?{...ei,summary:K}:ei);return{...ut,sections:xn}})();if($e){if(t($e),u(ut=>ut&&{...ut,customTemplate:$e}),s!=null&&s.id)try{const ut=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:$e}});ut!=null&&ut.template&&t(ut.template),ut!=null&&ut.scene&&u(ut.scene)}catch(ut){console.error(ut),A((ut==null?void 0:ut.message)||"")}}else rs(ut=>(ut||[]).map(xn=>{if(!de.includes(xn.id))return xn;const ei=(xn.summary||"").toString(),ci=ei.trim()?`${ei}

${K}`:K;return{...xn,summary:ci}}));const De=($==null?void 0:$.content)||"",Ye=(g==null?void 0:g.start)??Qi.start,ct=(g==null?void 0:g.end)??Qi.end,Dt=De.slice(Math.max(0,Ye-100),Ye).trim(),mt=De.slice(ct,ct+100).trim(),tt=D.map(ut=>{var xn;return{id:ut.id,title:ut.title||"",level:ut.level||1,hadContentBefore:!!((xn=ut.summary)!=null&&xn.toString().trim())}});Yn("",{type:"insert_to_summary",intentDescription:"",docName:E,docId:($==null?void 0:$.id)||"",selection:{start:Ye,end:ct},targetSectionIds:de,inputs:[{kind:"selection",docName:E,contextSummary:E,sourceType:"selection",textExcerpt:vt(K,200),textLength:K.length,contextBefore:vt(Dt,80),contextAfter:vt(mt,80)},{kind:"outline_selected",contextSummary:`${de.length}`,sourceType:"outline_selected"}],process:"",outputs:{summary:`${de.length} ${K.length}`,usedModel:"",status:"done",targetSections:tt},destinations:[{kind:"outline_section_summary_batch",sectionTitle:tt.map(ut=>ut.title).join(""),count:de.length}],overwrittenSectionIds:Ue,emptyBeforeSectionIds:je},["",Pe.length?Pe.slice(0,8).join(`
`):"()"]);const ft=(g==null?void 0:g.end)??Qi.end;pn({text:"",start:0,end:0});try{(_n=(Qt=vo.current)==null?void 0:Qt.setSelectionRange)==null||_n.call(Qt,ft,ft)}catch{}A("")},Bs=(g,x,K,$,E=null)=>{const ae=$||(K==="pass"?"":K==="fail"?"":"");Aa(de=>{const D=de[g]||{running:!1,bySection:{}};return{...de,[g]:{...D,bySection:{...D.bySection||{},[x]:{status:K,message:ae,replayMode:E||(K==="done"?"script":null)}}}}})},wc=()=>Ce({docs:o,selectedDocId:l,docDraft:M,template:e,scene:s,sectionDocLinks:Z,sectionDocPick:ye,selectedOutlineExec:fe,sectionDocDone:se,dispatchLogs:Q,processedContent:te,finalSlots:oe,summaryExpanded:Be}),la=async g=>{if(g)try{const x=await zs();g.selectedDocId&&Array.isArray(x)&&x.some($=>$.id===g.selectedDocId)&&d(g.selectedDocId);const K=await ha();if(K!=null&&K.id){const $=await Gt(`/api/scene/${K.id}`),E=($==null?void 0:$.scene)||K;u(E);const ae=(E==null?void 0:E.customTemplate)||(E==null?void 0:E.template)||null;ae&&t(ae),E!=null&&E.sectionDocLinks&&ne(E.sectionDocLinks)}}catch{}},Ms=(g,x)=>{const K=(g||"").toString().trim().toLowerCase();if(!K)return null;const $=(x||[]).find(E=>((E==null?void 0:E.name)||"").toString().trim().toLowerCase()===K);return($==null?void 0:$.id)||null},Br=g=>Ms(g,o),vr=()=>new Promise(g=>setTimeout(g,0)),zs=async()=>{try{const g=await Gt("/api/docs");if(Array.isArray(g==null?void 0:g.docs))return a(g.docs),g.docs}catch{}return null},oo=async g=>{const x=(g||(s==null?void 0:s.id)||"").toString();if(!x)return null;try{const K=await Gt(`/api/scene/${x}`),$=K==null?void 0:K.scene;return $&&(u($),ne($.sectionDocLinks||{}),$.customTemplate&&t($.customTemplate)),$||null}catch{return null}},Ao=async g=>{const x=await oo(g);if(x!=null&&x.customTemplate)return x.customTemplate;try{const K=await Gt("/api/template");return(K==null?void 0:K.template)||null}catch{return null}},ol=async()=>{var g,x,K,$;try{const E=await Ao(s==null?void 0:s.id);if(((g=E==null?void 0:E.sections)==null?void 0:g.length)>0)return E.sections}catch(E){console.warn("[getLatestTemplateSections] :",E)}try{const E=await Gt("/api/template");if(((K=(x=E==null?void 0:E.template)==null?void 0:x.sections)==null?void 0:K.length)>0)return E.template.sections}catch(E){console.warn("[getLatestTemplateSections] API :",E)}return(($=e==null?void 0:e.sections)==null?void 0:$.length)>0?e.sections:[]},ca=async g=>{var K;if(!(s!=null&&s.id))throw new Error("scene ");if(!g||!Array.isArray(g.sections))throw new Error("template ");const x=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:g}});return x!=null&&x.scene&&u(x.scene),x!=null&&x.template&&t(x.template),(K=x==null?void 0:x.scene)!=null&&K.sectionDocLinks&&ne(x.scene.sectionDocLinks||{}),(x==null?void 0:x.template)||null},As=(g,x)=>{if(g&&typeof g=="object")return!1;const K=(x||"").toString();return!(K===""||K===""||K===""||K===""||K==="")},Kl=async(g,x)=>{var ct,Dt,mt,tt,ft,Qt,_n,ut,xn,ei,ci,zi,Ct,tr,Ke,We,Et,sn,bt,Kt,Bn,Jn,Sr,bo,Mo,Po,Wo,Fa,xc,Ba,wu,Yc,xu,Jc,bu,Sl,bc,Yl,Ns,wa,Vs,al,_c,Sc,_u,kc,Ac,Ld;const K=(x==null?void 0:x.sectionReplayMode)||(g==null?void 0:g.precipitationMode)||"llm",$=Oc(K);let E=(x==null?void 0:x.llmScript)||{};const ae=(x==null?void 0:x.originalScript)||{};if(console.log("[Replay]  llmScript.aiGuidance:",((ct=E==null?void 0:E.aiGuidance)==null?void 0:ct.substring(0,100))||"()"),console.log("[Replay] deposit.llmRecordContent :",((Dt=g==null?void 0:g.llmRecordContent)==null?void 0:Dt.length)||0),console.log("[Replay] section.meta?.aiGuidance:",((tt=(mt=x==null?void 0:x.meta)==null?void 0:mt.aiGuidance)==null?void 0:tt.substring(0,100))||"()"),$==="llm"&&!E.aiGuidance){let Lt="";if(!Lt&&((ft=x==null?void 0:x.meta)!=null&&ft.aiGuidance)&&(Lt=x.meta.aiGuidance,console.log("[Replay]  section.meta.aiGuidance ")),!Lt&&((Qt=x==null?void 0:x.llmScript)!=null&&Qt.structuredScriptContent)){const Wt=x.llmScript.structuredScriptContent,en=/AI\s*([\s\S]*?)(?=[^A]|\[|\n\n\n|---\n|===|$)/s,zt=Wt.match(en);zt&&(Lt=zt[1].trim(),console.log("[Replay]  structuredScriptContent "))}if(!Lt&&(g!=null&&g.llmRecordContent)){const Wt=g.llmRecordContent,en=/AI\s*([\s\S]*?)(?=[^A]|\[|\n\n\n|---\n|===|$)/s,zt=Wt.match(en);zt&&(Lt=zt[1].trim(),console.log("[Replay]  llmRecordContent "))}if(!Lt&&(x!=null&&x.content)){const Wt=/AI\s*([\s\S]*?)(?=[^A]|\[|\n\n\n|---\n|===|$)/s,en=x.content.match(Wt);en&&(Lt=en[1].trim(),console.log("[Replay]  section.content "))}Lt?(console.log("[Replay]  aiGuidance :",Lt.substring(0,100)),E={...E,aiGuidance:Lt}):console.log("[Replay]  aiGuidance")}else $==="llm"&&E.aiGuidance&&console.log("[Replay] llmScript  aiGuidance");const de=Xe((x==null?void 0:x.content)||"");let D;$==="llm"?(D={...de},E.type&&(D.type=E.type),E.docName&&(D.docName=E.docName),E.targetSectionId&&(D.sectionId=E.targetSectionId),E.docSelector&&typeof E.docSelector=="object"&&(D.docSelector=E.docSelector),!D.docSelector&&E.flexKeywords&&(D.docSelector={kind:"keywords",keywords:E.flexKeywords.split(/[,\s]+/).filter(Boolean),description:E.flexKeywords,mode:"single"}),(E.instructions||E.promptContent)&&(D.instructions=E.instructions||E.promptContent,D.promptContent=E.promptContent||E.instructions),E.aiGuidance&&(D.aiGuidance=E.aiGuidance),E.specialRequirements&&(D.specialRequirements=E.specialRequirements),E.buttonId&&(D.buttonId=E.buttonId),E.selectedDocName&&(D.selectedDocName=E.selectedDocName)):D={...de,type:ae.type||(de==null?void 0:de.type),docName:ae.docName||(de==null?void 0:de.docName),sectionId:ae.sectionId||(de==null?void 0:de.sectionId),instructions:ae.instructions||(de==null?void 0:de.instructions),promptContent:ae.promptContent||(de==null?void 0:de.promptContent),buttonId:ae.buttonId||(de==null?void 0:de.buttonId),selectedDocName:ae.selectedDocName||(de==null?void 0:de.selectedDocName)};const Pe=((x==null?void 0:x.action)||"").toString(),Ue=(g==null?void 0:g.validationMode)||"none",je=$==="script"?!0:Ue==="strict",$e=[],De=(Lt,Wt,en={})=>{if(Lt)return!0;if($==="script")throw new Error(Wt||"Replay ");if(!en.strict&&!je)return $e.push(Wt||"Replay "),!1;throw new Error(Wt||"Replay ")},Ye=Lt=>{if(!Lt||!$e.length)return Lt;if(Lt.status==="done"){const Wt=Lt.replayMode||"llm",en=$e.join("");let zt="";return Wt==="llm"?zt=`  Replay Done${en}`:zt=`  Replay Done${en}`,{...Lt,status:"pass",message:zt,softErrors:[...$e]}}return{...Lt,softErrors:[...$e]}};if(As(D,Pe))throw new Error(" section  Replay");if((D==null?void 0:D.type)==="dispatch_input"||Pe==="")return{status:"pass",message:""};if((D==null?void 0:D.type)==="edit_outline_title"||(D==null?void 0:D.type)==="edit_outline_summary"||(D==null?void 0:D.type)==="clear_outline_summary"||Pe===""||Pe===""||Pe==="")return Ye({status:"done",message:$==="llm"?"  Replay Done":"  Replay Done",replayMode:$});if((D==null?void 0:D.type)==="add_summary_to_section"||Pe===""){const Lt=(D==null?void 0:D.sectionId)||(D==null?void 0:D.targetSectionId),Wt=(D==null?void 0:D.sectionTitle)||(E==null?void 0:E.targetSectionTitle),en=D==null?void 0:D.insertAtIndex;let zt=null;if($==="llm"&&Wt){const zn=((e==null?void 0:e.sections)||[]).map(Pn=>({id:Pn.id,level:Pn.level,title:Pn.title}));try{const Pn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:{targetTitle:Wt,description:""},candidates:zn}});console.log("[Replay add_summary] :",Pn),Pn.matchedId&&(zt=((e==null?void 0:e.sections)||[]).find(Hn=>Hn.id===Pn.matchedId),console.log("[Replay] :",zt==null?void 0:zt.title))}catch(Pn){console.warn("[Replay add_summary] :",Pn)}}else Wt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.title===Wt)),!zt&&Lt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.id===Lt));if(!zt){if($==="llm")return Ye({status:"pass",message:` ${Wt||Lt}`,replayMode:"skipped",passReason:"target_section_not_found"});throw console.warn("[Replay] ",{sectionTitle:Wt,sectionId:Lt}),new Error(`${Wt||Lt}`)}ts(zt.id,en),await vr();const dr=$==="llm"?` ${zt.title}`:"  Replay Done";return Ye({status:"done",message:dr,replayMode:$})}if((D==null?void 0:D.type)==="remove_summary_from_section"){const Lt=(D==null?void 0:D.sectionId)||(D==null?void 0:D.targetSectionId),Wt=(D==null?void 0:D.sectionTitle)||(E==null?void 0:E.targetSectionTitle),en=D==null?void 0:D.summaryIndex;let zt=null;if($==="llm"&&Wt){const zn=((e==null?void 0:e.sections)||[]).map(Pn=>({id:Pn.id,level:Pn.level,title:Pn.title}));try{const Pn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:{targetTitle:Wt,description:""},candidates:zn}});console.log("[Replay remove_summary] :",Pn),Pn.matchedId&&(zt=((e==null?void 0:e.sections)||[]).find(Hn=>Hn.id===Pn.matchedId),console.log("[Replay] :",zt==null?void 0:zt.title))}catch(Pn){console.warn("[Replay remove_summary] :",Pn)}}else Wt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.title===Wt)),!zt&&Lt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.id===Lt));if(!zt||typeof en!="number"){if($==="llm")return Ye({status:"pass",message:` ${Wt||Lt}${typeof en!="number"?"":""}`,replayMode:"skipped",passReason:"target_section_not_found"});throw console.warn("[Replay] ",{sectionTitle:Wt,sectionId:Lt,sumIdx:en}),new Error(`${Wt||Lt}`)}Os(zt.id,en),await vr();const dr=$==="llm"?` ${zt.title}`:"  Replay Done";return Ye({status:"done",message:dr,replayMode:$})}if((D==null?void 0:D.type)==="merge_summaries_in_section"||Pe===""){const Lt=(D==null?void 0:D.sectionId)||(D==null?void 0:D.targetSectionId),Wt=(D==null?void 0:D.sectionTitle)||(E==null?void 0:E.targetSectionTitle),en=(D==null?void 0:D.mergeType)||"paragraph";let zt=null;if($==="llm"&&Wt){const zn=((e==null?void 0:e.sections)||[]).map(Pn=>({id:Pn.id,level:Pn.level,title:Pn.title}));try{const Pn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:{targetTitle:Wt,description:""},candidates:zn}});console.log("[Replay merge_summaries] :",Pn),Pn.matchedId&&(zt=((e==null?void 0:e.sections)||[]).find(Hn=>Hn.id===Pn.matchedId),console.log("[Replay] :",zt==null?void 0:zt.title))}catch(Pn){console.warn("[Replay merge_summaries] :",Pn)}}else Wt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.title===Wt)),!zt&&Lt&&(zt=((e==null?void 0:e.sections)||[]).find(zn=>zn.id===Lt));if(!zt){if($==="llm")return Ye({status:"pass",message:` ${Wt||Lt}`,replayMode:"skipped",passReason:"target_section_not_found"});throw console.warn("[Replay] ",{sectionTitle:Wt,sectionId:Lt}),new Error(`${Wt||Lt}`)}va(zt.id,en),await vr();const dr=$==="llm"?` ${zt.title}`:"  Replay Done";return Ye({status:"done",message:dr,replayMode:$})}if((D==null?void 0:D.type)==="add_doc"||Pe===""){const Lt=(D==null?void 0:D.docName)||(((x==null?void 0:x.content)||"").toString().split("")[1]||"").trim(),Wt=(D==null?void 0:D.source)==="upload"||((x==null?void 0:x.content)||"").toString().includes(""),en=$,zt=$==="llm"?"  Replay Done":"  Replay Done";if(Wt){if($==="llm"&&(D!=null&&D.docSelector)&&typeof D.docSelector=="object"){const ti=Ci(D.docSelector),Zr=await Io(ti);return De(Zr.count>0,"",{strict:!0}),ti.mode!=="multi"&&De(Zr.count===1,` ${Zr.count} `),await vr(),await zs(),Ye({status:"done",message:zt,replayMode:en})}De(!!Lt,"",{strict:!0});const Pn=typeof(D==null?void 0:D.overwritten)=="boolean"?D.overwritten:null;if(Pn===!0&&!Br(Lt)){const ti=await Gt("/api/docs",{method:"POST",body:{name:Lt,content:""}}),Zr=ti==null?void 0:ti.doc;if(Zr!=null&&Zr.id&&(a(Mr=>nh(Mr,[Zr])),s))try{const Mr=Array.from(new Set([Zr.id,...s.docIds||[]])),{scene:bn}=await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{docIds:Mr}});u(bn)}catch{}await vr();const go=await zs()||[];De(!!Ms(Lt,go),`${Lt}`)}const{doc:Hn,overwritten:Gr,text:Er}=await Ui(Lt);Pn!==null&&Gr!==Pn&&console.log(`[Replay] ${Pn?"":""}${Gr?"":""}`),De(!!(Hn!=null&&Hn.id)," doc",{strict:!0}),De(((Hn==null?void 0:Hn.name)||"").toString().trim()===Lt.trim(),`${(Hn==null?void 0:Hn.name)||""}`),De(((Hn==null?void 0:Hn.content)||"").toString()===(Er||"").toString(),""),await vr();const Dr=await zs()||[],nr=Ms(Lt,Dr);return De(!!nr,`${Lt}`),Ye({status:"done",message:zt,replayMode:en})}let dr=Br(Lt);if(!dr&&$==="llm"&&o.length>0){const Pn=((_n=E==null?void 0:E.docSelector)==null?void 0:_n.keywords)||[],Hn=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),Gr=(Lt||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),Er=[...new Set([...Pn,...Hn,...Gr])],Dr={docName:Lt,description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||"",keywords:Er.join(" "),selectorDescription:((ut=E==null?void 0:E.docSelector)==null?void 0:ut.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):""},nr=o.map(ti=>({id:ti.id,name:ti.name}));try{const ti=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:Dr,candidates:nr}});console.log("[Replay add_doc] :",ti),ti.matchedIndex>=0&&ti.matchedIndex<nr.length&&(dr=nr[ti.matchedIndex].id)}catch(ti){console.warn("[Replay add_doc] :",ti)}}if(!dr){if($==="llm")return Ye({status:"pass",message:` ${Lt}`,replayMode:"skipped",passReason:"source_doc_not_found"});throw new Error(`${Lt||"()"}`)}d(dr);const zn=o.find(Pn=>Pn.id===dr);return z((zn==null?void 0:zn.content)||""),await vr(),Ye({status:"done",message:zt,replayMode:en})}if((D==null?void 0:D.type)==="outline_extract"||Pe===""){const Lt=D==null?void 0:D.buttonId,Wt=Lt&&er.find(Hn=>Hn.id===Lt)||er.find(Hn=>Hn.kind==="outline_extract"&&Hn.enabled);if(!Wt){if($==="llm")return Ye({status:"pass",message:' ""',replayMode:"skipped",passReason:"button_not_found"});throw new Error('""')}const en=(D==null?void 0:D.selectedDocName)||(D==null?void 0:D.docName);let zt=null;if(en){if(zt=Br(en),!zt&&$==="llm"&&o.length>0){const Hn=((xn=E==null?void 0:E.docSelector)==null?void 0:xn.keywords)||[],Gr=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),Er=(en||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),Dr=[...new Set([...Hn,...Gr,...Er])],nr={docName:en,description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||"",keywords:Dr.join(" "),selectorDescription:((ei=E==null?void 0:E.docSelector)==null?void 0:ei.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):""},ti=o.map(Zr=>({id:Zr.id,name:Zr.name}));try{const Zr=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:nr,candidates:ti}});console.log("[Replay outline_extract] :",Zr),Zr.matchedIndex>=0&&Zr.matchedIndex<ti.length&&(zt=ti[Zr.matchedIndex].id)}catch(Zr){console.warn("[Replay outline_extract] :",Zr)}}if(zt){const Hn=o.find(Gr=>Gr.id===zt);d(zt),z((Hn==null?void 0:Hn.content)||""),await vr()}else if($==="llm")return Ye({status:"pass",message:` ${en}`,replayMode:"skipped",passReason:"source_doc_not_found"})}const dr=Number.isFinite((ci=D==null?void 0:D.outputs)==null?void 0:ci.sectionsCount)?Number(D.outputs.sectionsCount):null,zn=await Ea({btn:Wt,preferDocName:D==null?void 0:D.selectedDocName});De(zn>0," 0 "),dr!==null&&De(zn===dr,`${dr} ${zn}`),await oo(s==null?void 0:s.id);const Pn=$==="llm"?` ${zn} `:` ${zn} `;return Ye({status:"done",message:Pn,replayMode:$})}if((D==null?void 0:D.type)==="copy_full_to_summary"||Pe===""){if($==="llm"){console.log("[Replay copy_full_to_summary LLM]",{meta:D,llmScript:E});const nr=((zi=E==null?void 0:E.docSelector)==null?void 0:zi.keywords)||[],ti=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),Zr=((D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),go=[...new Set([...nr,...ti,...Zr])],Mr={docName:(D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"",description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||(D==null?void 0:D.aiGuidance)||"",keywords:go.join(" "),selectorDescription:((Ct=E==null?void 0:E.docSelector)==null?void 0:Ct.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",targetSectionTitle:(E==null?void 0:E.targetSectionTitle)||(D==null?void 0:D.targetSectionTitle)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):"",contentFeatures:((Ke=(tr=E==null?void 0:E.inputs)==null?void 0:tr[0])==null?void 0:Ke.contentFeatures)||((Et=(We=D==null?void 0:D.inputs)==null?void 0:We[0])==null?void 0:Et.contentFeatures)||null},bn=o.map(Ot=>({id:Ot.id,name:Ot.name}));let Tr=null,Ur=null;if(bn.length>0)try{const Ot=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:Mr,candidates:bn}});console.log("[Replay copy_full_to_summary] :",Ot),Ot.matchedIndex>=0&&Ot.matchedIndex<bn.length&&(Tr=bn[Ot.matchedIndex].id,Ur=o.find(qn=>qn.id===Tr),console.log("[Replay] :",Ur==null?void 0:Ur.name))}catch(Ot){console.warn("[Replay] :",Ot)}if(!Tr&&(Ar!=null&&Ar.dirPath))try{const Ot={kind:"keywords",keywords:Mr.keywords.split(/\s+/).filter(Boolean),description:Mr.docName,mode:"single"},qn=await Io(Ot);qn.count>0&&qn.names[0]&&(Tr=Br(qn.names[0]),Ur=o.find(fr=>fr.id===Tr)||await Gt("/api/docs").then(fr=>{var Ki;return(Ki=fr.docs)==null?void 0:Ki.find(si=>si.id===Tr)}))}catch(Ot){console.warn("[Replay] :",Ot)}if(!Tr||!Ur)return Ye({status:"pass",message:` ${Mr.docName}`,replayMode:"skipped",passReason:"source_doc_not_found"});const ii={targetTitle:(D==null?void 0:D.targetSectionTitle)||(E==null?void 0:E.targetSectionTitle)||((sn=E==null?void 0:E.targetSection)==null?void 0:sn.title)||"",targetLevel:((bt=E==null?void 0:E.targetSection)==null?void 0:bt.level)||"",description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||""};let Vn=await Ao(s==null?void 0:s.id);if((!Vn||!Array.isArray(Vn.sections)||Vn.sections.length===0)&&((Kt=e==null?void 0:e.sections)==null?void 0:Kt.length)>0&&(Vn=e),!Vn||!Array.isArray(Vn.sections)||Vn.sections.length===0)throw new Error("");const Hi=Vn.sections.map(Ot=>({id:Ot.id,level:Ot.level,title:Ot.title,summary:(Ot.summary||"").substring(0,100)}));console.log("[Replay copy_full_to_summary] :",Hi.map(Ot=>Ot.title)),console.log("[Replay copy_full_to_summary] :",ii.targetTitle),console.log("[Replay copy_full_to_summary] :",Hi.length);let Gi=null,an="";if(Hi.length>0)try{const Ot=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:ii,candidates:Hi}});if(console.log("[Replay copy_full_to_summary] :",Ot),console.log("[Replay copy_full_to_summary]  matchedId:",Ot.matchedId),console.log("[Replay copy_full_to_summary]  ID:",Hi.map(qn=>qn.id)),Ot.matchedId){const qn=Hi.find(fr=>fr.id===Ot.matchedId);if(console.log("[Replay copy_full_to_summary] :",qn?"":""),qn)Gi=Ot.matchedId,an=qn.title,console.log("[Replay] :",qn.title,"(:",ii.targetTitle,")");else if(console.warn("[Replay]  matchedId :",Ot.matchedId),Ot.matchedTitle){const fr=Hi.find(Ki=>{var si,$s;return Ki.title===Ot.matchedTitle||((si=Ki.title)==null?void 0:si.includes(Ot.matchedTitle))||(($s=Ot.matchedTitle)==null?void 0:$s.includes(Ki.title))});fr&&(Gi=fr.id,an=fr.title,console.log("[Replay] :",fr.title))}}else console.warn("[Replay copy_full_to_summary]  matchedId")}catch(Ot){console.warn("[Replay] :",Ot)}else console.warn("[Replay copy_full_to_summary] ");if(!Gi)return Ye({status:"pass",message:` ${ii.targetTitle}`,replayMode:"skipped",passReason:"target_section_not_found"});const ir=Hi.find(Ot=>Ot.id===Gi);if(!ir)return Ye({status:"pass",message:` ID${Gi}`,replayMode:"skipped",passReason:"target_section_not_found"});const nn=(Ur.content||"").toString(),ui={...Vn,sections:Vn.sections.map(Ot=>Ot.id===Gi?{...Ot,summary:nn}:Ot)},tn=await ca(ui);((tn==null?void 0:tn.sections)||[]).find(Ot=>Ot.id===Gi)||$e.push(""),await vr();const oi=an||ir.title,Xs=` ${Ur.name} ${oi}`;return console.log("[Replay copy_full_to_summary] :",oi,"(:",ii.targetTitle,")"),Ye({status:"done",message:Xs,replayMode:$})}const Lt=D==null?void 0:D.sectionId,Wt=D==null?void 0:D.docName;if(!Lt)throw new Error(" sectionId");if(!Wt)throw new Error(" docName");let en=Br(Wt),zt=en?o.find(nr=>nr.id===en):null;if(!en&&(Ar!=null&&Ar.dirPath)){const nr=await eo(Wt);en=(nr==null?void 0:nr.id)||null,zt=nr||null}if(!en)throw new Error(`${Wt}`);const dr=((zt==null?void 0:zt.content)||"").toString(),zn=await Ao(s==null?void 0:s.id);De(!!zn&&Array.isArray(zn.sections),"",{strict:!0});const Pn=(zn.sections||[]).find(nr=>nr.id===Lt);De(!!Pn,`${Lt}`,{strict:!0});const Hn={...zn,sections:(zn.sections||[]).map(nr=>nr.id===Lt?{...nr,summary:dr}:nr)},Gr=await ca(Hn),Er=((Gr==null?void 0:Gr.sections)||[]).find(nr=>nr.id===Lt);De(!!Er,`${Lt}`,{strict:!0}),De((Er.summary||"")===dr,""),await vr();const Dr=` ${Wt}`;return Ye({status:"done",message:Dr,replayMode:$})}if((D==null?void 0:D.type)==="outline_link_doc"||Pe===""){if($==="llm"){console.log("[Replay outline_link_doc LLM]",{meta:D,llmScript:E});const Gr=((Bn=E==null?void 0:E.docSelector)==null?void 0:Bn.keywords)||[],Er=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),Dr=((D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),nr=[...new Set([...Gr,...Er,...Dr])],ti={docName:(D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"",description:(E==null?void 0:E.actionDescription)||(E==null?void 0:E.description)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||(D==null?void 0:D.aiGuidance)||"",keywords:nr.join(" "),selectorDescription:((Jn=E==null?void 0:E.docSelector)==null?void 0:Jn.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",targetSectionTitle:(E==null?void 0:E.targetSectionTitle)||(D==null?void 0:D.targetSectionTitle)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):""},Zr=o.map(tn=>({id:tn.id,name:tn.name}));let go=null,Mr="";if(Zr.length>0)try{const tn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:ti,candidates:Zr}});console.log("[Replay outline_link_doc] :",tn),tn.matchedIndex>=0&&tn.matchedIndex<Zr.length?(go=Zr[tn.matchedIndex].id,Mr=Zr[tn.matchedIndex].name,console.log("[Replay] :",Mr)):tn.matchedName&&(go=Br(tn.matchedName),Mr=tn.matchedName)}catch(tn){console.warn("[Replay] :",tn)}if(!go&&(Ar!=null&&Ar.dirPath))try{const tn={kind:"keywords",keywords:ti.keywords.split(/\s+/).filter(Boolean),description:ti.docName,mode:"single"},Kr=await Io(tn);Kr.count>0&&Kr.names[0]&&(go=Br(Kr.names[0]),Mr=Kr.names[0],console.log("[Replay] :",Mr))}catch(tn){console.warn("[Replay] :",tn)}if(!go)return console.log("[Replay outline_link_doc] "),Ye({status:"pass",message:` ${ti.docName}`,replayMode:"skipped",passReason:"source_doc_not_found"});const bn={targetTitle:(D==null?void 0:D.targetSectionTitle)||(E==null?void 0:E.targetSectionTitle)||((Sr=E==null?void 0:E.targetSection)==null?void 0:Sr.title)||"",targetLevel:((bo=D==null?void 0:D.targetSection)==null?void 0:bo.level)||((Mo=E==null?void 0:E.targetSection)==null?void 0:Mo.level)||"",description:(E==null?void 0:E.actionDescription)||`${(D==null?void 0:D.targetSectionTitle)||""}`,aiGuidance:(E==null?void 0:E.aiGuidance)||(D==null?void 0:D.aiGuidance)||"",targetSummary:((Po=E==null?void 0:E.targetSection)==null?void 0:Po.summary)||""},Ur=(await ol()).map(tn=>({id:tn.id,level:tn.level,title:tn.title,summary:(tn.summary||tn.hint||"").substring(0,100)}));console.log("[Replay outline_link_doc] :",Ur.length,":",Ur.map(tn=>tn.title).slice(0,5));let ii=null,Vn="";if(Ur.length>0)try{const tn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:bn,candidates:Ur}});if(console.log("[Replay outline_link_doc] :",tn),console.log("[Replay outline_link_doc]  matchedId:",tn.matchedId),tn.matchedId){const Kr=Ur.find(oi=>oi.id===tn.matchedId);if(Kr)ii=tn.matchedId,Vn=Kr.title,console.log("[Replay] :",Kr.title,"(:",bn.targetTitle,")");else if(console.warn("[Replay]  matchedId :",tn.matchedId),tn.matchedTitle){const oi=Ur.find(Xs=>{var Ot,qn;return Xs.title===tn.matchedTitle||((Ot=Xs.title)==null?void 0:Ot.includes(tn.matchedTitle))||((qn=tn.matchedTitle)==null?void 0:qn.includes(Xs.title))});oi&&(ii=oi.id,Vn=oi.title,console.log("[Replay] :",oi.title))}}}catch(tn){console.warn("[Replay] :",tn)}if(!ii)return console.log("[Replay outline_link_doc] "),Ye({status:"pass",message:` ${bn.targetTitle}`,replayMode:"skipped",passReason:"target_section_not_found"});const Hi=Z[ii]||[],Gi=Hi.includes(go)?Z:{...Z,[ii]:[...Hi,go]};ne(Gi),ce(tn=>({...tn,[ii]:go})),await rl(Gi);const an=await oo(s==null?void 0:s.id);(((Wo=an==null?void 0:an.sectionDocLinks)==null?void 0:Wo[ii])||[]).includes(go)||$e.push(`${Mr}`),await vr(),await zs();const nn=Vn||((Fa=Ur.find(tn=>tn.id===ii))==null?void 0:Fa.title)||ii,ui=` ${Mr} ${nn}`;return console.log("[Replay outline_link_doc] :",nn,"(:",bn.targetTitle,")"),Ye({status:"done",message:ui,replayMode:$})}const Lt=D==null?void 0:D.sectionId,Wt=D==null?void 0:D.docName;if(!Lt)throw new Error(" sectionId");if(!Wt)throw new Error(" docName");let en=Br(Wt);if(!en&&(Ar!=null&&Ar.dirPath)){const Gr=await eo(Wt);en=(Gr==null?void 0:Gr.id)||null}if(!en)throw new Error(`${Wt}`);const zt=Z[Lt]||[],dr=zt.includes(en)?Z:{...Z,[Lt]:[...zt,en]};ne(dr),ce(Gr=>({...Gr,[Lt]:en})),await rl(dr);const zn=await oo(s==null?void 0:s.id),Pn=((xc=zn==null?void 0:zn.sectionDocLinks)==null?void 0:xc[Lt])||[];De(Pn.includes(en),`${Wt}`,{strict:!0}),await vr(),await zs();const Hn=` ${Wt}`;return Ye({status:"done",message:Hn,replayMode:$})}if((D==null?void 0:D.type)==="outline_unlink_doc"||Pe===""){if($==="llm"){const Er=((Ba=E==null?void 0:E.docSelector)==null?void 0:Ba.keywords)||[],Dr=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),nr=((D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),ti=[...new Set([...Er,...Dr,...nr])],Zr={docName:(D==null?void 0:D.docName)||(E==null?void 0:E.docName)||"",description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||"",keywords:ti.join(" "),selectorDescription:((wu=E==null?void 0:E.docSelector)==null?void 0:wu.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",targetSectionTitle:(E==null?void 0:E.targetSectionTitle)||(D==null?void 0:D.targetSectionTitle)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):""},go={targetTitle:(D==null?void 0:D.targetSectionTitle)||(E==null?void 0:E.targetSectionTitle)||"",targetLevel:((Yc=E==null?void 0:E.targetSection)==null?void 0:Yc.level)||"",description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||""},Mr=o.map(nn=>({id:nn.id,name:nn.name}));let bn=null,Tr="";if(Mr.length>0)try{const nn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:Zr,candidates:Mr}});console.log("[Replay unlink] :",nn),nn.matchedIndex>=0&&nn.matchedIndex<Mr.length&&(bn=Mr[nn.matchedIndex].id,Tr=Mr[nn.matchedIndex].name,console.log("[Replay] :",Tr))}catch(nn){console.warn("[Replay unlink] :",nn)}if(!bn)return Ye({status:"pass",message:` ${Zr.docName}`,replayMode:"skipped",passReason:"source_doc_not_found"});const ii=(await ol()).map(nn=>({id:nn.id,level:nn.level,title:nn.title,summary:(nn.summary||"").substring(0,100)}));console.log("[Replay unlink] :",ii.length);let Vn=null;if(go.targetTitle&&ii.length>0)try{const nn=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:go,candidates:ii}});if(console.log("[Replay unlink] :",nn),nn.matchedId){Vn=nn.matchedId;const ui=ii.find(tn=>tn.id===Vn);console.log("[Replay] :",ui==null?void 0:ui.title)}}catch(nn){console.warn("[Replay unlink] :",nn)}if(!Vn)return Ye({status:"pass",message:" ",replayMode:"skipped",passReason:"target_section_not_found"});const Gi=(Z[Vn]||[]).filter(nn=>nn!==bn),an={...Z,[Vn]:Gi};Gi.length||delete an[Vn],ne(an),ce(nn=>{const ui={...nn};return ui[Vn]===bn&&delete ui[Vn],ui}),await rl(an),await oo(s==null?void 0:s.id),await vr();const ir=ii.find(nn=>nn.id===Vn);return Ye({status:"done",message:` ${Tr} ${(ir==null?void 0:ir.title)||Vn}`,replayMode:"llm"})}const Lt=D==null?void 0:D.sectionId,Wt=D==null?void 0:D.docName;if(!Lt)throw new Error(" sectionId");if(!Wt)throw new Error(" docName");const en=Br(Wt);if(!en)throw new Error(`${Wt}`);const dr=(Z[Lt]||[]).filter(Er=>Er!==en),zn={...Z,[Lt]:dr};dr.length||delete zn[Lt],ne(zn),ce(Er=>{const Dr={...Er};return Dr[Lt]===en&&delete Dr[Lt],Dr}),await rl(zn);const Pn=await oo(s==null?void 0:s.id),Hn=((xu=Pn==null?void 0:Pn.sectionDocLinks)==null?void 0:xu[Lt])||[];De(!Hn.includes(en),`${Wt}`,{strict:!0}),me(Er=>{const Dr={...Er};return Dr[Lt]&&(delete Dr[Lt][en],Object.keys(Dr[Lt]).length||delete Dr[Lt]),Dr}),await vr();const Gr=$==="llm"?` ${Wt}`:` ${Wt}`;return Ye({status:"done",message:Gr,replayMode:$})}if((D==null?void 0:D.type)==="insert_to_summary"||(D==null?void 0:D.type)==="insert_to_summary_multi"||Pe===""||Pe===""||Pe===""){const Lt=(D==null?void 0:D.type)==="insert_to_summary_multi";let Wt=Array.isArray(D==null?void 0:D.targetSectionIds)?D.targetSectionIds:[];const en=Array.isArray(D==null?void 0:D.inputs)?D.inputs.find(bn=>(bn==null?void 0:bn.kind)==="selection"):null;let zt=((en==null?void 0:en.text)||(en==null?void 0:en.textExcerpt)||"").toString().trim();if(!Wt.length){if($==="llm")return Ye({status:"pass",message:" ID",replayMode:"skipped",passReason:"no_target_section_ids"});throw new Error(" targetSectionIds")}if(!zt){if($==="llm")return Ye({status:"pass",message:" ",replayMode:"skipped",passReason:"no_selection_text"});throw new Error("")}if($==="llm"){const bn=await Ao(s==null?void 0:s.id);if(bn&&Array.isArray(bn.sections)){const Tr=bn.sections.map(Vn=>({id:Vn.id,level:Vn.level,title:Vn.title,summary:(Vn.summary||"").substring(0,100)})),ii=(Array.isArray(D==null?void 0:D.destinations)?D.destinations:[]).map(Vn=>(Vn==null?void 0:Vn.sectionTitle)||"").filter(Boolean);if(ii.length>0&&Tr.length>0){const Vn=[];for(const Hi of ii)try{const Gi=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:{targetTitle:Hi,description:(E==null?void 0:E.actionDescription)||`${Hi}`,aiGuidance:(E==null?void 0:E.aiGuidance)||""},candidates:Tr}});if(console.log("[Replay insert_to_summary] :",Gi),Gi.matchedId){Vn.push(Gi.matchedId);const an=Tr.find(ir=>ir.id===Gi.matchedId);console.log("[Replay] :",an==null?void 0:an.title)}}catch(Gi){console.warn("[Replay insert_to_summary] :",Gi)}if(Vn.length>0)Wt=Vn,console.log("[Replay insert_to_summary] :",Wt);else{const Hi=ii.join("")||"()";return Ye({status:"pass",message:` ${Hi}`,replayMode:"skipped",passReason:"target_section_not_found"})}}}}const dr=$==="llm"&&(E==null?void 0:E.aiGuidance)||"",zn=$==="llm"&&(E==null?void 0:E.specialRequirements)||"";console.log("[insert_to_summary] ==========  AI  =========="),console.log("[insert_to_summary] mode:",$),console.log("[insert_to_summary] copyAiGuidance :",(dr==null?void 0:dr.length)||0),console.log("[insert_to_summary] copyAiGuidance :",(dr==null?void 0:dr.substring(0,200))||"()"),console.log("[insert_to_summary] llmScript.aiGuidance:",((Jc=E==null?void 0:E.aiGuidance)==null?void 0:Jc.substring(0,200))||"()"),console.log("[insert_to_summary] text () :",(zt==null?void 0:zt.length)||0);let Pn=!1,Hn="";if($==="llm"){A(" ...");try{const bn=dr&&(dr.includes("")||dr.includes("")||dr.includes("{{")||/\d+\s*[+\-*/]\s*\d+/.test(dr)||/|||/.test(dr));console.log("[insert_to_summary] hasCalculation:",bn);const Tr=!!(dr||zn);let Ur;bn?Ur=`


${zt}


${dr}

${zn?`
${zn}`:""}


1. 
2. "XX""XX"
3. 
4. 


"XXX =  +  +  + "
"688937329"

- =68, =89, =373, =29
- 68 + 89 + 373 + 29 = 559
- " 559 "


- 
- 
- 

`:Tr?Ur=`


${zt}


${dr||""}


${zn||""}



- """"""
- ""
- ""


- 
- 
- 

`:Ur=`


${zt}


1. +" "
2. 
3. 
4. 


- 
- 
- 

`,console.log("[insert_to_summary] :",bn,":",dr==null?void 0:dr.substring(0,100));const ii=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:Ur}],maxTokens:2e3})});if(ii.ok){const Vn=await ii.json();if(Vn!=null&&Vn.content){const Hi=Vn.content.trim();console.log(" :",Hi),A(" AI "),zt=Hi,Pn=!0}else Hn="",console.log(" ")}else{const Vn=await ii.text().catch(()=>"");Hn=`API  (${ii.status}): ${Vn||""}`,console.error(" API :",Hn)}}catch(bn){Hn=(bn==null?void 0:bn.message)||"",console.error(":",bn)}!Pn&&Hn&&A(` ${Hn}`)}const Gr=await Ao(s==null?void 0:s.id);De(!!Gr&&Array.isArray(Gr.sections),"",{strict:!0}),Wt.forEach(bn=>De(!!(Gr.sections||[]).find(Tr=>Tr.id===bn),`${bn}`,{strict:!0}));const Er=Array.isArray((bu=D==null?void 0:D.outputs)==null?void 0:bu.overwrittenSectionIds)?D.outputs.overwrittenSectionIds:[],Dr=Array.isArray((Sl=D==null?void 0:D.outputs)==null?void 0:Sl.emptyBeforeSectionIds)?D.outputs.emptyBeforeSectionIds:[];(Er.length||Dr.length)&&(Er.forEach(bn=>{const Tr=(Gr.sections||[]).find(Ur=>Ur.id===bn);De(((Tr==null?void 0:Tr.summary)||"").toString().trim().length>0,`${bn}`)}),Dr.forEach(bn=>{const Tr=(Gr.sections||[]).find(Ur=>Ur.id===bn);De(((Tr==null?void 0:Tr.summary)||"").toString().trim().length===0,`${bn}`)}));const nr=Lt&&Array.isArray(D==null?void 0:D.targetSummaries)?D.targetSummaries:[],ti={...Gr,sections:(Gr.sections||[]).map(bn=>{if(Lt){const Tr=nr.filter(Ur=>Ur.sectionId===bn.id);if(!Tr.length)return bn;if(Array.isArray(bn.summaries)&&bn.summaries.length>0){const Ur=bn.summaries.map((Vn,Hi)=>Tr.find(an=>an.summaryIndex===Hi)?{...Vn,content:zt}:Vn),ii=Ur.map(Vn=>Vn.content||"").filter(Boolean).join(`

`);return{...bn,summaries:Ur,summary:ii}}else return Tr.find(ii=>ii.summaryIndex===0)?{...bn,summary:zt}:bn}return Wt.includes(bn.id)?{...bn,summary:zt}:bn})},Zr=await ca(ti);(((bc=D==null?void 0:D.outputs)==null?void 0:bc.insertedExcerpt)||zt).toString().trim(),Lt||Wt.forEach(bn=>{const Tr=((Zr==null?void 0:Zr.sections)||[]).find(Ur=>Ur.id===bn);De(!!Tr,`${bn}`,{strict:!0}),$!=="llm"&&De((Tr.summary||"").toString()===zt,`""${bn}`)}),await vr();let go="",Mr="script";return $==="llm"?Pn?(Mr="llm",go="  Replay Done"):Hn?(Mr="script_fallback",go=`  Replay Done${Hn}`):go="  Replay Done":go="  Replay Done",Ye({status:"done",message:go,replayMode:Mr,llmFailReason:Hn})}if((D==null?void 0:D.type)==="delete_outline_section"||Pe===""){const Lt=await Ao(s==null?void 0:s.id);if(!Lt||!Array.isArray(Lt.sections))throw new Error("");const Wt=Lt.sections||[];let en=D==null?void 0:D.sectionId;if($==="llm"){const Er={targetTitle:(D==null?void 0:D.targetSectionTitle)||(E==null?void 0:E.targetSectionTitle)||((Yl=E==null?void 0:E.targetSection)==null?void 0:Yl.title)||"",targetLevel:((Ns=E==null?void 0:E.targetSection)==null?void 0:Ns.level)||"",description:(E==null?void 0:E.actionDescription)||"",aiGuidance:(E==null?void 0:E.aiGuidance)||""},Dr=Wt.map(nr=>({id:nr.id,level:nr.level,title:nr.title,summary:(nr.summary||"").substring(0,50)}));if(Er.targetTitle&&Dr.length>0)try{const nr=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:Er,candidates:Dr}});if(console.log("[Replay delete_section] :",nr),nr.matchedId){en=nr.matchedId;const ti=Dr.find(Zr=>Zr.id===en);console.log("[Replay] :",ti==null?void 0:ti.title)}}catch(nr){console.warn("[Replay delete_section] :",nr)}}if(!en){if($==="llm"){const Er=(D==null?void 0:D.targetSectionTitle)||(E==null?void 0:E.targetSectionTitle)||"()";return Ye({status:"pass",message:` ${Er}`,replayMode:"skipped",passReason:"target_section_not_found"})}throw new Error(" sectionId")}const zt=Wt.findIndex(Er=>Er.id===en);if(zt===-1&&$==="llm")return Ye({status:"pass",message:` ${en}`,replayMode:"skipped",passReason:"target_section_not_found"});De(zt!==-1,`${en}`,{strict:!0});const dr=Math.max(1,Math.min(3,Number((wa=Wt[zt])==null?void 0:wa.level)||1)),zn=[Wt[zt].id];for(let Er=zt+1;Er<Wt.length&&!(Math.max(1,Math.min(3,Number((Vs=Wt[Er])==null?void 0:Vs.level)||1))<=dr);Er+=1)zn.push(Wt[Er].id);const Pn={...Lt,sections:(Wt||[]).filter(Er=>!zn.includes(Er.id))},Hn=await ca(Pn);return zn.forEach(Er=>{De(!((Hn==null?void 0:Hn.sections)||[]).some(Dr=>Dr.id===Er),`${Er}`,{strict:!0})}),await vr(),Ye({status:"done",message:$==="llm"?" ":" ",replayMode:$})}if((D==null?void 0:D.type)==="outline_clear"||Pe===""){De(!!(s!=null&&s.id),"scene ",{strict:!0}),await Gt(`/api/scene/${s.id}`,{method:"PATCH",body:{sectionDocLinks:{}}});const Wt=await ca({id:"template_empty",name:"",sections:[]});De(Array.isArray(Wt==null?void 0:Wt.sections)&&Wt.sections.length===0,"",{strict:!0});const en=await oo(s==null?void 0:s.id);return De(!(en!=null&&en.sectionDocLinks)||Object.keys(en.sectionDocLinks||{}).length===0,"",{strict:!0}),ce({}),he({}),me({}),H({}),C({}),await vr(),Ye({status:"done",message:$==="llm"?"  Replay Done":"  Replay Done",replayMode:$})}if((D==null?void 0:D.type)==="restore_history_outline"||Pe===""){const Lt=D==null?void 0:D.outlineId,Wt=D==null?void 0:D.outlineTitle,en=Nn.find(zn=>zn.id===Lt)||Nn.find(zn=>(zn.title||zn.docName)===Wt);if(!en){if($==="llm")return Ye({status:"pass",message:` ${Wt||Lt}`,replayMode:"skipped",passReason:"history_outline_not_found"});throw new Error(`: ${Wt||Lt}`)}const zt=await Gt(`/api/scene/${s.id}/apply-template`,{method:"POST",body:{template:en.template}});return t(zt.template),u(zt.scene),R(!0),en.sectionMergeType&&typeof en.sectionMergeType=="object"?Se(en.sectionMergeType):Se({}),await vr(),Ye({status:"done",message:$==="llm"?"  Replay Done":"  Replay Done",replayMode:$})}if((D==null?void 0:D.type)==="dispatch"||(D==null?void 0:D.type)==="dispatch_multi_summary"||Pe===""){if(!(s!=null&&s.id))throw new Error("scene ");const Lt=(D==null?void 0:D.type)==="dispatch_multi_summary"||(D==null?void 0:D.isMultiSummaryMode),Wt=$==="llm"&&(E==null?void 0:E.aiGuidance)||"",en=$==="llm"&&(E==null?void 0:E.specialRequirements)||"";let zt=(D==null?void 0:D.instructions)||(D==null?void 0:D.promptContent)||(()=>{const an=/?([\\s\\S]*?)(\\n|$)/.exec(((x==null?void 0:x.content)||"").toString());return((an==null?void 0:an[1])||"").trim()})();if(!zt)throw new Error("");$==="llm"&&(Wt||en)?(A("  AI ..."),zt=`${zt}


${Wt||""}


${en||""}`,console.log("  Replay - :",zt)):$==="script"&&console.log("  Replay - :",zt);const dr=er.find(an=>an.kind==="dispatch"),zn=(D==null?void 0:D.prompt)||(dr==null?void 0:dr.prompt);/?([\\s\\S]*?)(\\n|$)/.exec(((x==null?void 0:x.content)||"").toString());const Pn=((D==null?void 0:D.inputKind)||"").toString(),Hn=Array.isArray(D==null?void 0:D.selectedSectionIds)?D.selectedSectionIds:[];if(je){const an=(x==null?void 0:x.llmScript)||{};if(!!!(Pn||D!=null&&D.inputSourceDesc||D!=null&&D.docName||D!=null&&D.selectedDocName||an!=null&&an.inputSourceDesc||Array.isArray(D==null?void 0:D.inputs)&&D.inputs.length>0||Array.isArray(D==null?void 0:D.selectedSectionIds)&&D.selectedSectionIds.length>0||Array.isArray(D==null?void 0:D.selectedSectionTitles)&&D.selectedSectionTitles.length>0))return console.warn("[dispatch replay]  "),Ye({status:"pass",message:" ",replayMode:"skipped",passReason:"strict_no_input_source"})}let Gr="",Er=[];if(Pn==="result"&&Array.isArray(D==null?void 0:D.historyInputs)&&D.historyInputs.length)Gr=D.historyInputs.map((an,ir)=>`${ir+1}${((an==null?void 0:an.key)||"").toString()}
${((an==null?void 0:an.text)||"").toString()}`).join(`

`);else if(Pn.startsWith("outline_")){const an=Array.isArray(D==null?void 0:D.selectedSectionTitles)?D.selectedSectionTitles:[],ir=Array.isArray(D==null?void 0:D.targetSectionsDetail)?D.targetSectionsDetail:[],nn=(x==null?void 0:x.llmScript)||{},ui=Array.isArray(nn==null?void 0:nn.targetSectionsDetail)?nn.targetSectionsDetail:[],tn=(e==null?void 0:e.sections)||[];let Kr=[];const oi=ir.length>0?ir:ui;if($==="llm"){const Ot=tn.map(fr=>({id:fr.id,level:fr.level,title:fr.title,summary:(fr.summary||"").substring(0,100)})),qn={targetTitle:(nn==null?void 0:nn.targetTitle)||an[0]||((al=oi[0])==null?void 0:al.title)||"",targetLevel:((_c=oi[0])==null?void 0:_c.level)||(nn==null?void 0:nn.targetLevel)||"",description:(nn==null?void 0:nn.actionDescription)||zt,aiGuidance:Wt};if(qn.targetTitle&&Ot.length>0)try{const fr=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_outline_section",recordedInfo:qn,candidates:Ot}});if(console.log("[dispatch replay] :",fr),fr.matchedId){const Ki=tn.find(si=>si.id===fr.matchedId);Ki&&(Kr=[Ki],console.log("[dispatch replay] :",Ki.title))}}catch(fr){console.warn("[dispatch replay] :",fr)}}else if(oi.length>0&&(Kr=oi.map(Ot=>{let qn=tn.find(fr=>fr.title===Ot.title);return!qn&&Ot.id&&(qn=tn.find(fr=>fr.id===Ot.id)),qn}).filter(Boolean)),Kr.length===0&&an.length>0&&(Kr=an.map(Ot=>tn.find(qn=>qn.title===Ot)).filter(Boolean)),Kr.length===0&&Hn.length>0&&(Kr=tn.filter(Ot=>Hn.includes(Ot.id))),Kr.length===0&&(nn!=null&&nn.targetTitle)){const Ot=tn.find(qn=>{var fr,Ki;return((fr=qn.title)==null?void 0:fr.includes(nn.targetTitle))||((Ki=nn.targetTitle)==null?void 0:Ki.includes(qn.title))});Ot&&(Kr=[Ot])}if(Kr.length===0){console.warn("[dispatch replay]  section");const Ot=Object.keys(fe||{}).filter(qn=>fe[qn]);Kr=tn.filter(qn=>Ot.includes(qn.id))}if(console.log("[dispatch replay] :",{picked:Kr.map(Ot=>Ot==null?void 0:Ot.title),isStrictValidation:je}),Kr.length===0)return Ye({status:"pass",message:" ",replayMode:"skipped",passReason:"target_section_not_found"});if(je){console.log("[dispatch replay]  ");const Ot=(nn==null?void 0:nn.contextBefore)||(D==null?void 0:D.contextBefore)||"",qn=(nn==null?void 0:nn.contextAfter)||(D==null?void 0:D.contextAfter)||"";nn!=null&&nn.inputContentExcerpt||D!=null&&D.inputContentExcerpt||D!=null&&D.inputContent;const fr=(oi.length>0?oi:ui).map(no=>no.originalSummary||"").filter(Boolean);let Ki=!1;const si=[],$s=(no,Es)=>{if(!Es||!no)return!1;const Ma=Es.substring(0,50).trim();return Ma?no.includes(Ma)||Es.includes(no.substring(0,50)):!1};if(Ot||qn){for(const no of Kr){const Es=no.summary||no.hint||"",Ma=!Ot||$s(Es,Ot),Us=!qn||$s(Es,qn);if(Ma||Us){Ki=!0;break}}Ki||si.push("")}if(!Ki&&fr.length>0){for(let no=0;no<Kr.length;no++){const Es=Kr[no],Ma=Es.summary||Es.hint||"",Us=fr[no]||"";if(Us&&$s(Ma,Us)){Ki=!0;break}}Ki||si.push("")}if(!Ot&&!qn&&fr.length===0){const no=(oi.length>0?oi:an.map(Us=>({title:Us}))).map(Us=>Us.title).filter(Boolean),Es=Kr.map(Us=>Us.title);no.every(Us=>Es.includes(Us))?Ki=!0:si.push("")}if(!Ki&&si.length>0)return console.warn("[dispatch replay]  :",si),Ye({status:"pass",message:` ${si.join("")}`,replayMode:"skipped",passReason:"strict_validation_failed"});console.log("[dispatch replay]  ")}const Xs=Kr.filter(Ot=>!(Ot.summary||Ot.hint));if(Xs.length===Kr.length){const Ot=Xs.map(qn=>qn.title).join("");return console.warn("[dispatch replay] :",Ot),Ye({status:"pass",message:` ${Ot}`,replayMode:"skipped",passReason:"input_source_empty"})}if(Xs.length>0&&(console.warn("[dispatch replay]  section :",Xs.map(Ot=>Ot.title)),$e.push(`${Xs.map(Ot=>Ot.title).join("")}`)),Er=Kr.map((Ot,qn)=>({sectionId:Ot.id,field:"summary",content:Pn==="outline_selected_batch"?`${Ot.title}
${Ot.summary||Ot.hint||"()"}`:Ot.summary||Ot.hint||Ot.title||"()",label:`${qn+1}`})),Pn==="outline_unprocessed_docs"){const qn=(Array.isArray(D==null?void 0:D.inputs)?D.inputs.filter(si=>(si==null?void 0:si.kind)==="doc_resource"):[]).map(si=>((si==null?void 0:si.docName)||"").toString()).filter(Boolean),fr=[],Ki=o.map(si=>({id:si.id,name:si.name}));for(const si of qn){let $s=Br(si),no=$s?o.find(Es=>Es.id===$s):null;if(!no&&$==="llm"&&Ki.length>0){const Es=((Sc=E==null?void 0:E.docSelector)==null?void 0:Sc.keywords)||[],Ma=((E==null?void 0:E.flexKeywords)||"").split(/[,\s]+/).filter(Boolean),Us=(si||"").replace(/[()\[\].txt.docx.doc\-_]/g," ").trim().split(/\s+/).filter(Boolean),Id=[...new Set([...Es,...Ma,...Us])],df={docName:si,description:(E==null?void 0:E.actionDescription)||"-",aiGuidance:Wt,keywords:Id.join(" "),selectorDescription:((_u=E==null?void 0:E.docSelector)==null?void 0:_u.description)||"",flexKeywords:(E==null?void 0:E.flexKeywords)||"",structuredContent:typeof(E==null?void 0:E.structuredScriptContent)=="string"?E.structuredScriptContent.substring(0,500):""};try{const Nc=await Gt("/api/replay/llm-match",{method:"POST",body:{taskType:"find_document",recordedInfo:df,candidates:Ki}});console.log(`[Replay dispatch] ${si}:`,Nc),Nc.matchedIndex>=0&&Nc.matchedIndex<Ki.length&&($s=Ki[Nc.matchedIndex].id,no=o.find(Rd=>Rd.id===$s))}catch(Nc){console.warn(`[Replay dispatch] ${si}:`,Nc)}}if(!no&&(Ar!=null&&Ar.dirPath)&&(no=await eo(si),$s=(no==null?void 0:no.id)||null),!no)if($==="llm"){console.warn(`[Replay dispatch] ${si}`);continue}else throw new Error(`${si}`);fr.push(no)}Gr=fr.filter(Boolean).map((si,$s)=>`${$s+1}${si.name}
${si.content}`).join(`

---

`)}else Gr=Er.map(Ot=>`${Ot.label} | ID=${Ot.sectionId}
${Ot.content}`).join(`

`)}else{const ir=(((kc=(Array.isArray(D==null?void 0:D.inputs)?D.inputs.filter(tn=>(tn==null?void 0:tn.kind)==="doc_resource"):[])[0])==null?void 0:kc.docName)||(D==null?void 0:D.docName)||"").toString();let nn=ir?Br(ir):l,ui=nn?o.find(tn=>tn.id===nn):null;if(!nn&&ir&&(Ar!=null&&Ar.dirPath)&&(ui=await eo(ir),nn=(ui==null?void 0:ui.id)||null),!ui)return Ye({status:"pass",message:` ${ir||"()"}`,replayMode:"skipped",passReason:"input_doc_not_found"});if(Gr=((ui==null?void 0:ui.content)||"").toString(),!Gr.trim())return Ye({status:"pass",message:` ${ui.name||ir}`,replayMode:"skipped",passReason:"input_doc_empty"})}if(!Gr.trim()&&Er.length===0)return Ye({status:"pass",message:" ",replayMode:"skipped",passReason:"no_valid_input"});const Dr=await Gt("/api/dispatch",{method:"POST",body:{sceneId:s==null?void 0:s.id,instructions:zt,docContent:Gr,outlineSegments:Er,systemPrompt:zn}});if((Dr==null?void 0:Dr.usedModel)===!1)throw new Error("QWEN_API_KEYReplay ");const nr=tl(Dr.detail||""),ti=Number.isFinite((Ac=D==null?void 0:D.outputs)==null?void 0:Ac.detailLength)?Number(D.outputs.detailLength):null,Zr=Number.isFinite((Ld=D==null?void 0:D.outputs)==null?void 0:Ld.editsCount)?Number(D.outputs.editsCount):null;ti!==null&&ti>0&&De(nr.toString().trim().length>0,"Replay  detail ");const go=nr&&nr.trim().length>0||Array.isArray(Dr.edits)&&Dr.edits.length>0;Zr!==null&&Zr>0&&De(go,"Replay detail  edits ");const Mr=await Ao(s==null?void 0:s.id);De(!!Mr&&Array.isArray(Mr.sections),"",{strict:!0});const bn=Hn.length?Hn:Object.keys(fe||{}).filter(an=>fe[an]),Tr=Er.map(an=>Lt&&an.summaryKey?an.summaryKey:an.sectionId),Ur=an=>{if(!an)return null;const ir=String(an).trim(),nn=ir.match(/ID\s*=\s*(.+)/i);if(nn)return nn[1].trim();const ui=ir.match(/\d+\s*[:]\s*(.+)/);if(ui)return ui[1].trim();const tn=ir.match(/(\d+)/);if(tn){const oi=parseInt(tn[1],10)-1;if(oi>=0&&oi<Tr.length)return Tr[oi]}if(/^\d+$/.test(ir)){const oi=parseInt(ir,10)-1;if(oi>=0&&oi<Tr.length)return Tr[oi]}const Kr=ir.match(/(\d+)/);if(Kr){const oi=parseInt(Kr[1],10)-1;if(oi>=0&&oi<Tr.length)return Tr[oi]}return ir},ii={...Mr,sections:(Mr.sections||[]).map(an=>{if(Lt){const ui=Array.isArray(Dr.edits)?Dr.edits.filter(tn=>{const Kr=Ur(tn.sectionId);return Kr&&Kr.startsWith(an.id+"_")}):[];if(!ui.length)return an;if(Array.isArray(an.summaries)&&an.summaries.length>0){const tn=an.summaries.map((oi,Xs)=>{const Ot=ui.find(qn=>Ur(qn.sectionId)===`${an.id}_${Xs}`);return Ot&&Ot.field==="summary"&&Ot.content?{...oi,content:Ot.content}:oi}),Kr=tn.map(oi=>oi.content||"").filter(Boolean).join(`

`);return{...an,summaries:tn,summary:Kr}}else{const tn=ui.find(Kr=>Ur(Kr.sectionId)===`${an.id}_0`);return tn&&tn.field==="summary"&&tn.content?{...an,summary:tn.content}:an}}const ir=Array.isArray(Dr.edits)?Dr.edits.find(ui=>Ur(ui.sectionId)===an.id||ui.sectionId===an.id):null,nn={...an,title:!Lt&&(ir==null?void 0:ir.field)==="title"&&ir.content?ir.content:an.title,summary:(ir==null?void 0:ir.field)==="summary"&&ir.content?ir.content:an.summary};return nr&&bn.includes(an.id)?{...nn,summary:nr}:nn})},Vn=await ca(ii);bn.length&&nr&&bn.forEach(an=>{const ir=((Vn==null?void 0:Vn.sections)||[]).find(nn=>nn.id===an);De(!!ir,`${an}`,{strict:!0}),De((ir.summary||"")===nr,` Replay ${an}`)}),bn.length&&me(an=>{const ir={...an};return bn.forEach(nn=>{(Z[nn]||[]).forEach(tn=>{ir[nn]||(ir[nn]={}),ir[nn][tn]=!0})}),ir}),await vr();const Hi=$==="llm"&&(Wt||en);return Ye({status:"done",message:Hi?"  Replay Done":"  Replay Done",replayMode:Hi?"llm":"script"})}return(D==null?void 0:D.type)==="final_generate"||Pe===""?{status:"pass",message:""}:{status:"pass",message:"/"}},Vc=async g=>{var K;const x=He.find($=>$.id===g);if(x&&!((K=Pr==null?void 0:Pr[g])!=null&&K.running)){ue($=>({...$,[g]:!0})),Aa($=>({...$,[g]:{running:!0,bySection:{}}})),A("Replay");for(const $ of x.sections||[]){Bs(g,$.id,"running","");const E=wc();try{const ae=await Kl(x,$);Bs(g,$.id,ae.status,ae.message||"",ae.replayMode||"script")}catch(ae){await la(E),Bs(g,$.id,"fail",(ae==null?void 0:ae.message)||"Replay ",null)}}Aa($=>({...$,[g]:{...($==null?void 0:$[g])||{},running:!1}})),A("Replay ")}},Xc=async g=>{var K,$;const x=He.find(E=>E.id===g);if(!x){console.warn(`[Replay]  ${g} `);return}if(!e||!e.sections||e.sections.length===0){console.log("[Replay] ...");try{const E=await Gt("/api/template");(($=(K=E==null?void 0:E.template)==null?void 0:K.sections)==null?void 0:$.length)>0&&(t(E.template),console.log("[Replay] ",E.template.sections.length,""),await new Promise(ae=>setTimeout(ae,100)))}catch(E){console.warn("[Replay] :",E)}}ue(E=>({...E,[g]:!0})),Aa(E=>({...E,[g]:{running:!0,bySection:{}}}));for(let E=0;E<(x.sections||[]).length;E++){const ae=x.sections[E];console.log(`[Replay] ${x.name} ${E+1}/${x.sections.length}: ${ae.action||ae.id}`),Bs(g,ae.id,"running","");const de=wc();try{const D=await Kl(x,ae);Bs(g,ae.id,D.status,D.message||"",D.replayMode||"script"),console.log(`[Replay]  ${E+1} : ${D.status}`)}catch(D){await la(de),Bs(g,ae.id,"fail",(D==null?void 0:D.message)||"Replay ",null),console.error(`[Replay]  ${E+1} :`,D==null?void 0:D.message)}}Aa(E=>({...E,[g]:{...(E==null?void 0:E[g])||{},running:!1}})),console.log(`[Replay] ${x.name}`)},Xl=pA({levelLabel:bl,outlineEditing:J,sectionDocLinks:Z,sectionDocDone:se,sectionDocPick:ye,showOutlineMode:w,processingTab:I,selectedOutlineExec:fe,sectionCollapsed:T,summaryExpanded:Be,sectionMergeType:q,selectedSummaries:ee,docs:o,isSectionHiddenByParent:g=>{const x=(e==null?void 0:e.sections)||[],K=x[g];if(!K)return!1;const $=K.level||1;for(let E=g-1;E>=0;E--){const ae=x[E];if(((ae==null?void 0:ae.level)||1)<$&&T[ae.id])return!0}return!1},updateSectionLevel:ns,setOutlineEditing:C,applyOutlineUpdate:vu,cancelEditOutline:yu,startEditOutline:_l,setSelectedOutlineExec:he,addSectionBelow:Ed,removeSectionById:Td,hasChildSections:g=>{var ae;const x=(e==null?void 0:e.sections)||[],K=x.findIndex(de=>de.id===g);if(K===-1||K===x.length-1)return!1;const $=((ae=x[K])==null?void 0:ae.level)||1,E=x[K+1];return E&&(E.level||1)>$},toggleSectionCollapse:g=>{L(x=>({...x,[g]:!x[g]}))},clearOutlineSummary:Hl,setSummaryExpanded:H,setSelectedSummaries:X,setSectionDocPick:ce,addDocToSection:mu,removeDocFromSection:Wu,copyPreviewToSummary:gu,addSummaryToSection:ts,removeSummaryFromSection:Os,selectSectionMergeType:ks}),m=(g,x)=>{uo(JSON.stringify({panelId:g,buttonId:x}))},_=g=>{var K,$;if(qe)return;console.log("Workbench button clicked:",g.kind,g.label);const x=He.length>0&&Object.keys(Xt||{}).filter(E=>Xt[E]).length===He.length;switch(g.kind){case"save":yc({});break;case"upload":(K=Zi.current)==null||K.click();break;case"pick_dir":case"clear_dir":console.log("");break;case"fill_summary":console.log("Fill summary triggered");break;case"tab_outline":k("outline");break;case"tab_records":k("records");break;case"tab_config":k("config"),(async()=>{try{const ae=await Gt("/api/multi/precipitation/groups");if(Array.isArray(ae)){const de=ae.map(La).filter(Boolean);pi(de);const D=new Set(de.map(Pe=>Pe.id));To(Pe=>Pe.map(Ue=>({...Ue,groupIds:(Ue.groupIds||[]).filter(je=>D.has(je))})))}}catch(ae){console.error("",ae)}})();break;case"tab_strategy":k("strategy");break;case"batch_replay":mc();break;case"select_all":x?gi():fc();break;case"delete_selected":Da();break;case"clear_selection":gi();break;case"group_new":pa();break;case"group_update":ma();break;case"group_rename":Xa();break;case"group_delete":pl();break;case"group_replay":Ia();break;case"outline_extract":const E=er.find(ae=>ae.kind==="outline_extract");E?Kc(E):A("");break;case"clear_outline":pu();break;case"add_button":Dl(),k("config");break;case"start_deposit":Fo();break;case"end_deposit":Va();break;case"dispatch":ql();break;default:if(($=g.kind)!=null&&$.startsWith("slot_")||g.kind==="custom"){const ae=er.find(de=>de.id===g.id)||g;Nd(ae)}break}},W=(g,x,{style:K,label:$,kind:E,prompt:ae})=>{console.log("[DEBUG] handleButtonUpdate called:",{panelId:g,buttonId:x,style:K,label:$,kind:E,prompt:ae}),or(de=>{const Pe=(de[g]||[]).map(Ue=>{if(Ue.id===x){const je={...Ue,style:K?{...Ue.style,...K}:Ue.style,label:$!==void 0?$:Ue.label,kind:E!==void 0?E:Ue.kind,prompt:ae!==void 0?ae:Ue.prompt};return console.log("[DEBUG] Updated button:",je),je}return Ue});return{...de,[g]:Pe}})},Y=(g,x)=>{console.log("[GlobalButton] Update:",g,x),dn(K=>K.map($=>$.id===g?{...$,...x}:$))},pe=(g,{style:x,label:K,kind:$,prompt:E})=>{console.log("[GlobalButton] Style update:",g,{style:x,label:K,kind:$,prompt:E}),dn(ae=>ae.map(de=>de.id===g?{...de,style:x?{...de.style,...x}:de.style,label:K!==void 0?K:de.label,kind:$!==void 0?$:de.kind,prompt:E!==void 0?E:de.prompt}:de))},we=g=>{const x=jn.find($=>$.id===g);if(!x)return;console.log("[GlobalButton] Delete (to recycle):",g);const K={...x,deletedAt:Date.now()};qr($=>[...$,K]),dn($=>$.filter(E=>E.id!==g)),setTimeout(()=>{const $=[...Un,K];localStorage.setItem("deleted-buttons-config",JSON.stringify($))},0)},_e=g=>{const x=Un.find(ae=>ae.id===g);if(!x)return;const{deletedAt:K,...$}=x,E={...$};dn(ae=>[...ae,E]),qr(ae=>{const de=ae.filter(D=>D.id!==g);return localStorage.setItem("deleted-buttons-config",JSON.stringify(de)),de})},Ne=g=>{qr(x=>{const K=x.filter($=>$.id!==g);return localStorage.setItem("deleted-buttons-config",JSON.stringify(K)),K})},Te=()=>{qr([]),localStorage.removeItem("deleted-buttons-config")},Ie=(g,x,K="move")=>{if(!qe)return;g.preventDefault(),g.stopPropagation();const $=jn.find(de=>de.id===x);if(!$)return;const E=g.clientX,ae=g.clientY;gs({buttonId:x,action:K,startX:E,startY:ae,startPos:{x:$.x,y:$.y},startSize:{width:$.width,height:$.height}})},Ge=g=>{uo(g)},nt=g=>{const x=jn.find(K=>K.id===g);x?(qr(K=>[...K,x]),dn(K=>K.filter($=>$.id!==g))):console.warn("Button not found in global buttons:",g)};return y.jsxs(y.Fragment,{children:[ys&&y.jsx("div",{className:"modal-backdrop",onClick:()=>ss(!1),children:y.jsxs("div",{className:"modal-card",onClick:g=>g.stopPropagation(),children:[y.jsxs("div",{className:"modal-head",children:[y.jsx("h3",{children:rt.t80}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ss(!1),children:rt.t45})]}),y.jsx("div",{className:"modal-body",children:y.jsx(uA,{globalButtons:jn,setGlobalButtons:dn,saveButtonConfig:Q0,showToast:A})}),y.jsxs("div",{className:"modal-foot",children:[y.jsx("button",{className:"ghost small",type:"button",onClick:()=>ss(!1),children:rt.t22}),y.jsx("button",{className:"ghost small",type:"button",onClick:gl,children:rt.t59})]})]})}),on&&fn&&y.jsx(mA,{data:fn,setData:rn,selectedSectionIndex:un,setSelectedSectionIndex:lr,onCancel:js,onDiscard:()=>{Ee(!1),Me([]),Ht(!1),rn(null),Fn(null)},onConfirm:fa,onAIProcess:oa,getScriptForSection:cc,updateScriptForSection:uc,isEditMode:!!Qn}),y.jsx(gA,{show:cr,onClose:()=>Bt(!1),depositGroups:wr,selectedGroupIds:Mt,setSelectedGroupIds:mr,selectedDepositCount:Ds().length,onConfirm:sa}),qe&&li&&y.jsx(Sb,{deletedButtons:Un,deletedBlocks:yn,onRestore:_e,onPermanentDelete:Ne,onRestoreBlock:fl,onPermanentDeleteBlock:Ga,onClearAll:Te,onClose:()=>Hs(!1),onSave:()=>{dt(!1),Q0(jn),localStorage.setItem("layout_panel_positions",JSON.stringify(lt)),localStorage.setItem("layout_content_blocks",JSON.stringify($t)),localStorage.setItem("layout_deleted_blocks",JSON.stringify(yn)),localStorage.setItem("layout_size",JSON.stringify(Ft)),Gt("/api/config/save",{method:"POST",body:{layout:lt,globalButtons:{activeButtons:jn,deletedButtons:Un,version:"2.0",savedAt:Date.now()},contentBlocks:$t,deletedBlocks:yn,headerTitles:Ln,layoutSize:Ft}}).then(()=>{console.log("Saved config to backend")}).catch(g=>{console.error("Failed to save to backend",g),alert(rt.t154)})},onCancel:()=>{confirm(rt.t155)&&(dt(!1),window.location.reload())},onReset:()=>{confirm(rt.t156)&&(localStorage.removeItem("layout_panel_positions"),localStorage.removeItem("layout_content_blocks"),localStorage.removeItem("button_config_v2"),window.location.reload())}}),qe&&!li&&y.jsx("button",{onClick:()=>Hs(!0),style:{position:"fixed",right:0,top:"50%",transform:"translateY(-50%)",zIndex:1e4,background:"#fff",border:"1px solid #e2e8f0",borderRight:"none",borderRadius:"8px 0 0 8px",padding:"8px",boxShadow:"-2px 0 8px rgba(0,0,0,0.1)",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},title:rt.t130,children:y.jsx(Xv,{size:20,color:"#64748b"})}),qe&&y.jsxs("button",{onClick:()=>{dt(!1),localStorage.setItem("global-buttons-config",JSON.stringify({activeButtons:jn,deletedButtons:Un,version:"2.0",savedAt:Date.now()})),localStorage.setItem("layout_panel_positions",JSON.stringify(lt)),localStorage.setItem("layout_content_blocks",JSON.stringify($t)),localStorage.setItem("layout_deleted_blocks",JSON.stringify(yn)),localStorage.setItem("layout_size",JSON.stringify(Ft)),Gt("/api/config/save",{method:"POST",body:{layout:lt,globalButtons:{activeButtons:jn,deletedButtons:Un,version:"2.0",savedAt:Date.now()},contentBlocks:$t,deletedBlocks:yn,headerTitles:Ln,layoutSize:Ft}}).then(()=>{console.log("Saved config to backend")}).catch(g=>{console.error("Failed to save to backend",g),alert(rt.t154)})},style:{position:"fixed",right:"20px",top:"20px",zIndex:10001,background:"#000",color:"#fff",border:"none",borderRadius:"999px",padding:"10px 24px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:500},children:[y.jsx(H1,{size:16}),rt.t81]}),y.jsxs("main",{className:`layout-multi ${qe?"editing-mode":""}`,style:{position:"relative"},children:[y.jsxs("header",{className:"hero",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx(Jv,{size:22,style:{color:"var(--primary-accent)",marginTop:"4px"}}),y.jsxs("div",{style:{position:"relative",display:"flex",flexDirection:"column",gap:"4px"},children:[qe?y.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:`${Ln.eyebrow.width||200}px`,height:`${Ln.eyebrow.height||30}px`,border:"2px dashed #cbd5e1",borderRadius:"4px",background:"transparent",cursor:(Oi==null?void 0:Oi.titleKey)==="eyebrow"?"grabbing":"grab",zIndex:(Oi==null?void 0:Oi.titleKey)==="eyebrow"?200:100,transform:`translate(${((Re=Ln.eyebrow.position)==null?void 0:Re.left)||0}px, ${((Je=Ln.eyebrow.position)==null?void 0:Je.top)||0}px)`},onMouseDown:g=>Pa(g,"eyebrow"),children:[y.jsx("p",{className:"eyebrow",style:{margin:0,flex:1,display:"flex",alignItems:"center",justifyContent:((et=Ln.eyebrow.style)==null?void 0:et.textAlign)==="left"?"flex-start":((xt=Ln.eyebrow.style)==null?void 0:xt.textAlign)==="right"?"flex-end":"center",textAlign:((it=Ln.eyebrow.style)==null?void 0:it.textAlign)||"center",...Ln.eyebrow.style},children:Ln.eyebrow.text}),y.jsx("button",{onClick:g=>{g.stopPropagation(),ws("eyebrow")},onMouseDown:g=>g.stopPropagation(),style:{width:"20px",height:"20px",borderRadius:"50%",background:"#3b82f6",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)",padding:0,flexShrink:0},title:rt.t82,children:y.jsx(lg,{size:12})}),y.jsx("div",{onMouseDown:g=>Ya(g,"eyebrow","se"),style:{position:"absolute",right:"-4px",bottom:"-4px",width:"12px",height:"12px",background:"#3b82f6",border:"2px solid #fff",borderRadius:"50%",cursor:"nwse-resize",zIndex:120,boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"}})]}):y.jsx("p",{className:"eyebrow",style:{...Ln.eyebrow.style,transform:`translate(${((yt=Ln.eyebrow.position)==null?void 0:yt.left)||0}px, ${((wt=Ln.eyebrow.position)==null?void 0:wt.top)||0}px)`,position:"relative",width:`${Ln.eyebrow.width||200}px`,height:`${Ln.eyebrow.height||30}px`,display:"flex",alignItems:"center",justifyContent:((_t=Ln.eyebrow.style)==null?void 0:_t.textAlign)==="left"?"flex-start":((St=Ln.eyebrow.style)==null?void 0:St.textAlign)==="right"?"flex-end":"center",textAlign:((En=Ln.eyebrow.style)==null?void 0:En.textAlign)||"center",margin:0},children:Ln.eyebrow.text}),qe?y.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:`${Ln.title.width||200}px`,height:`${Ln.title.height||40}px`,border:"2px dashed #cbd5e1",borderRadius:"4px",background:"transparent",cursor:(Oi==null?void 0:Oi.titleKey)==="title"?"grabbing":"grab",zIndex:(Oi==null?void 0:Oi.titleKey)==="title"?200:100,transform:`translate(${((mn=Ln.title.position)==null?void 0:mn.left)||0}px, ${((_r=Ln.title.position)==null?void 0:_r.top)||0}px)`},onMouseDown:g=>Pa(g,"title"),children:[y.jsx("h1",{style:{margin:0,flex:1,display:"flex",alignItems:"center",justifyContent:((wn=Ln.title.style)==null?void 0:wn.textAlign)==="left"?"flex-start":((Jr=Ln.title.style)==null?void 0:Jr.textAlign)==="right"?"flex-end":"center",textAlign:((so=Ln.title.style)==null?void 0:so.textAlign)||"center",...Ln.title.style},children:Ln.title.text}),y.jsx("button",{onClick:g=>{g.stopPropagation(),ws("title")},onMouseDown:g=>g.stopPropagation(),style:{width:"24px",height:"24px",borderRadius:"50%",background:"#3b82f6",color:"#fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)",padding:0,flexShrink:0},title:rt.t82,children:y.jsx(lg,{size:12})}),y.jsx("div",{onMouseDown:g=>Ya(g,"title","se"),style:{position:"absolute",right:"-4px",bottom:"-4px",width:"12px",height:"12px",background:"#3b82f6",border:"2px solid #fff",borderRadius:"50%",cursor:"nwse-resize",zIndex:120,boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"}})]}):y.jsx("h1",{style:{...Ln.title.style,transform:`translate(${((Nr=Ln.title.position)==null?void 0:Nr.left)||0}px, ${((gn=Ln.title.position)==null?void 0:gn.top)||0}px)`,position:"relative",width:`${Ln.title.width||200}px`,height:`${Ln.title.height||40}px`,display:"flex",alignItems:"center",justifyContent:((Jt=Ln.title.style)==null?void 0:Jt.textAlign)==="left"?"flex-start":((mo=Ln.title.style)==null?void 0:mo.textAlign)==="right"?"flex-end":"center",textAlign:((ur=Ln.title.style)==null?void 0:ur.textAlign)||"center",margin:0},children:Ln.title.text})]})]}),y.jsxs("div",{className:"actions",style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"8px"},children:[y.jsxs("button",{onClick:r,className:"ghost",style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 14px",borderRadius:"999px",fontSize:"16px",fontWeight:600,marginRight:qe?"280px":"0"},children:[y.jsx(Yv,{size:18})," ",rt.t83]}),!qe&&y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsxs("button",{className:`ghost ${Le?"active":""}`,onClick:Fo,children:[y.jsx(ig,{size:18})," ",Le?rt.t131:rt.t141]}),Le&&y.jsx("button",{className:"ghost",onClick:Va,children:rt.t87})]}),qe&&y.jsx("span",{className:"hint",children:rt.t88})]}),!qe&&y.jsxs("div",{style:{position:"fixed",right:"24px",bottom:"24px",display:"flex",gap:"8px",zIndex:100},children:[y.jsxs("button",{className:"ghost",onClick:()=>ss(!0),title:rt.t84,style:{fontSize:"11px",padding:"4px 8px"},children:[y.jsx(mh,{size:14}),rt.t80]}),y.jsxs("button",{className:"ghost",onClick:()=>dt(!0),title:rt.t85,style:{fontSize:"11px",padding:"4px 8px"},children:[y.jsx(Zv,{size:14}),rt.t86]})]})]}),qe?y.jsx(t5,{isEditing:!0,size:Ft,onSizeChange:Zt,style:{position:"relative"},children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[y.jsx(Cl,{panelId:"document-list-panel",panelName:xs("document-list-panel"),isEditing:qe,onTitleEdit:()=>ki("document-list-panel"),titleStyle:(Hr=lt["document-list-panel"])==null?void 0:Hr.titleStyle,className:"document-list-panel",position:lt["document-list-panel"],onPositionChange:g=>Nt(x=>({...x,"document-list-panel":g})),children:y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsx(Ua,{blockId:"document-list-content",panelId:"document-list-panel",isEditing:qe,position:$t["document-list-panel"],onPositionChange:g=>Rr(x=>({...x,"document-list-panel":g})),hidden:yn.includes("document-list-panel"),onDelete:()=>ia("document-list-panel"),children:y.jsx(fg,{docs:o,setDocs:a,selectedDocId:l,setSelectedDocId:d,deleteDoc:vc,uploadInputRef:Zi,handleFilePick:nl,replayDirConfig:Ar,setReplayDirConfig:Ji,saveReplayDirConfig:ja,replayDirConfigSaving:Ei})})})}),y.jsx(Cl,{panelId:"preview-panel",panelName:xs("preview-panel"),isEditing:qe,onTitleEdit:()=>ki("preview-panel"),titleStyle:(Bi=lt["preview-panel"])==null?void 0:Bi.titleStyle,className:"preview-panel",position:lt["preview-panel"],onPositionChange:g=>Nt(x=>({...x,"preview-panel":g})),children:y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsx(Ua,{blockId:"preview-textarea",panelId:"preview-panel",isEditing:qe,position:$t["preview-textarea"],onPositionChange:g=>Rr(x=>({...x,"preview-textarea":g})),hidden:yn.includes("preview-textarea"),onDelete:()=>ia("preview-textarea"),children:y.jsxs("div",{className:"card",style:{width:"100%",height:"100%",padding:"0",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[y.jsx("div",{style:{position:"absolute",top:8,right:24,zIndex:10},children:y.jsxs("button",{type:"button",onClick:il,style:{backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[y.jsx(ng,{size:14}),rt.t89]})}),y.jsx("textarea",{ref:vo,className:"preview full",value:M,onChange:g=>z(g.target.value),onMouseUp:Fs,onKeyUp:Fs,onSelect:Fs,onBlur:Hu,placeholder:rt.t90,style:{border:"none",width:"100%",height:"100%",resize:"none",padding:"48px 12px 12px",boxSizing:"border-box"}})]})})})}),y.jsx(Cl,{panelId:"processing-panel",panelName:xs("processing-panel"),isEditing:qe,onTitleEdit:()=>ki("processing-panel"),titleStyle:(Ro=lt["processing-panel"])==null?void 0:Ro.titleStyle,className:"processing-panel",position:lt["processing-panel"],onPositionChange:g=>Nt(x=>({...x,"processing-panel":g})),children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[y.jsx(Ua,{blockId:"processing-tabs",panelId:"processing-panel",isEditing:qe,position:$t["processing-tabs"],onPositionChange:g=>Rr(x=>({...x,"processing-tabs":g})),allowChildPointerEvents:!0,children:y.jsxs("div",{className:"editable-button-group processing-tabs-bar",children:[zc().map(g=>y.jsx(Iu,{button:g,isEditing:qe,panelId:"processing-tabs",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id)),Gc()]})}),I!=="records"&&y.jsx(Ua,{blockId:"processing-content",panelId:"processing-panel",isEditing:qe,position:$t["processing-panel"],onPositionChange:g=>Rr(x=>({...x,"processing-panel":g})),hidden:yn.includes("processing-panel"),onDelete:()=>ia("processing-panel"),children:y.jsx("div",{style:{fontSize:"12px",color:"#666",minHeight:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:y.jsxs("div",{style:{padding:"0 12px 12px",overflowY:"auto",flex:1},children:[I==="outline"&&y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginBottom:"12px",position:"sticky",top:0,backgroundColor:"#fff",zIndex:10,paddingTop:"12px",paddingBottom:"8px",borderBottom:"1px solid #f1f5f9"},children:[y.jsx("button",{className:"ghost small",onClick:()=>Tt(!0),disabled:!((xo=e==null?void 0:e.sections)!=null&&xo.length),style:{background:"#3b82f6",color:"#fff",border:"none"},children:rt.t91}),y.jsx("button",{className:"ghost small",onClick:pu,style:{color:"#ef4444",borderColor:"#ef4444"},children:rt.t92})]}),!e||!e.sections||e.sections.length===0?y.jsx("p",{style:{fontSize:"13px",color:"#94a3b8",padding:"20px",textAlign:"center"},children:rt.t93}):e.sections.map((g,x)=>Xl({section:g,index:x}))]}),I==="config"&&y.jsx(zv,{appButtonsConfig:kr,selectedAppButtonId:as,setSelectedAppButtonId:ar,depositGroups:wr,updateAppButtonLabel:ml,toggleAppButtonGroup:ga,saveAppButtonsConfig:Ra,appButtonsSaving:Co})]})})}),I==="records"&&y.jsxs(y.Fragment,{children:[y.jsxs(Ua,{blockId:"processing-records-toolbar",panelId:"processing-panel",isEditing:qe,position:{...$t["processing-records-toolbar"],height:70},onPositionChange:g=>Rr(x=>({...x,"processing-records-toolbar":g})),allowChildPointerEvents:!0,children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 0"},children:[y.jsx("button",{type:"button",className:`ghost small ${G==="deposits"?"active":""}`,onClick:()=>re("deposits"),style:{padding:"6px 16px",fontSize:"15px",fontWeight:600,whiteSpace:"nowrap"},children:rt.t61}),y.jsx("button",{type:"button",className:`ghost small ${G==="groups"?"active":""}`,onClick:()=>re("groups"),style:{padding:"6px 16px",fontSize:"15px",fontWeight:600,whiteSpace:"nowrap"},children:rt.t62})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"2px 0",borderBottom:"1px solid #e5e7eb",marginBottom:"4px",flexWrap:"nowrap",overflowX:"auto",minHeight:"32px"},children:[G==="deposits"&&Bo(aa).map(g=>y.jsx(Iu,{button:g,isEditing:qe,panelId:"processing-records-toolbar",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id)),G==="groups"&&Bo(wl).map(g=>y.jsx(Iu,{button:g,isEditing:qe,panelId:"processing-records-toolbar",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id))]})]}),y.jsx(Ua,{blockId:"processing-records-list",panelId:"processing-panel",isEditing:qe,position:$t["processing-records-list"],onPositionChange:g=>Rr(x=>({...x,"processing-records-list":g})),children:y.jsxs("div",{className:"sections history-scroll",style:{height:"100%",overflow:"auto"},children:[G==="groups"&&Oa(),G==="groups"&&hu(),G==="deposits"&&He.length===0&&y.jsx("p",{className:"hint",style:{padding:"20px",textAlign:"center"},children:rt.t63}),G==="deposits"&&He.length>0&&y.jsx(y.Fragment,{children:He.map((g,x)=>{var D,Pe,Ue;const K=`${g.id}||order`,$=Yt[K]!==void 0,E=Ss(g),ae=zl(g),de=E?E.replace(" ","-"):"";return y.jsxs("div",{className:"section",onDragOver:qc(g.id),onDrop:Wc(g.id),style:Vr===g.id?{outline:"2px dashed #3b82f6",outlineOffset:2}:void 0,children:[y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"nowrap",flex:1,minWidth:0},children:[y.jsx("label",{className:"inline-check",style:{gap:6},children:y.jsx("input",{type:"checkbox",checked:!!(Xt!=null&&Xt[g.id]),onChange:je=>ds(g.id,je.target.checked)})}),y.jsx("button",{className:"icon-btn tiny deposit-drag-handle",type:"button",draggable:!0,onDragStart:Uc(g.id),onDragEnd:Hc,title:rt.t64,children:y.jsx(S1,{size:12})}),$?y.jsx("input",{className:"deposit-order-input",type:"number",min:1,max:He.length,value:Yt[K],onChange:je=>ya(g.id,"order",je.target.value),onBlur:()=>vl(g.id),onKeyDown:je=>$c(je,g.id)}):y.jsx("button",{className:"pill muted deposit-order-pill",type:"button",onClick:()=>yl(g.id,x+1),title:rt.t65,children:x+1}),y.jsx("span",{className:"deposit-name",children:g.name||rt.t144})]}),y.jsxs("div",{className:"section-actions",style:{gap:6},children:[E&&(E==="done"||E!=="done")&&(E!=="done"||((D=g.sections)==null?void 0:D.length)>0&&((Pe=Pr==null?void 0:Pr[g.id])!=null&&Pe.bySection)&&Object.keys(Pr[g.id].bySection).length===g.sections.length?y.jsx("span",{className:`status ${de}`,title:ae||rt.t122,children:E==="done"?"DONE":E}):null),y.jsx($v,{deposit:g,updateDepositMode:Ml}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ta(g.id),title:"",children:" "}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>void Vc(g.id),disabled:!!((Ue=Pr==null?void 0:Pr[g.id])!=null&&Ue.running),children:"Replay"}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ja([g.id]),children:rt.t25}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ue(je=>({...je,[g.id]:!je[g.id]})),children:U[g.id]?rt.t142:rt.t143})]})]}),E&&E!=="done"&&ae?y.jsxs("div",{className:"hint",style:{marginTop:6,color:"#92400e"},children:[rt.t70,ae]}):null,U[g.id]&&y.jsxs("div",{className:"sections",style:{gap:6,marginTop:"8px"},children:[(g.sections||[]).length===0&&y.jsx("div",{className:"hint",children:rt.t71}),(g.sections||[]).map((je,$e)=>{var Dt,mt;const De=(mt=(Dt=Pr==null?void 0:Pr[g.id])==null?void 0:Dt.bySection)==null?void 0:mt[je.id],Ye=Xe((je==null?void 0:je.content)||""),ct=(Ye==null?void 0:Ye.type)==="add_doc"&&((Ye==null?void 0:Ye.source)==="upload"||((je==null?void 0:je.content)||"").toString().includes(rt.t162));return y.jsxs("div",{className:"section",style:{background:"#fff"},children:[y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"nowrap",flex:1,minWidth:0},children:[y.jsx("span",{className:"pill muted",children:$e+1}),y.jsx("span",{className:"section-action-name",children:je.action||rt.t123}),y.jsx("span",{style:{fontSize:"10px",padding:"2px 5px",borderRadius:"3px",background:g.validationMode==="strict"?"#fef3c7":"#f0fdf4",color:g.validationMode==="strict"?"#b45309":"#059669",marginLeft:"4px"},title:g.validationMode==="strict"?"":"",children:g.validationMode==="strict"?"":""}),De!=null&&De.status?y.jsxs("span",{className:`status ${De.status}`,title:De.message||"",style:{display:"inline-flex",alignItems:"center",gap:"4px",fontSize:"10px",padding:"2px 6px",borderRadius:"3px",background:De.status==="done"?De.replayMode==="llm"?"#dbeafe":"#dcfce7":De.status==="fail"?"#fee2e2":"#fef3c7",color:De.status==="done"?De.replayMode==="llm"?"#1e40af":"#166534":De.status==="fail"?"#b91c1c":"#b45309"},children:[De.status==="done"&&De.replayMode==="llm"&&"",De.status==="done"&&De.replayMode!=="llm"&&"",De.status==="fail"&&"",De.status==="pass"&&"",De.status==="running"&&"",De.status.toUpperCase(),De.status==="done"&&De.replayMode==="llm"&&" ()",De.status==="done"&&De.replayMode==="script"&&" ()",De.status==="done"&&De.replayMode==="script_fallback"&&" ()"]}):null]}),y.jsxs("div",{className:"section-actions",style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap"},children:[y.jsxs("select",{value:je.sectionReplayMode||g.precipitationMode||"llm",onChange:tt=>pc(g.id,je.id,tt.target.value),title:" Replay ",style:{fontSize:10,padding:"2px 6px",background:(je.sectionReplayMode||g.precipitationMode||"llm")==="llm"?"#dbeafe":"#dcfce7",color:(je.sectionReplayMode||g.precipitationMode||"llm")==="llm"?"#1e40af":"#166534",borderRadius:4,border:"1px solid #d1d5db",cursor:"pointer",minWidth:"85px"},children:[y.jsx("option",{value:"llm",children:" "}),y.jsx("option",{value:"script",children:" "})]}),y.jsx("button",{className:"ghost xsmall",type:"button",title:" Replay",onClick:()=>xl(g.id,je.id),disabled:(De==null?void 0:De.status)==="running",style:{fontSize:10,padding:"2px 6px"},children:"Replay"}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ii(g.id,je.id),style:{fontSize:10,padding:"2px 6px"},children:Na[`${g.id}_${je.id}`]?"":""}),ct&&y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>void Ul(g.id,je),style:{fontSize:10},children:rt.t73}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>$l(g.id,je.id),style:{fontSize:10,color:"#b91c1c"},children:""})]})]}),Na[`${g.id}_${je.id}`]!==!1&&y.jsxs(y.Fragment,{children:[(()=>{var ci,zi,Ct,tr,Ke,We,Et,sn,bt;const tt=((ci=je.llmScript)==null?void 0:ci.structuredScriptContent)||((zi=je.llmScript)==null?void 0:zi.rawContent)||((Ct=je.originalScript)==null?void 0:Ct.content)||(je.content&&!je.content.includes("__REPLAY_META__")?je.content:(Ke=(tr=je.content)==null?void 0:tr.split("__REPLAY_META__")[0])==null?void 0:Ke.trim()),ft=(Kt,Bn)=>{if(!Kt)return"";const Jn=new RegExp(`${Bn}([^]*?)(?=|$)`,"s"),Sr=Kt.match(Jn);return Sr?Sr[1].trim():""},Qt=ft(tt,"")||((We=je.llmScript)==null?void 0:We.type)||"",_n=ft(tt,"")||((Et=je.llmScript)==null?void 0:Et.docName)||"",ut=ft(tt,"")||((bt=(sn=je.llmScript)==null?void 0:sn.outputs)==null?void 0:bt.summary)||"",xn=ft(tt,"");return tt||Qt||_n||ut?y.jsxs("div",{style:{background:"linear-gradient(135deg, #fefce8 0%, #fef9c3 100%)",border:"1px solid #fcd34d",borderRadius:6,padding:8,marginTop:8},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:6},children:[y.jsx("span",{style:{background:"#f59e0b",color:"#fff",fontSize:10,padding:"2px 6px",borderRadius:4},children:" "}),Qt&&y.jsx("span",{style:{fontSize:11,color:"#92400e",background:"#fef3c7",padding:"1px 4px",borderRadius:3},children:Qt})]}),_n&&y.jsxs("div",{style:{fontSize:11,color:"#78350f",marginBottom:2},children:[" : ",_n]}),ut&&y.jsxs("div",{style:{fontSize:11,color:"#78350f",marginBottom:2},children:[" : ",ut.length>80?ut.substring(0,80)+"...":ut]}),xn&&xn!==""&&y.jsxs("div",{style:{fontSize:11,color:"#78350f"},children:[" : ",xn]}),tt&&y.jsxs("details",{style:{marginTop:6},children:[y.jsx("summary",{style:{fontSize:10,color:"#a16207",cursor:"pointer",userSelect:"none"},children:"..."}),y.jsx("pre",{style:{fontSize:10,color:"#713f12",background:"#fffbeb",padding:6,borderRadius:4,marginTop:4,whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:200,overflow:"auto"},children:tt})]})]}):null})(),(()=>{var ei,ci,zi,Ct;const tt=je.llmScript||{},ft=Ye||je.meta||{},Qt=((ei=ft==null?void 0:ft.docSelector)==null?void 0:ei.description)||((ci=tt==null?void 0:tt.docSelector)==null?void 0:ci.description)||"",_n=tt.inputSourceDesc||((Ct=(zi=ft==null?void 0:ft.inputs)==null?void 0:zi[0])==null?void 0:Ct.contextSummary)||"",ut=tt.aiGuidance||(ft==null?void 0:ft.aiGuidance)||"",xn=tt.specialRequirements||(ft==null?void 0:ft.specialRequirements)||"";return y.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #7dd3fc",borderRadius:6,padding:8,marginTop:8},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[y.jsx("span",{style:{background:"#0ea5e9",color:"#fff",fontSize:10,padding:"2px 6px",borderRadius:4},children:" "}),tt.type&&y.jsx("span",{style:{fontSize:11,color:"#0369a1",background:"#e0f2fe",padding:"1px 4px",borderRadius:3},children:tt.type})]}),tt.description&&y.jsxs("div",{style:{fontSize:11,color:"#0c4a6e",marginBottom:2},children:[" : ",tt.description]}),Qt&&y.jsxs("div",{style:{fontSize:11,color:"#0c4a6e",marginBottom:2},children:[" : ",y.jsx("span",{style:{color:"#0369a1",fontWeight:500},children:Qt})]}),(tt.instructions||tt.promptContent)&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",(tt.instructions||tt.promptContent).substring(0,80),(tt.instructions||tt.promptContent).length>80?"...":""]}),_n&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",_n]}),tt.targetTitle&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",tt.targetTitle]}),ut&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" AI: ",ut.substring(0,100),ut.length>100?"...":""]}),xn&&xn!==""&&y.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[" : ",xn]}),!tt.description&&!Qt&&!(tt.instructions||tt.promptContent)&&!_n&&!tt.targetTitle&&!ut&&(!xn||xn==="")&&y.jsx("div",{style:{fontSize:11,color:"#94a3b8",fontStyle:"italic"},children:"AI"})]})})()]}),(De==null?void 0:De.status)&&y.jsx("div",{className:"hint",style:{whiteSpace:"pre-wrap",color:De.status==="fail"?"#b91c1c":De.status==="done"?"#166534":"#92400e",marginTop:4,fontSize:11,background:De.status==="done"?"#f0fdf4":De.status==="fail"?"#fef2f2":"transparent",padding:De.status==="done"||De.status==="fail"?"4px 8px":0,borderRadius:"4px"},children:De.message||(De.status==="done"?" Replay ":rt.t129)})]},je.id)})]})]},`${g.id}-${x}`)})})]})})]})]})}),y.jsx(Cl,{panelId:"operations-panel",panelName:xs("operations-panel"),isEditing:qe,onTitleEdit:()=>ki("operations-panel"),titleStyle:(to=lt["operations-panel"])==null?void 0:to.titleStyle,className:"operations-panel",position:lt["operations-panel"],onPositionChange:g=>Nt(x=>({...x,"operations-panel":g})),children:y.jsx(Ua,{blockId:"operations-content",panelId:"operations-panel",isEditing:qe,position:$t["operations-panel"],onPositionChange:g=>Rr(x=>({...x,"operations-panel":g})),hidden:yn.includes("operations-panel"),onDelete:()=>ia("operations-panel"),children:y.jsxs("div",{className:"card",children:[y.jsx("div",{className:"card-head",children:y.jsx("div",{className:"actions",style:{gap:"6px"},children:w?y.jsxs("button",{type:"button",className:`ghost small ${be==="batch_outline"?"active":""}`,onClick:()=>Ae("batch_outline"),children:[y.jsx(Zd,{size:14}),rt.t97]}):y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",className:`ghost small ${be==="doc"?"active":""}`,onClick:()=>Ae("doc"),children:[y.jsx(tf,{size:14}),rt.t95]}),y.jsxs("button",{type:"button",className:`ghost small ${be==="result"?"active":""}`,onClick:()=>Ae("result"),children:[y.jsx(nf,{size:14}),rt.t96]})]})})}),y.jsx("textarea",{ref:$i,className:"dispatch-input",style:{height:`${ge}px`,resize:"vertical",minHeight:"40px"},placeholder:rt.t98,onMouseUp:g=>{const x=g.target.offsetHeight;x&&x!==ge&&xe(x)}}),Ti!=null&&Ti.enabled?y.jsxs("button",{className:"ghost",onClick:ql,disabled:S||f,children:[y.jsx(sg,{size:16})," ",(Ti.label||rt.t145).toString()]}):y.jsx("div",{className:"hint",children:rt.t99})]})})}),y.jsx(ug,{buttons:jn.filter(g=>g.kind!=="outline_extract"&&g.kind!=="upload_file"&&g.kind!=="fill_summary"),isEditing:qe,onMouseDown:Ie,onStyleEdit:Ge,onClick:g=>{g.action==="run_block"&&runOutlineBlock(g.targetId),g.action==="toggle_section"&&toggleSection(g.targetId),g.kind==="dispatch"&&ql(),g.kind==="final_generate"&&runFinalGenerate()},onDelete:nt})]})}):y.jsxs("div",{style:{flex:1,position:"relative",minHeight:"600px",overflow:"visible"},children:[y.jsx(Cl,{panelId:"document-list-panel",panelName:xs("document-list-panel"),isEditing:!1,titleStyle:(No=lt["document-list-panel"])==null?void 0:No.titleStyle,className:"document-list-panel",position:lt["document-list-panel"],onPositionChange:()=>{},headerActions:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[((jo=jn.find(g=>g.kind==="upload_file"))==null?void 0:jo.enabled)!==!1&&y.jsxs("button",{type:"button",onClick:()=>{var g;console.log("Upload button clicked",Zi.current),(g=Zi.current)==null||g.click()},title:((qi=jn.find(g=>g.kind==="upload_file"))==null?void 0:qi.label)||rt.t146,style:{pointerEvents:"auto",backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[y.jsx(mb,{size:14})," ",((Qr=jn.find(g=>g.kind==="upload_file"))==null?void 0:Qr.label)||rt.t146]}),y.jsx("button",{type:"button",onClick:()=>void Wl(),disabled:o.length===0,title:rt.t100,style:{pointerEvents:"auto",backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:o.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)",opacity:o.length===0?.6:1},children:rt.t92})]}),children:y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsx(Ua,{blockId:"document-list-content",panelId:"document-list-panel",isEditing:!1,position:$t["document-list-panel"],onPositionChange:()=>{},hidden:yn.includes("document-list-panel"),children:y.jsx(fg,{docs:o,setDocs:a,selectedDocId:l,setSelectedDocId:d,deleteDoc:vc,uploadInputRef:Zi,handleFilePick:nl,replayDirConfig:Ar,setReplayDirConfig:Ji,saveReplayDirConfig:ja,replayDirConfigSaving:Ei})})})}),y.jsx(Cl,{panelId:"preview-panel",panelName:xs("preview-panel"),isEditing:!1,titleStyle:(yi=lt["preview-panel"])==null?void 0:yi.titleStyle,className:"preview-panel",position:lt["preview-panel"],onPositionChange:()=>{},children:y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsx(Ua,{blockId:"preview-textarea",panelId:"preview-panel",isEditing:!1,position:$t["preview-textarea"],onPositionChange:()=>{},hidden:yn.includes("preview-textarea"),children:y.jsxs("div",{className:"card",style:{width:"100%",height:"100%",padding:"0",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative"},children:[y.jsx("div",{style:{position:"absolute",top:8,right:24,zIndex:10},children:y.jsxs("button",{type:"button",onClick:il,style:{backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[y.jsx(ng,{size:14}),rt.t89]})}),y.jsx("textarea",{ref:vo,className:"preview full",value:M,onChange:g=>z(g.target.value),onMouseUp:Fs,onKeyUp:Fs,onSelect:Fs,onBlur:Hu,placeholder:rt.t90,style:{border:"none",width:"100%",height:"100%",resize:"none",padding:"48px 12px 12px",boxSizing:"border-box"}})]})})})}),y.jsx(Cl,{panelId:"processing-panel",panelName:xs("processing-panel"),isEditing:!1,titleStyle:(Wi=lt["processing-panel"])==null?void 0:Wi.titleStyle,className:"processing-panel",position:lt["processing-panel"],onPositionChange:()=>{},children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"100%"},children:[y.jsx(Ua,{blockId:"processing-tabs",panelId:"processing-panel",isEditing:!1,position:$t["processing-tabs"],onPositionChange:()=>{},allowChildPointerEvents:!0,children:y.jsxs("div",{className:"editable-button-group processing-tabs-bar",children:[zc().map(g=>y.jsx(Iu,{button:g,isEditing:!1,panelId:"processing-tabs",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id)),Gc()]})}),I!=="records"&&y.jsx(Ua,{blockId:"processing-content",panelId:"processing-panel",isEditing:!1,position:$t["processing-panel"],onPositionChange:()=>{},hidden:yn.includes("processing-panel"),children:y.jsx("div",{style:{fontSize:"12px",color:"#666",minHeight:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:y.jsxs("div",{style:{padding:"0 12px 12px",overflowY:"auto",flex:1},children:[I==="outline"&&y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",position:"sticky",top:0,backgroundColor:"#fff",zIndex:10,paddingTop:"12px",paddingBottom:"8px",borderBottom:"1px solid #f1f5f9"},children:[y.jsxs("button",{onClick:Ol,style:{backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[y.jsx(ig,{size:14}),rt.t101]}),y.jsxs("div",{style:{display:"flex",gap:"8px"},children:[jn.filter(g=>g.kind==="outline_extract"&&g.enabled!==!1).slice(0,1).map(g=>y.jsx("button",{onClick:()=>Kc(g),title:g.prompt?`Prompt: ${g.prompt.slice(0,50)}...`:rt.t147,style:{backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:g.label},g.id)),y.jsx("button",{onClick:pu,style:{backgroundColor:"#ffffff",color:"#1e293b",border:"1px solid #e2e8f0",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:rt.t92}),y.jsx("button",{onClick:()=>Tt(!0),disabled:!((vi=e==null?void 0:e.sections)!=null&&vi.length),style:{backgroundColor:"#3b82f6",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",height:"32px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",opacity:(ao=e==null?void 0:e.sections)!=null&&ao.length?1:.5},children:rt.t91})]})]}),!e||!e.sections||e.sections.length===0?y.jsx("p",{style:{fontSize:"13px",color:"#94a3b8",padding:"20px",textAlign:"center"},children:rt.t93}):e.sections.map((g,x)=>Xl({section:g,index:x}))]}),I==="config"&&y.jsx(zv,{appButtonsConfig:kr,selectedAppButtonId:as,setSelectedAppButtonId:ar,depositGroups:wr,updateAppButtonLabel:ml,toggleAppButtonGroup:ga,saveAppButtonsConfig:Ra,appButtonsSaving:Co}),I==="strategy"&&y.jsxs("div",{style:{height:"100%",overflow:"auto"},children:[y.jsxs("div",{style:{padding:"12px",borderBottom:"1px solid #f0f0f0",background:"#fafafa"},children:[y.jsx("h4",{style:{margin:"0 0 4px",fontSize:"15px",fontWeight:600},children:rt.t138}),y.jsx("p",{style:{margin:0,fontSize:"13px",color:"#64748b"},children:rt.t139})]}),y.jsxs("div",{style:{padding:"16px",display:"flex",flexDirection:"column",gap:"16px"},children:[y.jsxs("div",{className:"card",style:{padding:"20px",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",background:"#fff"},children:[y.jsx("h5",{style:{margin:"0 0 16px",fontSize:"15px",fontWeight:600,borderBottom:"1px solid #f1f5f9",paddingBottom:"12px",color:"#334155"},children:rt.t102}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569",cursor:"pointer"},children:[y.jsx("span",{children:rt.t103}),y.jsx("input",{type:"checkbox",defaultChecked:!0,style:{width:"16px",height:"16px"}})]}),y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569"},children:[y.jsx("span",{children:rt.t104}),y.jsx("input",{type:"number",defaultValue:5,style:{width:"80px",padding:"6px 10px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"13px"}})]}),y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569"},children:[y.jsx("span",{children:rt.t105}),y.jsx("input",{type:"number",defaultValue:100,style:{width:"80px",padding:"6px 10px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"13px"}})]})]})]}),y.jsxs("div",{className:"card",style:{padding:"20px",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",background:"#fff"},children:[y.jsx("h5",{style:{margin:"0 0 16px",fontSize:"15px",fontWeight:600,borderBottom:"1px solid #f1f5f9",paddingBottom:"12px",color:"#334155"},children:rt.t140}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569",cursor:"pointer"},children:[y.jsx("span",{children:rt.t106}),y.jsx("input",{type:"checkbox",defaultChecked:!0,style:{width:"16px",height:"16px"}})]}),y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569"},children:[y.jsx("span",{children:rt.t107}),y.jsxs("select",{style:{width:"80px",padding:"6px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"13px",background:"#fff"},children:[y.jsx("option",{}),y.jsx("option",{}),y.jsx("option",{})]})]})]})]}),y.jsxs("div",{className:"card",style:{padding:"20px",border:"1px solid #e2e8f0",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",background:"#fff"},children:[y.jsx("h5",{style:{margin:"0 0 16px",fontSize:"15px",fontWeight:600,borderBottom:"1px solid #f1f5f9",paddingBottom:"12px",color:"#334155"},children:rt.t108}),y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569",cursor:"pointer"},children:[y.jsx("span",{children:rt.t109}),y.jsx("input",{type:"checkbox",style:{width:"16px",height:"16px"}})]}),y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569"},children:[y.jsx("span",{children:rt.t110}),y.jsx("input",{type:"number",defaultValue:10,style:{width:"80px",padding:"6px 10px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"13px"}})]}),y.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",color:"#475569"},children:[y.jsx("span",{children:rt.t137}),y.jsx("input",{type:"number",defaultValue:.8,step:.1,style:{width:"80px",padding:"6px 10px",border:"1px solid #cbd5e1",borderRadius:"6px",fontSize:"13px"}})]})]})]})]})]})]})})}),I==="records"&&y.jsxs(y.Fragment,{children:[y.jsxs(Ua,{blockId:"processing-records-toolbar",panelId:"processing-panel",isEditing:!1,position:$t["processing-records-toolbar"],onPositionChange:()=>{},allowChildPointerEvents:!0,children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 0"},children:[y.jsx("button",{type:"button",className:`ghost small ${G==="deposits"?"active":""}`,onClick:()=>re("deposits"),style:{padding:"6px 16px",fontSize:"15px",fontWeight:600,whiteSpace:"nowrap"},children:rt.t61}),y.jsx("button",{type:"button",className:`ghost small ${G==="groups"?"active":""}`,onClick:()=>re("groups"),style:{padding:"6px 16px",fontSize:"15px",fontWeight:600,whiteSpace:"nowrap"},children:rt.t62})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"2px 0",borderBottom:"1px solid #e5e7eb",marginBottom:"4px",flexWrap:"nowrap",overflowX:"auto",minHeight:"32px"},children:[G==="deposits"&&Bo(aa).map(g=>y.jsx(Iu,{button:g,isEditing:!1,panelId:"processing-records-toolbar",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id)),G==="groups"&&Bo(wl).map(g=>y.jsx(Iu,{button:g,isEditing:!1,panelId:"processing-records-toolbar",onMouseDown:Fi,onStyleEdit:m,onClick:_},g.id))]})]}),y.jsx(Ua,{blockId:"processing-records-list",panelId:"processing-panel",isEditing:!1,position:$t["processing-records-list"],onPositionChange:()=>{},children:y.jsxs("div",{className:"sections history-scroll",style:{height:"100%",overflow:"auto"},children:[G==="groups"&&Oa(),G==="groups"&&hu(),G==="deposits"&&He.length===0&&y.jsx("p",{className:"hint",style:{padding:"20px",textAlign:"center"},children:rt.t63}),G==="deposits"&&He.length>0&&y.jsx(y.Fragment,{children:He.map((g,x)=>{var D,Pe,Ue;const K=`${g.id}||order`,$=Yt[K]!==void 0,E=Ss(g),ae=zl(g),de=E?E.replace(" ","-"):"";return y.jsxs("div",{className:"section",onDragOver:qc(g.id),onDrop:Wc(g.id),style:Vr===g.id?{outline:"2px dashed #3b82f6",outlineOffset:2}:void 0,children:[y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"nowrap",flex:1,minWidth:0},children:[y.jsx("label",{className:"inline-check",style:{gap:6},children:y.jsx("input",{type:"checkbox",checked:!!(Xt!=null&&Xt[g.id]),onChange:je=>ds(g.id,je.target.checked)})}),y.jsx("button",{className:"icon-btn tiny deposit-drag-handle",type:"button",draggable:!0,onDragStart:Uc(g.id),onDragEnd:Hc,title:rt.t64,children:y.jsx(S1,{size:12})}),$?y.jsx("input",{className:"deposit-order-input",type:"number",min:1,max:He.length,value:Yt[K],onChange:je=>ya(g.id,"order",je.target.value),onBlur:()=>vl(g.id),onKeyDown:je=>$c(je,g.id)}):y.jsx("button",{className:"pill muted deposit-order-pill",type:"button",onClick:()=>yl(g.id,x+1),title:rt.t65,children:x+1}),Yt[`${g.id}||name`]!==void 0?y.jsx("input",{className:"deposit-name-input",value:Yt[`${g.id}||name`],onChange:je=>ya(g.id,"name",je.target.value),onBlur:()=>void hc(g.id),onKeyDown:je=>el(je,g.id),autoFocus:!0,onClick:je=>je.stopPropagation(),style:{border:"1px solid #1a73e8",padding:"2px 6px",borderRadius:"4px",fontSize:"16px",width:"200px"}}):y.jsx("span",{className:"deposit-name",onDoubleClick:je=>{je.stopPropagation(),ya(g.id,"name",g.name||g.id)},title:rt.t120,style:{cursor:"text",fontWeight:500},children:g.name||rt.t144}),y.jsx("button",{className:"icon-btn tiny",type:"button",onClick:je=>{je.stopPropagation(),ya(g.id,"name",g.name||g.id)},title:rt.t67,style:{width:20,height:20,padding:2,opacity:.5},children:y.jsx(Zd,{size:12})})]}),y.jsxs("div",{className:"section-actions",style:{gap:6},children:[E&&(E==="done"||E!=="done")&&(E!=="done"||((D=g.sections)==null?void 0:D.length)>0&&((Pe=Pr==null?void 0:Pr[g.id])!=null&&Pe.bySection)&&Object.keys(Pr[g.id].bySection).length===g.sections.length?y.jsx("span",{className:`status ${de}`,title:ae||rt.t122,children:E==="done"?"DONE":E}):null),y.jsx($v,{deposit:g,updateDepositMode:Ml}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ta(g.id),title:"",children:" "}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>void Vc(g.id),disabled:!!((Ue=Pr==null?void 0:Pr[g.id])!=null&&Ue.running),children:"Replay"}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ja([g.id]),children:rt.t25}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>ue(je=>({...je,[g.id]:!je[g.id]})),children:U[g.id]?rt.t142:rt.t143})]})]}),E&&E!=="done"&&ae?y.jsxs("div",{className:"hint",style:{marginTop:6,color:"#92400e"},children:[rt.t70,ae]}):null,U[g.id]&&y.jsxs("div",{className:"sections",style:{gap:6,marginTop:"8px"},children:[(g.sections||[]).length===0&&y.jsx("div",{className:"hint",children:rt.t71}),(g.sections||[]).map((je,$e)=>{var Dt,mt;const De=(mt=(Dt=Pr==null?void 0:Pr[g.id])==null?void 0:Dt.bySection)==null?void 0:mt[je.id],Ye=Xe((je==null?void 0:je.content)||""),ct=(Ye==null?void 0:Ye.type)==="add_doc"&&((Ye==null?void 0:Ye.source)==="upload"||((je==null?void 0:je.content)||"").toString().includes(rt.t162));return y.jsxs("div",{className:"section",style:{background:"#fff"},children:[y.jsxs("div",{className:"section-head",style:{justifyContent:"space-between",alignItems:"center"},children:[y.jsxs("div",{className:"section-title",style:{display:"flex",alignItems:"center",gap:10,flexWrap:"nowrap",flex:1,minWidth:0},children:[y.jsx("span",{className:"pill muted",children:$e+1}),y.jsx("span",{className:"section-action-name",children:je.action||rt.t123}),y.jsx("span",{style:{fontSize:"10px",padding:"2px 5px",borderRadius:"3px",background:g.validationMode==="strict"?"#fef3c7":"#f0fdf4",color:g.validationMode==="strict"?"#b45309":"#059669",marginLeft:"4px"},title:g.validationMode==="strict"?"":"",children:g.validationMode==="strict"?"":""}),De!=null&&De.status?y.jsxs("span",{className:`status ${De.status}`,title:De.message||"",style:{display:"inline-flex",alignItems:"center",gap:"4px",fontSize:"10px",padding:"2px 6px",borderRadius:"3px",background:De.status==="done"?De.replayMode==="llm"?"#dbeafe":"#dcfce7":De.status==="fail"?"#fee2e2":"#fef3c7",color:De.status==="done"?De.replayMode==="llm"?"#1e40af":"#166534":De.status==="fail"?"#b91c1c":"#b45309"},children:[De.status==="done"&&De.replayMode==="llm"&&"",De.status==="done"&&De.replayMode!=="llm"&&"",De.status==="fail"&&"",De.status==="pass"&&"",De.status==="running"&&"",De.status.toUpperCase(),De.status==="done"&&De.replayMode==="llm"&&" ()",De.status==="done"&&De.replayMode==="script"&&" ()",De.status==="done"&&De.replayMode==="script_fallback"&&" ()"]}):null]}),y.jsxs("div",{className:"section-actions",style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap"},children:[y.jsxs("select",{value:je.sectionReplayMode||g.precipitationMode||"llm",onChange:tt=>pc(g.id,je.id,tt.target.value),title:" Replay ",style:{fontSize:10,padding:"2px 6px",background:(je.sectionReplayMode||g.precipitationMode||"llm")==="llm"?"#dbeafe":"#dcfce7",color:(je.sectionReplayMode||g.precipitationMode||"llm")==="llm"?"#1e40af":"#166534",borderRadius:4,border:"1px solid #d1d5db",cursor:"pointer",minWidth:"85px"},children:[y.jsx("option",{value:"llm",children:" "}),y.jsx("option",{value:"script",children:" "})]}),y.jsx("button",{className:"ghost xsmall",type:"button",title:" Replay",onClick:()=>xl(g.id,je.id),disabled:(De==null?void 0:De.status)==="running",style:{fontSize:10,padding:"2px 6px"},children:"Replay"}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>Ii(g.id,je.id),style:{fontSize:10,padding:"2px 6px"},children:Na[`${g.id}_${je.id}`]?"":""}),ct&&y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>void Ul(g.id,je),style:{fontSize:10},children:rt.t73}),y.jsx("button",{className:"ghost xsmall",type:"button",onClick:()=>$l(g.id,je.id),style:{fontSize:10,color:"#b91c1c"},children:""})]})]}),Na[`${g.id}_${je.id}`]!==!1&&y.jsxs(y.Fragment,{children:[(()=>{var ci,zi,Ct,tr,Ke,We,Et,sn,bt;const tt=((ci=je.llmScript)==null?void 0:ci.structuredScriptContent)||((zi=je.llmScript)==null?void 0:zi.rawContent)||((Ct=je.originalScript)==null?void 0:Ct.content)||(je.content&&!je.content.includes("__REPLAY_META__")?je.content:(Ke=(tr=je.content)==null?void 0:tr.split("__REPLAY_META__")[0])==null?void 0:Ke.trim()),ft=(Kt,Bn)=>{if(!Kt)return"";const Jn=new RegExp(`${Bn}([^]*?)(?=|$)`,"s"),Sr=Kt.match(Jn);return Sr?Sr[1].trim():""},Qt=ft(tt,"")||((We=je.llmScript)==null?void 0:We.type)||"",_n=ft(tt,"")||((Et=je.llmScript)==null?void 0:Et.docName)||"",ut=ft(tt,"")||((bt=(sn=je.llmScript)==null?void 0:sn.outputs)==null?void 0:bt.summary)||"",xn=ft(tt,"");return tt||Qt||_n||ut?y.jsxs("div",{style:{background:"linear-gradient(135deg, #fefce8 0%, #fef9c3 100%)",border:"1px solid #fcd34d",borderRadius:6,padding:8,marginTop:8},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:6},children:[y.jsx("span",{style:{background:"#f59e0b",color:"#fff",fontSize:10,padding:"2px 6px",borderRadius:4},children:" "}),Qt&&y.jsx("span",{style:{fontSize:11,color:"#92400e",background:"#fef3c7",padding:"1px 4px",borderRadius:3},children:Qt})]}),_n&&y.jsxs("div",{style:{fontSize:11,color:"#78350f",marginBottom:2},children:[" : ",_n]}),ut&&y.jsxs("div",{style:{fontSize:11,color:"#78350f",marginBottom:2},children:[" : ",ut.length>80?ut.substring(0,80)+"...":ut]}),xn&&xn!==""&&y.jsxs("div",{style:{fontSize:11,color:"#78350f"},children:[" : ",xn]}),tt&&y.jsxs("details",{style:{marginTop:6},children:[y.jsx("summary",{style:{fontSize:10,color:"#a16207",cursor:"pointer",userSelect:"none"},children:"..."}),y.jsx("pre",{style:{fontSize:10,color:"#713f12",background:"#fffbeb",padding:6,borderRadius:4,marginTop:4,whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:200,overflow:"auto"},children:tt})]})]}):null})(),(()=>{var ei,ci,zi,Ct;const tt=je.llmScript||{},ft=Ye||je.meta||{},Qt=((ei=ft==null?void 0:ft.docSelector)==null?void 0:ei.description)||((ci=tt==null?void 0:tt.docSelector)==null?void 0:ci.description)||"",_n=tt.inputSourceDesc||((Ct=(zi=ft==null?void 0:ft.inputs)==null?void 0:zi[0])==null?void 0:Ct.contextSummary)||"",ut=tt.aiGuidance||(ft==null?void 0:ft.aiGuidance)||"",xn=tt.specialRequirements||(ft==null?void 0:ft.specialRequirements)||"";return y.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #7dd3fc",borderRadius:6,padding:8,marginTop:8},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[y.jsx("span",{style:{background:"#0ea5e9",color:"#fff",fontSize:10,padding:"2px 6px",borderRadius:4},children:" "}),tt.type&&y.jsx("span",{style:{fontSize:11,color:"#0369a1",background:"#e0f2fe",padding:"1px 4px",borderRadius:3},children:tt.type})]}),tt.description&&y.jsxs("div",{style:{fontSize:11,color:"#0c4a6e",marginBottom:2},children:[" : ",tt.description]}),Qt&&y.jsxs("div",{style:{fontSize:11,color:"#0c4a6e",marginBottom:2},children:[" : ",y.jsx("span",{style:{color:"#0369a1",fontWeight:500},children:Qt})]}),(tt.instructions||tt.promptContent)&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",(tt.instructions||tt.promptContent).substring(0,80),(tt.instructions||tt.promptContent).length>80?"...":""]}),_n&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",_n]}),tt.targetTitle&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" : ",tt.targetTitle]}),ut&&y.jsxs("div",{style:{fontSize:11,color:"#64748b",marginBottom:2},children:[" AI: ",ut.substring(0,100),ut.length>100?"...":""]}),xn&&xn!==""&&y.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:[" : ",xn]}),!tt.description&&!Qt&&!(tt.instructions||tt.promptContent)&&!_n&&!tt.targetTitle&&!ut&&(!xn||xn==="")&&y.jsx("div",{style:{fontSize:11,color:"#94a3b8",fontStyle:"italic"},children:"AI"})]})})()]}),(De==null?void 0:De.status)&&y.jsx("div",{className:"hint",style:{whiteSpace:"pre-wrap",color:De.status==="fail"?"#b91c1c":De.status==="done"?"#166534":"#92400e",marginTop:4,fontSize:11,background:De.status==="done"?"#f0fdf4":De.status==="fail"?"#fef2f2":"transparent",padding:De.status==="done"||De.status==="fail"?"4px 8px":0,borderRadius:"4px"},children:De.message||(De.status==="done"?" Replay ":rt.t129)})]},je.id)})]})]},`${g.id}-${x}`)})})]})})]})]})}),y.jsx(Cl,{panelId:"operations-panel",panelName:xs("operations-panel"),isEditing:!1,titleStyle:(lo=lt["operations-panel"])==null?void 0:lo.titleStyle,className:"operations-panel",position:lt["operations-panel"],onPositionChange:()=>{},children:y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:y.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[y.jsx("textarea",{ref:$i,className:"dispatch-input",style:{height:`${ge}px`,resize:"vertical",minHeight:"40px"},placeholder:rt.t98,onMouseUp:g=>{const x=g.target.offsetHeight;x&&x!==ge&&xe(x)}}),Ti!=null&&Ti.enabled?y.jsxs("button",{className:"ghost",onClick:ql,disabled:S||f,children:[y.jsx(sg,{size:16})," ",(Ti.label||rt.t145).toString()]}):y.jsx("div",{className:"hint",children:rt.t99})]})})}),y.jsx(ug,{buttons:jn.filter(g=>g.kind!=="outline_extract"&&g.kind!=="upload_file"&&g.kind!=="fill_summary"),isEditing:!1,onMouseDown:()=>{},onStyleEdit:()=>{},onClick:g=>{var x;g.action==="run_block"&&runOutlineBlock(g.targetId),g.action==="toggle_section"&&toggleSection(g.targetId),g.kind==="dispatch"&&ql(),g.kind==="final_generate"&&runFinalGenerate(),g.kind==="outline_extract"&&Kc(g),g.kind==="upload_file"&&((x=Zi.current)==null||x.click())},onDelete:void 0})]}),Yi&&(()=>{var x;const g=jn.find(K=>K.id===Yi);if(g)return y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.2)",zIndex:9999},onClick:()=>uo(null)}),y.jsx("div",{style:{position:"fixed",right:20,top:60,zIndex:1e4},children:y.jsx(od,{button:g,label:g.label,onStyleChange:pe.bind(null,Yi),onLogicChange:K=>{pe(Yi,{...g,kind:K.kind,prompt:K.prompt})},onDelete:()=>{confirm(rt.t148)&&(we(Yi),uo(null))},onClose:()=>uo(null)})})]});try{const{panelId:K,buttonId:$}=JSON.parse(Yi),E=(x=Zn[K])==null?void 0:x.find(ae=>ae.id===$);if(E)return y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.2)",zIndex:9999},onClick:()=>uo(null)}),y.jsx("div",{style:{position:"fixed",right:20,top:60,zIndex:1e4},children:y.jsx(od,{button:E,label:E.label,onStyleChange:ae=>W(K,$,ae),onLogicChange:ae=>{W(K,$,{style:E.style,label:E.label,kind:ae.kind,prompt:ae.prompt})},onDelete:()=>nt(),onClose:()=>uo(null)})})]})}catch(K){console.error(K)}return null})(),ni&&(()=>{var K,$;const g={"input-form-panel":rt.t149,"document-list-panel":rt.t150,"processing-panel":rt.t151,"preview-panel":rt.t152,"operations-panel":rt.t153}[ni]||ni,x=((K=lt[ni])==null?void 0:K.titleStyle)||{};return y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.2)",zIndex:9999},onClick:()=>ki(null)}),y.jsx("div",{style:{position:"fixed",right:20,top:60,zIndex:1e4},children:y.jsx(od,{button:{id:"title",label:(($=lt[ni])==null?void 0:$.customTitle)||g,style:x},onStyleChange:({style:E,label:ae})=>{Nt(de=>({...de,[ni]:{...de[ni],titleStyle:E,customTitle:ae}}))},onClose:()=>ki(null),onDelete:void 0})})]})})(),vs&&(()=>{const g=Ln[vs];return y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.2)",zIndex:9999},onClick:()=>ws(null)}),y.jsx("div",{style:{position:"fixed",right:20,top:60,zIndex:1e4},children:y.jsx(od,{button:{id:vs,label:g.text,style:g.style||{}},onStyleChange:({style:x,label:K})=>{Wr($=>({...$,[vs]:{...$[vs],text:K,style:x}}))},onClose:()=>ws(null),onDelete:void 0})})]})})(),N&&y.jsx("div",{className:"toast",children:N}),da&&y.jsx(lA,{onClose:()=>ls(!1),onSave:Fl,onUse:Ca,onDelete:Gs,onRename:Ps,historyList:Nn,loading:na}),y.jsx(Jk,{isOpen:cs,onClose:()=>Tt(!1),sections:(e==null?void 0:e.sections)||[],docName:((Ri=o.find(g=>g.id===l))==null?void 0:Ri.name)||rt.t135})]})]})}const os={t1:"",t2:"",t3:"",t4:"",t5:" + ",t6:"",t7:"",t8:"",t9:"",t10:"",t11:" Studio",t12:"...",t13:" Enter Shift + Enter ",t14:"",t15:"Studio ",t16:" Pin ",t17:"",t18:"...",t19:"",t20:""};function wA({sources:r=[],onUpload:e,onDelete:t,onSelect:o,onClearAll:a}){const s=Qe.useRef(null);return y.jsxs("div",{className:"panel-content",style:{height:"100%",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{className:"panel-header",style:{padding:"20px 24px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(og,{className:"text-primary",size:20}),y.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600},children:os.t1}),y.jsx("span",{className:"pill muted",children:r.length})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx("button",{className:"ghost icon-btn",onClick:()=>{var u;return(u=s.current)==null?void 0:u.click()},title:os.t2,children:y.jsx(Qv,{size:20})}),y.jsx("button",{className:"ghost icon-btn",onClick:()=>a==null?void 0:a(),title:os.t3,disabled:!r.length,children:y.jsx(yd,{size:18})})]}),y.jsx("input",{type:"file",multiple:!0,ref:s,style:{display:"none"},onChange:e,accept:".txt,.md,.pdf,.docx"})]}),y.jsx("div",{className:"scroll-y",style:{flex:1,padding:"0 16px 20px"},children:r.length===0?y.jsxs("div",{className:"empty-state",children:[y.jsx(og,{size:48,opacity:.1}),y.jsxs("p",{children:[os.t4,y.jsx("br",{}),y.jsx("span",{className:"sub",children:os.t5})]})]}):y.jsx("div",{className:"list",children:r.map(u=>y.jsxs("div",{className:`list-item ${u.selected?"active":""}`,onClick:()=>o(u.id),children:[y.jsx("div",{className:"icon-box",children:y.jsx(tf,{size:16})}),y.jsxs("div",{className:"content",children:[y.jsx("div",{className:"title",children:u.name}),y.jsxs("div",{className:"meta",children:[u.type,"  ",u.size]})]}),y.jsx("button",{className:"ghost icon-btn small delete-btn",onClick:l=>{l.stopPropagation(),t(u.id)},children:y.jsx(yd,{size:14})})]},u.id))})})]})}function xA({messages:r=[],onSendMessage:e,thinking:t=!1,appButtons:o=[],onAppButtonClick:a,onClearMessages:s}){const[u,l]=Qe.useState(""),d=Qe.useRef(null);Qe.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[r,t]);const f=()=>{u.trim()&&(e(u),l(""))};return y.jsxs("div",{className:"panel-content",style:{height:"100%",display:"flex",flexDirection:"column"},children:[y.jsx("div",{className:"panel-header",style:{padding:"20px 24px",borderBottom:"1px solid var(--border-light)"},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[y.jsx(Jx,{size:20,className:"text-primary"}),y.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600},children:os.t6})]})}),o.length>0&&y.jsxs("div",{className:"chat-app-actions",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:o.map(h=>y.jsx("button",{type:"button",className:"ghost chat-app-btn",onClick:()=>a==null?void 0:a(h),children:h.label},h.id))}),s&&y.jsxs("button",{type:"button",className:"ghost",onClick:s,title:"",style:{padding:"6px 12px",fontSize:"13px",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"4px"},children:[y.jsx(yd,{size:14}),""]})]}),y.jsxs("div",{className:"chat-area scroll-y",ref:d,style:{flex:1,padding:"20px"},children:[r.length===0&&y.jsxs("div",{className:"empty-state",children:[y.jsx(nf,{size:48,opacity:.1}),y.jsxs("p",{children:[os.t7,y.jsx("br",{}),y.jsx("span",{className:"sub",children:os.t8})]}),y.jsxs("div",{className:"suggestions",children:[y.jsx("button",{className:"suggestion-pill",onClick:()=>e(os.t19),children:os.t9}),y.jsx("button",{className:"suggestion-pill",onClick:()=>e(os.t20),children:os.t10})]})]}),r.map((h,S)=>y.jsxs("div",{className:`message ${h.role}`,children:[y.jsx("div",{className:"avatar",children:h.role==="user"?y.jsx(yb,{size:16}):y.jsx(tg,{size:16})}),y.jsxs("div",{className:"bubble",children:[h.content,h.citations&&h.citations.length>0&&y.jsx("div",{className:"citations",children:h.citations.map((b,p)=>y.jsx("span",{className:"citation-chip",children:b},p))})]}),h.role==="assistant"&&y.jsx("div",{className:"msg-actions",children:y.jsx("button",{className:"ghost icon-btn xsmall",title:os.t11,children:y.jsx(nb,{size:14})})})]},`${h.id||"msg"}_${S}`)),t&&y.jsxs("div",{className:"message assistant thinking",children:[y.jsx("div",{className:"avatar",children:y.jsx(tg,{size:16})}),y.jsxs("div",{className:"bubble",children:[y.jsx("span",{className:"dot",children:"."}),y.jsx("span",{className:"dot",children:"."}),y.jsx("span",{className:"dot",children:"."})]})]})]}),y.jsxs("div",{className:"input-area",style:{padding:"20px",borderTop:"1px solid var(--border-light)"},children:[y.jsxs("div",{className:"input-box",children:[y.jsx("textarea",{className:"chat-input",rows:1,placeholder:os.t12,value:u,onChange:h=>l(h.target.value),onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),f())}}),y.jsx("button",{className:`send-btn ${u.trim()?"active":""}`,onClick:f,disabled:!u.trim(),children:y.jsx(cb,{size:18})})]}),y.jsx("div",{className:"input-hint",children:os.t13})]})]})}function bA({notes:r=[],onAddNote:e,onDeleteNote:t}){return y.jsxs("div",{className:"panel-content",style:{height:"100%",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{className:"panel-header",style:{padding:"20px 24px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(nf,{className:"text-accent",size:20}),y.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600},children:"Studio"})]}),y.jsx("button",{className:"ghost icon-btn",onClick:e,title:os.t14,children:y.jsx(Qv,{size:20})})]}),y.jsx("div",{className:"scroll-y",style:{flex:1,padding:"0 16px 20px"},children:r.length===0?y.jsxs("div",{className:"empty-state",children:[y.jsx(tf,{size:48,opacity:.1}),y.jsxs("p",{children:[os.t15,y.jsx("br",{}),y.jsx("span",{className:"sub",children:os.t16})]})]}):y.jsx("div",{className:"notes-grid",children:r.map(o=>y.jsxs("div",{className:"note-card",children:[y.jsxs("div",{className:"note-header",children:[y.jsx("input",{className:"note-title-input",defaultValue:o.title,placeholder:os.t17}),y.jsx("button",{className:"ghost icon-btn xsmall",onClick:()=>t(o.id),children:y.jsx(rf,{size:14})})]}),y.jsx("textarea",{className:"note-content-input",defaultValue:o.content,placeholder:os.t18})]},o.id))})})]})}const Go={t1:"",t2:"",t3:"",t4:"",t5:"",t6:"",t7:"",t8:"",t9:"",t10:"",t11:"",t12:"",t13:""},Uv="__REPLAY_META__",_A="shared_scene_id",SA=`
JSON
- summary: 
- detail: 
- edits: [{sectionId, field:'title'|'summary', content}]
JSON
`.trim(),qv=[{id:"app_btn_daily_merge",label:"",groupIds:[]},{id:"app_btn_competitor_report",label:"",groupIds:[]},{id:"app_btn_custom_write",label:"",groupIds:[]}],Pi={SOURCES:"sources-panel",CHAT:"chat-panel",STUDIO:"studio-panel"},rh={"sources-panel":!0,"chat-panel":!0,"studio-panel":!0},ih={"sources-panel":{left:20,top:40,width:320,height:900},"chat-panel":{left:360,top:40,width:800,height:900},"studio-panel":{left:1180,top:40,width:460,height:900}},kA={"sources-panel":["","",""],"chat-panel":["","",""],"studio-panel":["Studio","",""]},AA=[{id:"1",role:"assistant",content:""}],NA=[{id:"1",title:"",content:""}],bi=async(r,e={})=>{const t=await fetch(r,{headers:{"Content-Type":"application/json"},...e,body:e.body?JSON.stringify(e.body):void 0});if(!t.ok){const a=await t.text().catch(()=>"");let s=a;try{const u=JSON.parse(a);u!=null&&u.error&&(s=u.error)}catch{}throw new Error(s)}return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Wv=r=>{const e=(r||"").toString(),t=e.indexOf(Uv);if(t===-1)return null;const o=e.slice(t+Uv.length).trim();try{const a=JSON.parse(o);return a&&typeof a=="object"?a:null}catch{return null}},oh=(r,e)=>r.find(t=>e.some(o=>t.startsWith(o))),sh=(r,e)=>{if(!r)return"";const t=e.find(o=>r.startsWith(o));return t?r.slice(t.length).replace(/^[:\uff1a]/,"").trim():r.trim()},EA=r=>{const t=(r||"").toString().split(/\r?\n/).map(l=>l.trim()).filter(Boolean),o=oh(t,["","",""]),a=oh(t,["","",""]),s=oh(t,["","","",""]),u=oh(t,["","",""]);return{inputLine:o,actionLine:a,summaryLine:s,locationLine:u}},hs=async()=>{try{const r=localStorage.getItem(_A);if(!r)return null;const e=await bi(`/api/scene/${r}`);return(e==null?void 0:e.scene)||null}catch{return null}},TA=r=>r.toString().trim().toLowerCase().endsWith(".docx"),CA=async()=>{const r=await cd(()=>import("./mammoth.browser-v_mVU7y6.js").then(e=>e.m),[]);return(r==null?void 0:r.default)||r},LA=r=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{var a;return e(((a=o.result)==null?void 0:a.toString())||"")},o.onerror=t,o.readAsText(r,"utf-8")}),IA=r=>{var l;const e=(r||"").toString();if(!e.trim())return"";let t;try{t=new DOMParser().parseFromString(e,"text/html")}catch{return e.replace(/<[^>]+>/g," ").replace(/\s+\n/g,`
`).trim()}const o=[],a=(d="")=>{const f=(d||"").toString().replace(/\s+/g," ").trim();f&&o.push(f)},s=()=>{o.length&&o[o.length-1]!==""&&o.push("")},u=(d,f=0)=>{if(!d||d.nodeType===3)return;const h=d;if(!h.tagName){Array.from(h.childNodes||[]).forEach(b=>u(b,f));return}const S=h.tagName.toUpperCase();if(/^H[1-6]$/.test(S)){const b=Math.max(1,Math.min(6,Number(S.slice(1))||1)),p=(h.textContent||"").toString().trim();p&&a(`${"#".repeat(b)} ${p}`),s();return}if(S==="P"){const b=(h.textContent||"").toString().trim();b&&a(b),s();return}if(S==="LI"){const b=(h.textContent||"").toString().trim();b&&a(`${"  ".repeat(Math.max(0,f))}- ${b}`);return}if(S==="UL"||S==="OL"){Array.from(h.children||[]).forEach(b=>u(b,f+1)),s();return}if(S==="BR"){s();return}Array.from(h.childNodes||[]).forEach(b=>u(b,f))};return Array.from(((l=t.body)==null?void 0:l.childNodes)||[]).forEach(d=>u(d,0)),o.join(`
`).replace(/\n{3,}/g,`

`).trim()},RA=async r=>{const e=await r.arrayBuffer(),o=await(await CA()).convertToHtml({arrayBuffer:e}),a=((o==null?void 0:o.value)||"").toString(),s=IA(a);return s.trim()?s:""},jA=r=>{const e=(r||"").length;return e<1e3?`${e} `:e<1e4?`${(e/1e3).toFixed(1)}K `:`${(e/1e3).toFixed(0)}K `};function PA({onSwitch:r}){var Is,Yi,uo,ni,ki,gr,gs,Rs;const[e,t]=Qe.useState([]),[o,a]=Qe.useState({}),[s,u]=Qe.useState(AA),[l,d]=Qe.useState(NA),[f,h]=Qe.useState(!1),[S,b]=Qe.useState(qv),[p,j]=Qe.useState([]),N=e.map(Me=>{const He=((Me==null?void 0:Me.name)||"").toString(),ht=He.includes(".")?He.split(".").pop().toUpperCase():"TXT";return{id:(Me==null?void 0:Me.id)||He,name:He||"",type:ht||"TXT",size:jA((Me==null?void 0:Me.content)||""),selected:!!o[Me==null?void 0:Me.id]}}),[A,w]=Qe.useState(!1),[R,I]=Qe.useState([]),[k,G]=Qe.useState([]),re=async()=>{try{const Me=await fetch("/api/docs");if(!Me.ok)throw new Error("load docs failed");const He=await Me.json();if(Array.isArray(He==null?void 0:He.docs))return t(He.docs),He.docs}catch(Me){console.error("Failed to load docs",Me)}return null};Qe.useEffect(()=>{re(),fetch("/api/chat/cache").then(Me=>Me.ok?Me.json():null).then(Me=>{Me!=null&&Me.messages&&Array.isArray(Me.messages)&&Me.messages.length>0&&u(Me.messages)}).catch(Me=>console.log("",Me))},[]),Qe.useEffect(()=>{a(Me=>{const He={};return e.forEach(ht=>{Me[ht.id]&&(He[ht.id]=!0)}),He})},[e]),Qe.useEffect(()=>{var Me;s.length===1&&((Me=s[0])==null?void 0:Me.id)==="1"||fetch("/api/chat/cache",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s})}).catch(He=>console.log("",He))},[s]),Qe.useEffect(()=>{fetch("/api/multi/precipitation/records").then(Me=>Me.json()).then(Me=>{Array.isArray(Me)&&I(Me.sort((He,ht)=>ht.createdAt-He.createdAt))}).catch(Me=>console.error("Failed to load records",Me))},[]),Qe.useEffect(()=>{fetch("/api/multi/precipitation/groups").then(Me=>Me.ok?Me.json():[]).then(Me=>{Array.isArray(Me)&&j(Me)}).catch(Me=>console.error("Failed to load deposit groups",Me))},[]);const[Q,ie]=Qe.useState(!1),[U,ue]=Qe.useState(""),oe=Me=>!Me||!Array.isArray(Me.buttons)?qv:Me.buttons.map((He,ht)=>{if(!He||typeof He!="object")return null;const qt=typeof He.id=="string"&&He.id.trim()?He.id.trim():`app_btn_${ht}`,hn=typeof He.label=="string"?He.label.trim():"";if(!hn)return null;const Xt=Array.isArray(He.groupIds)?He.groupIds.filter(Boolean):[];return{id:qt,label:hn,groupIds:Xt}}).filter(Boolean),B=Me=>{u(He=>[...He,{id:`msg_${Date.now()}`,role:"assistant",content:Me}])},te=async(Me,He,ht={})=>{var wr,pi,Xr,Yr,Mi,sr,_i,Ni,kr,To,Co,Qo,Ar,Ji,Ei,fo,ys,ss,as,ar,Ln,Wr,vs,ws,Oi;const{precipitationMode:qt="llm",structuredScript:hn=""}=ht,Xt=xr=>new Promise(ri=>setTimeout(ri,xr)),cn=[];let Yt=[];try{const xr=await fetch("/api/docs");if(xr.ok){const ri=await xr.json();Array.isArray(ri==null?void 0:ri.docs)&&(Yt=ri.docs,t(ri.docs))}}catch(xr){console.error("Replay: ",xr)}!Yt.length&&e.length&&(Yt=e);const Xn=async()=>{try{const xr=await fetch("/api/docs");if(xr.ok){const ri=await xr.json();if(Array.isArray(ri==null?void 0:ri.docs))return Yt=ri.docs,t(ri.docs),Yt}}catch(xr){console.error("Replay: ",xr)}return Yt},hi=async()=>Yt.length?Yt:Xn();let wi=null;try{wi=await hs()}catch(xr){console.log("",xr)}for(let xr=0;xr<Me.length;xr++){const ri=Me[xr]||{},$r=ri.llmScript||null,Zi=(ri.originalScript||ri).content||ri.content||"",kt=Wv(Zi)||{},$i=EA(Zi),vo=(ri.action||($r==null?void 0:$r.title)||kt.record||kt.type||`${xr+1}`).toString();let Qi=qt==="llm"?"llm":"script",pn="";ue(qt==="llm"?`${He} [${xr+1}/${Me.length}]   Replay: ${vo}`:`${He} [${xr+1}/${Me.length}]   Replay: ${vo}`);const Pr=sh($i.inputLine,["","",""]);sh($i.actionLine,["","",""]);const Aa=sh($i.summaryLine,["","","",""]);sh($i.locationLine,["","",""]);const Na=(wr=kt==null?void 0:kt.outputs)!=null&&wr.summary?String(kt.outputs.summary):"";let rr="done",Nn="";const mi=((kt==null?void 0:kt.type)||"").toString(),na=()=>{var Tt;return(kt.docName||kt.selectedDocName||(Array.isArray(kt.inputs)?(Tt=kt.inputs.find(on=>on==null?void 0:on.docName))==null?void 0:Tt.docName:"")||"").toString()};await hi();const Oo=Tt=>{if(!Tt&&!kt.docId)return null;if(kt.docId){const un=Yt.find(lr=>(lr==null?void 0:lr.id)===kt.docId);if(un)return un}const on=Yt.find(un=>(un==null?void 0:un.name)===Tt);if(on)return on;const Ht=(Tt||"").toLowerCase().trim(),fn=Yt.find(un=>((un==null?void 0:un.name)||"").toLowerCase().trim()===Ht);return fn||Yt.find(un=>{const lr=((un==null?void 0:un.name)||"").toLowerCase().trim();return lr.includes(Ht)||Ht.includes(lr)})||null};if(mi==="add_doc"||mi.startsWith("add_doc")){const Tt=na();await Xn();let on=Oo(Tt);if(!on&&Yt.length>0)try{const Ht=await hs(),fn=new Set((Ht==null?void 0:Ht.docIds)||[]),rn=Yt.find(un=>!fn.has(un.id));rn&&(on=rn)}catch(Ht){console.error("",Ht)}if(!on)rr="fail",Nn=Tt?`${Tt}`:"";else try{const Ht=await hs();if(!(Ht!=null&&Ht.id))throw new Error("scene ");const fn=Array.from(new Set([...Ht.docIds||[],on.id]));await bi(`/api/scene/${Ht.id}`,{method:"PATCH",body:{docIds:fn}}),await Xn(),rr="done",Nn=`${on.name}`}catch(Ht){rr="fail",Nn=(Ht==null?void 0:Ht.message)||""}}else if(mi==="delete_doc"||mi==="remove_doc"||mi.startsWith("delete_doc")||mi.startsWith("remove_doc")){const Tt=na(),on=Oo(Tt);if(!on)rr="fail",Nn=Tt?`${Tt}`:"";else try{await fetch(`/api/docs/${on.id}`,{method:"DELETE"}),await Xn(),rr="done",Nn=`${on.name}`}catch{rr="fail",Nn=""}}else if(mi==="outline_extract"||mi.startsWith("outline_extract")){const Tt=na(),on=Oo(Tt);if(!on)rr="fail",Nn=Tt?`${Tt}`:"";else try{const Ht=await hs();if(!(Ht!=null&&Ht.id))throw new Error("scene ");const fn=await bi("/api/template/auto",{method:"POST",body:{text:on.content||"",prompt:(kt==null?void 0:kt.prompt)||""}});if(!((Xr=(pi=fn==null?void 0:fn.template)==null?void 0:pi.sections)!=null&&Xr.length))throw new Error("");await bi(`/api/scene/${Ht.id}/apply-template`,{method:"POST",body:{template:fn.template}});try{await bi("/api/outline/cache",{method:"POST",body:{template:fn.template}})}catch(rn){console.error("",rn)}try{const rn={id:`outline_${Date.now()}`,template:fn.template,timestamp:Date.now(),docName:(on==null?void 0:on.name)||Tt||"",title:(on==null?void 0:on.name)||Tt||""};await bi("/api/multi/outlines",{method:"POST",body:rn})}catch(rn){console.error("",rn)}rr="done",Nn=`  Replay Done${fn.template.sections.length}`,Qi="llm"}catch(Ht){rr="fail",Nn=(Ht==null?void 0:Ht.message)||""}}else if(mi==="insert_to_summary"||mi.startsWith("insert_to_summary")){const Tt=Array.isArray(kt.targetSectionIds)?kt.targetSectionIds:[],on=Array.isArray(kt.selectedSectionTitles)?kt.selectedSectionTitles:[],Ht=Array.isArray(kt==null?void 0:kt.inputs)?kt.inputs.find(rn=>(rn==null?void 0:rn.kind)==="selection"):null;let fn=((Ht==null?void 0:Ht.text)||(Ht==null?void 0:Ht.textExcerpt)||((Yr=kt==null?void 0:kt.outputs)==null?void 0:Yr.insertedExcerpt)||"").toString().trim();if(!fn&&(Tt.length>0||on.length>0))try{const rn=await hs();if(rn!=null&&rn.id){const un=await bi(`/api/scene/${rn.id}`),lr=((Mi=un==null?void 0:un.scene)==null?void 0:Mi.customTemplate)||((sr=un==null?void 0:un.scene)==null?void 0:sr.template);if((_i=lr==null?void 0:lr.sections)!=null&&_i.length){const Qn=lr.sections.filter(Fn=>Tt.includes(Fn.id)||on.some(cr=>{var Bt;return((Bt=Fn.title)==null?void 0:Bt.includes(cr))||(cr==null?void 0:cr.includes(Fn.title))}));if(Qn.length>0){const Fn=Qn.map(cr=>cr.summary||cr.hint||"").filter(cr=>cr.trim()).join(`

`);Fn.trim()&&(fn=Fn,console.log("[insert_to_summary] :",fn.substring(0,100)))}}}}catch(rn){console.error("[insert_to_summary] :",rn)}if(!Tt.length&&!on.length)rr="fail",Nn="";else if(!fn)rr="fail",Nn="";else try{const rn=($r==null?void 0:$r.aiGuidance)||(kt==null?void 0:kt.aiGuidance)||"",un=($r==null?void 0:$r.specialRequirements)||(kt==null?void 0:kt.specialRequirements)||"";let lr=!1;if(qt==="llm"){try{const Fr=!!(rn||un)?`


${fn}


${rn||""}


${un||""}



- """"""
- ""
- ""


- 
- 
- 

`:`


${fn}


1. +" "
2. 
3. 
4. 


- 
- 
- 

`,er=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"user",content:Fr}],maxTokens:2e3})});if(er.ok){const xi=await er.json();xi!=null&&xi.content?(fn=xi.content.trim(),lr=!0):pn=""}else{const xi=await er.text().catch(()=>"");pn=`API  (${er.status}): ${xi||""}`,console.error(" API :",pn)}}catch(Kn){pn=(Kn==null?void 0:Kn.message)||"",console.error(":",Kn)}!lr&&pn&&addMessage("system",` ${pn}`)}const Qn=await hs();if(!(Qn!=null&&Qn.id))throw new Error("scene ");const Fn=await bi(`/api/scene/${Qn.id}`),cr=((Ni=Fn==null?void 0:Fn.scene)==null?void 0:Ni.customTemplate)||((kr=Fn==null?void 0:Fn.scene)==null?void 0:kr.template);if(!((To=cr==null?void 0:cr.sections)!=null&&To.length))throw new Error("");const Bt=((Co=kt==null?void 0:kt.outputs)==null?void 0:Co.overwrite)!==!1,Mt=Kn=>!!(Tt.includes(Kn.id)||on.some(Fr=>{var er;return Kn.title===Fr||((er=Kn.title)==null?void 0:er.includes(Fr))||(Fr==null?void 0:Fr.includes(Kn.title))})),mr={...cr,sections:(cr.sections||[]).map(Kn=>{if(!Mt(Kn))return Kn;const Fr=(Kn.summary||"").toString(),er=Bt?fn:Fr.trim()?`${Fr}

${fn}`:fn;return{...Kn,summary:er}})};await bi(`/api/scene/${Qn.id}/apply-template`,{method:"POST",body:{template:mr}}),rr="done",qt==="llm"?lr?(Nn=`  Replay Done${Tt.length}`,Qi="llm"):pn?(Nn=`  Replay Done${pn}${Tt.length}`,Qi="script"):(Nn=`  Replay Done${Tt.length}`,Qi="script"):(Nn=`  Replay Done${Tt.length}`,Qi="script")}catch(rn){rr="fail",Nn=(rn==null?void 0:rn.message)||""}}else if(mi==="outline_clear"||mi.startsWith("outline_clear"))try{const Tt=await hs();if(!(Tt!=null&&Tt.id))throw new Error("scene ");await bi(`/api/scene/${Tt.id}`,{method:"PATCH",body:{sectionDocLinks:{}}});const on={id:"template_empty",name:"",sections:[]};await bi(`/api/scene/${Tt.id}/apply-template`,{method:"POST",body:{template:on}});try{await bi("/api/outline/cache",{method:"POST",body:{template:on}})}catch(Ht){console.error("",Ht)}rr="done",Nn="  Replay Done",Qi="script"}catch{rr="fail",Nn=""}else if(mi==="restore_history_outline"||mi.startsWith("restore_history_outline"))try{const Tt=await hs();if(!(Tt!=null&&Tt.id))throw new Error("scene ");const on=await bi("/api/multi/outlines");let Ht=null;if(Array.isArray(on)&&on.length>0&&(kt.outlineId&&(Ht=on.find(rn=>rn.id===kt.outlineId)),!Ht&&kt.outlineTitle&&(Ht=on.find(rn=>(rn.title||rn.docName)===kt.outlineTitle)),Ht||(Ht=on[0])),!(Ht!=null&&Ht.template))throw new Error("");await bi(`/api/scene/${Tt.id}/apply-template`,{method:"POST",body:{template:Ht.template}});try{await bi("/api/outline/cache",{method:"POST",body:{template:Ht.template}})}catch(rn){console.error("",rn)}rr="done",Nn=`  Replay Done${Ht.title||Ht.docName||""}`,Qi="script"}catch(Tt){rr="fail",Nn=(Tt==null?void 0:Tt.message)||""}else if(mi==="dispatch"||mi.startsWith("dispatch")||mi==="execute_instruction")try{const Tt=await hs();if(!(Tt!=null&&Tt.id))throw new Error("scene ");let on=(kt==null?void 0:kt.instructions)||(kt==null?void 0:kt.promptContent)||"";if(!on){const Bt=((ri==null?void 0:ri.content)||"").toString(),Mt=/Prompt([^\n]+)/.exec(Bt),mr=/([^\n]+)/.exec(Bt);on=((Mt==null?void 0:Mt[1])||(mr==null?void 0:mr[1])||"").trim()}if(!on)throw new Error("");const Ht=($r==null?void 0:$r.aiGuidance)||(kt==null?void 0:kt.aiGuidance)||"",fn=($r==null?void 0:$r.specialRequirements)||(kt==null?void 0:kt.specialRequirements)||"";qt==="llm"&&(Ht||fn)&&(on=`${on}


${Ht||""}


${fn||""}`);const rn=(kt==null?void 0:kt.prompt)||SA,un=((kt==null?void 0:kt.inputKind)||"").toString();let lr="",Qn=[];if(un==="result"&&Array.isArray(kt==null?void 0:kt.historyInputs)&&kt.historyInputs.length)lr=kt.historyInputs.map((Bt,Mt)=>`${Mt+1}${(Bt==null?void 0:Bt.key)||""}
${(Bt==null?void 0:Bt.text)||""}`).join(`

`);else if(un.startsWith("outline_")){const Bt=await bi(`/api/scene/${Tt.id}`),Mt=((Qo=Bt==null?void 0:Bt.scene)==null?void 0:Qo.customTemplate)||((Ar=Bt==null?void 0:Bt.scene)==null?void 0:Ar.template),mr=Array.isArray(kt==null?void 0:kt.selectedSectionIds)?kt.selectedSectionIds:[],Kn=Array.isArray(kt==null?void 0:kt.selectedSectionTitles)?kt.selectedSectionTitles:[],Fr=Array.isArray(kt==null?void 0:kt.targetSectionsDetail)?kt.targetSectionsDetail:[],er=Array.isArray($r==null?void 0:$r.targetSectionsDetail)?$r.targetSectionsDetail:[],xi=(Mt==null?void 0:Mt.sections)||[];let Ti=[];const O=Fr.length>0?Fr:er;if(O.length>0&&(Ti=O.map(le=>{let Ce=xi.find(Oe=>Oe.title===le.title);if(!Ce&&le.id&&(Ce=xi.find(Oe=>Oe.id===le.id)),!Ce&&le.title){const Oe=le.title.match(/[]([^]+)[]/),Xe=Oe?Oe[1]:le.title;Ce=xi.find(gt=>{var vt;return gt.title===Xe||((vt=gt.title)==null?void 0:vt.includes(Xe))||(Xe==null?void 0:Xe.includes(gt.title))})}return Ce}).filter(Boolean)),Ti.length===0&&Kn.length>0&&(Ti=Kn.map(le=>xi.find(Ce=>Ce.title===le)).filter(Boolean),Ti.length===0&&(Ti=Kn.map(le=>{const Ce=le.match(/[]([^]+)[]/),Oe=Ce?Ce[1]:le;return xi.find(Xe=>{var gt;return Xe.title===Oe||((gt=Xe.title)==null?void 0:gt.includes(Oe))||(Oe==null?void 0:Oe.includes(Xe.title))})}).filter(Boolean))),Ti.length===0&&mr.length>0&&(Ti=xi.filter(le=>mr.includes(le.id))),Ti.length===0&&($r!=null&&$r.targetTitle)){const le=$r.targetTitle.match(/[]([^]+)[]/),Ce=le?le[1]:$r.targetTitle,Oe=xi.find(Xe=>{var gt;return Xe.title===Ce||((gt=Xe.title)==null?void 0:gt.includes(Ce))||(Ce==null?void 0:Ce.includes(Xe.title))});Oe&&(Ti=[Oe])}if(Ti.length===0)throw console.error("[dispatch replay] ",{selectedTitles:Kn,selectedIds:mr,targetSectionsDetail:Fr,llmTargetTitle:$r==null?void 0:$r.targetTitle,availableTitles:xi.map(le=>le.title)}),new Error("");Qn=Ti.map((le,Ce)=>({sectionId:le.id,field:"summary",content:un==="outline_selected_batch"?`${le.title}
${le.summary||le.hint||"()"}`:le.summary||le.hint||le.title||"()",label:`${Ce+1}`})),lr=Qn.map(le=>`${le.label} | ID=${le.sectionId}
${le.content}`).join(`

`)}else{const Bt=Array.isArray(kt==null?void 0:kt.inputs)?kt.inputs.filter(Mt=>(Mt==null?void 0:Mt.kind)==="doc_resource"||(Mt==null?void 0:Mt.kind)==="doc"):[];if(Bt.length>0){const Mt=Bt.map(Kn=>(Kn==null?void 0:Kn.docName)||"").filter(Boolean);lr=Yt.filter(Kn=>Mt.some(Fr=>{var er;return Kn.name===Fr||((er=Kn.name)==null?void 0:er.includes(Fr))})).map(Kn=>Kn.content||"").join(`

`)}else Yt.length>0&&(lr=Yt.map(Mt=>`${Mt.name}
${Mt.content||""}`).join(`

`))}const Fn=await bi("/api/dispatch",{method:"POST",body:{sceneId:Tt.id,instructions:on,docContent:lr,outlineSegments:Qn.length>0?Qn:void 0,systemPrompt:rn}});if(!((Fn==null?void 0:Fn.usedModel)!==!1))rr="fail",Nn=" QWEN_API_KEY Replay",pn=" QWEN_API_KEY";else{const Bt=((Fn==null?void 0:Fn.detail)||"").toString().trim(),Mt=Array.isArray(Fn==null?void 0:Fn.edits)?Fn.edits:[],mr=(Fn==null?void 0:Fn.summary)||Bt.substring(0,100)||"";if(rr="done",Nn=`  Replay Done${mr}`,Qi="llm",Mt.length>0||Bt){const Kn=await bi(`/api/scene/${Tt.id}`),Fr=((Ji=Kn==null?void 0:Kn.scene)==null?void 0:Ji.customTemplate)||((Ei=Kn==null?void 0:Kn.scene)==null?void 0:Ei.template);if(Fr!=null&&Fr.sections){const er=Qn.map(Ce=>Ce.sectionId),xi=Ce=>{if(!Ce)return null;const Oe=String(Ce).trim(),Xe=Oe.match(/ID\s*=\s*(.+)/i);if(Xe)return Xe[1].trim();const gt=Oe.match(/\d+\s*[:]\s*(.+)/);if(gt)return gt[1].trim();if(/^\d+$/.test(Oe)){const ln=parseInt(Oe,10)-1;if(ln>=0&&ln<er.length)return er[ln]}const vt=Oe.match(/(\d+)/);if(vt){const ln=parseInt(vt[1],10)-1;if(ln>=0&&ln<er.length)return er[ln]}return Oe},Ti=Array.isArray(kt==null?void 0:kt.selectedSectionIds)?kt.selectedSectionIds:[],O=Ti.length>0?Ti:er,le={...Fr,sections:Fr.sections.map(Ce=>{const Oe=Mt.find(gt=>xi(gt.sectionId)===Ce.id||gt.sectionId===Ce.id),Xe={...Ce,title:(Oe==null?void 0:Oe.field)==="title"&&Oe.content?Oe.content:Ce.title,summary:(Oe==null?void 0:Oe.field)==="summary"&&Oe.content?Oe.content:Ce.summary};return Bt&&O.includes(Ce.id)?{...Xe,summary:Bt}:Xe})};await bi(`/api/scene/${Tt.id}/apply-template`,{method:"POST",body:{template:le}}),console.log("[dispatch replay] :",{editsCount:Mt.length,detail:Bt==null?void 0:Bt.substring(0,50),targetIds:O})}}}}catch(Tt){rr="fail",Nn=(Tt==null?void 0:Tt.message)||""}else if(mi==="add_outline_section"||mi.startsWith("add_outline_section"))try{const Tt=await hs();if(!(Tt!=null&&Tt.id))throw new Error("scene ");const on=await bi(`/api/scene/${Tt.id}`),Ht=((fo=on==null?void 0:on.scene)==null?void 0:fo.customTemplate)||((ys=on==null?void 0:on.scene)==null?void 0:ys.template);if(!(Ht!=null&&Ht.sections))throw new Error("");const fn=kt==null?void 0:kt.afterSection,rn=(fn==null?void 0:fn.title)||"";let un=Ht.sections.length;if(rn){const cr=Ht.sections.findIndex(Bt=>{var Mt;return Bt.title===rn||((Mt=Bt.title)==null?void 0:Mt.includes(rn))});cr!==-1&&(un=cr+1)}const lr={id:`sec_replay_${Date.now()}_${Math.floor(Math.random()*1e3)}`,title:((ss=kt==null?void 0:kt.newSection)==null?void 0:ss.title)||"",summary:((as=kt==null?void 0:kt.newSection)==null?void 0:as.summary)||"",hint:((ar=kt==null?void 0:kt.newSection)==null?void 0:ar.hint)||"",level:((Ln=kt==null?void 0:kt.newSection)==null?void 0:Ln.level)||1},Qn=[...Ht.sections.slice(0,un),lr,...Ht.sections.slice(un)],Fn={...Ht,sections:Qn};await bi(`/api/scene/${Tt.id}/apply-template`,{method:"POST",body:{template:Fn}}),rr="done",Nn=`  Replay Done${rn||""}${lr.title}`,Qi="script"}catch(Tt){rr="fail",Nn=(Tt==null?void 0:Tt.message)||""}else if(mi==="delete_outline_section"||mi.startsWith("delete_outline_section"))try{const Tt=await hs();if(!(Tt!=null&&Tt.id))throw new Error("scene ");const on=await bi(`/api/scene/${Tt.id}`),Ht=((Wr=on==null?void 0:on.scene)==null?void 0:Wr.customTemplate)||((vs=on==null?void 0:on.scene)==null?void 0:vs.template);if(!(Ht!=null&&Ht.sections))throw new Error("");const fn=kt==null?void 0:kt.targetSection,rn=(fn==null?void 0:fn.title)||"";if(!rn)throw new Error("");const un=Ht.sections.findIndex(Bt=>{var Mt;return Bt.title===rn||((Mt=Bt.title)==null?void 0:Mt.includes(rn))});if(un===-1)throw new Error(`${rn}`);const lr=Ht.sections[un].level||1,Qn=[Ht.sections[un].id];for(let Bt=un+1;Bt<Ht.sections.length&&!((Ht.sections[Bt].level||1)<=lr);Bt++)Qn.push(Ht.sections[Bt].id);const Fn=Ht.sections.filter(Bt=>!Qn.includes(Bt.id)),cr={...Ht,sections:Fn};await bi(`/api/scene/${Tt.id}/apply-template`,{method:"POST",body:{template:cr}}),rr="done",Nn=`  Replay Done${rn}${Qn.length}`,Qi="script"}catch(Tt){rr="fail",Nn=(Tt==null?void 0:Tt.message)||""}else mi?(rr="fail",Nn=`${mi}`):(rr="fail",Nn="");if(rr==="fail")try{ue(`${He} [${xr+1}/${Me.length}] AI ...`);const Tt=await bi("/api/multi/outlines").catch(()=>[]),on=await hs().catch(()=>null),Ht=(on==null?void 0:on.customTemplate)||(on==null?void 0:on.template),fn={docs:Yt.map(un=>({id:un.id,name:un.name})),outlineSectionsCount:((ws=Ht==null?void 0:Ht.sections)==null?void 0:ws.length)||0,outlineHistoryCount:Array.isArray(Tt)?Tt.length:0,outlineHistory:Array.isArray(Tt)?Tt.slice(0,5).map(un=>({id:un.id,title:un.title||un.docName})):[]},rn=await fetch("/api/ai/replay-analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({section:ri,context:fn})});if(rn.ok){const un=await rn.json();if(un.understood&&!un.fallbackToScript&&un.confidence>=.5){console.log("AI Replay :",un);const lr=un.action,Qn=un.params||{};let Fn="done",cr=un.reason||"";try{if(lr==="add_doc"||lr==="upload_doc"){await Xn();let Bt=null;if(Qn.docName&&(Bt=Yt.find(Mt=>Mt.name===Qn.docName)||Yt.find(Mt=>Mt.name.toLowerCase().includes(Qn.docName.toLowerCase()))),!Bt&&Qn.docId&&(Bt=Yt.find(Mt=>Mt.id===Qn.docId)),!Bt&&Yt.length>0&&(Bt=Yt[0]),Bt){const Mt=await hs();if(Mt!=null&&Mt.id){const mr=Array.from(new Set([...Mt.docIds||[],Bt.id]));await bi(`/api/scene/${Mt.id}`,{method:"PATCH",body:{docIds:mr}}),cr=`AI ${Bt.name}`}}else Fn="fail",cr="AI: "}else if(lr==="outline_extract"){let Bt=null;if(Qn.docName&&(Bt=Yt.find(Mt=>Mt.name===Qn.docName)||Yt.find(Mt=>Mt.name.toLowerCase().includes(Qn.docName.toLowerCase()))),!Bt&&Yt.length>0&&(Bt=Yt[0]),Bt){const Mt=await hs();if(Mt!=null&&Mt.id){const mr=await bi("/api/template/auto",{method:"POST",body:{text:Bt.content||""}});mr!=null&&mr.template&&(await bi(`/api/scene/${Mt.id}/apply-template`,{method:"POST",body:{template:mr.template}}),await bi("/api/outline/cache",{method:"POST",body:{template:mr.template}}),cr=`AI  ${Bt.name} `)}}else Fn="fail",cr="AI: "}else if(lr==="restore_history_outline"||lr==="apply_outline"){const Bt=Array.isArray(Tt)?Tt:[];let Mt=null;if(Qn.outlineId&&(Mt=Bt.find(mr=>mr.id===Qn.outlineId)),!Mt&&Qn.outlineTitle&&(Mt=Bt.find(mr=>(mr.title||mr.docName||"").includes(Qn.outlineTitle))),!Mt&&Bt.length>0&&(Mt=Bt[0]),Mt!=null&&Mt.template){const mr=await hs();mr!=null&&mr.id&&(await bi(`/api/scene/${mr.id}/apply-template`,{method:"POST",body:{template:Mt.template}}),await bi("/api/outline/cache",{method:"POST",body:{template:Mt.template}}),cr=`AI ${Mt.title||Mt.docName||""}`)}else Fn="fail",cr="AI: "}else if(lr==="outline_clear"){const Bt=await hs();if(Bt!=null&&Bt.id){const Mt={id:"template_empty",name:"",sections:[]};await bi(`/api/scene/${Bt.id}/apply-template`,{method:"POST",body:{template:Mt}}),await bi("/api/outline/cache",{method:"POST",body:{template:Mt}}),cr="AI "}}else if(lr==="insert_to_summary"||lr==="fill_summary"){const Bt=await hs(),Mt=(Bt==null?void 0:Bt.customTemplate)||(Bt==null?void 0:Bt.template);if(((Oi=Mt==null?void 0:Mt.sections)==null?void 0:Oi.length)>0){let mr=Qn.targetSectionIds||[];if(!mr.length&&Qn.targetSectionTitle){const Kn=Mt.sections.find(Fr=>(Fr.title||"").includes(Qn.targetSectionTitle));Kn&&(mr=[Kn.id])}if(!mr.length&&Mt.sections.length>0&&(mr=[Mt.sections[0].id]),mr.length>0&&Qn.content){const Kn={...Mt,sections:Mt.sections.map(Fr=>mr.includes(Fr.id)?{...Fr,summary:Qn.content}:Fr)};await bi(`/api/scene/${Bt.id}/apply-template`,{method:"POST",body:{template:Kn}}),cr="AI "}else Fn="fail",cr="AI: "}else Fn="fail",cr="AI: "}else if(lr==="dispatch")if(Qn.instruction&&Yt.length>0){const Bt=await Promise.all(Yt.slice(0,3).map(async Mt=>({name:Mt.name,content:Mt.content||""})));await bi("/api/dispatch",{method:"POST",body:{instruction:Qn.instruction,documents:Bt}}),cr="AI "}else Fn="fail",cr="AI: ";else Fn="fail",cr=`AI:  ${lr}`}catch(Bt){Fn="fail",cr=`AI : ${Bt.message}`}Fn==="done"?(rr="done",Nn=` ${cr}`):Nn=`${Nn}
 AI : ${cr}`}else un.usedModel&&(Nn=`${Nn}
 AI : ${un.reason||""}`)}}catch(Tt){console.log("AI ",Tt),Nn=`${Nn}
 AI `}let da=rr,ls="script",cs=Nn;qt==="llm"&&$r&&rr==="fail"?(da="skipped",cs=`  Replay ${pn||""}
  Replay ${Nn}`,B(` ** ${xr+1}**  Replay 
 ${Nn}
 `)):qt==="llm"&&!$r&&rr==="fail"?(cs=`  Replay ${Nn}`,B(` ** ${xr+1}** 
 ${Nn}`)):rr==="done"?(da="script_done",pn?(cs=`  Replay ${Nn}`,B(` ** ${xr+1}**  Replay 
 ${Nn}`)):qt==="llm"?(cs=` ${Nn}`,B(` ** ${xr+1}** ${Nn}`)):cs=` ${Nn}`):rr==="fail"&&(cs=`  Replay ${Nn}`,B(` ** ${xr+1}**  Replay 
 ${Nn}`)),cn.push({step:xr+1,action:vo,status:da==="skipped"?"skipped":rr,reason:cs,replayMode:ls,replayStatus:da,llmFailReason:pn||null,meta:{type:mi,docName:na(),inputText:Pr,summaryText:Aa||Na,llmAttempted:qt==="llm"&&!!$r,scriptFallback:qt==="llm"&&$r&&rr!=="done"}}),ue(`${He} [${xr+1}/${Me.length}] ${vo}`),await Xt(100)}const So=cn.filter(xr=>xr.status==="done").length,jr=cn.filter(xr=>xr.status==="fail").length,yo=cn.filter(xr=>xr.status==="skipped").length,io=cn.filter(xr=>xr.replayStatus==="llm_done").length,Vr=cn.filter(xr=>xr.replayStatus==="script_done").length,On=io>Vr?"llm":"script";return{total:Me.length,done:So,fail:jr,skipped:yo,llmDone:io,scriptDone:Vr,results:cn,overallStatus:So===Me.length?"done":So>0||yo>0?"partial_done":"fail",aiExecuted:io>0,replayMode:On}},P=async Me=>{const He=Array.isArray(Me.groupIds)?Me.groupIds.filter(Boolean):[];if(!He.length){B(`"${Me.label}" 

""`);return}B(`"${Me.label}"... `),ie(!0),ue(`: ${Me.label}`);const ht={buttonLabel:Me.label,groupNames:[],groupDetails:[],loadedDocs:[],successSteps:[],failedSteps:[],totalSteps:0,completedSteps:0};try{let qt=[];try{const pi=(await(await fetch("/api/multi/replay/config")).json().catch(()=>({}))).dirPath;if(pi){console.log("[Replay] :",pi);const Xr=await fetch("/api/multi/replay/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupIds:He,buttonLabel:Me.label})});if(Xr.ok){const Yr=await Xr.json();if(console.log("[Replay] :",Yr),Array.isArray(Yr.docsLoaded)&&Yr.docsLoaded.length>0){const Mi=[];for(const sr of Yr.docsLoaded)try{const _i=await fetch("/api/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:sr.name,content:sr.content})});if(_i.ok){const{doc:Ni,overwritten:kr}=await _i.json();if(Ni){Mi.push(Ni),qt.push(Ni),ht.loadedDocs.push(Ni.name);const To=kr?"":"";ht.successSteps.push({type:"",name:`${To}${Ni.name}`,status:"success"}),console.log(`[Replay] ${To}:`,Ni.name,Ni.id)}}else console.error("[Replay] :",sr.name,await _i.text()),ht.failedSteps.push({type:"",name:sr.name,status:"fail",reason:""})}catch(_i){console.error("[Replay] :",sr.name,_i),ht.failedSteps.push({type:"",name:sr.name,status:"fail",reason:_i.message})}if(Mi.length>0){t(_i=>{const Ni=new Map(_i.map(kr=>[kr.id,kr]));return Mi.forEach(kr=>Ni.set(kr.id,kr)),Array.from(Ni.values())});const sr=await hs();if(sr!=null&&sr.id){const _i=Array.from(new Set([...Mi.map(Ni=>Ni.id),...sr.docIds||[]]));await bi(`/api/scene/${sr.id}`,{method:"PATCH",body:{docIds:_i}}),console.log("[Replay] :",_i.length,"")}}}}else console.error("[Replay] :",Xr.status,await Xr.text())}else console.log("[Replay] ")}catch(On){console.error("[Replay] :",On)}qt.length>0&&B(`  ${qt.length} 
${qt.map(On=>`   ${On.name}`).join(`
`)}`);const Xt=await(await fetch("/api/multi/precipitation/records")).json().catch(()=>[]),cn=Array.isArray(Xt)?Xt:Array.isArray(Xt==null?void 0:Xt.records)?Xt.records:[],Xn=await(await fetch("/api/multi/precipitation/groups")).json().catch(()=>[]),wi=(Array.isArray(Xn)?Xn:Array.isArray(Xn==null?void 0:Xn.groups)?Xn.groups:[]).filter(On=>He.includes(On.id));if(wi.length===0){B(" ");return}let So=0,jr=0;for(const On of wi){const wr=On.depositIds||On.recordIds||[],pi=cn.filter(Xr=>wr.includes(Xr.id));So+=pi.length,jr+=pi.reduce((Xr,Yr)=>{var Mi;return Xr+(((Mi=Yr.sections)==null?void 0:Mi.length)||0)},0)}ht.totalSteps=jr;const yo=wi.map(On=>`${On.name||""}`).join("");B(` **${Me.label}**

${yo}
 ${So} ${jr} 

---`);let io=0;for(const On of wi){io++;const wr=On.name||"",pi=On.depositIds||On.recordIds||[],Xr=cn.filter(sr=>pi.includes(sr.id));ht.groupNames.push(wr),B(`
 ** ${io}/${wi.length}${wr}**${Xr.length} `),ue(`: ${wr}`);const Yr={name:wr,recordCount:Xr.length,records:[]};let Mi=0;for(const sr of Xr){Mi++;const _i=sr.name||sr.title||"",Ni=Array.isArray(sr.sections)?sr.sections:[],kr=sr.precipitationMode||"llm",To=sr.structuredScript||"",Co=kr==="llm"?"":"",Qo=kr==="llm"?"Replay":"Replay";ue(`${wr} > ${_i} [${Mi}/${Xr.length}]`);const Ar=await te(Ni,_i,{precipitationMode:kr,structuredScript:To});let Ji=`
  ${Co} ** ${Mi}${_i}** (${Qo})
`;const Ei={title:_i,sectionCount:Ni.length,mode:kr,results:[]};if(Ar){ht.completedSteps+=Ar.done;const fo=Ar.replayMode||"script",ys=Ar.results.filter(ar=>ar.status==="done").length,ss=Ar.results.filter(ar=>ar.status==="fail").length,as=Ar.results.filter(ar=>ar.status==="skipped").length;ss===0&&as===0?Ji+=`      ${ys}/${Ni.length} 
`:ys>0?Ji+=`      ${ys} ${ss} ${as}
`:Ji+=`      ${ss+as}/${Ni.length} 
`,Ar.results.filter(ar=>ar.status==="done").forEach(ar=>{ht.successSteps.push({type:ar.action,record:_i,group:wr,status:"success",detail:ar.reason,replayMode:ar.replayMode||fo,replayStatus:ar.replayStatus||(ar.replayMode==="llm"?"llm_done":"script_done")}),Ei.results.push({action:ar.action,status:"done",reason:ar.reason})}),Ar.results.filter(ar=>ar.status==="fail"||ar.status==="skipped").forEach(ar=>{const Ln=ar.status==="skipped"?"":"";Ji+=`     ${Ln} ${ar.action}: ${ar.reason}
`,ht.failedSteps.push({type:ar.action,record:_i,group:wr,status:ar.status==="skipped"?"skipped":kr==="llm"?"partial_fail":"fail",reason:ar.reason,replayMode:ar.replayMode||fo,replayStatus:ar.replayStatus||ar.status}),Ei.results.push({action:ar.action,status:ar.status,reason:ar.reason})})}else Ji+=`      ${Ni.length} 
`,ht.completedSteps+=Ni.length,Ni.forEach(fo=>{const ys=Wv(fo.content||"")||{};ht.successSteps.push({type:fo.action||ys.type||"",record:_i,group:wr,status:"success",replayMode:"script",replayStatus:"script_done"}),Ei.results.push({action:fo.action,status:"done"})});Yr.records.push(Ei),B(Ji)}ht.groupDetails.push(Yr)}const Vr=be(ht,Me.label);B(Vr);try{const On=await fetch("/api/docs");if(On.ok){const wr=await On.json();Array.isArray(wr==null?void 0:wr.docs)&&t(wr.docs)}}catch(On){console.error("",On)}try{const On=await hs();(On!=null&&On.customTemplate||On!=null&&On.template)&&await fetch("/api/outline/cache",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:On.customTemplate||On.template})})}catch(On){console.error("",On)}}catch(qt){console.error("Replay :",qt),B(`
 ****

${Me.label}${qt.message||""}

 `)}finally{ie(!1),ue("")}},be=(Me,He)=>{const{groupNames:ht,groupDetails:qt,loadedDocs:hn,successSteps:Xt,failedSteps:cn,totalSteps:Yt}=Me,Xn=[];Xn.push(`
---`),Xn.push(`
 **${He}**
`);const hi=Xt.length,wi=cn.length,So=cn.filter(Vr=>Vr.status==="skipped").length,jr=wi-So;let yo,io;return wi===0?(yo="",io=""):hi>0?(yo="",io=""):(yo="",io=""),Xn.push(`**${yo} ${io}**
`),Xn.push(` ${ht.length} ${ht.join("")}`),Xn.push(` ${hn.length} `),Xn.push(` ${Yt} `),Xn.push(`   -  ${hi} `),jr>0&&Xn.push(`   -  ${jr} `),So>0&&Xn.push(`   -  ${So} `),qt.length>0&&(Xn.push(`
****`),qt.forEach((Vr,On)=>{const wr=Vr.records.reduce((Yr,Mi)=>Yr+Mi.results.filter(sr=>sr.status==="done").length,0),pi=Vr.records.reduce((Yr,Mi)=>Yr+Mi.results.length,0),Xr=wr===pi?"":wr>0?"":"";Xn.push(`  ${On+1}. ${Vr.name}${Xr} ${wr}/${pi} `)})),wi>0&&(Xn.push(`
** **`),[...new Set(cn.map(Vr=>Vr.type))],cn.some(Vr=>{var On;return(On=Vr.reason)==null?void 0:On.includes("")})&&Xn.push("  - "),cn.some(Vr=>{var On;return((On=Vr.reason)==null?void 0:On.includes(""))||Vr.replayMode==="llm"})&&Xn.push("  - Replay"),Xn.push('  - ""')),wi===0?Xn.push(`
 `):hi>0&&Xn.push(`
 `),Xn.join(`
`)},[Ae,ge]=Qe.useState(!1),[xe,ke]=Qe.useState(!1),[Fe,J]=Qe.useState({width:1680,height:1050}),[C,Z]=Qe.useState(()=>{try{const Me=localStorage.getItem("multidoc_header_titles");if(Me)return JSON.parse(Me)}catch{}return{title:{text:"",style:{fontSize:"24px",fontWeight:400,color:"#202124",textAlign:"left"},position:{left:0,top:0},width:300,height:40},eyebrow:{text:"KNOWLEDGE STUDIO",style:{fontSize:"11px",letterSpacing:"1px",color:"#5f6368",textTransform:"uppercase",textAlign:"left"},position:{left:0,top:0},width:200,height:30}}}),[ne,ye]=Qe.useState(null),[ce,M]=Qe.useState(null),[z,fe]=Qe.useState(null);Qe.useEffect(()=>{C&&localStorage.setItem("multidoc_header_titles",JSON.stringify(C))},[C]),Qe.useEffect(()=>{ke(!!Ae)},[Ae]);const[he,se]=Qe.useState(ih),[me,Be]=Qe.useState({[Pi.SOURCES]:"",[Pi.CHAT]:"",[Pi.STUDIO]:"Studio"}),[H,ee]=Qe.useState(rh),[X,T]=Qe.useState({}),[L,q]=Qe.useState(null),[Se,Le]=Qe.useState(null),Ee=Me=>{const He={...rh};return Me&&typeof Me=="object"&&Object.keys(He).forEach(ht=>{He[ht]=Me[ht]!==!1}),He},qe=Me=>{const He={...ih};if(!Me||typeof Me!="object")return He;const ht=(qt,hn)=>{if(!hn||typeof hn!="object")return!1;const Xt=Number(hn.left),cn=Number(hn.top),Yt=Number(hn.width),Xn=Number(hn.height);return!Number.isFinite(Xt)||!Number.isFinite(cn)||!Number.isFinite(Yt)||!Number.isFinite(Xn)||Yt<=0||Xn<=0?!1:(He[qt]={left:Xt,top:cn,width:Yt,height:Xn},!0)};return Object.values(Pi).forEach(qt=>{Me[qt]&&ht(qt,Me[qt])}),Object.entries(kA).forEach(([qt,hn])=>{if(!(He[qt]&&He[qt]!==ih[qt])&&Array.isArray(hn)){for(const Xt of hn)if(Me[Xt]&&ht(qt,Me[Xt]))break}}),He},dt=Me=>{ee(He=>({...He,[Me]:!1}))},ot=Me=>{ee(He=>({...He,[Me]:!0}))};Qe.useEffect(()=>{fetch("/api/multi/buttons").then(He=>He.ok?He.json():{}).then(He=>T(He)).catch(He=>console.error("Failed to load buttons:",He)),fetch("/api/multi/app-buttons").then(He=>He.ok?He.json():null).then(He=>{const ht=oe(He);ht.length&&b(ht)}).catch(He=>console.error("Failed to load app buttons:",He));let Me=!1;try{const He=localStorage.getItem("multidoc_layout_config");if(He){const ht=JSON.parse(He);console.log("[MultiDoc] Loaded layout from localStorage:",ht),ht.layoutSize&&J(ht.layoutSize),ht.panelPositions&&(se(qe(ht.panelPositions)),Me=!0),ht.panelTitles&&Be(ht.panelTitles),ht.panelVisibility&&ee(Ee(ht.panelVisibility)),ht.headerTitles&&Z(qt=>({...qt,...ht.headerTitles}))}}catch(He){console.error("[MultiDoc] Failed to load layout from localStorage:",He)}Me?console.log("[MultiDoc] Using localStorage config, skipping server fetch"):fetch("/api/multi/layout").then(He=>He.ok?He.json():null).then(He=>{if(console.log("[MultiDoc] Loaded layout from server (fallback):",He),!He){console.log("[MultiDoc] No layout data from server, using defaults");return}He.layoutSize&&J(He.layoutSize),He.panelPositions?(console.log("[MultiDoc] Applying panel positions from server:",He.panelPositions),se(qe(He.panelPositions)),localStorage.setItem("multidoc_layout_config",JSON.stringify(He))):He["doc-classify"]&&se(qe(He)),He.panelTitles&&Be(He.panelTitles),He.panelVisibility&&ee(Ee(He.panelVisibility)),He.headerTitles&&Z(ht=>({...ht,...He.headerTitles}))}).catch(He=>console.error("[MultiDoc] Failed to load layout from server:",He)),fetch("/api/multi/panels").then(He=>He.ok?He.json():null).then(He=>{He&&ee(Ee(He))}).catch(He=>console.error("Failed to load panel visibility:",He))},[]);const lt=async()=>{try{await fetch("/api/multi/buttons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});const Me={layoutSize:Fe,panelPositions:he,panelTitles:me,panelVisibility:H,headerTitles:C};localStorage.setItem("multidoc_layout_config",JSON.stringify(Me)),localStorage.setItem("multidoc_header_titles",JSON.stringify(C)),(await fetch("/api/multi/layout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)})).ok?console.log("[MultiDoc] Layout saved to server successfully"):console.error("[MultiDoc] Failed to save layout to server"),(await fetch("/api/multi/panels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).ok||console.error("[MultiDoc] Failed to save panels to server"),console.log("[MultiDoc] Configuration saved")}catch(Me){console.error("Failed to save configuration:",Me),alert("")}},Nt=()=>{Ae?Ft():(Le({buttons:JSON.parse(JSON.stringify(X)),panels:JSON.parse(JSON.stringify(he)),titles:JSON.parse(JSON.stringify(me)),visibility:JSON.parse(JSON.stringify(H)),size:{...Fe}}),ge(!0))},Ft=async()=>{await lt(),ge(!1),q(null),Le(null)},Zt=()=>{Se&&(T(Se.buttons),se(Se.panels),Be(Se.titles),Se.visibility&&ee(Ee(Se.visibility)),J(Se.size)),ge(!1),q(null),Le(null)},Rn=async()=>{if(confirm(""))try{const Me=localStorage.getItem("multidoc_layout_config"),He=localStorage.getItem("multidoc_header_titles");if(Me){const ht=JSON.parse(Me);ht.layoutSize&&J(ht.layoutSize),ht.panelPositions&&se(qe(ht.panelPositions)),ht.panelTitles&&Be(ht.panelTitles),ht.panelVisibility&&ee(Ee(ht.panelVisibility));const qt=await fetch("/api/multi/buttons");if(qt.ok){const hn=await qt.json();T(hn)}ht.headerTitles?Z(hn=>({...hn,...ht.headerTitles})):He&&Z(JSON.parse(He))}else{const ht=await fetch("/api/multi/buttons/reset",{method:"POST"});if(ht.ok){const qt=await ht.json();T(qt)}localStorage.removeItem("multidoc_layout_config"),se(ih),Be({[Pi.SOURCES]:"",[Pi.CHAT]:"",[Pi.STUDIO]:"Studio"}),ee(rh),Z({title:{text:"",style:{fontSize:"24px",fontWeight:400,color:"#202124",textAlign:"left"},position:{left:0,top:0},width:300,height:40},eyebrow:{text:"KNOWLEDGE STUDIO",style:{fontSize:"11px",letterSpacing:"1px",color:"#5f6368",textTransform:"uppercase",textAlign:"left"},position:{left:0,top:0},width:200,height:30}}),localStorage.removeItem("multidoc_header_titles"),J({width:1680,height:1050})}q(null),ge(!1),Le(null)}catch(Me){console.error("Reset failed",Me),alert("")}},$t=(Me,He)=>{if(!Ae)return;Me.preventDefault(),Me.stopPropagation();const ht=Me.clientX,qt=Me.clientY,hn=C[He].position||{left:0,top:0};ye({titleKey:He,startX:ht,startY:qt,startPos:hn})};Qe.useEffect(()=>{if(!ne)return;const Me=ht=>{const qt=ht.clientX-ne.startX,hn=ht.clientY-ne.startY;Z(Xt=>({...Xt,[ne.titleKey]:{...Xt[ne.titleKey],position:{left:ne.startPos.left+qt,top:ne.startPos.top+hn}}}))},He=()=>ye(null);return document.addEventListener("mousemove",Me),document.addEventListener("mouseup",He),()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",He)}},[ne]);const Rr=(Me,He,ht)=>{if(!Ae)return;Me.preventDefault(),Me.stopPropagation();const qt=Me.clientX,hn=Me.clientY,Xt={width:C[He].width||200,height:C[He].height||30};M({titleKey:He,startX:qt,startY:hn,startSize:Xt,direction:ht})};Qe.useEffect(()=>{if(!ce)return;const Me=ht=>{const qt=ht.clientX-ce.startX,hn=ht.clientY-ce.startY;Z(Xt=>{const cn=Math.max(50,ce.startSize.width+qt),Yt=Math.max(20,ce.startSize.height+hn);return{...Xt,[ce.titleKey]:{...Xt[ce.titleKey],width:cn,height:Yt}}})},He=()=>M(null);return document.addEventListener("mousemove",Me),document.addEventListener("mouseup",He),()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",He)}},[ce]);const An=(Me,He,ht,qt)=>{if(!Ae)return;Me.stopPropagation();const hn=X[He]||[],Xt=hn.findIndex(Vr=>Vr.id===ht);if(Xt===-1)return;const cn=hn[Xt],Yt=Me.clientX,Xn=Me.clientY,hi=cn.left,wi=cn.top,So=cn.width,jr=cn.height,yo=Vr=>{const On=Vr.clientX-Yt,wr=Vr.clientY-Xn,pi={...cn};qt==="move"?(pi.left=hi+On,pi.top=wi+wr):qt==="resize-e"?pi.width=Math.max(20,So+On):qt==="resize-s"?pi.height=Math.max(20,jr+wr):qt==="resize-se"&&(pi.width=Math.max(20,So+On),pi.height=Math.max(20,jr+wr)),T(Xr=>{const Yr=[...Xr[He]||[]];return Yr[Xt]=pi,{...Xr,[He]:Yr}})},io=()=>{document.removeEventListener("mousemove",yo),document.removeEventListener("mouseup",io)};document.addEventListener("mousemove",yo),document.addEventListener("mouseup",io)},Zn=(Me,He)=>{const qt=(X[Me]||[]).find(hn=>hn.id===He);qt&&q({panelId:Me,buttonId:He,button:qt})},or=()=>{if(!L)return;const{panelId:Me,buttonId:He}=L;confirm("")&&(T(ht=>{const qt=(ht[Me]||[]).filter(hn=>hn.id!==He);return{...ht,[Me]:qt}}),q(null))},jn=({style:Me,label:He})=>{if(!L)return;const{panelId:ht,buttonId:qt}=L;T(hn=>{const Xt=[...hn[ht]||[]],cn=Xt.findIndex(Yt=>Yt.id===qt);return cn!==-1&&(Xt[cn]={...Xt[cn],label:He!==void 0?He:Xt[cn].label,style:{...Xt[cn].style,...Me}}),{...hn,[ht]:Xt}})},dn=Me=>{if(!Ae){if(console.log("Button clicked:",Me.label,Me.kind),A){const He=e.filter(hn=>o[hn.id]),ht=He.map(hn=>{var Xt;return{docName:hn.name||"",docType:((Xt=(hn.name||"").split(".").pop())==null?void 0:Xt.toUpperCase())||"TXT"}}),qt={id:`sec_${Date.now()}`,order:k.length+1,buttonId:Me.id,buttonLabel:Me.label,buttonKind:Me.kind,timestamp:Date.now(),input:{sourceType:Me.kind||"button_click",inputContext:ht,selectedDocCount:He.length},action:{type:"button_click",buttonKind:Me.kind,buttonLabel:Me.label},output:{targetLocation:"pending",status:"pending"}};G(hn=>[...hn,qt])}switch(Me.kind){case"switch":r==null||r();break;case"edit":Nt();break;case"action":alert(`: ${Me.label}`);break}}},fi=Me=>{const He=me[Me],ht=prompt("",He);ht!==null&&ht.trim()!==""&&Be(qt=>({...qt,[Me]:ht.trim()}))},Wn=async Me=>{const He=Me==null?void 0:Me.target,ht=Array.from((He==null?void 0:He.files)||[]);if(!ht.length)return;const qt=[],hn=[];for(const Xt of ht)try{const cn=(Xt==null?void 0:Xt.name)||"",Xn=TA(cn)?await RA(Xt):await LA(Xt),hi=typeof Xn=="string"?Xn:String(Xn??""),wi=hi.trim()?hi:"",So=await fetch("/api/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:cn,content:wi})});if(!So.ok){const yo=await So.text();throw new Error(yo||"")}const jr=await So.json();jr!=null&&jr.doc&&qt.push(jr.doc)}catch(cn){console.error(cn),hn.push({name:(Xt==null?void 0:Xt.name)||"(unknown)",reason:cn==null?void 0:cn.message})}if(qt.length&&t(Xt=>{const cn=new Map((Xt||[]).filter(Boolean).map(Yt=>[Yt.id,Yt]));return qt.forEach(Yt=>{Yt!=null&&Yt.id&&cn.set(Yt.id,Yt)}),Array.from(cn.values())}),await re(),He&&(He.value=""),hn.length){const Xt=hn.map(cn=>cn.reason?`${cn.name} (${cn.reason})`:cn.name).join(", ");B(`${Xt}`)}if(A){const Xt=ht.map(Yt=>Yt.name).join(", "),cn={id:`sec_${Date.now()}`,order:k.length+1,buttonId:"source_upload_trigger",buttonLabel:"",buttonKind:"action",timestamp:Date.now(),input:{sourceType:"file_system",contentPreview:` ${ht.length} ${Xt}`},action:{type:"upload_file",buttonData:{label:"",kind:"upload"}},output:{targetLocation:"sources_list",summary:` ${ht.length} `},meta:{fileCount:ht.length,fileDetails:qt.map(Yt=>({id:Yt.id,name:Yt.name})),reproducibility:{requiresLocalFile:!0,fileNames:ht.map(Yt=>Yt.name)}}};G(Yt=>[...Yt,cn])}},Un=async Me=>{try{await fetch(`/api/docs/${Me}`,{method:"DELETE"}),await re(),a(He=>{const ht={...He};return delete ht[Me],ht})}catch(He){console.error("Failed to delete doc",He)}},qr=async()=>{if(e.length&&confirm(""))try{for(const Me of e)await fetch(`/api/docs/${Me.id}`,{method:"DELETE"});await re(),a({})}catch(Me){console.error("Failed to clear docs",Me)}},yn=Me=>a(He=>({...He,[Me]:!He[Me]})),kn=()=>{const Me={id:"1",role:"assistant",content:""};u([Me]),fetch("/api/chat/cache",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[Me]})}).catch(He=>console.log("",He))},li=async Me=>{const He={id:`u_${Date.now()}`,role:"user",content:Me};u(ht=>[...ht,He]),h(!0);try{const ht=e.map(hi=>{var wi;return{name:hi.name,content:((wi=hi.content)==null?void 0:wi.substring(0,5e3))||""}}).filter(hi=>hi.content),qt=ht.length>0?`

${ht.map(hi=>`${hi.name}
${hi.content}`).join(`

---

`)}

---

`:"",Xt=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:`

`},{role:"user",content:`${qt}${Me}`}],maxTokens:1e3})});let cn="";const Yt=[];if(Xt.ok){const hi=await Xt.json();hi!=null&&hi.content&&(cn=hi.content,ht.forEach(wi=>{(cn.includes(wi.name)||Me.includes(wi.name))&&Yt.push(wi.name)}))}const Xn={id:`a_${Date.now()}`,role:"assistant",content:cn,citations:Yt.length>0?Yt:ht.length>0?[ht[0].name]:[]};u(hi=>[...hi,Xn])}catch(ht){console.error("AI :",ht);const qt={id:`a_${Date.now()}`,role:"assistant",content:" AI "};u(hn=>[...hn,qt])}finally{h(!1)}},Hs=()=>d(Me=>[{id:`n_${Date.now()}`,title:"",content:""},...Me]),Do=Me=>d(He=>He.filter(ht=>ht.id!==Me)),Zo=Me=>y.jsx(bb,{panelId:Me,buttons:X[Me]||[],isEditing:Ae,onButtonMouseDown:An,onStyleEdit:Zn,onClick:dn,style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"}}),ps=(Me,He)=>{Z(ht=>({...ht,[Me]:{...ht[Me],text:He}}))},Mn=Object.keys(rh).filter(Me=>H[Me]===!1),ms=Me=>me!=null&&me[Me]?me[Me]:Me===Pi.SOURCES?"":Me===Pi.CHAT?"":Me===Pi.STUDIO?"Studio":Me;return y.jsxs("div",{className:`layout-multi ${Ae?"editing-mode":""}`,style:{position:"relative",height:"100%",padding:"16px",boxSizing:"border-box"},children:[y.jsxs("header",{className:"hero multi-header",style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx(Jv,{size:22,style:{color:"var(--primary-accent)",marginTop:"4px"}}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",position:"relative"},children:Ae?y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:`${C.title.width}px`,height:`${C.title.height}px`,border:"1px dashed #94a3b8",borderRadius:"4px",zIndex:(ne==null?void 0:ne.titleKey)==="title"?200:100,transform:`translate(${((Is=C.title.position)==null?void 0:Is.left)||0}px, ${((Yi=C.title.position)==null?void 0:Yi.top)||0}px)`,transition:(ne==null?void 0:ne.titleKey)==="title"?"none":"transform 0.2s"},children:[y.jsxs("div",{style:{position:"absolute",top:"-24px",left:0,display:"flex",gap:"4px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px",border:"1px solid #e2e8f0"},children:[y.jsx("div",{onMouseDown:Me=>$t(Me,"title"),style:{cursor:"move",display:"flex",alignItems:"center",color:"#64748b"},title:Go.t1,children:y.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("polyline",{points:"5 9 2 12 5 15"}),y.jsx("polyline",{points:"9 5 12 2 15 5"}),y.jsx("polyline",{points:"19 9 22 12 19 15"}),y.jsx("polyline",{points:"9 19 12 22 15 19"}),y.jsx("circle",{cx:"12",cy:"12",r:"1"})]})}),y.jsx("div",{onClick:()=>fe("title"),style:{cursor:"pointer",display:"flex",alignItems:"center",color:"#64748b"},title:Go.t2,children:y.jsx(mh,{size:14})})]}),y.jsx("input",{value:C.title.text,onChange:Me=>ps("title",Me.target.value),style:{...C.title.style,margin:0,width:"100%",height:"100%",border:"none",background:"transparent",outline:"none",padding:0}}),y.jsx("div",{className:"resize-handle e",onMouseDown:Me=>Rr(Me,"title","e")}),y.jsx("div",{className:"resize-handle s",onMouseDown:Me=>Rr(Me,"title","s")}),y.jsx("div",{className:"resize-handle se",onMouseDown:Me=>Rr(Me,"title","se")})]}),y.jsxs("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",width:`${C.eyebrow.width}px`,height:`${C.eyebrow.height}px`,border:"1px dashed #94a3b8",borderRadius:"4px",zIndex:(ne==null?void 0:ne.titleKey)==="eyebrow"?200:100,transform:`translate(${((uo=C.eyebrow.position)==null?void 0:uo.left)||0}px, ${((ni=C.eyebrow.position)==null?void 0:ni.top)||0}px)`,transition:(ne==null?void 0:ne.titleKey)==="eyebrow"?"none":"transform 0.2s"},children:[y.jsxs("div",{style:{position:"absolute",top:"-24px",left:0,display:"flex",gap:"4px",background:"#f1f5f9",padding:"2px 4px",borderRadius:"4px",border:"1px solid #e2e8f0"},children:[y.jsx("div",{onMouseDown:Me=>$t(Me,"eyebrow"),style:{cursor:"move",display:"flex",alignItems:"center",color:"#64748b"},title:Go.t1,children:y.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("polyline",{points:"5 9 2 12 5 15"}),y.jsx("polyline",{points:"9 5 12 2 15 5"}),y.jsx("polyline",{points:"19 9 22 12 19 15"}),y.jsx("polyline",{points:"9 19 12 22 15 19"}),y.jsx("circle",{cx:"12",cy:"12",r:"1"})]})}),y.jsx("div",{onClick:()=>fe("eyebrow"),style:{cursor:"pointer",display:"flex",alignItems:"center",color:"#64748b"},title:Go.t2,children:y.jsx(mh,{size:14})})]}),y.jsx("input",{value:C.eyebrow.text,onChange:Me=>ps("eyebrow",Me.target.value),style:{...C.eyebrow.style,margin:0,width:"100%",height:"100%",border:"none",background:"transparent",outline:"none",padding:0}}),y.jsx("div",{className:"resize-handle e",onMouseDown:Me=>Rr(Me,"eyebrow","e")}),y.jsx("div",{className:"resize-handle s",onMouseDown:Me=>Rr(Me,"eyebrow","s")}),y.jsx("div",{className:"resize-handle se",onMouseDown:Me=>Rr(Me,"eyebrow","se")})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{style:{...C.title.style,margin:0,width:`${C.title.width}px`,height:`${C.title.height}px`,display:"flex",alignItems:"center",transform:`translate(${((ki=C.title.position)==null?void 0:ki.left)||0}px, ${((gr=C.title.position)==null?void 0:gr.top)||0}px)`,transition:"transform 0.2s"},children:C.title.text}),y.jsx("p",{className:"eyebrow",style:{...C.eyebrow.style,margin:0,width:`${C.eyebrow.width}px`,height:`${C.eyebrow.height}px`,display:"flex",alignItems:"center",transform:`translate(${((gs=C.eyebrow.position)==null?void 0:gs.left)||0}px, ${((Rs=C.eyebrow.position)==null?void 0:Rs.top)||0}px)`,transition:"transform 0.2s"},children:C.eyebrow.text})]})})]}),y.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px",alignItems:"center"},children:[y.jsxs("button",{onClick:r,className:"ghost",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"999px",fontSize:"16px",fontWeight:600},children:[y.jsx(Yv,{size:18})," ",Go.t3]}),Ae&&y.jsxs("div",{className:"edit-toolbar",style:{display:"flex",alignItems:"center",gap:"8px",background:"white",padding:"4px 8px",borderRadius:"8px",boxShadow:"var(--shadow-sm)",border:"1px solid #e2e8f0"},children:[y.jsx("button",{className:"ghost small",onClick:Rn,title:Go.t5,children:y.jsx(e5,{size:16})}),y.jsx("button",{className:"ghost small",onClick:Zt,title:Go.t6,children:y.jsx(rf,{size:16})}),y.jsxs("button",{className:"primary small",onClick:Ft,title:Go.t7,children:[y.jsx(H1,{size:16}),Go.t7]})]})]}),Zo(Pi.HEADER)]}),!Ae&&y.jsx("div",{style:{position:"fixed",right:"24px",bottom:"24px",zIndex:100},children:y.jsxs("button",{className:"ghost",onClick:Nt,title:Go.t4,style:{fontSize:"11px",padding:"4px 8px"},children:[y.jsx(Zv,{size:14}),Go.t4]})}),y.jsx("div",{className:"multi-content-area",style:{flex:1,overflow:"auto",position:"relative"},children:y.jsxs(t5,{isEditing:Ae,size:Fe,onSizeChange:J,minWidth:600,minHeight:400,style:{background:"#f8fafc"},children:[H[Pi.SOURCES]!==!1&&y.jsxs(Cl,{panelId:Pi.SOURCES,panelName:me[Pi.SOURCES],isEditing:Ae,position:he[Pi.SOURCES],onPositionChange:Me=>se(He=>({...He,[Pi.SOURCES]:Me})),onTitleEdit:fi,editHeaderActions:Ae?y.jsx("button",{type:"button",className:"ghost",onClick:Me=>{Me.stopPropagation(),dt(Pi.SOURCES)},style:{padding:"4px 8px",fontSize:"12px"},children:Go.t8}):null,children:[y.jsx(wA,{sources:N,onUpload:Wn,onDelete:Un,onSelect:yn,onClearAll:qr}),Zo(Pi.SOURCES)]}),H[Pi.CHAT]!==!1&&y.jsxs(Cl,{panelId:Pi.CHAT,panelName:me[Pi.CHAT],isEditing:Ae,position:he[Pi.CHAT],onPositionChange:Me=>se(He=>({...He,[Pi.CHAT]:Me})),onTitleEdit:fi,editHeaderActions:Ae?y.jsx("button",{type:"button",className:"ghost",onClick:Me=>{Me.stopPropagation(),dt(Pi.CHAT)},style:{padding:"4px 8px",fontSize:"12px"},children:Go.t8}):null,children:[y.jsx(xA,{messages:s,onSendMessage:li,thinking:f,appButtons:S,onAppButtonClick:P,onClearMessages:kn}),Zo(Pi.CHAT)]}),H[Pi.STUDIO]!==!1&&y.jsxs(Cl,{panelId:Pi.STUDIO,panelName:me[Pi.STUDIO],isEditing:Ae,position:he[Pi.STUDIO],onPositionChange:Me=>se(He=>({...He,[Pi.STUDIO]:Me})),onTitleEdit:fi,editHeaderActions:Ae?y.jsx("button",{type:"button",className:"ghost",onClick:Me=>{Me.stopPropagation(),dt(Pi.STUDIO)},style:{padding:"4px 8px",fontSize:"12px"},children:Go.t8}):null,children:[y.jsx(bA,{notes:l,onAddNote:Hs,onDeleteNote:Do}),Zo(Pi.STUDIO)]})]})}),Ae&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:`multi-hidden-sidebar ${xe?"is-open":"is-closed"}`,children:[y.jsxs("div",{className:"multi-hidden-header",children:[y.jsxs("div",{className:"multi-hidden-title",children:[Go.t9,y.jsx("span",{className:"multi-hidden-count",children:Mn.length})]}),y.jsx("button",{type:"button",className:"ghost icon-btn multi-hidden-close",onClick:()=>ke(!1),title:Go.t10,children:y.jsx(Bx,{size:18})})]}),y.jsx("div",{className:"multi-hidden-body",children:Mn.length===0?y.jsx("div",{className:"multi-hidden-empty",children:Go.t11}):Mn.map(Me=>y.jsxs("div",{className:"multi-hidden-item",children:[y.jsx("span",{className:"multi-hidden-name",children:ms(Me)}),y.jsx("button",{type:"button",className:"ghost multi-hidden-restore",onClick:He=>{He.stopPropagation(),ot(Me)},children:Go.t12})]},Me))})]}),!xe&&y.jsxs("button",{type:"button",className:"multi-hidden-toggle",onClick:()=>ke(!0),title:Go.t9,children:[y.jsx(Xv,{size:16}),y.jsx("span",{children:Go.t9})]})]}),Q&&y.jsxs("div",{style:{position:"fixed",top:"80px",left:"50%",transform:"translateX(-50%)",background:"rgba(30, 41, 59, 0.9)",color:"white",padding:"12px 24px",borderRadius:"999px",zIndex:9999,display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backdropFilter:"blur(4px)",fontSize:"14px",fontWeight:500},children:[y.jsx("div",{style:{width:16,height:16,border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),y.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"}),U]}),L&&y.jsxs(y.Fragment,{children:[y.jsx(cg,{onClose:()=>q(null)}),y.jsx(od,{button:L.button,onStyleChange:jn,onDelete:or,onClose:()=>q(null)})]}),z&&y.jsxs(y.Fragment,{children:[y.jsx(cg,{onClose:()=>fe(null)}),y.jsx(od,{button:{label:C[z].text,style:C[z].style},onStyleChange:Me=>{Z(He=>({...He,[z]:{...He[z],text:Me.label,style:{...He[z].style,...Me.style}}}))},onClose:()=>fe(null),onDelete:()=>{}})]})]})}class DA extends q1.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}render(){return this.state.hasError?y.jsx("div",{children:Go.t13}):this.props.children}}function OA(r){return y.jsx(DA,{children:y.jsx(PA,{...r})})}function FA(){const[r,e]=Qe.useState("multi"),t=()=>{e(o=>o==="sop"?"multi":"sop")};return y.jsx("div",{className:"app-shell",children:r==="sop"?y.jsx(q1.Fragment,{children:y.jsx("div",{className:"sop-wrapper",children:y.jsx(vA,{onSwitch:t})})}):y.jsx(OA,{onSwitch:t})})}gx.createRoot(document.getElementById("root")).render(y.jsx(q1.StrictMode,{children:y.jsx(FA,{})}));export{Xi as _,Rf as c,Hv as g};
